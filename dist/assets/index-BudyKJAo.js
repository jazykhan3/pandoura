function Mw(s,a){for(var n=0;n<a.length;n++){const i=a[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in s)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(s,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function Dv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cm={exports:{}},ho={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function Lw(){if(my)return ho;my=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(i,c,d){var u=null;if(d!==void 0&&(u=""+d),c.key!==void 0&&(u=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:s,type:i,key:u,ref:c!==void 0?c:null,props:d}}return ho.Fragment=a,ho.jsx=n,ho.jsxs=n,ho}var gy;function Fw(){return gy||(gy=1,cm.exports=Lw()),cm.exports}var e=Fw(),dm={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function Pw(){if(hy)return Ke;hy=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function N(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function w(O,K,ue){this.props=O,this.context=K,this.refs=L,this.updater=ue||E}w.prototype.isReactComponent={},w.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},w.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function T(){}T.prototype=w.prototype;function A(O,K,ue){this.props=O,this.context=K,this.refs=L,this.updater=ue||E}var D=A.prototype=new T;D.constructor=A,M(D,w.prototype),D.isPureReactComponent=!0;var C=Array.isArray;function S(){}var k={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function G(O,K,ue){var oe=ue.ref;return{$$typeof:s,type:O,key:K,ref:oe!==void 0?oe:null,props:ue}}function U(O,K){return G(O.type,K,O.props)}function Q(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function Z(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return K[ue]})}var ie=/\/+/g;function J(O,K){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):K.toString(36)}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(S,S):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,K,ue,oe,Ee){var we=typeof O;(we==="undefined"||we==="boolean")&&(O=null);var Oe=!1;if(O===null)Oe=!0;else switch(we){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(O.$$typeof){case s:case a:Oe=!0;break;case y:return Oe=O._init,$(Oe(O._payload),K,ue,oe,Ee)}}if(Oe)return Ee=Ee(O),Oe=oe===""?"."+J(O,0):oe,C(Ee)?(ue="",Oe!=null&&(ue=Oe.replace(ie,"$&/")+"/"),$(Ee,K,ue,"",function(At){return At})):Ee!=null&&(Q(Ee)&&(Ee=U(Ee,ue+(Ee.key==null||O&&O.key===Ee.key?"":(""+Ee.key).replace(ie,"$&/")+"/")+Oe)),K.push(Ee)),1;Oe=0;var Ne=oe===""?".":oe+":";if(C(O))for(var Ge=0;Ge<O.length;Ge++)oe=O[Ge],we=Ne+J(oe,Ge),Oe+=$(oe,K,ue,we,Ee);else if(Ge=N(O),typeof Ge=="function")for(O=Ge.call(O),Ge=0;!(oe=O.next()).done;)oe=oe.value,we=Ne+J(oe,Ge++),Oe+=$(oe,K,ue,we,Ee);else if(we==="object"){if(typeof O.then=="function")return $(te(O),K,ue,oe,Ee);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function _(O,K,ue){if(O==null)return O;var oe=[],Ee=0;return $(O,oe,"","",function(we){return K.call(ue,we,Ee++)}),oe}function z(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},se={map:_,forEach:function(O,K,ue){_(O,function(){K.apply(this,arguments)},ue)},count:function(O){var K=0;return _(O,function(){K++}),K},toArray:function(O){return _(O,function(K){return K})||[]},only:function(O){if(!Q(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ke.Activity=b,Ke.Children=se,Ke.Component=w,Ke.Fragment=n,Ke.Profiler=c,Ke.PureComponent=A,Ke.StrictMode=i,Ke.Suspense=x,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},Ke.cache=function(O){return function(){return O.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(O,K,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=M({},O.props),Ee=O.key;if(K!=null)for(we in K.key!==void 0&&(Ee=""+K.key),K)!P.call(K,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&K.ref===void 0||(oe[we]=K[we]);var we=arguments.length-2;if(we===1)oe.children=ue;else if(1<we){for(var Oe=Array(we),Ne=0;Ne<we;Ne++)Oe[Ne]=arguments[Ne+2];oe.children=Oe}return G(O.type,Ee,oe)},Ke.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:d,_context:O},O},Ke.createElement=function(O,K,ue){var oe,Ee={},we=null;if(K!=null)for(oe in K.key!==void 0&&(we=""+K.key),K)P.call(K,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ee[oe]=K[oe]);var Oe=arguments.length-2;if(Oe===1)Ee.children=ue;else if(1<Oe){for(var Ne=Array(Oe),Ge=0;Ge<Oe;Ge++)Ne[Ge]=arguments[Ge+2];Ee.children=Ne}if(O&&O.defaultProps)for(oe in Oe=O.defaultProps,Oe)Ee[oe]===void 0&&(Ee[oe]=Oe[oe]);return G(O,we,Ee)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(O){return{$$typeof:h,render:O}},Ke.isValidElement=Q,Ke.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:z}},Ke.memo=function(O,K){return{$$typeof:f,type:O,compare:K===void 0?null:K}},Ke.startTransition=function(O){var K=k.T,ue={};k.T=ue;try{var oe=O(),Ee=k.S;Ee!==null&&Ee(ue,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(S,Y)}catch(we){Y(we)}finally{K!==null&&ue.types!==null&&(K.types=ue.types),k.T=K}},Ke.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ke.use=function(O){return k.H.use(O)},Ke.useActionState=function(O,K,ue){return k.H.useActionState(O,K,ue)},Ke.useCallback=function(O,K){return k.H.useCallback(O,K)},Ke.useContext=function(O){return k.H.useContext(O)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(O,K){return k.H.useDeferredValue(O,K)},Ke.useEffect=function(O,K){return k.H.useEffect(O,K)},Ke.useEffectEvent=function(O){return k.H.useEffectEvent(O)},Ke.useId=function(){return k.H.useId()},Ke.useImperativeHandle=function(O,K,ue){return k.H.useImperativeHandle(O,K,ue)},Ke.useInsertionEffect=function(O,K){return k.H.useInsertionEffect(O,K)},Ke.useLayoutEffect=function(O,K){return k.H.useLayoutEffect(O,K)},Ke.useMemo=function(O,K){return k.H.useMemo(O,K)},Ke.useOptimistic=function(O,K){return k.H.useOptimistic(O,K)},Ke.useReducer=function(O,K,ue){return k.H.useReducer(O,K,ue)},Ke.useRef=function(O){return k.H.useRef(O)},Ke.useState=function(O){return k.H.useState(O)},Ke.useSyncExternalStore=function(O,K,ue){return k.H.useSyncExternalStore(O,K,ue)},Ke.useTransition=function(){return k.H.useTransition()},Ke.version="19.2.0",Ke}var xy;function Og(){return xy||(xy=1,dm.exports=Pw()),dm.exports}var p=Og();const nr=Dv(p),Ov=Mw({__proto__:null,default:nr},[p]);var um={exports:{}},xo={},mm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function zw(){return fy||(fy=1,(function(s){function a($,_){var z=$.length;$.push(_);e:for(;0<z;){var Y=z-1>>>1,se=$[Y];if(0<c(se,_))$[Y]=_,$[z]=se,z=Y;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var _=$[0],z=$.pop();if(z!==_){$[0]=z;e:for(var Y=0,se=$.length,O=se>>>1;Y<O;){var K=2*(Y+1)-1,ue=$[K],oe=K+1,Ee=$[oe];if(0>c(ue,z))oe<se&&0>c(Ee,ue)?($[Y]=Ee,$[oe]=z,Y=oe):($[Y]=ue,$[K]=z,Y=K);else if(oe<se&&0>c(Ee,z))$[Y]=Ee,$[oe]=z,Y=oe;else break e}}return _}function c($,_){var z=$.sortIndex-_.sortIndex;return z!==0?z:$.id-_.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();s.unstable_now=function(){return u.now()-h}}var x=[],f=[],y=1,b=null,v=3,N=!1,E=!1,M=!1,L=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function D($){for(var _=n(f);_!==null;){if(_.callback===null)i(f);else if(_.startTime<=$)i(f),_.sortIndex=_.expirationTime,a(x,_);else break;_=n(f)}}function C($){if(M=!1,D($),!E)if(n(x)!==null)E=!0,S||(S=!0,Z());else{var _=n(f);_!==null&&te(C,_.startTime-$)}}var S=!1,k=-1,P=5,G=-1;function U(){return L?!0:!(s.unstable_now()-G<P)}function Q(){if(L=!1,S){var $=s.unstable_now();G=$;var _=!0;try{e:{E=!1,M&&(M=!1,T(k),k=-1),N=!0;var z=v;try{t:{for(D($),b=n(x);b!==null&&!(b.expirationTime>$&&U());){var Y=b.callback;if(typeof Y=="function"){b.callback=null,v=b.priorityLevel;var se=Y(b.expirationTime<=$);if($=s.unstable_now(),typeof se=="function"){b.callback=se,D($),_=!0;break t}b===n(x)&&i(x),D($)}else i(x);b=n(x)}if(b!==null)_=!0;else{var O=n(f);O!==null&&te(C,O.startTime-$),_=!1}}break e}finally{b=null,v=z,N=!1}_=void 0}}finally{_?Z():S=!1}}}var Z;if(typeof A=="function")Z=function(){A(Q)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,J=ie.port2;ie.port1.onmessage=Q,Z=function(){J.postMessage(null)}}else Z=function(){w(Q,0)};function te($,_){k=w(function(){$(s.unstable_now())},_)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function($){switch(v){case 1:case 2:case 3:var _=3;break;default:_=v}var z=v;v=_;try{return $()}finally{v=z}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function($,_){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=v;v=$;try{return _()}finally{v=z}},s.unstable_scheduleCallback=function($,_,z){var Y=s.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=z+se,$={id:y++,callback:_,priorityLevel:$,startTime:z,expirationTime:se,sortIndex:-1},z>Y?($.sortIndex=z,a(f,$),n(x)===null&&$===n(f)&&(M?(T(k),k=-1):M=!0,te(C,z-Y))):($.sortIndex=se,a(x,$),E||N||(E=!0,S||(S=!0,Z()))),$},s.unstable_shouldYield=U,s.unstable_wrapCallback=function($){var _=v;return function(){var z=v;v=_;try{return $.apply(this,arguments)}finally{v=z}}}})(gm)),gm}var py;function Vw(){return py||(py=1,mm.exports=zw()),mm.exports}var hm={exports:{}},Bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function $w(){if(yy)return Bs;yy=1;var s=Og();function a(x){var f="https://react.dev/errors/"+x;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+x+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(x,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:x,containerInfo:f,implementation:y}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(x,f){if(x==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Bs.createPortal=function(x,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(a(299));return d(x,f,null,y)},Bs.flushSync=function(x){var f=u.T,y=i.p;try{if(u.T=null,i.p=2,x)return x()}finally{u.T=f,i.p=y,i.d.f()}},Bs.preconnect=function(x,f){typeof x=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(x,f))},Bs.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},Bs.preinit=function(x,f){if(typeof x=="string"&&f&&typeof f.as=="string"){var y=f.as,b=h(y,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(x,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:N}):y==="script"&&i.d.X(x,{crossOrigin:b,integrity:v,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Bs.preinitModule=function(x,f){if(typeof x=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=h(f.as,f.crossOrigin);i.d.M(x,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(x)},Bs.preload=function(x,f){if(typeof x=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,b=h(y,f.crossOrigin);i.d.L(x,y,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Bs.preloadModule=function(x,f){if(typeof x=="string")if(f){var y=h(f.as,f.crossOrigin);i.d.m(x,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(x)},Bs.requestFormReset=function(x){i.d.r(x)},Bs.unstable_batchedUpdates=function(x,f){return x(f)},Bs.useFormState=function(x,f,y){return u.H.useFormState(x,f,y)},Bs.useFormStatus=function(){return u.H.useHostTransitionStatus()},Bs.version="19.2.0",Bs}var by;function _v(){if(by)return hm.exports;by=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),hm.exports=$w(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function Uw(){if(vy)return xo;vy=1;var s=Vw(),a=Og(),n=_v();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var r=t,l=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(l=r.return),t=r.return;while(t)}return r.tag===3?l:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function h(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function x(t){if(d(t)!==t)throw Error(i(188))}function f(t){var r=t.alternate;if(!r){if(r=d(t),r===null)throw Error(i(188));return r!==t?null:t}for(var l=t,o=r;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(o=m.return,o!==null){l=o;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return x(m),t;if(g===o)return x(m),r;g=g.sibling}throw Error(i(188))}if(l.return!==o.return)l=m,o=g;else{for(var j=!1,R=m.child;R;){if(R===l){j=!0,l=m,o=g;break}if(R===o){j=!0,o=m,l=g;break}R=R.sibling}if(!j){for(R=g.child;R;){if(R===l){j=!0,l=g,o=m;break}if(R===o){j=!0,o=g,l=m;break}R=R.sibling}if(!j)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=Q&&t[Q]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Symbol.for("react.client.reference");function J(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ie?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case w:return"Profiler";case L:return"StrictMode";case C:return"Suspense";case S:return"SuspenseList";case G:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case A:return t.displayName||"Context";case T:return(t._context.displayName||"Context")+".Consumer";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:J(t.type)||"Memo";case P:r=t._payload,t=t._init;try{return J(t(r))}catch{}}return null}var te=Array.isArray,$=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},Y=[],se=-1;function O(t){return{current:t}}function K(t){0>se||(t.current=Y[se],Y[se]=null,se--)}function ue(t,r){se++,Y[se]=t.current,t.current=r}var oe=O(null),Ee=O(null),we=O(null),Oe=O(null);function Ne(t,r){switch(ue(we,r),ue(Ee,t),ue(oe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Lp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Lp(r),t=Fp(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(oe),ue(oe,t)}function Ge(){K(oe),K(Ee),K(we)}function At(t){t.memoizedState!==null&&ue(Oe,t);var r=oe.current,l=Fp(r,t.type);r!==l&&(ue(Ee,t),ue(oe,l))}function Pt(t){Ee.current===t&&(K(oe),K(Ee)),Oe.current===t&&(K(Oe),co._currentValue=z)}var Qt,Vt;function ye(t){if(Qt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Qt=r&&r[1]||"",Vt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qt+t+Vt}var H=!1;function Ae(t,r){if(!t||H)return"";H=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(r){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(le){var ne=le}Reflect.construct(t,[],xe)}else{try{xe.call()}catch(le){ne=le}t.call(xe.prototype)}}else{try{throw Error()}catch(le){ne=le}(xe=t())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),j=g[0],R=g[1];if(j&&R){var q=j.split(`
`),re=R.split(`
`);for(m=o=0;o<q.length&&!q[o].includes("DetermineComponentFrameRoot");)o++;for(;m<re.length&&!re[m].includes("DetermineComponentFrameRoot");)m++;if(o===q.length||m===re.length)for(o=q.length-1,m=re.length-1;1<=o&&0<=m&&q[o]!==re[m];)m--;for(;1<=o&&0<=m;o--,m--)if(q[o]!==re[m]){if(o!==1||m!==1)do if(o--,m--,0>m||q[o]!==re[m]){var de=`
`+q[o].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=o&&0<=m);break}}}finally{H=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ye(l):""}function Ve(t,r){switch(t.tag){case 26:case 27:case 5:return ye(t.type);case 16:return ye("Lazy");case 13:return t.child!==r&&r!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ae(t.type,!1);case 11:return Ae(t.type.render,!1);case 1:return Ae(t.type,!0);case 31:return ye("Activity");default:return""}}function Ze(t){try{var r="",l=null;do r+=Ve(t,l),l=t,t=t.return;while(t);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var $t=Object.prototype.hasOwnProperty,Ut=s.unstable_scheduleCallback,Nt=s.unstable_cancelCallback,zs=s.unstable_shouldYield,Js=s.unstable_requestPaint,Le=s.unstable_now,Vs=s.unstable_getCurrentPriorityLevel,ns=s.unstable_ImmediatePriority,ms=s.unstable_UserBlockingPriority,ws=s.unstable_NormalPriority,Hs=s.unstable_LowPriority,Wt=s.unstable_IdlePriority,ha=s.log,xa=s.unstable_setDisableYieldValue,$s=null,Tt=null;function js(t){if(typeof ha=="function"&&xa(t),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode($s,t)}catch{}}var kt=Math.clz32?Math.clz32:fa,ea=Math.log,is=Math.LN2;function fa(t){return t>>>=0,t===0?32:31-(ea(t)/is|0)|0}var rt=256,ta=262144,He=4194304;function Jt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ls(t,r,l){var o=t.pendingLanes;if(o===0)return 0;var m=0,g=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var R=o&134217727;return R!==0?(o=R&~g,o!==0?m=Jt(o):(j&=R,j!==0?m=Jt(j):l||(l=R&~t,l!==0&&(m=Jt(l))))):(R=o&~g,R!==0?m=Jt(R):j!==0?m=Jt(j):l||(l=o&~t,l!==0&&(m=Jt(l)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,l=r&-r,g>=l||g===32&&(l&4194048)!==0)?r:m}function Gs(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ka(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function es(){var t=He;return He<<=1,(He&62914560)===0&&(He=4194304),t}function I(t){for(var r=[],l=0;31>l;l++)r.push(t);return r}function me(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ke(t,r,l,o,m,g){var j=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var R=t.entanglements,q=t.expirationTimes,re=t.hiddenUpdates;for(l=j&~l;0<l;){var de=31-kt(l),xe=1<<de;R[de]=0,q[de]=-1;var ne=re[de];if(ne!==null)for(re[de]=null,de=0;de<ne.length;de++){var le=ne[de];le!==null&&(le.lane&=-536870913)}l&=~xe}o!==0&&tt(t,o,0),g!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=g&~(j&~r))}function tt(t,r,l){t.pendingLanes|=r,t.suspendedLanes&=~r;var o=31-kt(r);t.entangledLanes|=r,t.entanglements[o]=t.entanglements[o]|1073741824|l&261930}function Se(t,r){var l=t.entangledLanes|=r;for(t=t.entanglements;l;){var o=31-kt(l),m=1<<o;m&r|t[o]&r&&(t[o]|=r),l&=~m}}function mt(t,r){var l=r&-r;return l=(l&42)!==0?1:Qe(l),(l&(t.suspendedLanes|r))!==0?0:l}function Qe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function os(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ys(){var t=_.p;return t!==0?t:(t=window.event,t===void 0?32:ny(t.type))}function Ts(t,r){var l=_.p;try{return _.p=t,r()}finally{_.p=l}}var Xs=Math.random().toString(36).slice(2),zt="__reactFiber$"+Xs,gs="__reactProps$"+Xs,Es="__reactContainer$"+Xs,Ma="__reactEvents$"+Xs,Bn="__reactListeners$"+Xs,en="__reactHandles$"+Xs,cr="__reactResources$"+Xs,pa="__reactMarker$"+Xs;function Za(t){delete t[zt],delete t[gs],delete t[Ma],delete t[Bn],delete t[en]}function sa(t){var r=t[zt];if(r)return r;for(var l=t.parentNode;l;){if(r=l[Es]||l[zt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(t=Ip(t);t!==null;){if(l=t[zt])return l;t=Ip(t)}return r}t=l,l=t.parentNode}return null}function ya(t){if(t=t[zt]||t[Es]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function La(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function ba(t){var r=t[cr];return r||(r=t[cr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function st(t){t[pa]=!0}var aa=new Set,ra={};function va(t,r){B(t,r),B(t+"Capture",r)}function B(t,r){for(ra[t]=r,t=0;t<r.length;t++)aa.add(r[t])}var De=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),et={},F={};function ce(t){return $t.call(F,t)?!0:$t.call(et,t)?!1:De.test(t)?F[t]=!0:(et[t]=!0,!1)}function he(t,r,l){if(ce(r))if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var o=r.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+l)}}function fe(t,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+l)}}function Te(t,r,l,o){if(o===null)t.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(r,l,""+o)}}function ve(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nt(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(t,r,l){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return m.call(this)},set:function(j){l=""+j,g.call(this,j)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(j){l=""+j},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Be(t){if(!t._valueTracker){var r=nt(t)?"checked":"value";t._valueTracker=gt(t,r,""+t[r])}}function at(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var l=r.getValue(),o="";return t&&(o=nt(t)?t.checked?"true":"false":t.value),t=o,t!==l?(r.setValue(t),!0):!1}function Us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ss=/[\n"\\]/g;function Ot(t){return t.replace(Ss,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ns(t,r,l,o,m,g,j,R){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),r!=null?j==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ve(r)):t.value!==""+ve(r)&&(t.value=""+ve(r)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),r!=null?Xe(t,j,ve(r)):l!=null?Xe(t,j,ve(l)):o!=null&&t.removeAttribute("value"),m==null&&g!=null&&(t.defaultChecked=!!g),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+ve(R):t.removeAttribute("name")}function Ks(t,r,l,o,m,g,j,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),r!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||r!=null)){Be(t);return}l=l!=null?""+ve(l):"",r=r!=null?""+ve(r):l,R||r===t.value||(t.value=r),t.defaultValue=r}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=R?t.checked:!!o,t.defaultChecked=!!o,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),Be(t)}function Xe(t,r,l){r==="number"&&Us(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Bt(t,r,l,o){if(t=t.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<t.length;l++)m=r.hasOwnProperty("$"+t[l].value),t[l].selected!==m&&(t[l].selected=m),m&&o&&(t[l].defaultSelected=!0)}else{for(l=""+ve(l),r=null,m=0;m<t.length;m++){if(t[m].value===l){t[m].selected=!0,o&&(t[m].defaultSelected=!0);return}r!==null||t[m].disabled||(r=t[m])}r!==null&&(r.selected=!0)}}function In(t,r,l){if(r!=null&&(r=""+ve(r),r!==t.value&&(t.value=r),l==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=l!=null?""+ve(l):""}function hs(t,r,l,o){if(r==null){if(o!=null){if(l!=null)throw Error(i(92));if(te(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),r=l}l=ve(r),t.defaultValue=l,o=t.textContent,o===l&&o!==""&&o!==null&&(t.value=o),Be(t)}function _t(t,r){if(r){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=r;return}}t.textContent=r}var tn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qn(t,r,l){var o=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":o?t.setProperty(r,l):typeof l!="number"||l===0||tn.has(r)?r==="float"?t.cssFloat=l:t[r]=(""+l).trim():t[r]=l+"px"}function ja(t,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||r!=null&&r.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var m in r)o=r[m],r.hasOwnProperty(m)&&l[m]!==o&&qn(t,m,o)}else for(var g in r)r.hasOwnProperty(g)&&qn(t,g,r[g])}function sn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function an(t){return mu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Qa(){}var Cl=null;function Al(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cr=null,rn=null;function Tl(t){var r=ya(t);if(r&&(t=r.stateNode)){var l=t[gs]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ns(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ot(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var o=l[r];if(o!==t&&o.form===t.form){var m=o[gs]||null;if(!m)throw Error(i(90));Ns(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)o=l[r],o.form===t.form&&at(o)}break e;case"textarea":In(t,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Bt(t,!!l.multiple,r,!1)}}}var Si=!1;function lc(t,r,l){if(Si)return t(r,l);Si=!0;try{var o=t(r);return o}finally{if(Si=!1,(Cr!==null||rn!==null)&&(qc(),Cr&&(r=Cr,t=rn,rn=Cr=null,Tl(r),t)))for(r=0;r<t.length;r++)Tl(t[r])}}function Hn(t,r){var l=t.stateNode;if(l===null)return null;var o=l[gs]||null;if(o===null)return null;l=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var V=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ee=!1;if(V)try{var pe={};Object.defineProperty(pe,"passive",{get:function(){ee=!0}}),window.addEventListener("test",pe,pe),window.removeEventListener("test",pe,pe)}catch{ee=!1}var Ce=null,Me=null,Ue=null;function Mt(){if(Ue)return Ue;var t,r=Me,l=r.length,o,m="value"in Ce?Ce.value:Ce.textContent,g=m.length;for(t=0;t<l&&r[t]===m[t];t++);var j=l-t;for(o=1;o<=j&&r[l-o]===m[g-o];o++);return Ue=m.slice(t,1<o?1-o:void 0)}function vt(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function Yt(){return!1}function Lt(t){function r(l,o,m,g,j){this._reactName=l,this._targetInst=m,this.type=o,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(l=t[R],this[R]=l?l(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ts:Yt,this.isPropagationStopped=Yt,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),r}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=Lt(Na),Gn=b({},Na,{view:0,detail:0}),Fh=Lt(Gn),Ci,Yn,ur,Xn=b({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ur&&(ur&&t.type==="mousemove"?(Ci=t.screenX-ur.screenX,Yn=t.screenY-ur.screenY):Yn=Ci=0,ur=t),Ci)},movementY:function(t){return"movementY"in t?t.movementY:Yn}}),nn=Lt(Xn),El=b({},Xn,{dataTransfer:0}),gu=Lt(El),Ph=b({},Gn,{relatedTarget:0}),Rs=Lt(Ph),Kn=b({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),Wa=Lt(Kn),oc=b({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vk=Lt(oc),$k=b({},Na,{data:0}),zh=Lt($k),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qk(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ik[t])?!!r[t]:!1}function hu(){return qk}var Hk=b({},Gn,{key:function(t){if(t.key){var r=Uk[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=vt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(t){return t.type==="keypress"?vt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gk=Lt(Hk),Yk=b({},Xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=Lt(Yk),Xk=b({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),Kk=Lt(Xk),Zk=b({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=Lt(Zk),Wk=b({},Xn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jk=Lt(Wk),e1=b({},Na,{newState:0,oldState:0}),t1=Lt(e1),s1=[9,13,27,32],xu=V&&"CompositionEvent"in window,Rl=null;V&&"documentMode"in document&&(Rl=document.documentMode);var a1=V&&"TextEvent"in window&&!Rl,$h=V&&(!xu||Rl&&8<Rl&&11>=Rl),Uh=" ",Bh=!1;function Ih(t,r){switch(t){case"keyup":return s1.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function r1(t,r){switch(t){case"compositionend":return qh(r);case"keypress":return r.which!==32?null:(Bh=!0,Uh);case"textInput":return t=r.data,t===Uh&&Bh?null:t;default:return null}}function n1(t,r){if(Ai)return t==="compositionend"||!xu&&Ih(t,r)?(t=Mt(),Ue=Me=Ce=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return $h&&r.locale!=="ko"?null:r.data;default:return null}}var i1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!i1[t.type]:r==="textarea"}function Gh(t,r,l,o){Cr?rn?rn.push(o):rn=[o]:Cr=o,r=Qc(r,"onChange"),0<r.length&&(l=new Ar("onChange","change",null,l,o),t.push({event:l,listeners:r}))}var Dl=null,Ol=null;function l1(t){Ep(t,0)}function cc(t){var r=La(t);if(at(r))return t}function Yh(t,r){if(t==="change")return r}var Xh=!1;if(V){var fu;if(V){var pu="oninput"in document;if(!pu){var Kh=document.createElement("div");Kh.setAttribute("oninput","return;"),pu=typeof Kh.oninput=="function"}fu=pu}else fu=!1;Xh=fu&&(!document.documentMode||9<document.documentMode)}function Zh(){Dl&&(Dl.detachEvent("onpropertychange",Qh),Ol=Dl=null)}function Qh(t){if(t.propertyName==="value"&&cc(Ol)){var r=[];Gh(r,Ol,t,Al(t)),lc(l1,r)}}function o1(t,r,l){t==="focusin"?(Zh(),Dl=r,Ol=l,Dl.attachEvent("onpropertychange",Qh)):t==="focusout"&&Zh()}function c1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Ol)}function d1(t,r){if(t==="click")return cc(r)}function u1(t,r){if(t==="input"||t==="change")return cc(r)}function m1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ka=typeof Object.is=="function"?Object.is:m1;function _l(t,r){if(ka(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var l=Object.keys(t),o=Object.keys(r);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var m=l[o];if(!$t.call(r,m)||!ka(t[m],r[m]))return!1}return!0}function Wh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jh(t,r){var l=Wh(t);t=0;for(var o;l;){if(l.nodeType===3){if(o=t+l.textContent.length,t<=r&&o>=r)return{node:l,offset:r-t};t=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Wh(l)}}function ex(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ex(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function tx(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Us(t.document);r instanceof t.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)t=r.contentWindow;else break;r=Us(t.document)}return r}function yu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var g1=V&&"documentMode"in document&&11>=document.documentMode,Ti=null,bu=null,Ml=null,vu=!1;function sx(t,r,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vu||Ti==null||Ti!==Us(o)||(o=Ti,"selectionStart"in o&&yu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ml&&_l(Ml,o)||(Ml=o,o=Qc(bu,"onSelect"),0<o.length&&(r=new Ar("onSelect","select",null,r,l),t.push({event:r,listeners:o}),r.target=Ti)))}function Zn(t,r){var l={};return l[t.toLowerCase()]=r.toLowerCase(),l["Webkit"+t]="webkit"+r,l["Moz"+t]="moz"+r,l}var Ei={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionrun:Zn("Transition","TransitionRun"),transitionstart:Zn("Transition","TransitionStart"),transitioncancel:Zn("Transition","TransitionCancel"),transitionend:Zn("Transition","TransitionEnd")},ju={},ax={};V&&(ax=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function Qn(t){if(ju[t])return ju[t];if(!Ei[t])return t;var r=Ei[t],l;for(l in r)if(r.hasOwnProperty(l)&&l in ax)return ju[t]=r[l];return t}var rx=Qn("animationend"),nx=Qn("animationiteration"),ix=Qn("animationstart"),h1=Qn("transitionrun"),x1=Qn("transitionstart"),f1=Qn("transitioncancel"),lx=Qn("transitionend"),ox=new Map,Nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nu.push("scrollEnd");function Ja(t,r){ox.set(t,r),va(r,[t])}var dc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fa=[],Ri=0,ku=0;function uc(){for(var t=Ri,r=ku=Ri=0;r<t;){var l=Fa[r];Fa[r++]=null;var o=Fa[r];Fa[r++]=null;var m=Fa[r];Fa[r++]=null;var g=Fa[r];if(Fa[r++]=null,o!==null&&m!==null){var j=o.pending;j===null?m.next=m:(m.next=j.next,j.next=m),o.pending=m}g!==0&&cx(l,m,g)}}function mc(t,r,l,o){Fa[Ri++]=t,Fa[Ri++]=r,Fa[Ri++]=l,Fa[Ri++]=o,ku|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wu(t,r,l,o){return mc(t,r,l,o),gc(t)}function Wn(t,r){return mc(t,null,null,r),gc(t)}function cx(t,r,l){t.lanes|=l;var o=t.alternate;o!==null&&(o.lanes|=l);for(var m=!1,g=t.return;g!==null;)g.childLanes|=l,o=g.alternate,o!==null&&(o.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(m=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,m&&r!==null&&(m=31-kt(l),t=g.hiddenUpdates,o=t[m],o===null?t[m]=[r]:o.push(r),r.lane=l|536870912),g):null}function gc(t){if(50<so)throw so=0,_0=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Di={};function p1(t,r,l,o){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(t,r,l,o){return new p1(t,r,l,o)}function Su(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tr(t,r){var l=t.alternate;return l===null?(l=wa(t.tag,r,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=r,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,r=t.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function dx(t,r){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,r=l.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function hc(t,r,l,o,m,g){var j=0;if(o=t,typeof t=="function")Su(t)&&(j=1);else if(typeof t=="string")j=Nw(t,l,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case G:return t=wa(31,l,r,m),t.elementType=G,t.lanes=g,t;case M:return Jn(l.children,m,g,r);case L:j=8,m|=24;break;case w:return t=wa(12,l,r,m|2),t.elementType=w,t.lanes=g,t;case C:return t=wa(13,l,r,m),t.elementType=C,t.lanes=g,t;case S:return t=wa(19,l,r,m),t.elementType=S,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A:j=10;break e;case T:j=9;break e;case D:j=11;break e;case k:j=14;break e;case P:j=16,o=null;break e}j=29,l=Error(i(130,t===null?"null":typeof t,"")),o=null}return r=wa(j,l,r,m),r.elementType=t,r.type=o,r.lanes=g,r}function Jn(t,r,l,o){return t=wa(7,t,o,r),t.lanes=l,t}function Cu(t,r,l){return t=wa(6,t,null,r),t.lanes=l,t}function ux(t){var r=wa(18,null,null,0);return r.stateNode=t,r}function Au(t,r,l){return r=wa(4,t.children!==null?t.children:[],t.key,r),r.lanes=l,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var mx=new WeakMap;function Pa(t,r){if(typeof t=="object"&&t!==null){var l=mx.get(t);return l!==void 0?l:(r={value:t,source:r,stack:Ze(r)},mx.set(t,r),r)}return{value:t,source:r,stack:Ze(r)}}var Oi=[],_i=0,xc=null,Ll=0,za=[],Va=0,ln=null,mr=1,gr="";function Er(t,r){Oi[_i++]=Ll,Oi[_i++]=xc,xc=t,Ll=r}function gx(t,r,l){za[Va++]=mr,za[Va++]=gr,za[Va++]=ln,ln=t;var o=mr;t=gr;var m=32-kt(o)-1;o&=~(1<<m),l+=1;var g=32-kt(r)+m;if(30<g){var j=m-m%5;g=(o&(1<<j)-1).toString(32),o>>=j,m-=j,mr=1<<32-kt(r)+m|l<<m|o,gr=g+t}else mr=1<<g|l<<m|o,gr=t}function Tu(t){t.return!==null&&(Er(t,1),gx(t,1,0))}function Eu(t){for(;t===xc;)xc=Oi[--_i],Oi[_i]=null,Ll=Oi[--_i],Oi[_i]=null;for(;t===ln;)ln=za[--Va],za[Va]=null,gr=za[--Va],za[Va]=null,mr=za[--Va],za[Va]=null}function hx(t,r){za[Va++]=mr,za[Va++]=gr,za[Va++]=ln,mr=r.id,gr=r.overflow,ln=t}var Ds=null,It=null,dt=!1,on=null,$a=!1,Ru=Error(i(519));function cn(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fl(Pa(r,t)),Ru}function xx(t){var r=t.stateNode,l=t.type,o=t.memoizedProps;switch(r[zt]=t,r[gs]=o,l){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(l=0;l<ro.length;l++)lt(ro[l],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":lt("invalid",r),Ks(r,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":lt("invalid",r);break;case"textarea":lt("invalid",r),hs(r,o.value,o.defaultValue,o.children)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||o.suppressHydrationWarning===!0||_p(r.textContent,l)?(o.popover!=null&&(lt("beforetoggle",r),lt("toggle",r)),o.onScroll!=null&&lt("scroll",r),o.onScrollEnd!=null&&lt("scrollend",r),o.onClick!=null&&(r.onclick=Qa),r=!0):r=!1,r||cn(t,!0)}function fx(t){for(Ds=t.return;Ds;)switch(Ds.tag){case 5:case 31:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:Ds=Ds.return}}function Mi(t){if(t!==Ds)return!1;if(!dt)return fx(t),dt=!0,!1;var r=t.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||X0(t.type,t.memoizedProps)),l=!l),l&&It&&cn(t),fx(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));It=Bp(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));It=Bp(t)}else r===27?(r=It,kn(t.type)?(t=J0,J0=null,It=t):It=r):It=Ds?Ba(t.stateNode.nextSibling):null;return!0}function ei(){It=Ds=null,dt=!1}function Du(){var t=on;return t!==null&&(oa===null?oa=t:oa.push.apply(oa,t),on=null),t}function Fl(t){on===null?on=[t]:on.push(t)}var Ou=O(null),ti=null,Rr=null;function dn(t,r,l){ue(Ou,r._currentValue),r._currentValue=l}function Dr(t){t._currentValue=Ou.current,K(Ou)}function _u(t,r,l){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===l)break;t=t.return}}function Mu(t,r,l,o){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var g=m.dependencies;if(g!==null){var j=m.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=m;for(var q=0;q<r.length;q++)if(R.context===r[q]){g.lanes|=l,R=g.alternate,R!==null&&(R.lanes|=l),_u(g.return,l,t),o||(j=null);break e}g=R.next}}else if(m.tag===18){if(j=m.return,j===null)throw Error(i(341));j.lanes|=l,g=j.alternate,g!==null&&(g.lanes|=l),_u(j,l,t),j=null}else j=m.child;if(j!==null)j.return=m;else for(j=m;j!==null;){if(j===t){j=null;break}if(m=j.sibling,m!==null){m.return=j.return,j=m;break}j=j.return}m=j}}function Li(t,r,l,o){t=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var j=m.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var R=m.type;ka(m.pendingProps.value,j.value)||(t!==null?t.push(R):t=[R])}}else if(m===Oe.current){if(j=m.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(co):t=[co])}m=m.return}t!==null&&Mu(r,t,l,o),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!ka(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function si(t){ti=t,Rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Os(t){return px(ti,t)}function pc(t,r){return ti===null&&si(t),px(t,r)}function px(t,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Rr===null){if(t===null)throw Error(i(308));Rr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Rr=Rr.next=r;return l}var y1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(l,o){t.push(o)}};this.abort=function(){r.aborted=!0,t.forEach(function(l){return l()})}},b1=s.unstable_scheduleCallback,v1=s.unstable_NormalPriority,xs={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lu(){return{controller:new y1,data:new Map,refCount:0}}function Pl(t){t.refCount--,t.refCount===0&&b1(v1,function(){t.controller.abort()})}var zl=null,Fu=0,Fi=0,Pi=null;function j1(t,r){if(zl===null){var l=zl=[];Fu=0,Fi=V0(),Pi={status:"pending",value:void 0,then:function(o){l.push(o)}}}return Fu++,r.then(yx,yx),r}function yx(){if(--Fu===0&&zl!==null){Pi!==null&&(Pi.status="fulfilled");var t=zl;zl=null,Fi=0,Pi=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function N1(t,r){var l=[],o={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return t.then(function(){o.status="fulfilled",o.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(o.status="rejected",o.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),o}var bx=$.S;$.S=function(t,r){ap=Le(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&j1(t,r),bx!==null&&bx(t,r)};var ai=O(null);function Pu(){var t=ai.current;return t!==null?t:Ft.pooledCache}function yc(t,r){r===null?ue(ai,ai.current):ue(ai,r.pool)}function vx(){var t=Pu();return t===null?null:{parent:xs._currentValue,pool:t}}var zi=Error(i(460)),zu=Error(i(474)),bc=Error(i(542)),vc={then:function(){}};function jx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Nx(t,r,l){switch(l=t[l],l===void 0?t.push(r):l!==r&&(r.then(Qa,Qa),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wx(t),t;default:if(typeof r.status=="string")r.then(Qa,Qa);else{if(t=Ft,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(o){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=o}},function(o){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=o}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wx(t),t}throw ni=r,zi}}function ri(t){try{var r=t._init;return r(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ni=l,zi):l}}var ni=null;function kx(){if(ni===null)throw Error(i(459));var t=ni;return ni=null,t}function wx(t){if(t===zi||t===bc)throw Error(i(483))}var Vi=null,Vl=0;function jc(t){var r=Vl;return Vl+=1,Vi===null&&(Vi=[]),Nx(Vi,t,r)}function $l(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Nc(t,r){throw r.$$typeof===v?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Sx(t){function r(W,X){if(t){var ae=W.deletions;ae===null?(W.deletions=[X],W.flags|=16):ae.push(X)}}function l(W,X){if(!t)return null;for(;X!==null;)r(W,X),X=X.sibling;return null}function o(W){for(var X=new Map;W!==null;)W.key!==null?X.set(W.key,W):X.set(W.index,W),W=W.sibling;return X}function m(W,X){return W=Tr(W,X),W.index=0,W.sibling=null,W}function g(W,X,ae){return W.index=ae,t?(ae=W.alternate,ae!==null?(ae=ae.index,ae<X?(W.flags|=67108866,X):ae):(W.flags|=67108866,X)):(W.flags|=1048576,X)}function j(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function R(W,X,ae,ge){return X===null||X.tag!==6?(X=Cu(ae,W.mode,ge),X.return=W,X):(X=m(X,ae),X.return=W,X)}function q(W,X,ae,ge){var Pe=ae.type;return Pe===M?de(W,X,ae.props.children,ge,ae.key):X!==null&&(X.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===P&&ri(Pe)===X.type)?(X=m(X,ae.props),$l(X,ae),X.return=W,X):(X=hc(ae.type,ae.key,ae.props,null,W.mode,ge),$l(X,ae),X.return=W,X)}function re(W,X,ae,ge){return X===null||X.tag!==4||X.stateNode.containerInfo!==ae.containerInfo||X.stateNode.implementation!==ae.implementation?(X=Au(ae,W.mode,ge),X.return=W,X):(X=m(X,ae.children||[]),X.return=W,X)}function de(W,X,ae,ge,Pe){return X===null||X.tag!==7?(X=Jn(ae,W.mode,ge,Pe),X.return=W,X):(X=m(X,ae),X.return=W,X)}function xe(W,X,ae){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Cu(""+X,W.mode,ae),X.return=W,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return ae=hc(X.type,X.key,X.props,null,W.mode,ae),$l(ae,X),ae.return=W,ae;case E:return X=Au(X,W.mode,ae),X.return=W,X;case P:return X=ri(X),xe(W,X,ae)}if(te(X)||Z(X))return X=Jn(X,W.mode,ae,null),X.return=W,X;if(typeof X.then=="function")return xe(W,jc(X),ae);if(X.$$typeof===A)return xe(W,pc(W,X),ae);Nc(W,X)}return null}function ne(W,X,ae,ge){var Pe=X!==null?X.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Pe!==null?null:R(W,X,""+ae,ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return ae.key===Pe?q(W,X,ae,ge):null;case E:return ae.key===Pe?re(W,X,ae,ge):null;case P:return ae=ri(ae),ne(W,X,ae,ge)}if(te(ae)||Z(ae))return Pe!==null?null:de(W,X,ae,ge,null);if(typeof ae.then=="function")return ne(W,X,jc(ae),ge);if(ae.$$typeof===A)return ne(W,X,pc(W,ae),ge);Nc(W,ae)}return null}function le(W,X,ae,ge,Pe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return W=W.get(ae)||null,R(X,W,""+ge,Pe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:return W=W.get(ge.key===null?ae:ge.key)||null,q(X,W,ge,Pe);case E:return W=W.get(ge.key===null?ae:ge.key)||null,re(X,W,ge,Pe);case P:return ge=ri(ge),le(W,X,ae,ge,Pe)}if(te(ge)||Z(ge))return W=W.get(ae)||null,de(X,W,ge,Pe,null);if(typeof ge.then=="function")return le(W,X,ae,jc(ge),Pe);if(ge.$$typeof===A)return le(W,X,ae,pc(X,ge),Pe);Nc(X,ge)}return null}function Re(W,X,ae,ge){for(var Pe=null,ht=null,_e=X,Je=X=0,ct=null;_e!==null&&Je<ae.length;Je++){_e.index>Je?(ct=_e,_e=null):ct=_e.sibling;var xt=ne(W,_e,ae[Je],ge);if(xt===null){_e===null&&(_e=ct);break}t&&_e&&xt.alternate===null&&r(W,_e),X=g(xt,X,Je),ht===null?Pe=xt:ht.sibling=xt,ht=xt,_e=ct}if(Je===ae.length)return l(W,_e),dt&&Er(W,Je),Pe;if(_e===null){for(;Je<ae.length;Je++)_e=xe(W,ae[Je],ge),_e!==null&&(X=g(_e,X,Je),ht===null?Pe=_e:ht.sibling=_e,ht=_e);return dt&&Er(W,Je),Pe}for(_e=o(_e);Je<ae.length;Je++)ct=le(_e,W,Je,ae[Je],ge),ct!==null&&(t&&ct.alternate!==null&&_e.delete(ct.key===null?Je:ct.key),X=g(ct,X,Je),ht===null?Pe=ct:ht.sibling=ct,ht=ct);return t&&_e.forEach(function(Tn){return r(W,Tn)}),dt&&Er(W,Je),Pe}function $e(W,X,ae,ge){if(ae==null)throw Error(i(151));for(var Pe=null,ht=null,_e=X,Je=X=0,ct=null,xt=ae.next();_e!==null&&!xt.done;Je++,xt=ae.next()){_e.index>Je?(ct=_e,_e=null):ct=_e.sibling;var Tn=ne(W,_e,xt.value,ge);if(Tn===null){_e===null&&(_e=ct);break}t&&_e&&Tn.alternate===null&&r(W,_e),X=g(Tn,X,Je),ht===null?Pe=Tn:ht.sibling=Tn,ht=Tn,_e=ct}if(xt.done)return l(W,_e),dt&&Er(W,Je),Pe;if(_e===null){for(;!xt.done;Je++,xt=ae.next())xt=xe(W,xt.value,ge),xt!==null&&(X=g(xt,X,Je),ht===null?Pe=xt:ht.sibling=xt,ht=xt);return dt&&Er(W,Je),Pe}for(_e=o(_e);!xt.done;Je++,xt=ae.next())xt=le(_e,W,Je,xt.value,ge),xt!==null&&(t&&xt.alternate!==null&&_e.delete(xt.key===null?Je:xt.key),X=g(xt,X,Je),ht===null?Pe=xt:ht.sibling=xt,ht=xt);return t&&_e.forEach(function(_w){return r(W,_w)}),dt&&Er(W,Je),Pe}function Dt(W,X,ae,ge){if(typeof ae=="object"&&ae!==null&&ae.type===M&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:e:{for(var Pe=ae.key;X!==null;){if(X.key===Pe){if(Pe=ae.type,Pe===M){if(X.tag===7){l(W,X.sibling),ge=m(X,ae.props.children),ge.return=W,W=ge;break e}}else if(X.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===P&&ri(Pe)===X.type){l(W,X.sibling),ge=m(X,ae.props),$l(ge,ae),ge.return=W,W=ge;break e}l(W,X);break}else r(W,X);X=X.sibling}ae.type===M?(ge=Jn(ae.props.children,W.mode,ge,ae.key),ge.return=W,W=ge):(ge=hc(ae.type,ae.key,ae.props,null,W.mode,ge),$l(ge,ae),ge.return=W,W=ge)}return j(W);case E:e:{for(Pe=ae.key;X!==null;){if(X.key===Pe)if(X.tag===4&&X.stateNode.containerInfo===ae.containerInfo&&X.stateNode.implementation===ae.implementation){l(W,X.sibling),ge=m(X,ae.children||[]),ge.return=W,W=ge;break e}else{l(W,X);break}else r(W,X);X=X.sibling}ge=Au(ae,W.mode,ge),ge.return=W,W=ge}return j(W);case P:return ae=ri(ae),Dt(W,X,ae,ge)}if(te(ae))return Re(W,X,ae,ge);if(Z(ae)){if(Pe=Z(ae),typeof Pe!="function")throw Error(i(150));return ae=Pe.call(ae),$e(W,X,ae,ge)}if(typeof ae.then=="function")return Dt(W,X,jc(ae),ge);if(ae.$$typeof===A)return Dt(W,X,pc(W,ae),ge);Nc(W,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,X!==null&&X.tag===6?(l(W,X.sibling),ge=m(X,ae),ge.return=W,W=ge):(l(W,X),ge=Cu(ae,W.mode,ge),ge.return=W,W=ge),j(W)):l(W,X)}return function(W,X,ae,ge){try{Vl=0;var Pe=Dt(W,X,ae,ge);return Vi=null,Pe}catch(_e){if(_e===zi||_e===bc)throw _e;var ht=wa(29,_e,null,W.mode);return ht.lanes=ge,ht.return=W,ht}finally{}}}var ii=Sx(!0),Cx=Sx(!1),un=!1;function Vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $u(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function gn(t,r,l){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ft&2)!==0){var m=o.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),o.pending=r,r=gc(t),cx(t,null,l),r}return mc(t,o,r,l),gc(t)}function Ul(t,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var o=r.lanes;o&=t.pendingLanes,l|=o,r.lanes=l,Se(t,l)}}function Uu(t,r){var l=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var j={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=j:g=g.next=j,l=l.next}while(l!==null);g===null?m=g=r:g=g.next=r}else m=g=r;l={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=r:t.next=r,l.lastBaseUpdate=r}var Bu=!1;function Bl(){if(Bu){var t=Pi;if(t!==null)throw t}}function Il(t,r,l,o){Bu=!1;var m=t.updateQueue;un=!1;var g=m.firstBaseUpdate,j=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var q=R,re=q.next;q.next=null,j===null?g=re:j.next=re,j=q;var de=t.alternate;de!==null&&(de=de.updateQueue,R=de.lastBaseUpdate,R!==j&&(R===null?de.firstBaseUpdate=re:R.next=re,de.lastBaseUpdate=q))}if(g!==null){var xe=m.baseState;j=0,de=re=q=null,R=g;do{var ne=R.lane&-536870913,le=ne!==R.lane;if(le?(ot&ne)===ne:(o&ne)===ne){ne!==0&&ne===Fi&&(Bu=!0),de!==null&&(de=de.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Re=t,$e=R;ne=r;var Dt=l;switch($e.tag){case 1:if(Re=$e.payload,typeof Re=="function"){xe=Re.call(Dt,xe,ne);break e}xe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=$e.payload,ne=typeof Re=="function"?Re.call(Dt,xe,ne):Re,ne==null)break e;xe=b({},xe,ne);break e;case 2:un=!0}}ne=R.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=m.callbacks,le===null?m.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},de===null?(re=de=le,q=xe):de=de.next=le,j|=ne;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;le=R,R=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);de===null&&(q=xe),m.baseState=q,m.firstBaseUpdate=re,m.lastBaseUpdate=de,g===null&&(m.shared.lanes=0),yn|=j,t.lanes=j,t.memoizedState=xe}}function Ax(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Tx(t,r){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Ax(l[t],r)}var $i=O(null),kc=O(0);function Ex(t,r){t=$r,ue(kc,t),ue($i,r),$r=t|r.baseLanes}function Iu(){ue(kc,$r),ue($i,$i.current)}function qu(){$r=kc.current,K($i),K(kc)}var Sa=O(null),Ua=null;function hn(t){var r=t.alternate;ue(cs,cs.current&1),ue(Sa,t),Ua===null&&(r===null||$i.current!==null||r.memoizedState!==null)&&(Ua=t)}function Hu(t){ue(cs,cs.current),ue(Sa,t),Ua===null&&(Ua=t)}function Rx(t){t.tag===22?(ue(cs,cs.current),ue(Sa,t),Ua===null&&(Ua=t)):xn()}function xn(){ue(cs,cs.current),ue(Sa,Sa.current)}function Ca(t){K(Sa),Ua===t&&(Ua=null),K(cs)}var cs=O(0);function wc(t){for(var r=t;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Q0(l)||W0(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Or=0,We=null,Et=null,fs=null,Sc=!1,Ui=!1,li=!1,Cc=0,ql=0,Bi=null,k1=0;function ss(){throw Error(i(321))}function Gu(t,r){if(r===null)return!1;for(var l=0;l<r.length&&l<t.length;l++)if(!ka(t[l],r[l]))return!1;return!0}function Yu(t,r,l,o,m,g){return Or=g,We=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?hf:o0,li=!1,g=l(o,m),li=!1,Ui&&(g=Ox(r,l,o,m)),Dx(t),g}function Dx(t){$.H=Yl;var r=Et!==null&&Et.next!==null;if(Or=0,fs=Et=We=null,Sc=!1,ql=0,Bi=null,r)throw Error(i(300));t===null||ps||(t=t.dependencies,t!==null&&fc(t)&&(ps=!0))}function Ox(t,r,l,o){We=t;var m=0;do{if(Ui&&(Bi=null),ql=0,Ui=!1,25<=m)throw Error(i(301));if(m+=1,fs=Et=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=xf,g=r(l,o)}while(Ui);return g}function w1(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?Hl(r):r,t=t.useState()[0],(Et!==null?Et.memoizedState:null)!==t&&(We.flags|=1024),r}function Xu(){var t=Cc!==0;return Cc=0,t}function Ku(t,r,l){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~l}function Zu(t){if(Sc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Sc=!1}Or=0,fs=Et=We=null,Ui=!1,ql=Cc=0,Bi=null}function Zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fs===null?We.memoizedState=fs=t:fs=fs.next=t,fs}function ds(){if(Et===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var r=fs===null?We.memoizedState:fs.next;if(r!==null)fs=r,Et=t;else{if(t===null)throw We.alternate===null?Error(i(467)):Error(i(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},fs===null?We.memoizedState=fs=t:fs=fs.next=t}return fs}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(t){var r=ql;return ql+=1,Bi===null&&(Bi=[]),t=Nx(Bi,t,r),r=We,(fs===null?r.memoizedState:fs.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?hf:o0),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Hl(t);if(t.$$typeof===A)return Os(t)}throw Error(i(438,String(t)))}function Qu(t){var r=null,l=We.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var o=We.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(r={data:o.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ac(),We.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(t),o=0;o<t;o++)l[o]=U;return r.index++,l}function _r(t,r){return typeof r=="function"?r(t):r}function Ec(t){var r=ds();return Wu(r,Et,t)}function Wu(t,r,l){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var m=t.baseQueue,g=o.pending;if(g!==null){if(m!==null){var j=m.next;m.next=g.next,g.next=j}r.baseQueue=m=g,o.pending=null}if(g=t.baseState,m===null)t.memoizedState=g;else{r=m.next;var R=j=null,q=null,re=r,de=!1;do{var xe=re.lane&-536870913;if(xe!==re.lane?(ot&xe)===xe:(Or&xe)===xe){var ne=re.revertLane;if(ne===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),xe===Fi&&(de=!0);else if((Or&ne)===ne){re=re.next,ne===Fi&&(de=!0);continue}else xe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},q===null?(R=q=xe,j=g):q=q.next=xe,We.lanes|=ne,yn|=ne;xe=re.action,li&&l(g,xe),g=re.hasEagerState?re.eagerState:l(g,xe)}else ne={lane:xe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},q===null?(R=q=ne,j=g):q=q.next=ne,We.lanes|=xe,yn|=xe;re=re.next}while(re!==null&&re!==r);if(q===null?j=g:q.next=R,!ka(g,t.memoizedState)&&(ps=!0,de&&(l=Pi,l!==null)))throw l;t.memoizedState=g,t.baseState=j,t.baseQueue=q,o.lastRenderedState=g}return m===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Ju(t){var r=ds(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var o=l.dispatch,m=l.pending,g=r.memoizedState;if(m!==null){l.pending=null;var j=m=m.next;do g=t(g,j.action),j=j.next;while(j!==m);ka(g,r.memoizedState)||(ps=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),l.lastRenderedState=g}return[g,o]}function _x(t,r,l){var o=We,m=ds(),g=dt;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=r();var j=!ka((Et||m).memoizedState,l);if(j&&(m.memoizedState=l,ps=!0),m=m.queue,s0(Fx.bind(null,o,m,t),[t]),m.getSnapshot!==r||j||fs!==null&&fs.memoizedState.tag&1){if(o.flags|=2048,Ii(9,{destroy:void 0},Lx.bind(null,o,m,l,r),null),Ft===null)throw Error(i(349));g||(Or&127)!==0||Mx(o,r,l)}return l}function Mx(t,r,l){t.flags|=16384,t={getSnapshot:r,value:l},r=We.updateQueue,r===null?(r=Ac(),We.updateQueue=r,r.stores=[t]):(l=r.stores,l===null?r.stores=[t]:l.push(t))}function Lx(t,r,l,o){r.value=l,r.getSnapshot=o,Px(r)&&zx(t)}function Fx(t,r,l){return l(function(){Px(r)&&zx(t)})}function Px(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!ka(t,l)}catch{return!0}}function zx(t){var r=Wn(t,2);r!==null&&ca(r,t,2)}function e0(t){var r=Zs();if(typeof t=="function"){var l=t;if(t=l(),li){js(!0);try{l()}finally{js(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:t},r}function Vx(t,r,l,o){return t.baseState=l,Wu(t,Et,typeof o=="function"?o:_r)}function S1(t,r,l,o,m){if(Oc(t))throw Error(i(485));if(t=r.action,t!==null){var g={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};$.T!==null?l(!0):g.isTransition=!1,o(g),l=r.pending,l===null?(g.next=r.pending=g,$x(r,g)):(g.next=l.next,r.pending=l.next=g)}}function $x(t,r){var l=r.action,o=r.payload,m=t.state;if(r.isTransition){var g=$.T,j={};$.T=j;try{var R=l(m,o),q=$.S;q!==null&&q(j,R),Ux(t,r,R)}catch(re){t0(t,r,re)}finally{g!==null&&j.types!==null&&(g.types=j.types),$.T=g}}else try{g=l(m,o),Ux(t,r,g)}catch(re){t0(t,r,re)}}function Ux(t,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){Bx(t,r,o)},function(o){return t0(t,r,o)}):Bx(t,r,l)}function Bx(t,r,l){r.status="fulfilled",r.value=l,Ix(r),t.state=l,r=t.pending,r!==null&&(l=r.next,l===r?t.pending=null:(l=l.next,r.next=l,$x(t,l)))}function t0(t,r,l){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do r.status="rejected",r.reason=l,Ix(r),r=r.next;while(r!==o)}t.action=null}function Ix(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function qx(t,r){return r}function Hx(t,r){if(dt){var l=Ft.formState;if(l!==null){e:{var o=We;if(dt){if(It){t:{for(var m=It,g=$a;m.nodeType!==8;){if(!g){m=null;break t}if(m=Ba(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){It=Ba(m.nextSibling),o=m.data==="F!";break e}}cn(o)}o=!1}o&&(r=l[0])}}return l=Zs(),l.memoizedState=l.baseState=r,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qx,lastRenderedState:r},l.queue=o,l=uf.bind(null,We,o),o.dispatch=l,o=e0(!1),g=l0.bind(null,We,!1,o.queue),o=Zs(),m={state:r,dispatch:null,action:t,pending:null},o.queue=m,l=S1.bind(null,We,m,g,l),m.dispatch=l,o.memoizedState=t,[r,l,!1]}function Gx(t){var r=ds();return Yx(r,Et,t)}function Yx(t,r,l){if(r=Wu(t,r,qx)[0],t=Ec(_r)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var o=Hl(r)}catch(j){throw j===zi?bc:j}else o=r;r=ds();var m=r.queue,g=m.dispatch;return l!==r.memoizedState&&(We.flags|=2048,Ii(9,{destroy:void 0},C1.bind(null,m,l),null)),[o,g,t]}function C1(t,r){t.action=r}function Xx(t){var r=ds(),l=Et;if(l!==null)return Yx(r,l,t);ds(),r=r.memoizedState,l=ds();var o=l.queue.dispatch;return l.memoizedState=t,[r,o,!1]}function Ii(t,r,l,o){return t={tag:t,create:l,deps:o,inst:r,next:null},r=We.updateQueue,r===null&&(r=Ac(),We.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=t.next=t:(o=l.next,l.next=t,t.next=o,r.lastEffect=t),t}function Kx(){return ds().memoizedState}function Rc(t,r,l,o){var m=Zs();We.flags|=t,m.memoizedState=Ii(1|r,{destroy:void 0},l,o===void 0?null:o)}function Dc(t,r,l,o){var m=ds();o=o===void 0?null:o;var g=m.memoizedState.inst;Et!==null&&o!==null&&Gu(o,Et.memoizedState.deps)?m.memoizedState=Ii(r,g,l,o):(We.flags|=t,m.memoizedState=Ii(1|r,g,l,o))}function Zx(t,r){Rc(8390656,8,t,r)}function s0(t,r){Dc(2048,8,t,r)}function A1(t){We.flags|=4;var r=We.updateQueue;if(r===null)r=Ac(),We.updateQueue=r,r.events=[t];else{var l=r.events;l===null?r.events=[t]:l.push(t)}}function Qx(t){var r=ds().memoizedState;return A1({ref:r,nextImpl:t}),function(){if((ft&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Wx(t,r){return Dc(4,2,t,r)}function Jx(t,r){return Dc(4,4,t,r)}function ef(t,r){if(typeof r=="function"){t=t();var l=r(t);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function tf(t,r,l){l=l!=null?l.concat([t]):null,Dc(4,4,ef.bind(null,r,t),l)}function a0(){}function sf(t,r){var l=ds();r=r===void 0?null:r;var o=l.memoizedState;return r!==null&&Gu(r,o[1])?o[0]:(l.memoizedState=[t,r],t)}function af(t,r){var l=ds();r=r===void 0?null:r;var o=l.memoizedState;if(r!==null&&Gu(r,o[1]))return o[0];if(o=t(),li){js(!0);try{t()}finally{js(!1)}}return l.memoizedState=[o,r],o}function r0(t,r,l){return l===void 0||(Or&1073741824)!==0&&(ot&261930)===0?t.memoizedState=r:(t.memoizedState=l,t=np(),We.lanes|=t,yn|=t,l)}function rf(t,r,l,o){return ka(l,r)?l:$i.current!==null?(t=r0(t,l,o),ka(t,r)||(ps=!0),t):(Or&42)===0||(Or&1073741824)!==0&&(ot&261930)===0?(ps=!0,t.memoizedState=l):(t=np(),We.lanes|=t,yn|=t,r)}function nf(t,r,l,o,m){var g=_.p;_.p=g!==0&&8>g?g:8;var j=$.T,R={};$.T=R,l0(t,!1,r,l);try{var q=m(),re=$.S;if(re!==null&&re(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var de=N1(q,o);Gl(t,r,de,Ea(t))}else Gl(t,r,o,Ea(t))}catch(xe){Gl(t,r,{then:function(){},status:"rejected",reason:xe},Ea())}finally{_.p=g,j!==null&&R.types!==null&&(j.types=R.types),$.T=j}}function T1(){}function n0(t,r,l,o){if(t.tag!==5)throw Error(i(476));var m=lf(t).queue;nf(t,m,r,z,l===null?T1:function(){return of(t),l(o)})}function lf(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:z},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:l},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function of(t){var r=lf(t);r.next===null&&(r=t.alternate.memoizedState),Gl(t,r.next.queue,{},Ea())}function i0(){return Os(co)}function cf(){return ds().memoizedState}function df(){return ds().memoizedState}function E1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ea();t=mn(l);var o=gn(r,t,l);o!==null&&(ca(o,r,l),Ul(o,r,l)),r={cache:Lu()},t.payload=r;return}r=r.return}}function R1(t,r,l){var o=Ea();l={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Oc(t)?mf(r,l):(l=wu(t,r,l,o),l!==null&&(ca(l,t,o),gf(l,r,o)))}function uf(t,r,l){var o=Ea();Gl(t,r,l,o)}function Gl(t,r,l,o){var m={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Oc(t))mf(r,m);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var j=r.lastRenderedState,R=g(j,l);if(m.hasEagerState=!0,m.eagerState=R,ka(R,j))return mc(t,r,m,0),Ft===null&&uc(),!1}catch{}finally{}if(l=wu(t,r,m,o),l!==null)return ca(l,t,o),gf(l,r,o),!0}return!1}function l0(t,r,l,o){if(o={lane:2,revertLane:V0(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Oc(t)){if(r)throw Error(i(479))}else r=wu(t,l,o,2),r!==null&&ca(r,t,2)}function Oc(t){var r=t.alternate;return t===We||r!==null&&r===We}function mf(t,r){Ui=Sc=!0;var l=t.pending;l===null?r.next=r:(r.next=l.next,l.next=r),t.pending=r}function gf(t,r,l){if((l&4194048)!==0){var o=r.lanes;o&=t.pendingLanes,l|=o,r.lanes=l,Se(t,l)}}var Yl={readContext:Os,use:Tc,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useLayoutEffect:ss,useInsertionEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useSyncExternalStore:ss,useId:ss,useHostTransitionStatus:ss,useFormState:ss,useActionState:ss,useOptimistic:ss,useMemoCache:ss,useCacheRefresh:ss};Yl.useEffectEvent=ss;var hf={readContext:Os,use:Tc,useCallback:function(t,r){return Zs().memoizedState=[t,r===void 0?null:r],t},useContext:Os,useEffect:Zx,useImperativeHandle:function(t,r,l){l=l!=null?l.concat([t]):null,Rc(4194308,4,ef.bind(null,r,t),l)},useLayoutEffect:function(t,r){return Rc(4194308,4,t,r)},useInsertionEffect:function(t,r){Rc(4,2,t,r)},useMemo:function(t,r){var l=Zs();r=r===void 0?null:r;var o=t();if(li){js(!0);try{t()}finally{js(!1)}}return l.memoizedState=[o,r],o},useReducer:function(t,r,l){var o=Zs();if(l!==void 0){var m=l(r);if(li){js(!0);try{l(r)}finally{js(!1)}}}else m=r;return o.memoizedState=o.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},o.queue=t,t=t.dispatch=R1.bind(null,We,t),[o.memoizedState,t]},useRef:function(t){var r=Zs();return t={current:t},r.memoizedState=t},useState:function(t){t=e0(t);var r=t.queue,l=uf.bind(null,We,r);return r.dispatch=l,[t.memoizedState,l]},useDebugValue:a0,useDeferredValue:function(t,r){var l=Zs();return r0(l,t,r)},useTransition:function(){var t=e0(!1);return t=nf.bind(null,We,t.queue,!0,!1),Zs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,l){var o=We,m=Zs();if(dt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),Ft===null)throw Error(i(349));(ot&127)!==0||Mx(o,r,l)}m.memoizedState=l;var g={value:l,getSnapshot:r};return m.queue=g,Zx(Fx.bind(null,o,g,t),[t]),o.flags|=2048,Ii(9,{destroy:void 0},Lx.bind(null,o,g,l,r),null),l},useId:function(){var t=Zs(),r=Ft.identifierPrefix;if(dt){var l=gr,o=mr;l=(o&~(1<<32-kt(o)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Cc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=k1++,r="_"+r+"r_"+l.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:i0,useFormState:Hx,useActionState:Hx,useOptimistic:function(t){var r=Zs();r.memoizedState=r.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=l0.bind(null,We,!0,l),l.dispatch=r,[t,r]},useMemoCache:Qu,useCacheRefresh:function(){return Zs().memoizedState=E1.bind(null,We)},useEffectEvent:function(t){var r=Zs(),l={impl:t};return r.memoizedState=l,function(){if((ft&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},o0={readContext:Os,use:Tc,useCallback:sf,useContext:Os,useEffect:s0,useImperativeHandle:tf,useInsertionEffect:Wx,useLayoutEffect:Jx,useMemo:af,useReducer:Ec,useRef:Kx,useState:function(){return Ec(_r)},useDebugValue:a0,useDeferredValue:function(t,r){var l=ds();return rf(l,Et.memoizedState,t,r)},useTransition:function(){var t=Ec(_r)[0],r=ds().memoizedState;return[typeof t=="boolean"?t:Hl(t),r]},useSyncExternalStore:_x,useId:cf,useHostTransitionStatus:i0,useFormState:Gx,useActionState:Gx,useOptimistic:function(t,r){var l=ds();return Vx(l,Et,t,r)},useMemoCache:Qu,useCacheRefresh:df};o0.useEffectEvent=Qx;var xf={readContext:Os,use:Tc,useCallback:sf,useContext:Os,useEffect:s0,useImperativeHandle:tf,useInsertionEffect:Wx,useLayoutEffect:Jx,useMemo:af,useReducer:Ju,useRef:Kx,useState:function(){return Ju(_r)},useDebugValue:a0,useDeferredValue:function(t,r){var l=ds();return Et===null?r0(l,t,r):rf(l,Et.memoizedState,t,r)},useTransition:function(){var t=Ju(_r)[0],r=ds().memoizedState;return[typeof t=="boolean"?t:Hl(t),r]},useSyncExternalStore:_x,useId:cf,useHostTransitionStatus:i0,useFormState:Xx,useActionState:Xx,useOptimistic:function(t,r){var l=ds();return Et!==null?Vx(l,Et,t,r):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Qu,useCacheRefresh:df};xf.useEffectEvent=Qx;function c0(t,r,l,o){r=t.memoizedState,l=l(o,r),l=l==null?r:b({},r,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var d0={enqueueSetState:function(t,r,l){t=t._reactInternals;var o=Ea(),m=mn(o);m.payload=r,l!=null&&(m.callback=l),r=gn(t,m,o),r!==null&&(ca(r,t,o),Ul(r,t,o))},enqueueReplaceState:function(t,r,l){t=t._reactInternals;var o=Ea(),m=mn(o);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=gn(t,m,o),r!==null&&(ca(r,t,o),Ul(r,t,o))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var l=Ea(),o=mn(l);o.tag=2,r!=null&&(o.callback=r),r=gn(t,o,l),r!==null&&(ca(r,t,l),Ul(r,t,l))}};function ff(t,r,l,o,m,g,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,j):r.prototype&&r.prototype.isPureReactComponent?!_l(l,o)||!_l(m,g):!0}function pf(t,r,l,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,o),r.state!==t&&d0.enqueueReplaceState(r,r.state,null)}function oi(t,r){var l=r;if("ref"in r){l={};for(var o in r)o!=="ref"&&(l[o]=r[o])}if(t=t.defaultProps){l===r&&(l=b({},l));for(var m in t)l[m]===void 0&&(l[m]=t[m])}return l}function yf(t){dc(t)}function bf(t){console.error(t)}function vf(t){dc(t)}function _c(t,r){try{var l=t.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(o){setTimeout(function(){throw o})}}function jf(t,r,l){try{var o=t.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function u0(t,r,l){return l=mn(l),l.tag=3,l.payload={element:null},l.callback=function(){_c(t,r)},l}function Nf(t){return t=mn(t),t.tag=3,t}function kf(t,r,l,o){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=o.value;t.payload=function(){return m(g)},t.callback=function(){jf(r,l,o)}}var j=l.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){jf(r,l,o),typeof m!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function D1(t,r,l,o,m){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(r=l.alternate,r!==null&&Li(r,l,m,!0),l=Sa.current,l!==null){switch(l.tag){case 31:case 13:return Ua===null?Hc():l.alternate===null&&as===0&&(as=3),l.flags&=-257,l.flags|=65536,l.lanes=m,o===vc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([o]):r.add(o),F0(t,o,m)),!1;case 22:return l.flags|=65536,o===vc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([o]):l.add(o)),F0(t,o,m)),!1}throw Error(i(435,l.tag))}return F0(t,o,m),Hc(),!1}if(dt)return r=Sa.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,o!==Ru&&(t=Error(i(422),{cause:o}),Fl(Pa(t,l)))):(o!==Ru&&(r=Error(i(423),{cause:o}),Fl(Pa(r,l))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,o=Pa(o,l),m=u0(t.stateNode,o,m),Uu(t,m),as!==4&&(as=2)),!1;var g=Error(i(520),{cause:o});if(g=Pa(g,l),to===null?to=[g]:to.push(g),as!==4&&(as=2),r===null)return!0;o=Pa(o,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,t=m&-m,l.lanes|=t,t=u0(l.stateNode,o,t),Uu(l,t),!1;case 1:if(r=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(bn===null||!bn.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Nf(m),kf(m,t,l,o),Uu(l,m),!1}l=l.return}while(l!==null);return!1}var m0=Error(i(461)),ps=!1;function _s(t,r,l,o){r.child=t===null?Cx(r,null,l,o):ii(r,t.child,l,o)}function wf(t,r,l,o,m){l=l.render;var g=r.ref;if("ref"in o){var j={};for(var R in o)R!=="ref"&&(j[R]=o[R])}else j=o;return si(r),o=Yu(t,r,l,j,g,m),R=Xu(),t!==null&&!ps?(Ku(t,r,m),Mr(t,r,m)):(dt&&R&&Tu(r),r.flags|=1,_s(t,r,o,m),r.child)}function Sf(t,r,l,o,m){if(t===null){var g=l.type;return typeof g=="function"&&!Su(g)&&g.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=g,Cf(t,r,g,o,m)):(t=hc(l.type,null,o,r,r.mode,m),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,!v0(t,m)){var j=g.memoizedProps;if(l=l.compare,l=l!==null?l:_l,l(j,o)&&t.ref===r.ref)return Mr(t,r,m)}return r.flags|=1,t=Tr(g,o),t.ref=r.ref,t.return=r,r.child=t}function Cf(t,r,l,o,m){if(t!==null){var g=t.memoizedProps;if(_l(g,o)&&t.ref===r.ref)if(ps=!1,r.pendingProps=o=g,v0(t,m))(t.flags&131072)!==0&&(ps=!0);else return r.lanes=t.lanes,Mr(t,r,m)}return g0(t,r,l,o,m)}function Af(t,r,l,o){var m=o.children,g=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((r.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(o=r.child=t.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~g}else o=0,r.child=null;return Tf(t,r,g,l,o)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&yc(r,g!==null?g.cachePool:null),g!==null?Ex(r,g):Iu(),Rx(r);else return o=r.lanes=536870912,Tf(t,r,g!==null?g.baseLanes|l:l,l,o)}else g!==null?(yc(r,g.cachePool),Ex(r,g),xn(),r.memoizedState=null):(t!==null&&yc(r,null),Iu(),xn());return _s(t,r,m,l),r.child}function Xl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Tf(t,r,l,o,m){var g=Pu();return g=g===null?null:{parent:xs._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},t!==null&&yc(r,null),Iu(),Rx(r),t!==null&&Li(t,r,o,!0),r.childLanes=m,null}function Mc(t,r){return r=Fc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Ef(t,r,l){return ii(r,t.child,null,l),t=Mc(r,r.pendingProps),t.flags|=2,Ca(r),r.memoizedState=null,t}function O1(t,r,l){var o=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(dt){if(o.mode==="hidden")return t=Mc(r,o),r.lanes=536870912,Xl(null,t);if(Hu(r),(t=It)?(t=Up(t,$a),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ln!==null?{id:mr,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},l=ux(t),l.return=r,r.child=l,Ds=r,It=null)):t=null,t===null)throw cn(r);return r.lanes=536870912,null}return Mc(r,o)}var g=t.memoizedState;if(g!==null){var j=g.dehydrated;if(Hu(r),m)if(r.flags&256)r.flags&=-257,r=Ef(t,r,l);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(ps||Li(t,r,l,!1),m=(l&t.childLanes)!==0,ps||m){if(o=Ft,o!==null&&(j=mt(o,l),j!==0&&j!==g.retryLane))throw g.retryLane=j,Wn(t,j),ca(o,t,j),m0;Hc(),r=Ef(t,r,l)}else t=g.treeContext,It=Ba(j.nextSibling),Ds=r,dt=!0,on=null,$a=!1,t!==null&&hx(r,t),r=Mc(r,o),r.flags|=4096;return r}return t=Tr(t.child,{mode:o.mode,children:o.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Lc(t,r){var l=r.ref;if(l===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(r.flags|=4194816)}}function g0(t,r,l,o,m){return si(r),l=Yu(t,r,l,o,void 0,m),o=Xu(),t!==null&&!ps?(Ku(t,r,m),Mr(t,r,m)):(dt&&o&&Tu(r),r.flags|=1,_s(t,r,l,m),r.child)}function Rf(t,r,l,o,m,g){return si(r),r.updateQueue=null,l=Ox(r,o,l,m),Dx(t),o=Xu(),t!==null&&!ps?(Ku(t,r,g),Mr(t,r,g)):(dt&&o&&Tu(r),r.flags|=1,_s(t,r,l,g),r.child)}function Df(t,r,l,o,m){if(si(r),r.stateNode===null){var g=Di,j=l.contextType;typeof j=="object"&&j!==null&&(g=Os(j)),g=new l(o,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=d0,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=o,g.state=r.memoizedState,g.refs={},Vu(r),j=l.contextType,g.context=typeof j=="object"&&j!==null?Os(j):Di,g.state=r.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(c0(r,l,j,o),g.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&d0.enqueueReplaceState(g,g.state,null),Il(r,o,g,m),Bl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),o=!0}else if(t===null){g=r.stateNode;var R=r.memoizedProps,q=oi(l,R);g.props=q;var re=g.context,de=l.contextType;j=Di,typeof de=="object"&&de!==null&&(j=Os(de));var xe=l.getDerivedStateFromProps;de=typeof xe=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,de||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||re!==j)&&pf(r,g,o,j),un=!1;var ne=r.memoizedState;g.state=ne,Il(r,o,g,m),Bl(),re=r.memoizedState,R||ne!==re||un?(typeof xe=="function"&&(c0(r,l,xe,o),re=r.memoizedState),(q=un||ff(r,l,q,o,ne,re,j))?(de||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=re),g.props=o,g.state=re,g.context=j,o=q):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{g=r.stateNode,$u(t,r),j=r.memoizedProps,de=oi(l,j),g.props=de,xe=r.pendingProps,ne=g.context,re=l.contextType,q=Di,typeof re=="object"&&re!==null&&(q=Os(re)),R=l.getDerivedStateFromProps,(re=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==xe||ne!==q)&&pf(r,g,o,q),un=!1,ne=r.memoizedState,g.state=ne,Il(r,o,g,m),Bl();var le=r.memoizedState;j!==xe||ne!==le||un||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof R=="function"&&(c0(r,l,R,o),le=r.memoizedState),(de=un||ff(r,l,de,o,ne,le,q)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(re||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,le,q),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,le,q)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===t.memoizedProps&&ne===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ne===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=le),g.props=o,g.state=le,g.context=q,o=de):(typeof g.componentDidUpdate!="function"||j===t.memoizedProps&&ne===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ne===t.memoizedState||(r.flags|=1024),o=!1)}return g=o,Lc(t,r),o=(r.flags&128)!==0,g||o?(g=r.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,t!==null&&o?(r.child=ii(r,t.child,null,m),r.child=ii(r,null,l,m)):_s(t,r,l,m),r.memoizedState=g.state,t=r.child):t=Mr(t,r,m),t}function Of(t,r,l,o){return ei(),r.flags|=256,_s(t,r,l,o),r.child}var h0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function x0(t){return{baseLanes:t,cachePool:vx()}}function f0(t,r,l){return t=t!==null?t.childLanes&~l:0,r&&(t|=Ta),t}function _f(t,r,l){var o=r.pendingProps,m=!1,g=(r.flags&128)!==0,j;if((j=g)||(j=t!==null&&t.memoizedState===null?!1:(cs.current&2)!==0),j&&(m=!0,r.flags&=-129),j=(r.flags&32)!==0,r.flags&=-33,t===null){if(dt){if(m?hn(r):xn(),(t=It)?(t=Up(t,$a),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ln!==null?{id:mr,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},l=ux(t),l.return=r,r.child=l,Ds=r,It=null)):t=null,t===null)throw cn(r);return W0(t)?r.lanes=32:r.lanes=536870912,null}var R=o.children;return o=o.fallback,m?(xn(),m=r.mode,R=Fc({mode:"hidden",children:R},m),o=Jn(o,m,l,null),R.return=r,o.return=r,R.sibling=o,r.child=R,o=r.child,o.memoizedState=x0(l),o.childLanes=f0(t,j,l),r.memoizedState=h0,Xl(null,o)):(hn(r),p0(r,R))}var q=t.memoizedState;if(q!==null&&(R=q.dehydrated,R!==null)){if(g)r.flags&256?(hn(r),r.flags&=-257,r=y0(t,r,l)):r.memoizedState!==null?(xn(),r.child=t.child,r.flags|=128,r=null):(xn(),R=o.fallback,m=r.mode,o=Fc({mode:"visible",children:o.children},m),R=Jn(R,m,l,null),R.flags|=2,o.return=r,R.return=r,o.sibling=R,r.child=o,ii(r,t.child,null,l),o=r.child,o.memoizedState=x0(l),o.childLanes=f0(t,j,l),r.memoizedState=h0,r=Xl(null,o));else if(hn(r),W0(R)){if(j=R.nextSibling&&R.nextSibling.dataset,j)var re=j.dgst;j=re,o=Error(i(419)),o.stack="",o.digest=j,Fl({value:o,source:null,stack:null}),r=y0(t,r,l)}else if(ps||Li(t,r,l,!1),j=(l&t.childLanes)!==0,ps||j){if(j=Ft,j!==null&&(o=mt(j,l),o!==0&&o!==q.retryLane))throw q.retryLane=o,Wn(t,o),ca(j,t,o),m0;Q0(R)||Hc(),r=y0(t,r,l)}else Q0(R)?(r.flags|=192,r.child=t.child,r=null):(t=q.treeContext,It=Ba(R.nextSibling),Ds=r,dt=!0,on=null,$a=!1,t!==null&&hx(r,t),r=p0(r,o.children),r.flags|=4096);return r}return m?(xn(),R=o.fallback,m=r.mode,q=t.child,re=q.sibling,o=Tr(q,{mode:"hidden",children:o.children}),o.subtreeFlags=q.subtreeFlags&65011712,re!==null?R=Tr(re,R):(R=Jn(R,m,l,null),R.flags|=2),R.return=r,o.return=r,o.sibling=R,r.child=o,Xl(null,o),o=r.child,R=t.child.memoizedState,R===null?R=x0(l):(m=R.cachePool,m!==null?(q=xs._currentValue,m=m.parent!==q?{parent:q,pool:q}:m):m=vx(),R={baseLanes:R.baseLanes|l,cachePool:m}),o.memoizedState=R,o.childLanes=f0(t,j,l),r.memoizedState=h0,Xl(t.child,o)):(hn(r),l=t.child,t=l.sibling,l=Tr(l,{mode:"visible",children:o.children}),l.return=r,l.sibling=null,t!==null&&(j=r.deletions,j===null?(r.deletions=[t],r.flags|=16):j.push(t)),r.child=l,r.memoizedState=null,l)}function p0(t,r){return r=Fc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Fc(t,r){return t=wa(22,t,null,r),t.lanes=0,t}function y0(t,r,l){return ii(r,t.child,null,l),t=p0(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Mf(t,r,l){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),_u(t.return,r,l)}function b0(t,r,l,o,m,g){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:m,treeForkCount:g}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=o,j.tail=l,j.tailMode=m,j.treeForkCount=g)}function Lf(t,r,l){var o=r.pendingProps,m=o.revealOrder,g=o.tail;o=o.children;var j=cs.current,R=(j&2)!==0;if(R?(j=j&1|2,r.flags|=128):j&=1,ue(cs,j),_s(t,r,o,l),o=dt?Ll:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mf(t,l,r);else if(t.tag===19)Mf(t,l,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(l=r.child,m=null;l!==null;)t=l.alternate,t!==null&&wc(t)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),b0(r,!1,m,l,g,o);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(t=m.alternate,t!==null&&wc(t)===null){r.child=m;break}t=m.sibling,m.sibling=l,l=m,m=t}b0(r,!0,l,null,g,o);break;case"together":b0(r,!1,null,null,void 0,o);break;default:r.memoizedState=null}return r.child}function Mr(t,r,l){if(t!==null&&(r.dependencies=t.dependencies),yn|=r.lanes,(l&r.childLanes)===0)if(t!==null){if(Li(t,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,l=Tr(t,t.pendingProps),r.child=l,l.return=r;t.sibling!==null;)t=t.sibling,l=l.sibling=Tr(t,t.pendingProps),l.return=r;l.sibling=null}return r.child}function v0(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function _1(t,r,l){switch(r.tag){case 3:Ne(r,r.stateNode.containerInfo),dn(r,xs,t.memoizedState.cache),ei();break;case 27:case 5:At(r);break;case 4:Ne(r,r.stateNode.containerInfo);break;case 10:dn(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Hu(r),null;break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(hn(r),r.flags|=128,null):(l&r.child.childLanes)!==0?_f(t,r,l):(hn(r),t=Mr(t,r,l),t!==null?t.sibling:null);hn(r);break;case 19:var m=(t.flags&128)!==0;if(o=(l&r.childLanes)!==0,o||(Li(t,r,l,!1),o=(l&r.childLanes)!==0),m){if(o)return Lf(t,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(cs,cs.current),o)break;return null;case 22:return r.lanes=0,Af(t,r,l,r.pendingProps);case 24:dn(r,xs,t.memoizedState.cache)}return Mr(t,r,l)}function Ff(t,r,l){if(t!==null)if(t.memoizedProps!==r.pendingProps)ps=!0;else{if(!v0(t,l)&&(r.flags&128)===0)return ps=!1,_1(t,r,l);ps=(t.flags&131072)!==0}else ps=!1,dt&&(r.flags&1048576)!==0&&gx(r,Ll,r.index);switch(r.lanes=0,r.tag){case 16:e:{var o=r.pendingProps;if(t=ri(r.elementType),r.type=t,typeof t=="function")Su(t)?(o=oi(t,o),r.tag=1,r=Df(null,r,t,o,l)):(r.tag=0,r=g0(null,r,t,o,l));else{if(t!=null){var m=t.$$typeof;if(m===D){r.tag=11,r=wf(null,r,t,o,l);break e}else if(m===k){r.tag=14,r=Sf(null,r,t,o,l);break e}}throw r=J(t)||t,Error(i(306,r,""))}}return r;case 0:return g0(t,r,r.type,r.pendingProps,l);case 1:return o=r.type,m=oi(o,r.pendingProps),Df(t,r,o,m,l);case 3:e:{if(Ne(r,r.stateNode.containerInfo),t===null)throw Error(i(387));o=r.pendingProps;var g=r.memoizedState;m=g.element,$u(t,r),Il(r,o,null,l);var j=r.memoizedState;if(o=j.cache,dn(r,xs,o),o!==g.cache&&Mu(r,[xs],l,!0),Bl(),o=j.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:j.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Of(t,r,o,l);break e}else if(o!==m){m=Pa(Error(i(424)),r),Fl(m),r=Of(t,r,o,l);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(It=Ba(t.firstChild),Ds=r,dt=!0,on=null,$a=!0,l=Cx(r,null,o,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ei(),o===m){r=Mr(t,r,l);break e}_s(t,r,o,l)}r=r.child}return r;case 26:return Lc(t,r),t===null?(l=Yp(r.type,null,r.pendingProps,null))?r.memoizedState=l:dt||(l=r.type,t=r.pendingProps,o=Wc(we.current).createElement(l),o[zt]=r,o[gs]=t,Ms(o,l,t),st(o),r.stateNode=o):r.memoizedState=Yp(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return At(r),t===null&&dt&&(o=r.stateNode=qp(r.type,r.pendingProps,we.current),Ds=r,$a=!0,m=It,kn(r.type)?(J0=m,It=Ba(o.firstChild)):It=m),_s(t,r,r.pendingProps.children,l),Lc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&dt&&((m=o=It)&&(o=cw(o,r.type,r.pendingProps,$a),o!==null?(r.stateNode=o,Ds=r,It=Ba(o.firstChild),$a=!1,m=!0):m=!1),m||cn(r)),At(r),m=r.type,g=r.pendingProps,j=t!==null?t.memoizedProps:null,o=g.children,X0(m,g)?o=null:j!==null&&X0(m,j)&&(r.flags|=32),r.memoizedState!==null&&(m=Yu(t,r,w1,null,null,l),co._currentValue=m),Lc(t,r),_s(t,r,o,l),r.child;case 6:return t===null&&dt&&((t=l=It)&&(l=dw(l,r.pendingProps,$a),l!==null?(r.stateNode=l,Ds=r,It=null,t=!0):t=!1),t||cn(r)),null;case 13:return _f(t,r,l);case 4:return Ne(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=ii(r,null,o,l):_s(t,r,o,l),r.child;case 11:return wf(t,r,r.type,r.pendingProps,l);case 7:return _s(t,r,r.pendingProps,l),r.child;case 8:return _s(t,r,r.pendingProps.children,l),r.child;case 12:return _s(t,r,r.pendingProps.children,l),r.child;case 10:return o=r.pendingProps,dn(r,r.type,o.value),_s(t,r,o.children,l),r.child;case 9:return m=r.type._context,o=r.pendingProps.children,si(r),m=Os(m),o=o(m),r.flags|=1,_s(t,r,o,l),r.child;case 14:return Sf(t,r,r.type,r.pendingProps,l);case 15:return Cf(t,r,r.type,r.pendingProps,l);case 19:return Lf(t,r,l);case 31:return O1(t,r,l);case 22:return Af(t,r,l,r.pendingProps);case 24:return si(r),o=Os(xs),t===null?(m=Pu(),m===null&&(m=Ft,g=Lu(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),r.memoizedState={parent:o,cache:m},Vu(r),dn(r,xs,m)):((t.lanes&l)!==0&&($u(t,r),Il(r,null,null,l),Bl()),m=t.memoizedState,g=r.memoizedState,m.parent!==o?(m={parent:o,cache:o},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),dn(r,xs,o)):(o=g.cache,dn(r,xs,o),o!==m.cache&&Mu(r,[xs],l,!0))),_s(t,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Lr(t){t.flags|=4}function j0(t,r,l,o,m){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(cp())t.flags|=8192;else throw ni=vc,zu}else t.flags&=-16777217}function Pf(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wp(r))if(cp())t.flags|=8192;else throw ni=vc,zu}function Pc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?es():536870912,t.lanes|=r,Yi|=r)}function Kl(t,r){if(!dt)switch(t.tailMode){case"hidden":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function qt(t){var r=t.alternate!==null&&t.alternate.child===t.child,l=0,o=0;if(r)for(var m=t.child;m!==null;)l|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)l|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=o,t.childLanes=l,r}function M1(t,r,l){var o=r.pendingProps;switch(Eu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(r),null;case 1:return qt(r),null;case 3:return l=r.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Dr(xs),Ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Mi(r)?Lr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Du())),qt(r),null;case 26:var m=r.type,g=r.memoizedState;return t===null?(Lr(r),g!==null?(qt(r),Pf(r,g)):(qt(r),j0(r,m,null,o,l))):g?g!==t.memoizedState?(Lr(r),qt(r),Pf(r,g)):(qt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==o&&Lr(r),qt(r),j0(r,m,t,o,l)),null;case 27:if(Pt(r),l=we.current,m=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==o&&Lr(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return qt(r),null}t=oe.current,Mi(r)?xx(r):(t=qp(m,o,l),r.stateNode=t,Lr(r))}return qt(r),null;case 5:if(Pt(r),m=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==o&&Lr(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return qt(r),null}if(g=oe.current,Mi(r))xx(r);else{var j=Wc(we.current);switch(g){case 1:g=j.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=j.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=j.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?j.createElement("select",{is:o.is}):j.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?j.createElement(m,{is:o.is}):j.createElement(m)}}g[zt]=r,g[gs]=o;e:for(j=r.child;j!==null;){if(j.tag===5||j.tag===6)g.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===r)break e;for(;j.sibling===null;){if(j.return===null||j.return===r)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}r.stateNode=g;e:switch(Ms(g,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Lr(r)}}return qt(r),j0(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,l),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==o&&Lr(r);else{if(typeof o!="string"&&r.stateNode===null)throw Error(i(166));if(t=we.current,Mi(r)){if(t=r.stateNode,l=r.memoizedProps,o=null,m=Ds,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}t[zt]=r,t=!!(t.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||_p(t.nodeValue,l)),t||cn(r,!0)}else t=Wc(t).createTextNode(o),t[zt]=r,r.stateNode=t}return qt(r),null;case 31:if(l=r.memoizedState,t===null||t.memoizedState!==null){if(o=Mi(r),l!==null){if(t===null){if(!o)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[zt]=r}else ei(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qt(r),t=!1}else l=Du(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return r.flags&256?(Ca(r),r):(Ca(r),null);if((r.flags&128)!==0)throw Error(i(558))}return qt(r),null;case 13:if(o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=Mi(r),o!==null&&o.dehydrated!==null){if(t===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[zt]=r}else ei(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qt(r),m=!1}else m=Du(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Ca(r),r):(Ca(r),null)}return Ca(r),(r.flags&128)!==0?(r.lanes=l,r):(l=o!==null,t=t!==null&&t.memoizedState!==null,l&&(o=r.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==m&&(o.flags|=2048)),l!==t&&l&&(r.child.flags|=8192),Pc(r,r.updateQueue),qt(r),null);case 4:return Ge(),t===null&&I0(r.stateNode.containerInfo),qt(r),null;case 10:return Dr(r.type),qt(r),null;case 19:if(K(cs),o=r.memoizedState,o===null)return qt(r),null;if(m=(r.flags&128)!==0,g=o.rendering,g===null)if(m)Kl(o,!1);else{if(as!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(g=wc(t),g!==null){for(r.flags|=128,Kl(o,!1),t=g.updateQueue,r.updateQueue=t,Pc(r,t),r.subtreeFlags=0,t=l,l=r.child;l!==null;)dx(l,t),l=l.sibling;return ue(cs,cs.current&1|2),dt&&Er(r,o.treeForkCount),r.child}t=t.sibling}o.tail!==null&&Le()>Bc&&(r.flags|=128,m=!0,Kl(o,!1),r.lanes=4194304)}else{if(!m)if(t=wc(g),t!==null){if(r.flags|=128,m=!0,t=t.updateQueue,r.updateQueue=t,Pc(r,t),Kl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!dt)return qt(r),null}else 2*Le()-o.renderingStartTime>Bc&&l!==536870912&&(r.flags|=128,m=!0,Kl(o,!1),r.lanes=4194304);o.isBackwards?(g.sibling=r.child,r.child=g):(t=o.last,t!==null?t.sibling=g:r.child=g,o.last=g)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Le(),t.sibling=null,l=cs.current,ue(cs,m?l&1|2:l&1),dt&&Er(r,o.treeForkCount),t):(qt(r),null);case 22:case 23:return Ca(r),qu(),o=r.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(r.flags|=8192):o&&(r.flags|=8192),o?(l&536870912)!==0&&(r.flags&128)===0&&(qt(r),r.subtreeFlags&6&&(r.flags|=8192)):qt(r),l=r.updateQueue,l!==null&&Pc(r,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==l&&(r.flags|=2048),t!==null&&K(ai),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Dr(xs),qt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function L1(t,r){switch(Eu(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Dr(xs),Ge(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Pt(r),null;case 31:if(r.memoizedState!==null){if(Ca(r),r.alternate===null)throw Error(i(340));ei()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Ca(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ei()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return K(cs),null;case 4:return Ge(),null;case 10:return Dr(r.type),null;case 22:case 23:return Ca(r),qu(),t!==null&&K(ai),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Dr(xs),null;case 25:return null;default:return null}}function zf(t,r){switch(Eu(r),r.tag){case 3:Dr(xs),Ge();break;case 26:case 27:case 5:Pt(r);break;case 4:Ge();break;case 31:r.memoizedState!==null&&Ca(r);break;case 13:Ca(r);break;case 19:K(cs);break;case 10:Dr(r.type);break;case 22:case 23:Ca(r),qu(),t!==null&&K(ai);break;case 24:Dr(xs)}}function Zl(t,r){try{var l=r.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var m=o.next;l=m;do{if((l.tag&t)===t){o=void 0;var g=l.create,j=l.inst;o=g(),j.destroy=o}l=l.next}while(l!==m)}}catch(R){St(r,r.return,R)}}function fn(t,r,l){try{var o=r.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var g=m.next;o=g;do{if((o.tag&t)===t){var j=o.inst,R=j.destroy;if(R!==void 0){j.destroy=void 0,m=r;var q=l,re=R;try{re()}catch(de){St(m,q,de)}}}o=o.next}while(o!==g)}}catch(de){St(r,r.return,de)}}function Vf(t){var r=t.updateQueue;if(r!==null){var l=t.stateNode;try{Tx(r,l)}catch(o){St(t,t.return,o)}}}function $f(t,r,l){l.props=oi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(o){St(t,r,o)}}function Ql(t,r){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof l=="function"?t.refCleanup=l(o):l.current=o}}catch(m){St(t,r,m)}}function hr(t,r){var l=t.ref,o=t.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(m){St(t,r,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){St(t,r,m)}else l.current=null}function Uf(t){var r=t.type,l=t.memoizedProps,o=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(m){St(t,t.return,m)}}function N0(t,r,l){try{var o=t.stateNode;aw(o,t.type,l,r),o[gs]=r}catch(m){St(t,t.return,m)}}function Bf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&kn(t.type)||t.tag===4}function k0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&kn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function w0(t,r,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(t),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Qa));else if(o!==4&&(o===27&&kn(t.type)&&(l=t.stateNode,r=null),t=t.child,t!==null))for(w0(t,r,l),t=t.sibling;t!==null;)w0(t,r,l),t=t.sibling}function zc(t,r,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?l.insertBefore(t,r):l.appendChild(t);else if(o!==4&&(o===27&&kn(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(zc(t,r,l),t=t.sibling;t!==null;)zc(t,r,l),t=t.sibling}function If(t){var r=t.stateNode,l=t.memoizedProps;try{for(var o=t.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);Ms(r,o,l),r[zt]=t,r[gs]=l}catch(g){St(t,t.return,g)}}var Fr=!1,ys=!1,S0=!1,qf=typeof WeakSet=="function"?WeakSet:Set,Cs=null;function F1(t,r){if(t=t.containerInfo,G0=nd,t=tx(t),yu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var m=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var j=0,R=-1,q=-1,re=0,de=0,xe=t,ne=null;t:for(;;){for(var le;xe!==l||m!==0&&xe.nodeType!==3||(R=j+m),xe!==g||o!==0&&xe.nodeType!==3||(q=j+o),xe.nodeType===3&&(j+=xe.nodeValue.length),(le=xe.firstChild)!==null;)ne=xe,xe=le;for(;;){if(xe===t)break t;if(ne===l&&++re===m&&(R=j),ne===g&&++de===o&&(q=j),(le=xe.nextSibling)!==null)break;xe=ne,ne=xe.parentNode}xe=le}l=R===-1||q===-1?null:{start:R,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Y0={focusedElem:t,selectionRange:l},nd=!1,Cs=r;Cs!==null;)if(r=Cs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Cs=t;else for(;Cs!==null;){switch(r=Cs,g=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)m=t[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=r,m=g.memoizedProps,g=g.memoizedState,o=l.stateNode;try{var Re=oi(l.type,m);t=o.getSnapshotBeforeUpdate(Re,g),o.__reactInternalSnapshotBeforeUpdate=t}catch($e){St(l,l.return,$e)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,l=t.nodeType,l===9)Z0(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Z0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Cs=t;break}Cs=r.return}}function Hf(t,r,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:zr(t,l),o&4&&Zl(5,l);break;case 1:if(zr(t,l),o&4)if(t=l.stateNode,r===null)try{t.componentDidMount()}catch(j){St(l,l.return,j)}else{var m=oi(l.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(m,r,t.__reactInternalSnapshotBeforeUpdate)}catch(j){St(l,l.return,j)}}o&64&&Vf(l),o&512&&Ql(l,l.return);break;case 3:if(zr(t,l),o&64&&(t=l.updateQueue,t!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Tx(t,r)}catch(j){St(l,l.return,j)}}break;case 27:r===null&&o&4&&If(l);case 26:case 5:zr(t,l),r===null&&o&4&&Uf(l),o&512&&Ql(l,l.return);break;case 12:zr(t,l);break;case 31:zr(t,l),o&4&&Xf(t,l);break;case 13:zr(t,l),o&4&&Kf(t,l),o&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=H1.bind(null,l),uw(t,l))));break;case 22:if(o=l.memoizedState!==null||Fr,!o){r=r!==null&&r.memoizedState!==null||ys,m=Fr;var g=ys;Fr=o,(ys=r)&&!g?Vr(t,l,(l.subtreeFlags&8772)!==0):zr(t,l),Fr=m,ys=g}break;case 30:break;default:zr(t,l)}}function Gf(t){var r=t.alternate;r!==null&&(t.alternate=null,Gf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Za(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ht=null,na=!1;function Pr(t,r,l){for(l=l.child;l!==null;)Yf(t,r,l),l=l.sibling}function Yf(t,r,l){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount($s,l)}catch{}switch(l.tag){case 26:ys||hr(l,r),Pr(t,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ys||hr(l,r);var o=Ht,m=na;kn(l.type)&&(Ht=l.stateNode,na=!1),Pr(t,r,l),io(l.stateNode),Ht=o,na=m;break;case 5:ys||hr(l,r);case 6:if(o=Ht,m=na,Ht=null,Pr(t,r,l),Ht=o,na=m,Ht!==null)if(na)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(l.stateNode)}catch(g){St(l,r,g)}else try{Ht.removeChild(l.stateNode)}catch(g){St(l,r,g)}break;case 18:Ht!==null&&(na?(t=Ht,Vp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),tl(t)):Vp(Ht,l.stateNode));break;case 4:o=Ht,m=na,Ht=l.stateNode.containerInfo,na=!0,Pr(t,r,l),Ht=o,na=m;break;case 0:case 11:case 14:case 15:fn(2,l,r),ys||fn(4,l,r),Pr(t,r,l);break;case 1:ys||(hr(l,r),o=l.stateNode,typeof o.componentWillUnmount=="function"&&$f(l,r,o)),Pr(t,r,l);break;case 21:Pr(t,r,l);break;case 22:ys=(o=ys)||l.memoizedState!==null,Pr(t,r,l),ys=o;break;default:Pr(t,r,l)}}function Xf(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{tl(t)}catch(l){St(r,r.return,l)}}}function Kf(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tl(t)}catch(l){St(r,r.return,l)}}function P1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new qf),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new qf),r;default:throw Error(i(435,t.tag))}}function Vc(t,r){var l=P1(t);r.forEach(function(o){if(!l.has(o)){l.add(o);var m=G1.bind(null,t,o);o.then(m,m)}})}function ia(t,r){var l=r.deletions;if(l!==null)for(var o=0;o<l.length;o++){var m=l[o],g=t,j=r,R=j;e:for(;R!==null;){switch(R.tag){case 27:if(kn(R.type)){Ht=R.stateNode,na=!1;break e}break;case 5:Ht=R.stateNode,na=!1;break e;case 3:case 4:Ht=R.stateNode.containerInfo,na=!0;break e}R=R.return}if(Ht===null)throw Error(i(160));Yf(g,j,m),Ht=null,na=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Zf(r,t),r=r.sibling}var er=null;function Zf(t,r){var l=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ia(r,t),la(t),o&4&&(fn(3,t,t.return),Zl(3,t),fn(5,t,t.return));break;case 1:ia(r,t),la(t),o&512&&(ys||l===null||hr(l,l.return)),o&64&&Fr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var m=er;if(ia(r,t),la(t),o&512&&(ys||l===null||hr(l,l.return)),o&4){var g=l!==null?l.memoizedState:null;if(o=t.memoizedState,l===null)if(o===null)if(t.stateNode===null){e:{o=t.type,l=t.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":g=m.getElementsByTagName("title")[0],(!g||g[pa]||g[zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(o),m.head.insertBefore(g,m.querySelector("head > title"))),Ms(g,o,l),g[zt]=t,st(g),o=g;break e;case"link":var j=Zp("link","href",m).get(o+(l.href||""));if(j){for(var R=0;R<j.length;R++)if(g=j[R],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){j.splice(R,1);break t}}g=m.createElement(o),Ms(g,o,l),m.head.appendChild(g);break;case"meta":if(j=Zp("meta","content",m).get(o+(l.content||""))){for(R=0;R<j.length;R++)if(g=j[R],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){j.splice(R,1);break t}}g=m.createElement(o),Ms(g,o,l),m.head.appendChild(g);break;default:throw Error(i(468,o))}g[zt]=t,st(g),o=g}t.stateNode=o}else Qp(m,t.type,t.stateNode);else t.stateNode=Kp(m,o,t.memoizedProps);else g!==o?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,o===null?Qp(m,t.type,t.stateNode):Kp(m,o,t.memoizedProps)):o===null&&t.stateNode!==null&&N0(t,t.memoizedProps,l.memoizedProps)}break;case 27:ia(r,t),la(t),o&512&&(ys||l===null||hr(l,l.return)),l!==null&&o&4&&N0(t,t.memoizedProps,l.memoizedProps);break;case 5:if(ia(r,t),la(t),o&512&&(ys||l===null||hr(l,l.return)),t.flags&32){m=t.stateNode;try{_t(m,"")}catch(Re){St(t,t.return,Re)}}o&4&&t.stateNode!=null&&(m=t.memoizedProps,N0(t,m,l!==null?l.memoizedProps:m)),o&1024&&(S0=!0);break;case 6:if(ia(r,t),la(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,l=t.stateNode;try{l.nodeValue=o}catch(Re){St(t,t.return,Re)}}break;case 3:if(td=null,m=er,er=Jc(r.containerInfo),ia(r,t),er=m,la(t),o&4&&l!==null&&l.memoizedState.isDehydrated)try{tl(r.containerInfo)}catch(Re){St(t,t.return,Re)}S0&&(S0=!1,Qf(t));break;case 4:o=er,er=Jc(t.stateNode.containerInfo),ia(r,t),la(t),er=o;break;case 12:ia(r,t),la(t);break;case 31:ia(r,t),la(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vc(t,o)));break;case 13:ia(r,t),la(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Uc=Le()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vc(t,o)));break;case 22:m=t.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,re=Fr,de=ys;if(Fr=re||m,ys=de||q,ia(r,t),ys=de,Fr=re,la(t),o&8192)e:for(r=t.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||q||Fr||ys||ci(t)),l=null,r=t;;){if(r.tag===5||r.tag===26){if(l===null){q=l=r;try{if(g=q.stateNode,m)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{R=q.stateNode;var xe=q.memoizedProps.style,ne=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;R.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Re){St(q,q.return,Re)}}}else if(r.tag===6){if(l===null){q=r;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(Re){St(q,q.return,Re)}}}else if(r.tag===18){if(l===null){q=r;try{var le=q.stateNode;m?$p(le,!0):$p(q.stateNode,!1)}catch(Re){St(q,q.return,Re)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}o&4&&(o=t.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,Vc(t,l))));break;case 19:ia(r,t),la(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vc(t,o)));break;case 30:break;case 21:break;default:ia(r,t),la(t)}}function la(t){var r=t.flags;if(r&2){try{for(var l,o=t.return;o!==null;){if(Bf(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=k0(t);zc(t,g,m);break;case 5:var j=l.stateNode;l.flags&32&&(_t(j,""),l.flags&=-33);var R=k0(t);zc(t,R,j);break;case 3:case 4:var q=l.stateNode.containerInfo,re=k0(t);w0(t,re,q);break;default:throw Error(i(161))}}catch(de){St(t,t.return,de)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Qf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Qf(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function zr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Hf(t,r.alternate,r),r=r.sibling}function ci(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:fn(4,r,r.return),ci(r);break;case 1:hr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&$f(r,r.return,l),ci(r);break;case 27:io(r.stateNode);case 26:case 5:hr(r,r.return),ci(r);break;case 22:r.memoizedState===null&&ci(r);break;case 30:ci(r);break;default:ci(r)}t=t.sibling}}function Vr(t,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var o=r.alternate,m=t,g=r,j=g.flags;switch(g.tag){case 0:case 11:case 15:Vr(m,g,l),Zl(4,g);break;case 1:if(Vr(m,g,l),o=g,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(re){St(o,o.return,re)}if(o=g,m=o.updateQueue,m!==null){var R=o.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)Ax(q[m],R)}catch(re){St(o,o.return,re)}}l&&j&64&&Vf(g),Ql(g,g.return);break;case 27:If(g);case 26:case 5:Vr(m,g,l),l&&o===null&&j&4&&Uf(g),Ql(g,g.return);break;case 12:Vr(m,g,l);break;case 31:Vr(m,g,l),l&&j&4&&Xf(m,g);break;case 13:Vr(m,g,l),l&&j&4&&Kf(m,g);break;case 22:g.memoizedState===null&&Vr(m,g,l),Ql(g,g.return);break;case 30:break;default:Vr(m,g,l)}r=r.sibling}}function C0(t,r){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Pl(l))}function A0(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Pl(t))}function tr(t,r,l,o){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Wf(t,r,l,o),r=r.sibling}function Wf(t,r,l,o){var m=r.flags;switch(r.tag){case 0:case 11:case 15:tr(t,r,l,o),m&2048&&Zl(9,r);break;case 1:tr(t,r,l,o);break;case 3:tr(t,r,l,o),m&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Pl(t)));break;case 12:if(m&2048){tr(t,r,l,o),t=r.stateNode;try{var g=r.memoizedProps,j=g.id,R=g.onPostCommit;typeof R=="function"&&R(j,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(q){St(r,r.return,q)}}else tr(t,r,l,o);break;case 31:tr(t,r,l,o);break;case 13:tr(t,r,l,o);break;case 23:break;case 22:g=r.stateNode,j=r.alternate,r.memoizedState!==null?g._visibility&2?tr(t,r,l,o):Wl(t,r):g._visibility&2?tr(t,r,l,o):(g._visibility|=2,qi(t,r,l,o,(r.subtreeFlags&10256)!==0||!1)),m&2048&&C0(j,r);break;case 24:tr(t,r,l,o),m&2048&&A0(r.alternate,r);break;default:tr(t,r,l,o)}}function qi(t,r,l,o,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var g=t,j=r,R=l,q=o,re=j.flags;switch(j.tag){case 0:case 11:case 15:qi(g,j,R,q,m),Zl(8,j);break;case 23:break;case 22:var de=j.stateNode;j.memoizedState!==null?de._visibility&2?qi(g,j,R,q,m):Wl(g,j):(de._visibility|=2,qi(g,j,R,q,m)),m&&re&2048&&C0(j.alternate,j);break;case 24:qi(g,j,R,q,m),m&&re&2048&&A0(j.alternate,j);break;default:qi(g,j,R,q,m)}r=r.sibling}}function Wl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=t,o=r,m=o.flags;switch(o.tag){case 22:Wl(l,o),m&2048&&C0(o.alternate,o);break;case 24:Wl(l,o),m&2048&&A0(o.alternate,o);break;default:Wl(l,o)}r=r.sibling}}var Jl=8192;function Hi(t,r,l){if(t.subtreeFlags&Jl)for(t=t.child;t!==null;)Jf(t,r,l),t=t.sibling}function Jf(t,r,l){switch(t.tag){case 26:Hi(t,r,l),t.flags&Jl&&t.memoizedState!==null&&kw(l,er,t.memoizedState,t.memoizedProps);break;case 5:Hi(t,r,l);break;case 3:case 4:var o=er;er=Jc(t.stateNode.containerInfo),Hi(t,r,l),er=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Jl,Jl=16777216,Hi(t,r,l),Jl=o):Hi(t,r,l));break;default:Hi(t,r,l)}}function ep(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function eo(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var o=r[l];Cs=o,sp(o,t)}ep(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tp(t),t=t.sibling}function tp(t){switch(t.tag){case 0:case 11:case 15:eo(t),t.flags&2048&&fn(9,t,t.return);break;case 3:eo(t);break;case 12:eo(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,$c(t)):eo(t);break;default:eo(t)}}function $c(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var o=r[l];Cs=o,sp(o,t)}ep(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:fn(8,r,r.return),$c(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,$c(r));break;default:$c(r)}t=t.sibling}}function sp(t,r){for(;Cs!==null;){var l=Cs;switch(l.tag){case 0:case 11:case 15:fn(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Pl(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,Cs=o;else e:for(l=t;Cs!==null;){o=Cs;var m=o.sibling,g=o.return;if(Gf(o),o===l){Cs=null;break e}if(m!==null){m.return=g,Cs=m;break e}Cs=g}}}var z1={getCacheForType:function(t){var r=Os(xs),l=r.data.get(t);return l===void 0&&(l=t(),r.data.set(t,l)),l},cacheSignal:function(){return Os(xs).controller.signal}},V1=typeof WeakMap=="function"?WeakMap:Map,ft=0,Ft=null,it=null,ot=0,wt=0,Aa=null,pn=!1,Gi=!1,T0=!1,$r=0,as=0,yn=0,di=0,E0=0,Ta=0,Yi=0,to=null,oa=null,R0=!1,Uc=0,ap=0,Bc=1/0,Ic=null,bn=null,ks=0,vn=null,Xi=null,Ur=0,D0=0,O0=null,rp=null,so=0,_0=null;function Ea(){return(ft&2)!==0&&ot!==0?ot&-ot:$.T!==null?V0():Ys()}function np(){if(Ta===0)if((ot&536870912)===0||dt){var t=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),Ta=t}else Ta=536870912;return t=Sa.current,t!==null&&(t.flags|=32),Ta}function ca(t,r,l){(t===Ft&&(wt===2||wt===9)||t.cancelPendingCommit!==null)&&(Ki(t,0),jn(t,ot,Ta,!1)),me(t,l),((ft&2)===0||t!==Ft)&&(t===Ft&&((ft&2)===0&&(di|=l),as===4&&jn(t,ot,Ta,!1)),xr(t))}function ip(t,r,l){if((ft&6)!==0)throw Error(i(327));var o=!l&&(r&127)===0&&(r&t.expiredLanes)===0||Gs(t,r),m=o?B1(t,r):L0(t,r,!0),g=o;do{if(m===0){Gi&&!o&&jn(t,r,0,!1);break}else{if(l=t.current.alternate,g&&!$1(l)){m=L0(t,r,!1),g=!1;continue}if(m===2){if(g=r,t.errorRecoveryDisabledLanes&g)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){r=j;e:{var R=t;m=to;var q=R.current.memoizedState.isDehydrated;if(q&&(Ki(R,j).flags|=256),j=L0(R,j,!1),j!==2){if(T0&&!q){R.errorRecoveryDisabledLanes|=g,di|=g,m=4;break e}g=oa,oa=m,g!==null&&(oa===null?oa=g:oa.push.apply(oa,g))}m=j}if(g=!1,m!==2)continue}}if(m===1){Ki(t,0),jn(t,r,0,!0);break}e:{switch(o=t,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:jn(o,r,Ta,!pn);break e;case 2:oa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=Uc+300-Le(),10<m)){if(jn(o,r,Ta,!pn),ls(o,0,!0)!==0)break e;Ur=r,o.timeoutHandle=Pp(lp.bind(null,o,l,oa,Ic,R0,r,Ta,di,Yi,pn,g,"Throttled",-0,0),m);break e}lp(o,l,oa,Ic,R0,r,Ta,di,Yi,pn,g,null,-0,0)}}break}while(!0);xr(t)}function lp(t,r,l,o,m,g,j,R,q,re,de,xe,ne,le){if(t.timeoutHandle=-1,xe=r.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qa},Jf(r,g,xe);var Re=(g&62914560)===g?Uc-Le():(g&4194048)===g?ap-Le():0;if(Re=ww(xe,Re),Re!==null){Ur=g,t.cancelPendingCommit=Re(xp.bind(null,t,r,g,l,o,m,j,R,q,de,xe,null,ne,le)),jn(t,g,j,!re);return}}xp(t,r,g,l,o,m,j,R,q)}function $1(t){for(var r=t;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var m=l[o],g=m.getSnapshot;m=m.value;try{if(!ka(g(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function jn(t,r,l,o){r&=~E0,r&=~di,t.suspendedLanes|=r,t.pingedLanes&=~r,o&&(t.warmLanes|=r),o=t.expirationTimes;for(var m=r;0<m;){var g=31-kt(m),j=1<<g;o[g]=-1,m&=~j}l!==0&&tt(t,l,r)}function qc(){return(ft&6)===0?(ao(0),!1):!0}function M0(){if(it!==null){if(wt===0)var t=it.return;else t=it,Rr=ti=null,Zu(t),Vi=null,Vl=0,t=it;for(;t!==null;)zf(t.alternate,t),t=t.return;it=null}}function Ki(t,r){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,iw(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ur=0,M0(),Ft=t,it=l=Tr(t.current,null),ot=r,wt=0,Aa=null,pn=!1,Gi=Gs(t,r),T0=!1,Yi=Ta=E0=di=yn=as=0,oa=to=null,R0=!1,(r&8)!==0&&(r|=r&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=r;0<o;){var m=31-kt(o),g=1<<m;r|=t[m],o&=~g}return $r=r,uc(),l}function op(t,r){We=null,$.H=Yl,r===zi||r===bc?(r=kx(),wt=3):r===zu?(r=kx(),wt=4):wt=r===m0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Aa=r,it===null&&(as=1,_c(t,Pa(r,t.current)))}function cp(){var t=Sa.current;return t===null?!0:(ot&4194048)===ot?Ua===null:(ot&62914560)===ot||(ot&536870912)!==0?t===Ua:!1}function dp(){var t=$.H;return $.H=Yl,t===null?Yl:t}function up(){var t=$.A;return $.A=z1,t}function Hc(){as=4,pn||(ot&4194048)!==ot&&Sa.current!==null||(Gi=!0),(yn&134217727)===0&&(di&134217727)===0||Ft===null||jn(Ft,ot,Ta,!1)}function L0(t,r,l){var o=ft;ft|=2;var m=dp(),g=up();(Ft!==t||ot!==r)&&(Ic=null,Ki(t,r)),r=!1;var j=as;e:do try{if(wt!==0&&it!==null){var R=it,q=Aa;switch(wt){case 8:M0(),j=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(r=!0);var re=wt;if(wt=0,Aa=null,Zi(t,R,q,re),l&&Gi){j=0;break e}break;default:re=wt,wt=0,Aa=null,Zi(t,R,q,re)}}U1(),j=as;break}catch(de){op(t,de)}while(!0);return r&&t.shellSuspendCounter++,Rr=ti=null,ft=o,$.H=m,$.A=g,it===null&&(Ft=null,ot=0,uc()),j}function U1(){for(;it!==null;)mp(it)}function B1(t,r){var l=ft;ft|=2;var o=dp(),m=up();Ft!==t||ot!==r?(Ic=null,Bc=Le()+500,Ki(t,r)):Gi=Gs(t,r);e:do try{if(wt!==0&&it!==null){r=it;var g=Aa;t:switch(wt){case 1:wt=0,Aa=null,Zi(t,r,g,1);break;case 2:case 9:if(jx(g)){wt=0,Aa=null,gp(r);break}r=function(){wt!==2&&wt!==9||Ft!==t||(wt=7),xr(t)},g.then(r,r);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:jx(g)?(wt=0,Aa=null,gp(r)):(wt=0,Aa=null,Zi(t,r,g,7));break;case 5:var j=null;switch(it.tag){case 26:j=it.memoizedState;case 5:case 27:var R=it;if(j?Wp(j):R.stateNode.complete){wt=0,Aa=null;var q=R.sibling;if(q!==null)it=q;else{var re=R.return;re!==null?(it=re,Gc(re)):it=null}break t}}wt=0,Aa=null,Zi(t,r,g,5);break;case 6:wt=0,Aa=null,Zi(t,r,g,6);break;case 8:M0(),as=6;break e;default:throw Error(i(462))}}I1();break}catch(de){op(t,de)}while(!0);return Rr=ti=null,$.H=o,$.A=m,ft=l,it!==null?0:(Ft=null,ot=0,uc(),as)}function I1(){for(;it!==null&&!zs();)mp(it)}function mp(t){var r=Ff(t.alternate,t,$r);t.memoizedProps=t.pendingProps,r===null?Gc(t):it=r}function gp(t){var r=t,l=r.alternate;switch(r.tag){case 15:case 0:r=Rf(l,r,r.pendingProps,r.type,void 0,ot);break;case 11:r=Rf(l,r,r.pendingProps,r.type.render,r.ref,ot);break;case 5:Zu(r);default:zf(l,r),r=it=dx(r,$r),r=Ff(l,r,$r)}t.memoizedProps=t.pendingProps,r===null?Gc(t):it=r}function Zi(t,r,l,o){Rr=ti=null,Zu(r),Vi=null,Vl=0;var m=r.return;try{if(D1(t,m,r,l,ot)){as=1,_c(t,Pa(l,t.current)),it=null;return}}catch(g){if(m!==null)throw it=m,g;as=1,_c(t,Pa(l,t.current)),it=null;return}r.flags&32768?(dt||o===1?t=!0:Gi||(ot&536870912)!==0?t=!1:(pn=t=!0,(o===2||o===9||o===3||o===6)&&(o=Sa.current,o!==null&&o.tag===13&&(o.flags|=16384))),hp(r,t)):Gc(r)}function Gc(t){var r=t;do{if((r.flags&32768)!==0){hp(r,pn);return}t=r.return;var l=M1(r.alternate,r,$r);if(l!==null){it=l;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);as===0&&(as=5)}function hp(t,r){do{var l=L1(t.alternate,t);if(l!==null){l.flags&=32767,it=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(t=t.sibling,t!==null)){it=t;return}it=t=l}while(t!==null);as=6,it=null}function xp(t,r,l,o,m,g,j,R,q){t.cancelPendingCommit=null;do Yc();while(ks!==0);if((ft&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=ku,ke(t,l,g,j,R,q),t===Ft&&(it=Ft=null,ot=0),Xi=r,vn=t,Ur=l,D0=g,O0=m,rp=o,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Y1(ws,function(){return vp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||o){o=$.T,$.T=null,m=_.p,_.p=2,j=ft,ft|=4;try{F1(t,r,l)}finally{ft=j,_.p=m,$.T=o}}ks=1,fp(),pp(),yp()}}function fp(){if(ks===1){ks=0;var t=vn,r=Xi,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var o=_.p;_.p=2;var m=ft;ft|=4;try{Zf(r,t);var g=Y0,j=tx(t.containerInfo),R=g.focusedElem,q=g.selectionRange;if(j!==R&&R&&R.ownerDocument&&ex(R.ownerDocument.documentElement,R)){if(q!==null&&yu(R)){var re=q.start,de=q.end;if(de===void 0&&(de=re),"selectionStart"in R)R.selectionStart=re,R.selectionEnd=Math.min(de,R.value.length);else{var xe=R.ownerDocument||document,ne=xe&&xe.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Re=R.textContent.length,$e=Math.min(q.start,Re),Dt=q.end===void 0?$e:Math.min(q.end,Re);!le.extend&&$e>Dt&&(j=Dt,Dt=$e,$e=j);var W=Jh(R,$e),X=Jh(R,Dt);if(W&&X&&(le.rangeCount!==1||le.anchorNode!==W.node||le.anchorOffset!==W.offset||le.focusNode!==X.node||le.focusOffset!==X.offset)){var ae=xe.createRange();ae.setStart(W.node,W.offset),le.removeAllRanges(),$e>Dt?(le.addRange(ae),le.extend(X.node,X.offset)):(ae.setEnd(X.node,X.offset),le.addRange(ae))}}}}for(xe=[],le=R;le=le.parentNode;)le.nodeType===1&&xe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<xe.length;R++){var ge=xe[R];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}nd=!!G0,Y0=G0=null}finally{ft=m,_.p=o,$.T=l}}t.current=r,ks=2}}function pp(){if(ks===2){ks=0;var t=vn,r=Xi,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var o=_.p;_.p=2;var m=ft;ft|=4;try{Hf(t,r.alternate,r)}finally{ft=m,_.p=o,$.T=l}}ks=3}}function yp(){if(ks===4||ks===3){ks=0,Js();var t=vn,r=Xi,l=Ur,o=rp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ks=5:(ks=0,Xi=vn=null,bp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(bn=null),os(l),r=r.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot($s,r,void 0,(r.current.flags&128)===128)}catch{}if(o!==null){r=$.T,m=_.p,_.p=2,$.T=null;try{for(var g=t.onRecoverableError,j=0;j<o.length;j++){var R=o[j];g(R.value,{componentStack:R.stack})}}finally{$.T=r,_.p=m}}(Ur&3)!==0&&Yc(),xr(t),m=t.pendingLanes,(l&261930)!==0&&(m&42)!==0?t===_0?so++:(so=0,_0=t):so=0,ao(0)}}function bp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Pl(r)))}function Yc(){return fp(),pp(),yp(),vp()}function vp(){if(ks!==5)return!1;var t=vn,r=D0;D0=0;var l=os(Ur),o=$.T,m=_.p;try{_.p=32>l?32:l,$.T=null,l=O0,O0=null;var g=vn,j=Ur;if(ks=0,Xi=vn=null,Ur=0,(ft&6)!==0)throw Error(i(331));var R=ft;if(ft|=4,tp(g.current),Wf(g,g.current,j,l),ft=R,ao(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot($s,g)}catch{}return!0}finally{_.p=m,$.T=o,bp(t,r)}}function jp(t,r,l){r=Pa(l,r),r=u0(t.stateNode,r,2),t=gn(t,r,2),t!==null&&(me(t,2),xr(t))}function St(t,r,l){if(t.tag===3)jp(t,t,l);else for(;r!==null;){if(r.tag===3){jp(r,t,l);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(bn===null||!bn.has(o))){t=Pa(l,t),l=Nf(2),o=gn(r,l,2),o!==null&&(kf(l,o,r,t),me(o,2),xr(o));break}}r=r.return}}function F0(t,r,l){var o=t.pingCache;if(o===null){o=t.pingCache=new V1;var m=new Set;o.set(r,m)}else m=o.get(r),m===void 0&&(m=new Set,o.set(r,m));m.has(l)||(T0=!0,m.add(l),t=q1.bind(null,t,r,l),r.then(t,t))}function q1(t,r,l){var o=t.pingCache;o!==null&&o.delete(r),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Ft===t&&(ot&l)===l&&(as===4||as===3&&(ot&62914560)===ot&&300>Le()-Uc?(ft&2)===0&&Ki(t,0):E0|=l,Yi===ot&&(Yi=0)),xr(t)}function Np(t,r){r===0&&(r=es()),t=Wn(t,r),t!==null&&(me(t,r),xr(t))}function H1(t){var r=t.memoizedState,l=0;r!==null&&(l=r.retryLane),Np(t,l)}function G1(t,r){var l=0;switch(t.tag){case 31:case 13:var o=t.stateNode,m=t.memoizedState;m!==null&&(l=m.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(r),Np(t,l)}function Y1(t,r){return Ut(t,r)}var Xc=null,Qi=null,P0=!1,Kc=!1,z0=!1,Nn=0;function xr(t){t!==Qi&&t.next===null&&(Qi===null?Xc=Qi=t:Qi=Qi.next=t),Kc=!0,P0||(P0=!0,K1())}function ao(t,r){if(!z0&&Kc){z0=!0;do for(var l=!1,o=Xc;o!==null;){if(t!==0){var m=o.pendingLanes;if(m===0)var g=0;else{var j=o.suspendedLanes,R=o.pingedLanes;g=(1<<31-kt(42|t)+1)-1,g&=m&~(j&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Cp(o,g))}else g=ot,g=ls(o,o===Ft?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Gs(o,g)||(l=!0,Cp(o,g));o=o.next}while(l);z0=!1}}function X1(){kp()}function kp(){Kc=P0=!1;var t=0;Nn!==0&&nw()&&(t=Nn);for(var r=Le(),l=null,o=Xc;o!==null;){var m=o.next,g=wp(o,r);g===0?(o.next=null,l===null?Xc=m:l.next=m,m===null&&(Qi=l)):(l=o,(t!==0||(g&3)!==0)&&(Kc=!0)),o=m}ks!==0&&ks!==5||ao(t),Nn!==0&&(Nn=0)}function wp(t,r){for(var l=t.suspendedLanes,o=t.pingedLanes,m=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var j=31-kt(g),R=1<<j,q=m[j];q===-1?((R&l)===0||(R&o)!==0)&&(m[j]=Ka(R,r)):q<=r&&(t.expiredLanes|=R),g&=~R}if(r=Ft,l=ot,l=ls(t,t===r?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,l===0||t===r&&(wt===2||wt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Nt(o),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Gs(t,l)){if(r=l&-l,r===t.callbackPriority)return r;switch(o!==null&&Nt(o),os(l)){case 2:case 8:l=ms;break;case 32:l=ws;break;case 268435456:l=Wt;break;default:l=ws}return o=Sp.bind(null,t),l=Ut(l,o),t.callbackPriority=r,t.callbackNode=l,r}return o!==null&&o!==null&&Nt(o),t.callbackPriority=2,t.callbackNode=null,2}function Sp(t,r){if(ks!==0&&ks!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Yc()&&t.callbackNode!==l)return null;var o=ot;return o=ls(t,t===Ft?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(ip(t,o,r),wp(t,Le()),t.callbackNode!=null&&t.callbackNode===l?Sp.bind(null,t):null)}function Cp(t,r){if(Yc())return null;ip(t,r,!0)}function K1(){lw(function(){(ft&6)!==0?Ut(ns,X1):kp()})}function V0(){if(Nn===0){var t=Fi;t===0&&(t=rt,rt<<=1,(rt&261888)===0&&(rt=256)),Nn=t}return Nn}function Ap(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:an(""+t)}function Tp(t,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,t.id&&l.setAttribute("form",t.id),r.parentNode.insertBefore(l,r),t=new FormData(t),l.parentNode.removeChild(l),t}function Z1(t,r,l,o,m){if(r==="submit"&&l&&l.stateNode===m){var g=Ap((m[gs]||null).action),j=o.submitter;j&&(r=(r=j[gs]||null)?Ap(r.formAction):j.getAttribute("formAction"),r!==null&&(g=r,j=null));var R=new Ar("action","action",null,o,m);t.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Nn!==0){var q=j?Tp(m,j):new FormData(m);n0(l,{pending:!0,data:q,method:m.method,action:g},null,q)}}else typeof g=="function"&&(R.preventDefault(),q=j?Tp(m,j):new FormData(m),n0(l,{pending:!0,data:q,method:m.method,action:g},g,q))},currentTarget:m}]})}}for(var $0=0;$0<Nu.length;$0++){var U0=Nu[$0],Q1=U0.toLowerCase(),W1=U0[0].toUpperCase()+U0.slice(1);Ja(Q1,"on"+W1)}Ja(rx,"onAnimationEnd"),Ja(nx,"onAnimationIteration"),Ja(ix,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(h1,"onTransitionRun"),Ja(x1,"onTransitionStart"),Ja(f1,"onTransitionCancel"),Ja(lx,"onTransitionEnd"),B("onMouseEnter",["mouseout","mouseover"]),B("onMouseLeave",["mouseout","mouseover"]),B("onPointerEnter",["pointerout","pointerover"]),B("onPointerLeave",["pointerout","pointerover"]),va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),va("onBeforeInput",["compositionend","keypress","textInput","paste"]),va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ro));function Ep(t,r){r=(r&4)!==0;for(var l=0;l<t.length;l++){var o=t[l],m=o.event;o=o.listeners;e:{var g=void 0;if(r)for(var j=o.length-1;0<=j;j--){var R=o[j],q=R.instance,re=R.currentTarget;if(R=R.listener,q!==g&&m.isPropagationStopped())break e;g=R,m.currentTarget=re;try{g(m)}catch(de){dc(de)}m.currentTarget=null,g=q}else for(j=0;j<o.length;j++){if(R=o[j],q=R.instance,re=R.currentTarget,R=R.listener,q!==g&&m.isPropagationStopped())break e;g=R,m.currentTarget=re;try{g(m)}catch(de){dc(de)}m.currentTarget=null,g=q}}}}function lt(t,r){var l=r[Ma];l===void 0&&(l=r[Ma]=new Set);var o=t+"__bubble";l.has(o)||(Rp(r,t,2,!1),l.add(o))}function B0(t,r,l){var o=0;r&&(o|=4),Rp(l,t,o,r)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function I0(t){if(!t[Zc]){t[Zc]=!0,aa.forEach(function(l){l!=="selectionchange"&&(J1.has(l)||B0(l,!1,t),B0(l,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Zc]||(r[Zc]=!0,B0("selectionchange",!1,r))}}function Rp(t,r,l,o){switch(ny(r)){case 2:var m=Aw;break;case 8:m=Tw;break;default:m=rm}l=m.bind(null,r,l,t),m=void 0,!ee||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),o?m!==void 0?t.addEventListener(r,l,{capture:!0,passive:m}):t.addEventListener(r,l,!0):m!==void 0?t.addEventListener(r,l,{passive:m}):t.addEventListener(r,l,!1)}function q0(t,r,l,o,m){var g=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var j=o.tag;if(j===3||j===4){var R=o.stateNode.containerInfo;if(R===m)break;if(j===4)for(j=o.return;j!==null;){var q=j.tag;if((q===3||q===4)&&j.stateNode.containerInfo===m)return;j=j.return}for(;R!==null;){if(j=sa(R),j===null)return;if(q=j.tag,q===5||q===6||q===26||q===27){o=g=j;continue e}R=R.parentNode}}o=o.return}lc(function(){var re=g,de=Al(l),xe=[];e:{var ne=ox.get(t);if(ne!==void 0){var le=Ar,Re=t;switch(t){case"keypress":if(vt(l)===0)break e;case"keydown":case"keyup":le=Gk;break;case"focusin":Re="focus",le=Rs;break;case"focusout":Re="blur",le=Rs;break;case"beforeblur":case"afterblur":le=Rs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Kk;break;case rx:case nx:case ix:le=Wa;break;case lx:le=Qk;break;case"scroll":case"scrollend":le=Fh;break;case"wheel":le=Jk;break;case"copy":case"cut":case"paste":le=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Vh;break;case"toggle":case"beforetoggle":le=t1}var $e=(r&4)!==0,Dt=!$e&&(t==="scroll"||t==="scrollend"),W=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var X=re,ae;X!==null;){var ge=X;if(ae=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ae===null||W===null||(ge=Hn(X,W),ge!=null&&$e.push(no(X,ge,ae))),Dt)break;X=X.return}0<$e.length&&(ne=new le(ne,Re,null,l,de),xe.push({event:ne,listeners:$e}))}}if((r&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&l!==Cl&&(Re=l.relatedTarget||l.fromElement)&&(sa(Re)||Re[Es]))break e;if((le||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Re=l.relatedTarget||l.toElement,le=re,Re=Re?sa(Re):null,Re!==null&&(Dt=d(Re),$e=Re.tag,Re!==Dt||$e!==5&&$e!==27&&$e!==6)&&(Re=null)):(le=null,Re=re),le!==Re)){if($e=nn,ge="onMouseLeave",W="onMouseEnter",X="mouse",(t==="pointerout"||t==="pointerover")&&($e=Vh,ge="onPointerLeave",W="onPointerEnter",X="pointer"),Dt=le==null?ne:La(le),ae=Re==null?ne:La(Re),ne=new $e(ge,X+"leave",le,l,de),ne.target=Dt,ne.relatedTarget=ae,ge=null,sa(de)===re&&($e=new $e(W,X+"enter",Re,l,de),$e.target=ae,$e.relatedTarget=Dt,ge=$e),Dt=ge,le&&Re)t:{for($e=ew,W=le,X=Re,ae=0,ge=W;ge;ge=$e(ge))ae++;ge=0;for(var Pe=X;Pe;Pe=$e(Pe))ge++;for(;0<ae-ge;)W=$e(W),ae--;for(;0<ge-ae;)X=$e(X),ge--;for(;ae--;){if(W===X||X!==null&&W===X.alternate){$e=W;break t}W=$e(W),X=$e(X)}$e=null}else $e=null;le!==null&&Dp(xe,ne,le,$e,!1),Re!==null&&Dt!==null&&Dp(xe,Dt,Re,$e,!0)}}e:{if(ne=re?La(re):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var ht=Yh;else if(Hh(ne))if(Xh)ht=u1;else{ht=c1;var _e=o1}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?re&&sn(re.elementType)&&(ht=Yh):ht=d1;if(ht&&(ht=ht(t,re))){Gh(xe,ht,l,de);break e}_e&&_e(t,ne,re),t==="focusout"&&re&&ne.type==="number"&&re.memoizedProps.value!=null&&Xe(ne,"number",ne.value)}switch(_e=re?La(re):window,t){case"focusin":(Hh(_e)||_e.contentEditable==="true")&&(Ti=_e,bu=re,Ml=null);break;case"focusout":Ml=bu=Ti=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,sx(xe,l,de);break;case"selectionchange":if(g1)break;case"keydown":case"keyup":sx(xe,l,de)}var Je;if(xu)e:{switch(t){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Ai?Ih(t,l)&&(ct="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(ct="onCompositionStart");ct&&($h&&l.locale!=="ko"&&(Ai||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Ai&&(Je=Mt()):(Ce=de,Me="value"in Ce?Ce.value:Ce.textContent,Ai=!0)),_e=Qc(re,ct),0<_e.length&&(ct=new zh(ct,t,null,l,de),xe.push({event:ct,listeners:_e}),Je?ct.data=Je:(Je=qh(l),Je!==null&&(ct.data=Je)))),(Je=a1?r1(t,l):n1(t,l))&&(ct=Qc(re,"onBeforeInput"),0<ct.length&&(_e=new zh("onBeforeInput","beforeinput",null,l,de),xe.push({event:_e,listeners:ct}),_e.data=Je)),Z1(xe,t,re,l,de)}Ep(xe,r)})}function no(t,r,l){return{instance:t,listener:r,currentTarget:l}}function Qc(t,r){for(var l=r+"Capture",o=[];t!==null;){var m=t,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Hn(t,l),m!=null&&o.unshift(no(t,m,g)),m=Hn(t,r),m!=null&&o.push(no(t,m,g))),t.tag===3)return o;t=t.return}return[]}function ew(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Dp(t,r,l,o,m){for(var g=r._reactName,j=[];l!==null&&l!==o;){var R=l,q=R.alternate,re=R.stateNode;if(R=R.tag,q!==null&&q===o)break;R!==5&&R!==26&&R!==27||re===null||(q=re,m?(re=Hn(l,g),re!=null&&j.unshift(no(l,re,q))):m||(re=Hn(l,g),re!=null&&j.push(no(l,re,q)))),l=l.return}j.length!==0&&t.push({event:r,listeners:j})}var tw=/\r\n?/g,sw=/\u0000|\uFFFD/g;function Op(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(sw,"")}function _p(t,r){return r=Op(r),Op(t)===r}function Rt(t,r,l,o,m,g){switch(l){case"children":typeof o=="string"?r==="body"||r==="textarea"&&o===""||_t(t,o):(typeof o=="number"||typeof o=="bigint")&&r!=="body"&&_t(t,""+o);break;case"className":fe(t,"class",o);break;case"tabIndex":fe(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":fe(t,l,o);break;case"style":ja(t,o,g);break;case"data":if(r!=="object"){fe(t,"data",o);break}case"src":case"href":if(o===""&&(r!=="a"||l!=="href")){t.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=an(""+o),t.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(r!=="input"&&Rt(t,r,"name",m.name,m,null),Rt(t,r,"formEncType",m.formEncType,m,null),Rt(t,r,"formMethod",m.formMethod,m,null),Rt(t,r,"formTarget",m.formTarget,m,null)):(Rt(t,r,"encType",m.encType,m,null),Rt(t,r,"method",m.method,m,null),Rt(t,r,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=an(""+o),t.setAttribute(l,o);break;case"onClick":o!=null&&(t.onclick=Qa);break;case"onScroll":o!=null&&lt("scroll",t);break;case"onScrollEnd":o!=null&&lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}l=an(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""+o):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":o===!0?t.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,o):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(l,o):t.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(l):t.setAttribute(l,o);break;case"popover":lt("beforetoggle",t),lt("toggle",t),he(t,"popover",o);break;case"xlinkActuate":Te(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Te(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Te(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Te(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Te(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Te(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Te(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Te(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Te(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":he(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=dr.get(l)||l,he(t,l,o))}}function H0(t,r,l,o,m,g){switch(l){case"style":ja(t,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof o=="string"?_t(t,o):(typeof o=="number"||typeof o=="bigint")&&_t(t,""+o);break;case"onScroll":o!=null&&lt("scroll",t);break;case"onScrollEnd":o!=null&&lt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),g=t[gs]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(r,g,m),typeof o=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(r,o,m);break e}l in t?t[l]=o:o===!0?t.setAttribute(l,""):he(t,l,o)}}}function Ms(t,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",t),lt("load",t);var o=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var j=l[g];if(j!=null)switch(g){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rt(t,r,g,j,l,null)}}m&&Rt(t,r,"srcSet",l.srcSet,l,null),o&&Rt(t,r,"src",l.src,l,null);return;case"input":lt("invalid",t);var R=g=j=m=null,q=null,re=null;for(o in l)if(l.hasOwnProperty(o)){var de=l[o];if(de!=null)switch(o){case"name":m=de;break;case"type":j=de;break;case"checked":q=de;break;case"defaultChecked":re=de;break;case"value":g=de;break;case"defaultValue":R=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:Rt(t,r,o,de,l,null)}}Ks(t,g,R,q,re,j,m,!1);return;case"select":lt("invalid",t),o=j=g=null;for(m in l)if(l.hasOwnProperty(m)&&(R=l[m],R!=null))switch(m){case"value":g=R;break;case"defaultValue":j=R;break;case"multiple":o=R;default:Rt(t,r,m,R,l,null)}r=g,l=j,t.multiple=!!o,r!=null?Bt(t,!!o,r,!1):l!=null&&Bt(t,!!o,l,!0);return;case"textarea":lt("invalid",t),g=m=o=null;for(j in l)if(l.hasOwnProperty(j)&&(R=l[j],R!=null))switch(j){case"value":o=R;break;case"defaultValue":m=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Rt(t,r,j,R,l,null)}hs(t,o,m,g);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(o=l[q],o!=null))switch(q){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Rt(t,r,q,o,l,null)}return;case"dialog":lt("beforetoggle",t),lt("toggle",t),lt("cancel",t),lt("close",t);break;case"iframe":case"object":lt("load",t);break;case"video":case"audio":for(o=0;o<ro.length;o++)lt(ro[o],t);break;case"image":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"embed":case"source":case"link":lt("error",t),lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in l)if(l.hasOwnProperty(re)&&(o=l[re],o!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rt(t,r,re,o,l,null)}return;default:if(sn(r)){for(de in l)l.hasOwnProperty(de)&&(o=l[de],o!==void 0&&H0(t,r,de,o,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(o=l[R],o!=null&&Rt(t,r,R,o,l,null))}function aw(t,r,l,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,j=null,R=null,q=null,re=null,de=null;for(le in l){var xe=l[le];if(l.hasOwnProperty(le)&&xe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":q=xe;default:o.hasOwnProperty(le)||Rt(t,r,le,null,o,xe)}}for(var ne in o){var le=o[ne];if(xe=l[ne],o.hasOwnProperty(ne)&&(le!=null||xe!=null))switch(ne){case"type":g=le;break;case"name":m=le;break;case"checked":re=le;break;case"defaultChecked":de=le;break;case"value":j=le;break;case"defaultValue":R=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:le!==xe&&Rt(t,r,ne,le,o,xe)}}Ns(t,j,R,q,re,de,g,m);return;case"select":le=j=R=ne=null;for(g in l)if(q=l[g],l.hasOwnProperty(g)&&q!=null)switch(g){case"value":break;case"multiple":le=q;default:o.hasOwnProperty(g)||Rt(t,r,g,null,o,q)}for(m in o)if(g=o[m],q=l[m],o.hasOwnProperty(m)&&(g!=null||q!=null))switch(m){case"value":ne=g;break;case"defaultValue":R=g;break;case"multiple":j=g;default:g!==q&&Rt(t,r,m,g,o,q)}r=R,l=j,o=le,ne!=null?Bt(t,!!l,ne,!1):!!o!=!!l&&(r!=null?Bt(t,!!l,r,!0):Bt(t,!!l,l?[]:"",!1));return;case"textarea":le=ne=null;for(R in l)if(m=l[R],l.hasOwnProperty(R)&&m!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Rt(t,r,R,null,o,m)}for(j in o)if(m=o[j],g=l[j],o.hasOwnProperty(j)&&(m!=null||g!=null))switch(j){case"value":ne=m;break;case"defaultValue":le=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&Rt(t,r,j,m,o,g)}In(t,ne,le);return;case"option":for(var Re in l)if(ne=l[Re],l.hasOwnProperty(Re)&&ne!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:Rt(t,r,Re,null,o,ne)}for(q in o)if(ne=o[q],le=l[q],o.hasOwnProperty(q)&&ne!==le&&(ne!=null||le!=null))switch(q){case"selected":t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Rt(t,r,q,ne,o,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in l)ne=l[$e],l.hasOwnProperty($e)&&ne!=null&&!o.hasOwnProperty($e)&&Rt(t,r,$e,null,o,ne);for(re in o)if(ne=o[re],le=l[re],o.hasOwnProperty(re)&&ne!==le&&(ne!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,r));break;default:Rt(t,r,re,ne,o,le)}return;default:if(sn(r)){for(var Dt in l)ne=l[Dt],l.hasOwnProperty(Dt)&&ne!==void 0&&!o.hasOwnProperty(Dt)&&H0(t,r,Dt,void 0,o,ne);for(de in o)ne=o[de],le=l[de],!o.hasOwnProperty(de)||ne===le||ne===void 0&&le===void 0||H0(t,r,de,ne,o,le);return}}for(var W in l)ne=l[W],l.hasOwnProperty(W)&&ne!=null&&!o.hasOwnProperty(W)&&Rt(t,r,W,null,o,ne);for(xe in o)ne=o[xe],le=l[xe],!o.hasOwnProperty(xe)||ne===le||ne==null&&le==null||Rt(t,r,xe,ne,o,le)}function Mp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,l=performance.getEntriesByType("resource"),o=0;o<l.length;o++){var m=l[o],g=m.transferSize,j=m.initiatorType,R=m.duration;if(g&&R&&Mp(j)){for(j=0,R=m.responseEnd,o+=1;o<l.length;o++){var q=l[o],re=q.startTime;if(re>R)break;var de=q.transferSize,xe=q.initiatorType;de&&Mp(xe)&&(q=q.responseEnd,j+=de*(q<R?1:(R-re)/(q-re)))}if(--o,r+=8*(g+j)/(m.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var G0=null,Y0=null;function Wc(t){return t.nodeType===9?t:t.ownerDocument}function Lp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fp(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function X0(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var K0=null;function nw(){var t=window.event;return t&&t.type==="popstate"?t===K0?!1:(K0=t,!0):(K0=null,!1)}var Pp=typeof setTimeout=="function"?setTimeout:void 0,iw=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,lw=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(t){return zp.resolve(null).then(t).catch(ow)}:Pp;function ow(t){setTimeout(function(){throw t})}function kn(t){return t==="head"}function Vp(t,r){var l=r,o=0;do{var m=l.nextSibling;if(t.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(o===0){t.removeChild(m),tl(r);return}o--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")o++;else if(l==="html")io(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,io(l);for(var g=l.firstChild;g;){var j=g.nextSibling,R=g.nodeName;g[pa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=j}}else l==="body"&&io(t.ownerDocument.body);l=m}while(l);tl(r)}function $p(t,r){var l=t;t=0;do{var o=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),o&&o.nodeType===8)if(l=o.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=o}while(l)}function Z0(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Z0(l),Za(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function cw(t,r,l,o){for(;t.nodeType===1;){var m=l;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[pa])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Ba(t.nextSibling),t===null)break}return null}function dw(t,r,l){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Ba(t.nextSibling),t===null))return null;return t}function Up(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ba(t.nextSibling),t===null))return null;return t}function Q0(t){return t.data==="$?"||t.data==="$~"}function W0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function uw(t,r){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||l.readyState!=="loading")r();else{var o=function(){r(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Ba(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var J0=null;function Bp(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(r===0)return Ba(t.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}t=t.nextSibling}return null}function Ip(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return t;r--}else l!=="/$"&&l!=="/&"||r++}t=t.previousSibling}return null}function qp(t,r,l){switch(r=Wc(l),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function io(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Za(t)}var Ia=new Map,Hp=new Set;function Jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Br=_.d;_.d={f:mw,r:gw,D:hw,C:xw,L:fw,m:pw,X:bw,S:yw,M:vw};function mw(){var t=Br.f(),r=qc();return t||r}function gw(t){var r=ya(t);r!==null&&r.tag===5&&r.type==="form"?of(r):Br.r(t)}var Wi=typeof document>"u"?null:document;function Gp(t,r,l){var o=Wi;if(o&&typeof r=="string"&&r){var m=Ot(r);m='link[rel="'+t+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Hp.has(m)||(Hp.add(m),t={rel:t,crossOrigin:l,href:r},o.querySelector(m)===null&&(r=o.createElement("link"),Ms(r,"link",t),st(r),o.head.appendChild(r)))}}function hw(t){Br.D(t),Gp("dns-prefetch",t,null)}function xw(t,r){Br.C(t,r),Gp("preconnect",t,r)}function fw(t,r,l){Br.L(t,r,l);var o=Wi;if(o&&t&&r){var m='link[rel="preload"][as="'+Ot(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ot(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ot(l.imageSizes)+'"]')):m+='[href="'+Ot(t)+'"]';var g=m;switch(r){case"style":g=Ji(t);break;case"script":g=el(t)}Ia.has(g)||(t=b({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:t,as:r},l),Ia.set(g,t),o.querySelector(m)!==null||r==="style"&&o.querySelector(lo(g))||r==="script"&&o.querySelector(oo(g))||(r=o.createElement("link"),Ms(r,"link",t),st(r),o.head.appendChild(r)))}}function pw(t,r){Br.m(t,r);var l=Wi;if(l&&t){var o=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Ot(o)+'"][href="'+Ot(t)+'"]',g=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=el(t)}if(!Ia.has(g)&&(t=b({rel:"modulepreload",href:t},r),Ia.set(g,t),l.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(oo(g)))return}o=l.createElement("link"),Ms(o,"link",t),st(o),l.head.appendChild(o)}}}function yw(t,r,l){Br.S(t,r,l);var o=Wi;if(o&&t){var m=ba(o).hoistableStyles,g=Ji(t);r=r||"default";var j=m.get(g);if(!j){var R={loading:0,preload:null};if(j=o.querySelector(lo(g)))R.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":r},l),(l=Ia.get(g))&&em(t,l);var q=j=o.createElement("link");st(q),Ms(q,"link",t),q._p=new Promise(function(re,de){q.onload=re,q.onerror=de}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ed(j,r,o)}j={type:"stylesheet",instance:j,count:1,state:R},m.set(g,j)}}}function bw(t,r){Br.X(t,r);var l=Wi;if(l&&t){var o=ba(l).hoistableScripts,m=el(t),g=o.get(m);g||(g=l.querySelector(oo(m)),g||(t=b({src:t,async:!0},r),(r=Ia.get(m))&&tm(t,r),g=l.createElement("script"),st(g),Ms(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function vw(t,r){Br.M(t,r);var l=Wi;if(l&&t){var o=ba(l).hoistableScripts,m=el(t),g=o.get(m);g||(g=l.querySelector(oo(m)),g||(t=b({src:t,async:!0,type:"module"},r),(r=Ia.get(m))&&tm(t,r),g=l.createElement("script"),st(g),Ms(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function Yp(t,r,l,o){var m=(m=we.current)?Jc(m):null;if(!m)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ji(l.href),l=ba(m).hoistableStyles,o=l.get(r),o||(o={type:"style",instance:null,count:0,state:null},l.set(r,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Ji(l.href);var g=ba(m).hoistableStyles,j=g.get(t);if(j||(m=m.ownerDocument||m,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,j),(g=m.querySelector(lo(t)))&&!g._p&&(j.instance=g,j.state.loading=5),Ia.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ia.set(t,l),g||jw(m,t,l,j.state))),r&&o===null)throw Error(i(528,""));return j}if(r&&o!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=el(l),l=ba(m).hoistableScripts,o=l.get(r),o||(o={type:"script",instance:null,count:0,state:null},l.set(r,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ji(t){return'href="'+Ot(t)+'"'}function lo(t){return'link[rel="stylesheet"]['+t+"]"}function Xp(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function jw(t,r,l,o){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=t.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),Ms(r,"link",l),st(r),t.head.appendChild(r))}function el(t){return'[src="'+Ot(t)+'"]'}function oo(t){return"script[async]"+t}function Kp(t,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var o=t.querySelector('style[data-href~="'+Ot(l.href)+'"]');if(o)return r.instance=o,st(o),o;var m=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),st(o),Ms(o,"style",m),ed(o,l.precedence,t),r.instance=o;case"stylesheet":m=Ji(l.href);var g=t.querySelector(lo(m));if(g)return r.state.loading|=4,r.instance=g,st(g),g;o=Xp(l),(m=Ia.get(m))&&em(o,m),g=(t.ownerDocument||t).createElement("link"),st(g);var j=g;return j._p=new Promise(function(R,q){j.onload=R,j.onerror=q}),Ms(g,"link",o),r.state.loading|=4,ed(g,l.precedence,t),r.instance=g;case"script":return g=el(l.src),(m=t.querySelector(oo(g)))?(r.instance=m,st(m),m):(o=l,(m=Ia.get(g))&&(o=b({},l),tm(o,m)),t=t.ownerDocument||t,m=t.createElement("script"),st(m),Ms(m,"link",o),t.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(o=r.instance,r.state.loading|=4,ed(o,l.precedence,t));return r.instance}function ed(t,r,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,g=m,j=0;j<o.length;j++){var R=o[j];if(R.dataset.precedence===r)g=R;else if(g!==m)break}g?g.parentNode.insertBefore(t,g.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(t,r.firstChild))}function em(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var td=null;function Zp(t,r,l){if(td===null){var o=new Map,m=td=new Map;m.set(l,o)}else m=td,o=m.get(l),o||(o=new Map,m.set(l,o));if(o.has(t))return o;for(o.set(t,null),l=l.getElementsByTagName(t),m=0;m<l.length;m++){var g=l[m];if(!(g[pa]||g[zt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(r)||"";j=t+j;var R=o.get(j);R?R.push(g):o.set(j,[g])}}return o}function Qp(t,r,l){t=t.ownerDocument||t,t.head.insertBefore(l,r==="title"?t.querySelector("head > title"):null)}function Nw(t,r,l){if(l===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Wp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function kw(t,r,l,o){if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Ji(o.href),g=r.querySelector(lo(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=sd.bind(t),r.then(t,t)),l.state.loading|=4,l.instance=g,st(g);return}g=r.ownerDocument||r,o=Xp(o),(m=Ia.get(m))&&em(o,m),g=g.createElement("link"),st(g);var j=g;j._p=new Promise(function(R,q){j.onload=R,j.onerror=q}),Ms(g,"link",o),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=sd.bind(t),r.addEventListener("load",l),r.addEventListener("error",l))}}var sm=0;function ww(t,r){return t.stylesheets&&t.count===0&&rd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var o=setTimeout(function(){if(t.stylesheets&&rd(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+r);0<t.imgBytes&&sm===0&&(sm=62500*rw());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&rd(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>sm?50:800)+r);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function rd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,r.forEach(Sw,t),ad=null,sd.call(t))}function Sw(t,r){if(!(r.state.loading&4)){var l=ad.get(t);if(l)var o=l.get(null);else{l=new Map,ad.set(t,l);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var j=m[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(l.set(j.dataset.precedence,j),o=j)}o&&l.set(null,o)}m=r.instance,j=m.getAttribute("data-precedence"),g=l.get(j)||o,g===o&&l.set(null,m),l.set(j,m),this.count++,o=sd.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),g?g.parentNode.insertBefore(m,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),r.state.loading|=4}}var co={$$typeof:A,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Cw(t,r,l,o,m,g,j,R,q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Jp(t,r,l,o,m,g,j,R,q,re,de,xe){return t=new Cw(t,r,l,j,q,re,de,xe,R),r=1,g===!0&&(r|=24),g=wa(3,null,null,r),t.current=g,g.stateNode=t,r=Lu(),r.refCount++,t.pooledCache=r,r.refCount++,g.memoizedState={element:o,isDehydrated:l,cache:r},Vu(g),t}function ey(t){return t?(t=Di,t):Di}function ty(t,r,l,o,m,g){m=ey(m),o.context===null?o.context=m:o.pendingContext=m,o=mn(r),o.payload={element:l},g=g===void 0?null:g,g!==null&&(o.callback=g),l=gn(t,o,r),l!==null&&(ca(l,t,r),Ul(l,t,r))}function sy(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<r?l:r}}function am(t,r){sy(t,r),(t=t.alternate)&&sy(t,r)}function ay(t){if(t.tag===13||t.tag===31){var r=Wn(t,67108864);r!==null&&ca(r,t,67108864),am(t,67108864)}}function ry(t){if(t.tag===13||t.tag===31){var r=Ea();r=Qe(r);var l=Wn(t,r);l!==null&&ca(l,t,r),am(t,r)}}var nd=!0;function Aw(t,r,l,o){var m=$.T;$.T=null;var g=_.p;try{_.p=2,rm(t,r,l,o)}finally{_.p=g,$.T=m}}function Tw(t,r,l,o){var m=$.T;$.T=null;var g=_.p;try{_.p=8,rm(t,r,l,o)}finally{_.p=g,$.T=m}}function rm(t,r,l,o){if(nd){var m=nm(o);if(m===null)q0(t,r,o,id,l),iy(t,o);else if(Rw(m,t,r,l,o))o.stopPropagation();else if(iy(t,o),r&4&&-1<Ew.indexOf(t)){for(;m!==null;){var g=ya(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=Jt(g.pendingLanes);if(j!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;j;){var q=1<<31-kt(j);R.entanglements[1]|=q,j&=~q}xr(g),(ft&6)===0&&(Bc=Le()+500,ao(0))}}break;case 31:case 13:R=Wn(g,2),R!==null&&ca(R,g,2),qc(),am(g,2)}if(g=nm(o),g===null&&q0(t,r,o,id,l),g===m)break;m=g}m!==null&&o.stopPropagation()}else q0(t,r,o,null,l)}}function nm(t){return t=Al(t),im(t)}var id=null;function im(t){if(id=null,t=sa(t),t!==null){var r=d(t);if(r===null)t=null;else{var l=r.tag;if(l===13){if(t=u(r),t!==null)return t;t=null}else if(l===31){if(t=h(r),t!==null)return t;t=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return id=t,null}function ny(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vs()){case ns:return 2;case ms:return 8;case ws:case Hs:return 32;case Wt:return 268435456;default:return 32}default:return 32}}var lm=!1,wn=null,Sn=null,Cn=null,uo=new Map,mo=new Map,An=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iy(t,r){switch(t){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":uo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(r.pointerId)}}function go(t,r,l,o,m,g){return t===null||t.nativeEvent!==g?(t={blockedOn:r,domEventName:l,eventSystemFlags:o,nativeEvent:g,targetContainers:[m]},r!==null&&(r=ya(r),r!==null&&ay(r)),t):(t.eventSystemFlags|=o,r=t.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),t)}function Rw(t,r,l,o,m){switch(r){case"focusin":return wn=go(wn,t,r,l,o,m),!0;case"dragenter":return Sn=go(Sn,t,r,l,o,m),!0;case"mouseover":return Cn=go(Cn,t,r,l,o,m),!0;case"pointerover":var g=m.pointerId;return uo.set(g,go(uo.get(g)||null,t,r,l,o,m)),!0;case"gotpointercapture":return g=m.pointerId,mo.set(g,go(mo.get(g)||null,t,r,l,o,m)),!0}return!1}function ly(t){var r=sa(t.target);if(r!==null){var l=d(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){t.blockedOn=r,Ts(t.priority,function(){ry(l)});return}}else if(r===31){if(r=h(l),r!==null){t.blockedOn=r,Ts(t.priority,function(){ry(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ld(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var l=nm(t.nativeEvent);if(l===null){l=t.nativeEvent;var o=new l.constructor(l.type,l);Cl=o,l.target.dispatchEvent(o),Cl=null}else return r=ya(l),r!==null&&ay(r),t.blockedOn=l,!1;r.shift()}return!0}function oy(t,r,l){ld(t)&&l.delete(r)}function Dw(){lm=!1,wn!==null&&ld(wn)&&(wn=null),Sn!==null&&ld(Sn)&&(Sn=null),Cn!==null&&ld(Cn)&&(Cn=null),uo.forEach(oy),mo.forEach(oy)}function od(t,r){t.blockedOn===r&&(t.blockedOn=null,lm||(lm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Dw)))}var cd=null;function cy(t){cd!==t&&(cd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){cd===t&&(cd=null);for(var r=0;r<t.length;r+=3){var l=t[r],o=t[r+1],m=t[r+2];if(typeof o!="function"){if(im(o||l)===null)continue;break}var g=ya(l);g!==null&&(t.splice(r,3),r-=3,n0(g,{pending:!0,data:m,method:l.method,action:o},o,m))}}))}function tl(t){function r(q){return od(q,t)}wn!==null&&od(wn,t),Sn!==null&&od(Sn,t),Cn!==null&&od(Cn,t),uo.forEach(r),mo.forEach(r);for(var l=0;l<An.length;l++){var o=An[l];o.blockedOn===t&&(o.blockedOn=null)}for(;0<An.length&&(l=An[0],l.blockedOn===null);)ly(l),l.blockedOn===null&&An.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var m=l[o],g=l[o+1],j=m[gs]||null;if(typeof g=="function")j||cy(l);else if(j){var R=null;if(g&&g.hasAttribute("formAction")){if(m=g,j=g[gs]||null)R=j.formAction;else if(im(m)!==null)continue}else R=j.action;typeof R=="function"?l[o+1]=R:(l.splice(o,3),o-=3),cy(l)}}}function dy(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(j){return m=j})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),o||setTimeout(l,20)}function l(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function om(t){this._internalRoot=t}dd.prototype.render=om.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,o=Ea();ty(l,o,t,r,null,null)},dd.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ty(t.current,2,null,t,null,null),qc(),r[Es]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ys();t={blockedOn:null,target:t,priority:r};for(var l=0;l<An.length&&r!==0&&r<An[l].priority;l++);An.splice(l,0,t),l===0&&ly(t)}};var uy=a.version;if(uy!=="19.2.0")throw Error(i(527,uy,"19.2.0"));_.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=f(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Ow={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{$s=ud.inject(Ow),Tt=ud}catch{}}return xo.createRoot=function(t,r){if(!c(t))throw Error(i(299));var l=!1,o="",m=yf,g=bf,j=vf;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(j=r.onRecoverableError)),r=Jp(t,1,!1,null,null,l,o,null,m,g,j,dy),t[Es]=r.current,I0(t),new om(r)},xo.hydrateRoot=function(t,r,l){if(!c(t))throw Error(i(299));var o=!1,m="",g=yf,j=bf,R=vf,q=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(j=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(q=l.formState)),r=Jp(t,1,!0,r,l??null,o,m,q,g,j,R,dy),r.context=ey(null),l=r.current,o=Ea(),o=Qe(o),m=mn(o),m.callback=null,gn(l,m,o),l=o,r.current.lanes=l,me(r,l),xr(r),t[Es]=r.current,I0(t),new dd(r)},xo.version="19.2.0",xo}var jy;function Bw(){if(jy)return um.exports;jy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),um.exports=Uw(),um.exports}var Iw=Bw();const Ny=s=>{let a;const n=new Set,i=(f,y)=>{const b=typeof f=="function"?f(a):f;if(!Object.is(b,a)){const v=a;a=y??(typeof b!="object"||b===null)?b:Object.assign({},a,b),n.forEach(N=>N(a,v))}},c=()=>a,h={setState:i,getState:c,getInitialState:()=>x,subscribe:f=>(n.add(f),()=>n.delete(f))},x=a=s(i,c,h);return h},qw=(s=>s?Ny(s):Ny),Hw=s=>s;function Gw(s,a=Hw){const n=nr.useSyncExternalStore(s.subscribe,nr.useCallback(()=>a(s.getState()),[s,a]),nr.useCallback(()=>a(s.getInitialState()),[s,a]));return nr.useDebugValue(n),n}const ky=s=>{const a=qw(s),n=i=>Gw(a,i);return Object.assign(n,a),n},Ni=(s=>s?ky(s):ky),wy="pandaura:lastRoute",Pd=Ni(s=>({activeRoute:localStorage.getItem(wy)||"dashboard",setActiveRoute:a=>{localStorage.setItem(wy,a),s({activeRoute:a})}}));function Yw(s,a){let n;try{n=s()}catch{return}return{getItem:c=>{var d;const u=x=>x===null?null:JSON.parse(x,void 0),h=(d=n.getItem(c))!=null?d:null;return h instanceof Promise?h.then(u):u(h)},setItem:(c,d)=>n.setItem(c,JSON.stringify(d,void 0)),removeItem:c=>n.removeItem(c)}}const Gm=s=>a=>{try{const n=s(a);return n instanceof Promise?n:{then(i){return Gm(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Gm(i)(n)}}}},Xw=(s,a)=>(n,i,c)=>{let d={storage:Yw(()=>localStorage),partialize:M=>M,version:0,merge:(M,L)=>({...L,...M}),...a},u=!1;const h=new Set,x=new Set;let f=d.storage;if(!f)return s((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...M)},i,c);const y=()=>{const M=d.partialize({...i()});return f.setItem(d.name,{state:M,version:d.version})},b=c.setState;c.setState=(M,L)=>(b(M,L),y());const v=s((...M)=>(n(...M),y()),i,c);c.getInitialState=()=>v;let N;const E=()=>{var M,L;if(!f)return;u=!1,h.forEach(T=>{var A;return T((A=i())!=null?A:v)});const w=((L=d.onRehydrateStorage)==null?void 0:L.call(d,(M=i())!=null?M:v))||void 0;return Gm(f.getItem.bind(f))(d.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==d.version){if(d.migrate){const A=d.migrate(T.state,T.version);return A instanceof Promise?A.then(D=>[!0,D]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var A;const[D,C]=T;if(N=d.merge(C,(A=i())!=null?A:v),n(N,!0),D)return y()}).then(()=>{w?.(N,void 0),N=i(),u=!0,x.forEach(T=>T(N))}).catch(T=>{w?.(void 0,T)})};return c.persist={setOptions:M=>{d={...d,...M},M.storage&&(f=M.storage)},clearStorage:()=>{f?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>E(),hasHydrated:()=>u,onHydrate:M=>(h.add(M),()=>{h.delete(M)}),onFinishHydration:M=>(x.add(M),()=>{x.delete(M)})},d.skipHydration||E(),N||v},Kw=Xw;class Zw{sessionToken=null;_deviceInfo=null;constructor(){this.sessionToken=localStorage.getItem("device_session_token")}async getSessionToken(){if(console.log("getSessionToken called, current token:",this.sessionToken?"exists":"null"),this.sessionToken){if(console.log("Validating existing token..."),await this.validateSession())return console.log("Existing token is valid"),this.sessionToken;console.log("Existing token is invalid, clearing it"),this.sessionToken=null,localStorage.removeItem("device_session_token")}try{console.log("Fetching new session token from /api/device/public-info");const a=await fetch("/api/device/public-info",{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("Response status:",a.status),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const n=await a.json();if(console.log("Public info response:",n),n.success&&n.sessionToken)return this.sessionToken=n.sessionToken,this._deviceInfo=n.device,localStorage.setItem("device_session_token",n.sessionToken),n.device&&n.users&&localStorage.setItem("device_info_cache",JSON.stringify({device:n.device,users:n.users,cached_at:Date.now()})),console.log("Session token acquired successfully"),n.sessionToken;if(n.needsOnboarding)return console.log("Device needs onboarding, starting onboarding process"),await this.performOnboarding()?await this.getSessionToken():(console.error("Onboarding failed"),null);if(n.needsLicenseActivation)throw console.log("Device needs license activation"),new Error("License activation required");return console.error("Unexpected response format:",n),null}catch(a){console.error("Error getting session token:",a)}return null}async performOnboarding(){try{console.log("Starting device onboarding...");const a=await fetch("/api/device/onboard",{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("Onboarding response status:",a.status),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const n=await a.json();console.log("Onboarding response:",n);const i=n.success||!1;return i?console.log("Onboarding completed successfully"):console.error("Onboarding failed:",n.error||"Unknown error"),i}catch(a){return console.error("Error during onboarding:",a),!1}}async validateSession(){if(!this.sessionToken)return!1;try{return(await fetch("/api/device/validate-session",{headers:{Authorization:`Bearer ${this.sessionToken}`}})).ok}catch(a){return console.error("Error validating session:",a),!1}}async authenticatedFetch(a,n={}){const i=await this.getSessionToken();if(!i)throw new Error("No valid session token available");const c=await fetch(a,{...n,headers:{...n.headers,Authorization:`Bearer ${i}`}});if(c.status===403){const d=await c.json().catch(()=>({}));if(d.code==="LICENSE_REQUIRED")throw console.warn("License required for this operation:",d.message),new Error(d.message||"License activation required")}return c}async getDeviceInfo(){try{const a=localStorage.getItem("device_info_cache");if(a){const c=JSON.parse(a);if(Date.now()-c.cached_at<300*1e3)return console.log("Using cached device info"),c}const n=await this.authenticatedFetch("/api/device/info");if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=await n.json();return console.log("Device info received:",i),localStorage.setItem("device_info_cache",JSON.stringify({...i,cached_at:Date.now()})),i}catch(a){throw console.error("Error getting device info:",a),a}}async testPublicInfo(){try{console.log("Testing /api/device/public-info endpoint...");const a=await fetch("/api/device/public-info",{method:"POST",headers:{"Content-Type":"application/json"}});console.log("Public-info response status:",a.status),console.log("Public-info response headers:",Object.fromEntries(a.headers.entries()));const n=await a.json();console.log("Public-info response data:",n)}catch(a){console.error("Error testing public-info:",a)}}clearSession(){this.sessionToken=null,this._deviceInfo=null,localStorage.removeItem("device_session_token")}}const Ct=new Zw,ma=Ni(s=>({hasValidLicense:!1,needsLicenseActivation:!0,onboardingCompleted:!1,licenseActivated:!1,licenseInfo:null,isActivatingLicense:!1,activationError:null,showActivationModal:!1,setLicenseStatus:a=>{s({hasValidLicense:a.hasValidLicense,needsLicenseActivation:a.needsLicenseActivation,onboardingCompleted:a.onboardingCompleted??!1,licenseActivated:a.licenseActivated??!1,licenseInfo:a.licenseInfo||null})},setActivationLoading:a=>{s({isActivatingLicense:a})},setActivationError:a=>{s({activationError:a})},showLicenseModal:()=>{s({showActivationModal:!0,activationError:null})},hideLicenseModal:()=>{s({showActivationModal:!1,activationError:null})},activateLicense:async(a,n)=>{s({isActivatingLicense:!0,activationError:null});try{const i=await fetch("/api/device/activate-license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:a,ownerEmail:n})}),c=await i.json();if(i.ok&&c.success)return s({hasValidLicense:!0,needsLicenseActivation:!1,licenseInfo:c.license,showActivationModal:!1,activationError:null}),console.log("License activated successfully:",c),!0;{const d=c.details||c.error||"License activation failed";return s({activationError:d}),console.error("License activation failed:",c),!1}}catch(i){const c=i instanceof Error?i.message:"Network error during activation";return s({activationError:c}),console.error("Error activating license:",i),!1}finally{s({isActivatingLicense:!1})}},checkLicenseStatus:async()=>{try{const a=await fetch("/api/device/license-status",{method:"POST",headers:{"Content-Type":"application/json"}});if(a.ok){const n=await a.json();console.log(" License Status Response:",n),s({hasValidLicense:!n.needsLicenseActivation,needsLicenseActivation:n.needsLicenseActivation,onboardingCompleted:n.onboardingCompleted||!1,licenseActivated:n.licenseActivated||!1,licenseInfo:n.license||null})}}catch(a){console.error("Error checking license status:",a),s({hasValidLicense:!1,needsLicenseActivation:!0,onboardingCompleted:!1,licenseActivated:!1,showActivationModal:!1})}}})),fo="http://localhost:8000/api",jr=Ni()(Kw((s,a)=>({activeProject:null,projects:[],isLoading:!1,isCreating:!1,setActiveProject:n=>{s({activeProject:n}),n&&Ct.authenticatedFetch(`${fo}/projects/${n.id}/last-opened`,{method:"PUT"}).catch(console.error)},loadProjects:async()=>{s({isLoading:!0});try{if(!ma.getState().hasValidLicense)throw new Error("Valid license required to access projects");const c=await(await Ct.authenticatedFetch(`${fo}/projects`)).json();c.success&&(s({projects:c.projects}),!a().activeProject&&c.projects.length>0&&s({activeProject:c.projects[0]}))}catch(n){console.error("Failed to load projects:",n)}finally{s({isLoading:!1})}},createProject:async(n,i)=>{s({isCreating:!0});try{if(!ma.getState().hasValidLicense)throw new Error("Valid license required to create projects");const u=await(await Ct.authenticatedFetch(`${fo}/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,description:i})})).json();if(!u.success)throw new Error(u.error||"Failed to create project");return s(h=>({projects:[u.project,...h.projects]})),u.project}catch(c){throw console.error("Failed to create project:",c),c}finally{s({isCreating:!1})}},deleteProject:async n=>{try{if(!ma.getState().hasValidLicense)throw new Error("Valid license required to delete projects");const d=await(await Ct.authenticatedFetch(`${fo}/projects/${n}`,{method:"DELETE"})).json();if(!d.success)throw new Error(d.error||"Failed to delete project");s(u=>({projects:u.projects.filter(h=>h.id!==n),activeProject:u.activeProject?.id===n?null:u.activeProject}))}catch(i){throw console.error("Failed to delete project:",i),i}},updateLastOpened:async n=>{try{await Ct.authenticatedFetch(`${fo}/projects/${n}/last-opened`,{method:"PUT"}),await a().loadProjects()}catch(i){console.error("Failed to update last opened:",i)}},getProjectById:n=>a().projects.find(i=>i.id===n)}),{name:"pandaura-active-project",partialize:s=>({activeProject:s.activeProject})})),_g=p.createContext({});function Mg(s){const a=p.useRef(null);return a.current===null&&(a.current=s()),a.current}const Lg=typeof window<"u",Mv=Lg?p.useLayoutEffect:p.useEffect,Zd=p.createContext(null);function Fg(s,a){s.indexOf(a)===-1&&s.push(a)}function Pg(s,a){const n=s.indexOf(a);n>-1&&s.splice(n,1)}const Yr=(s,a,n)=>n>a?a:n<s?s:n;let zg=()=>{};const Xr={},Lv=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Fv(s){return typeof s=="object"&&s!==null}const Pv=s=>/^0[^.\s]+$/u.test(s);function Vg(s){let a;return()=>(a===void 0&&(a=s()),a)}const Xa=s=>s,Qw=(s,a)=>n=>a(s(n)),Wo=(...s)=>s.reduce(Qw),Mo=(s,a,n)=>{const i=a-s;return i===0?1:(n-s)/i};class $g{constructor(){this.subscriptions=[]}add(a){return Fg(this.subscriptions,a),()=>Pg(this.subscriptions,a)}notify(a,n,i){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](a,n,i);else for(let d=0;d<c;d++){const u=this.subscriptions[d];u&&u(a,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pr=s=>s*1e3,Ya=s=>s/1e3;function zv(s,a){return a?s*(1e3/a):0}const Vv=(s,a,n)=>(((1-3*n+3*a)*s+(3*n-6*a))*s+3*a)*s,Ww=1e-7,Jw=12;function e2(s,a,n,i,c){let d,u,h=0;do u=a+(n-a)/2,d=Vv(u,i,c)-s,d>0?n=u:a=u;while(Math.abs(d)>Ww&&++h<Jw);return u}function Jo(s,a,n,i){if(s===a&&n===i)return Xa;const c=d=>e2(d,0,1,s,n);return d=>d===0||d===1?d:Vv(c(d),a,i)}const $v=s=>a=>a<=.5?s(2*a)/2:(2-s(2*(1-a)))/2,Uv=s=>a=>1-s(1-a),Bv=Jo(.33,1.53,.69,.99),Ug=Uv(Bv),Iv=$v(Ug),qv=s=>(s*=2)<1?.5*Ug(s):.5*(2-Math.pow(2,-10*(s-1))),Bg=s=>1-Math.sin(Math.acos(s)),Hv=Uv(Bg),Gv=$v(Bg),t2=Jo(.42,0,1,1),s2=Jo(0,0,.58,1),Yv=Jo(.42,0,.58,1),a2=s=>Array.isArray(s)&&typeof s[0]!="number",Xv=s=>Array.isArray(s)&&typeof s[0]=="number",r2={linear:Xa,easeIn:t2,easeInOut:Yv,easeOut:s2,circIn:Bg,circInOut:Gv,circOut:Hv,backIn:Ug,backInOut:Iv,backOut:Bv,anticipate:qv},n2=s=>typeof s=="string",Sy=s=>{if(Xv(s)){zg(s.length===4);const[a,n,i,c]=s;return Jo(a,n,i,c)}else if(n2(s))return r2[s];return s},md=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function i2(s,a){let n=new Set,i=new Set,c=!1,d=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function x(y){u.has(y)&&(f.schedule(y),s()),y(h)}const f={schedule:(y,b=!1,v=!1)=>{const E=v&&c?n:i;return b&&u.add(y),E.has(y)||E.add(y),y},cancel:y=>{i.delete(y),u.delete(y)},process:y=>{if(h=y,c){d=!0;return}c=!0,[n,i]=[i,n],n.forEach(x),n.clear(),c=!1,d&&(d=!1,f.process(y))}};return f}const l2=40;function Kv(s,a){let n=!1,i=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>n=!0,u=md.reduce((A,D)=>(A[D]=i2(d),A),{}),{setup:h,read:x,resolveKeyframes:f,preUpdate:y,update:b,preRender:v,render:N,postRender:E}=u,M=()=>{const A=Xr.useManualTiming?c.timestamp:performance.now();n=!1,Xr.useManualTiming||(c.delta=i?1e3/60:Math.max(Math.min(A-c.timestamp,l2),1)),c.timestamp=A,c.isProcessing=!0,h.process(c),x.process(c),f.process(c),y.process(c),b.process(c),v.process(c),N.process(c),E.process(c),c.isProcessing=!1,n&&a&&(i=!1,s(M))},L=()=>{n=!0,i=!0,c.isProcessing||s(M)};return{schedule:md.reduce((A,D)=>{const C=u[D];return A[D]=(S,k=!1,P=!1)=>(n||L(),C.schedule(S,k,P)),A},{}),cancel:A=>{for(let D=0;D<md.length;D++)u[md[D]].cancel(A)},state:c,steps:u}}const{schedule:Gt,cancel:Mn,state:Fs,steps:xm}=Kv(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xa,!0);let Sd;function o2(){Sd=void 0}const ua={now:()=>(Sd===void 0&&ua.set(Fs.isProcessing||Xr.useManualTiming?Fs.timestamp:performance.now()),Sd),set:s=>{Sd=s,queueMicrotask(o2)}},Zv=s=>a=>typeof a=="string"&&a.startsWith(s),Ig=Zv("--"),c2=Zv("var(--"),qg=s=>c2(s)?d2.test(s.split("/*")[0].trim()):!1,d2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Lo={...bl,transform:s=>Yr(0,1,s)},gd={...bl,default:1},So=s=>Math.round(s*1e5)/1e5,Hg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function u2(s){return s==null}const m2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gg=(s,a)=>n=>!!(typeof n=="string"&&m2.test(n)&&n.startsWith(s)||a&&!u2(n)&&Object.prototype.hasOwnProperty.call(n,a)),Qv=(s,a,n)=>i=>{if(typeof i!="string")return i;const[c,d,u,h]=i.match(Hg);return{[s]:parseFloat(c),[a]:parseFloat(d),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},g2=s=>Yr(0,255,s),fm={...bl,transform:s=>Math.round(g2(s))},gi={test:Gg("rgb","red"),parse:Qv("red","green","blue"),transform:({red:s,green:a,blue:n,alpha:i=1})=>"rgba("+fm.transform(s)+", "+fm.transform(a)+", "+fm.transform(n)+", "+So(Lo.transform(i))+")"};function h2(s){let a="",n="",i="",c="";return s.length>5?(a=s.substring(1,3),n=s.substring(3,5),i=s.substring(5,7),c=s.substring(7,9)):(a=s.substring(1,2),n=s.substring(2,3),i=s.substring(3,4),c=s.substring(4,5),a+=a,n+=n,i+=i,c+=c),{red:parseInt(a,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:c?parseInt(c,16)/255:1}}const Ym={test:Gg("#"),parse:h2,transform:gi.transform},ec=s=>({test:a=>typeof a=="string"&&a.endsWith(s)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${s}`}),Rn=ec("deg"),yr=ec("%"),Ie=ec("px"),x2=ec("vh"),f2=ec("vw"),Cy={...yr,parse:s=>yr.parse(s)/100,transform:s=>yr.transform(s*100)},rl={test:Gg("hsl","hue"),parse:Qv("hue","saturation","lightness"),transform:({hue:s,saturation:a,lightness:n,alpha:i=1})=>"hsla("+Math.round(s)+", "+yr.transform(So(a))+", "+yr.transform(So(n))+", "+So(Lo.transform(i))+")"},bs={test:s=>gi.test(s)||Ym.test(s)||rl.test(s),parse:s=>gi.test(s)?gi.parse(s):rl.test(s)?rl.parse(s):Ym.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?gi.transform(s):rl.transform(s),getAnimatableNone:s=>{const a=bs.parse(s);return a.alpha=0,bs.transform(a)}},p2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function y2(s){return isNaN(s)&&typeof s=="string"&&(s.match(Hg)?.length||0)+(s.match(p2)?.length||0)>0}const Wv="number",Jv="color",b2="var",v2="var(",Ay="${}",j2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fo(s){const a=s.toString(),n=[],i={color:[],number:[],var:[]},c=[];let d=0;const h=a.replace(j2,x=>(bs.test(x)?(i.color.push(d),c.push(Jv),n.push(bs.parse(x))):x.startsWith(v2)?(i.var.push(d),c.push(b2),n.push(x)):(i.number.push(d),c.push(Wv),n.push(parseFloat(x))),++d,Ay)).split(Ay);return{values:n,split:h,indexes:i,types:c}}function ej(s){return Fo(s).values}function tj(s){const{split:a,types:n}=Fo(s),i=a.length;return c=>{let d="";for(let u=0;u<i;u++)if(d+=a[u],c[u]!==void 0){const h=n[u];h===Wv?d+=So(c[u]):h===Jv?d+=bs.transform(c[u]):d+=c[u]}return d}}const N2=s=>typeof s=="number"?0:bs.test(s)?bs.getAnimatableNone(s):s;function k2(s){const a=ej(s);return tj(s)(a.map(N2))}const Ln={test:y2,parse:ej,createTransformer:tj,getAnimatableNone:k2};function pm(s,a,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(a-s)*6*n:n<1/2?a:n<2/3?s+(a-s)*(2/3-n)*6:s}function w2({hue:s,saturation:a,lightness:n,alpha:i}){s/=360,a/=100,n/=100;let c=0,d=0,u=0;if(!a)c=d=u=n;else{const h=n<.5?n*(1+a):n+a-n*a,x=2*n-h;c=pm(x,h,s+1/3),d=pm(x,h,s),u=pm(x,h,s-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(u*255),alpha:i}}function zd(s,a){return n=>n>0?a:s}const Kt=(s,a,n)=>s+(a-s)*n,ym=(s,a,n)=>{const i=s*s,c=n*(a*a-i)+i;return c<0?0:Math.sqrt(c)},S2=[Ym,gi,rl],C2=s=>S2.find(a=>a.test(s));function Ty(s){const a=C2(s);if(!a)return!1;let n=a.parse(s);return a===rl&&(n=w2(n)),n}const Ey=(s,a)=>{const n=Ty(s),i=Ty(a);if(!n||!i)return zd(s,a);const c={...n};return d=>(c.red=ym(n.red,i.red,d),c.green=ym(n.green,i.green,d),c.blue=ym(n.blue,i.blue,d),c.alpha=Kt(n.alpha,i.alpha,d),gi.transform(c))},Xm=new Set(["none","hidden"]);function A2(s,a){return Xm.has(s)?n=>n<=0?s:a:n=>n>=1?a:s}function T2(s,a){return n=>Kt(s,a,n)}function Yg(s){return typeof s=="number"?T2:typeof s=="string"?qg(s)?zd:bs.test(s)?Ey:D2:Array.isArray(s)?sj:typeof s=="object"?bs.test(s)?Ey:E2:zd}function sj(s,a){const n=[...s],i=n.length,c=s.map((d,u)=>Yg(d)(d,a[u]));return d=>{for(let u=0;u<i;u++)n[u]=c[u](d);return n}}function E2(s,a){const n={...s,...a},i={};for(const c in n)s[c]!==void 0&&a[c]!==void 0&&(i[c]=Yg(s[c])(s[c],a[c]));return c=>{for(const d in i)n[d]=i[d](c);return n}}function R2(s,a){const n=[],i={color:0,var:0,number:0};for(let c=0;c<a.values.length;c++){const d=a.types[c],u=s.indexes[d][i[d]],h=s.values[u]??0;n[c]=h,i[d]++}return n}const D2=(s,a)=>{const n=Ln.createTransformer(a),i=Fo(s),c=Fo(a);return i.indexes.var.length===c.indexes.var.length&&i.indexes.color.length===c.indexes.color.length&&i.indexes.number.length>=c.indexes.number.length?Xm.has(s)&&!c.values.length||Xm.has(a)&&!i.values.length?A2(s,a):Wo(sj(R2(i,c),c.values),n):zd(s,a)};function aj(s,a,n){return typeof s=="number"&&typeof a=="number"&&typeof n=="number"?Kt(s,a,n):Yg(s)(s,a)}const O2=s=>{const a=({timestamp:n})=>s(n);return{start:(n=!0)=>Gt.update(a,n),stop:()=>Mn(a),now:()=>Fs.isProcessing?Fs.timestamp:ua.now()}},rj=(s,a,n=10)=>{let i="";const c=Math.max(Math.round(a/n),2);for(let d=0;d<c;d++)i+=Math.round(s(d/(c-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Vd=2e4;function Xg(s){let a=0;const n=50;let i=s.next(a);for(;!i.done&&a<Vd;)a+=n,i=s.next(a);return a>=Vd?1/0:a}function _2(s,a=100,n){const i=n({...s,keyframes:[0,a]}),c=Math.min(Xg(i),Vd);return{type:"keyframes",ease:d=>i.next(c*d).value/a,duration:Ya(c)}}const M2=5;function nj(s,a,n){const i=Math.max(a-M2,0);return zv(n-s(i),a-i)}const rs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bm=.001;function L2({duration:s=rs.duration,bounce:a=rs.bounce,velocity:n=rs.velocity,mass:i=rs.mass}){let c,d,u=1-a;u=Yr(rs.minDamping,rs.maxDamping,u),s=Yr(rs.minDuration,rs.maxDuration,Ya(s)),u<1?(c=f=>{const y=f*u,b=y*s,v=y-n,N=Km(f,u),E=Math.exp(-b);return bm-v/N*E},d=f=>{const b=f*u*s,v=b*n+n,N=Math.pow(u,2)*Math.pow(f,2)*s,E=Math.exp(-b),M=Km(Math.pow(f,2),u);return(-c(f)+bm>0?-1:1)*((v-N)*E)/M}):(c=f=>{const y=Math.exp(-f*s),b=(f-n)*s+1;return-bm+y*b},d=f=>{const y=Math.exp(-f*s),b=(n-f)*(s*s);return y*b});const h=5/s,x=P2(c,d,h);if(s=pr(s),isNaN(x))return{stiffness:rs.stiffness,damping:rs.damping,duration:s};{const f=Math.pow(x,2)*i;return{stiffness:f,damping:u*2*Math.sqrt(i*f),duration:s}}}const F2=12;function P2(s,a,n){let i=n;for(let c=1;c<F2;c++)i=i-s(i)/a(i);return i}function Km(s,a){return s*Math.sqrt(1-a*a)}const z2=["duration","bounce"],V2=["stiffness","damping","mass"];function Ry(s,a){return a.some(n=>s[n]!==void 0)}function $2(s){let a={velocity:rs.velocity,stiffness:rs.stiffness,damping:rs.damping,mass:rs.mass,isResolvedFromDuration:!1,...s};if(!Ry(s,V2)&&Ry(s,z2))if(s.visualDuration){const n=s.visualDuration,i=2*Math.PI/(n*1.2),c=i*i,d=2*Yr(.05,1,1-(s.bounce||0))*Math.sqrt(c);a={...a,mass:rs.mass,stiffness:c,damping:d}}else{const n=L2(s);a={...a,...n,mass:rs.mass},a.isResolvedFromDuration=!0}return a}function $d(s=rs.visualDuration,a=rs.bounce){const n=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:a}:s;let{restSpeed:i,restDelta:c}=n;const d=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:d},{stiffness:x,damping:f,mass:y,duration:b,velocity:v,isResolvedFromDuration:N}=$2({...n,velocity:-Ya(n.velocity||0)}),E=v||0,M=f/(2*Math.sqrt(x*y)),L=u-d,w=Ya(Math.sqrt(x/y)),T=Math.abs(L)<5;i||(i=T?rs.restSpeed.granular:rs.restSpeed.default),c||(c=T?rs.restDelta.granular:rs.restDelta.default);let A;if(M<1){const C=Km(w,M);A=S=>{const k=Math.exp(-M*w*S);return u-k*((E+M*w*L)/C*Math.sin(C*S)+L*Math.cos(C*S))}}else if(M===1)A=C=>u-Math.exp(-w*C)*(L+(E+w*L)*C);else{const C=w*Math.sqrt(M*M-1);A=S=>{const k=Math.exp(-M*w*S),P=Math.min(C*S,300);return u-k*((E+M*w*L)*Math.sinh(P)+C*L*Math.cosh(P))/C}}const D={calculatedDuration:N&&b||null,next:C=>{const S=A(C);if(N)h.done=C>=b;else{let k=C===0?E:0;M<1&&(k=C===0?pr(E):nj(A,C,S));const P=Math.abs(k)<=i,G=Math.abs(u-S)<=c;h.done=P&&G}return h.value=h.done?u:S,h},toString:()=>{const C=Math.min(Xg(D),Vd),S=rj(k=>D.next(C*k).value,C,30);return C+"ms "+S},toTransition:()=>{}};return D}$d.applyToOptions=s=>{const a=_2(s,100,$d);return s.ease=a.ease,s.duration=pr(a.duration),s.type="keyframes",s};function Zm({keyframes:s,velocity:a=0,power:n=.8,timeConstant:i=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:u,min:h,max:x,restDelta:f=.5,restSpeed:y}){const b=s[0],v={done:!1,value:b},N=P=>h!==void 0&&P<h||x!==void 0&&P>x,E=P=>h===void 0?x:x===void 0||Math.abs(h-P)<Math.abs(x-P)?h:x;let M=n*a;const L=b+M,w=u===void 0?L:u(L);w!==L&&(M=w-b);const T=P=>-M*Math.exp(-P/i),A=P=>w+T(P),D=P=>{const G=T(P),U=A(P);v.done=Math.abs(G)<=f,v.value=v.done?w:U};let C,S;const k=P=>{N(v.value)&&(C=P,S=$d({keyframes:[v.value,E(v.value)],velocity:nj(A,P,v.value),damping:c,stiffness:d,restDelta:f,restSpeed:y}))};return k(0),{calculatedDuration:null,next:P=>{let G=!1;return!S&&C===void 0&&(G=!0,D(P),k(P)),C!==void 0&&P>=C?S.next(P-C):(!G&&D(P),v)}}}function U2(s,a,n){const i=[],c=n||Xr.mix||aj,d=s.length-1;for(let u=0;u<d;u++){let h=c(s[u],s[u+1]);if(a){const x=Array.isArray(a)?a[u]||Xa:a;h=Wo(x,h)}i.push(h)}return i}function B2(s,a,{clamp:n=!0,ease:i,mixer:c}={}){const d=s.length;if(zg(d===a.length),d===1)return()=>a[0];if(d===2&&a[0]===a[1])return()=>a[1];const u=s[0]===s[1];s[0]>s[d-1]&&(s=[...s].reverse(),a=[...a].reverse());const h=U2(a,i,c),x=h.length,f=y=>{if(u&&y<s[0])return a[0];let b=0;if(x>1)for(;b<s.length-2&&!(y<s[b+1]);b++);const v=Mo(s[b],s[b+1],y);return h[b](v)};return n?y=>f(Yr(s[0],s[d-1],y)):f}function I2(s,a){const n=s[s.length-1];for(let i=1;i<=a;i++){const c=Mo(0,a,i);s.push(Kt(n,1,c))}}function q2(s){const a=[0];return I2(a,s.length-1),a}function H2(s,a){return s.map(n=>n*a)}function G2(s,a){return s.map(()=>a||Yv).splice(0,s.length-1)}function Co({duration:s=300,keyframes:a,times:n,ease:i="easeInOut"}){const c=a2(i)?i.map(Sy):Sy(i),d={done:!1,value:a[0]},u=H2(n&&n.length===a.length?n:q2(a),s),h=B2(u,a,{ease:Array.isArray(c)?c:G2(a,c)});return{calculatedDuration:s,next:x=>(d.value=h(x),d.done=x>=s,d)}}const Y2=s=>s!==null;function Kg(s,{repeat:a,repeatType:n="loop"},i,c=1){const d=s.filter(Y2),h=c<0||a&&n!=="loop"&&a%2===1?0:d.length-1;return!h||i===void 0?d[h]:i}const X2={decay:Zm,inertia:Zm,tween:Co,keyframes:Co,spring:$d};function ij(s){typeof s.type=="string"&&(s.type=X2[s.type])}class Zg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,n){return this.finished.then(a,n)}}const K2=s=>s/100;class Qg extends Zg{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ua.now()&&this.tick(ua.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=a,this.initAnimation(),this.play(),a.autoplay===!1&&this.pause()}initAnimation(){const{options:a}=this;ij(a);const{type:n=Co,repeat:i=0,repeatDelay:c=0,repeatType:d,velocity:u=0}=a;let{keyframes:h}=a;const x=n||Co;x!==Co&&typeof h[0]!="number"&&(this.mixKeyframes=Wo(K2,aj(h[0],h[1])),h=[0,100]);const f=x({...a,keyframes:h});d==="mirror"&&(this.mirroredGenerator=x({...a,keyframes:[...h].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=Xg(f));const{calculatedDuration:y}=f;this.calculatedDuration=y,this.resolvedDuration=y+c,this.totalDuration=this.resolvedDuration*(i+1)-c,this.generator=f}updateTime(a){const n=Math.round(a-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(a,n=!1){const{generator:i,totalDuration:c,mixKeyframes:d,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:x}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:y,repeat:b,repeatType:v,repeatDelay:N,type:E,onUpdate:M,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-c/this.speed,this.startTime)),n?this.currentTime=a:this.updateTime(a);const w=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?w<0:w>c;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let A=this.currentTime,D=i;if(b){const P=Math.min(this.currentTime,c)/h;let G=Math.floor(P),U=P%1;!U&&P>=1&&(U=1),U===1&&G--,G=Math.min(G,b+1),!!(G%2)&&(v==="reverse"?(U=1-U,N&&(U-=N/h)):v==="mirror"&&(D=u)),A=Yr(0,1,U)*h}const C=T?{done:!1,value:y[0]}:D.next(A);d&&(C.value=d(C.value));let{done:S}=C;!T&&x!==null&&(S=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return k&&E!==Zm&&(C.value=Kg(y,this.options,L,this.speed)),M&&M(C.value),k&&this.finish(),C}then(a,n){return this.finished.then(a,n)}get duration(){return Ya(this.calculatedDuration)}get iterationDuration(){const{delay:a=0}=this.options||{};return this.duration+Ya(a)}get time(){return Ya(this.currentTime)}set time(a){a=pr(a),this.currentTime=a,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(ua.now());const n=this.playbackSpeed!==a;this.playbackSpeed=a,n&&(this.time=Ya(this.currentTime))}play(){if(this.isStopped)return;const{driver:a=O2,startTime:n}=this.options;this.driver||(this.driver=a(c=>this.tick(c))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ua.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function Z2(s){for(let a=1;a<s.length;a++)s[a]??(s[a]=s[a-1])}const hi=s=>s*180/Math.PI,Qm=s=>{const a=hi(Math.atan2(s[1],s[0]));return Wm(a)},Q2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Qm,rotateZ:Qm,skewX:s=>hi(Math.atan(s[1])),skewY:s=>hi(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Wm=s=>(s=s%360,s<0&&(s+=360),s),Dy=Qm,Oy=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),_y=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),W2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Oy,scaleY:_y,scale:s=>(Oy(s)+_y(s))/2,rotateX:s=>Wm(hi(Math.atan2(s[6],s[5]))),rotateY:s=>Wm(hi(Math.atan2(-s[2],s[0]))),rotateZ:Dy,rotate:Dy,skewX:s=>hi(Math.atan(s[4])),skewY:s=>hi(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Jm(s){return s.includes("scale")?1:0}function eg(s,a){if(!s||s==="none")return Jm(a);const n=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,c;if(n)i=W2,c=n;else{const h=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Q2,c=h}if(!c)return Jm(a);const d=i[a],u=c[1].split(",").map(eS);return typeof d=="function"?d(u):u[d]}const J2=(s,a)=>{const{transform:n="none"}=getComputedStyle(s);return eg(n,a)};function eS(s){return parseFloat(s.trim())}const vl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(vl),My=s=>s===bl||s===Ie,tS=new Set(["x","y","z"]),sS=vl.filter(s=>!tS.has(s));function aS(s){const a=[];return sS.forEach(n=>{const i=s.getValue(n);i!==void 0&&(a.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),a}const xi={width:({x:s},{paddingLeft:a="0",paddingRight:n="0"})=>s.max-s.min-parseFloat(a)-parseFloat(n),height:({y:s},{paddingTop:a="0",paddingBottom:n="0"})=>s.max-s.min-parseFloat(a)-parseFloat(n),top:(s,{top:a})=>parseFloat(a),left:(s,{left:a})=>parseFloat(a),bottom:({y:s},{top:a})=>parseFloat(a)+(s.max-s.min),right:({x:s},{left:a})=>parseFloat(a)+(s.max-s.min),x:(s,{transform:a})=>eg(a,"x"),y:(s,{transform:a})=>eg(a,"y")};xi.translateX=xi.x;xi.translateY=xi.y;const fi=new Set;let tg=!1,sg=!1,ag=!1;function lj(){if(sg){const s=Array.from(fi).filter(i=>i.needsMeasurement),a=new Set(s.map(i=>i.element)),n=new Map;a.forEach(i=>{const c=aS(i);c.length&&(n.set(i,c),i.render())}),s.forEach(i=>i.measureInitialState()),a.forEach(i=>{i.render();const c=n.get(i);c&&c.forEach(([d,u])=>{i.getValue(d)?.set(u)})}),s.forEach(i=>i.measureEndState()),s.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}sg=!1,tg=!1,fi.forEach(s=>s.complete(ag)),fi.clear()}function oj(){fi.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(sg=!0)})}function rS(){ag=!0,oj(),lj(),ag=!1}class Wg{constructor(a,n,i,c,d,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=n,this.name=i,this.motionValue=c,this.element=d,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(fi.add(this),tg||(tg=!0,Gt.read(oj),Gt.resolveKeyframes(lj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:a,name:n,element:i,motionValue:c}=this;if(a[0]===null){const d=c?.get(),u=a[a.length-1];if(d!==void 0)a[0]=d;else if(i&&n){const h=i.readValue(n,u);h!=null&&(a[0]=h)}a[0]===void 0&&(a[0]=u),c&&d===void 0&&c.set(a[0])}Z2(a)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),fi.delete(this)}cancel(){this.state==="scheduled"&&(fi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nS=s=>s.startsWith("--");function iS(s,a,n){nS(a)?s.style.setProperty(a,n):s.style[a]=n}const lS=Vg(()=>window.ScrollTimeline!==void 0),oS={};function cS(s,a){const n=Vg(s);return()=>oS[a]??n()}const cj=cS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vo=([s,a,n,i])=>`cubic-bezier(${s}, ${a}, ${n}, ${i})`,Ly={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vo([0,.65,.55,1]),circOut:vo([.55,0,1,.45]),backIn:vo([.31,.01,.66,-.59]),backOut:vo([.33,1.53,.69,.99])};function dj(s,a){if(s)return typeof s=="function"?cj()?rj(s,a):"ease-out":Xv(s)?vo(s):Array.isArray(s)?s.map(n=>dj(n,a)||Ly.easeOut):Ly[s]}function dS(s,a,n,{delay:i=0,duration:c=300,repeat:d=0,repeatType:u="loop",ease:h="easeOut",times:x}={},f=void 0){const y={[a]:n};x&&(y.offset=x);const b=dj(h,c);Array.isArray(b)&&(y.easing=b);const v={delay:i,duration:c,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:d+1,direction:u==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),s.animate(y,v)}function uj(s){return typeof s=="function"&&"applyToOptions"in s}function uS({type:s,...a}){return uj(s)&&cj()?s.applyToOptions(a):(a.duration??(a.duration=300),a.ease??(a.ease="easeOut"),a)}class mS extends Zg{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,!a)return;const{element:n,name:i,keyframes:c,pseudoElement:d,allowFlatten:u=!1,finalKeyframe:h,onComplete:x}=a;this.isPseudoElement=!!d,this.allowFlatten=u,this.options=a,zg(typeof a.type!="string");const f=uS(a);this.animation=dS(n,i,c,f,d),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const y=Kg(c,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):iS(n,i,y),this.animation.cancel()}x?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:a}=this;a==="idle"||a==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const a=this.animation.effect?.getComputedTiming?.().duration||0;return Ya(Number(a))}get iterationDuration(){const{delay:a=0}=this.options||{};return this.duration+Ya(a)}get time(){return Ya(Number(this.animation.currentTime)||0)}set time(a){this.finishedTime=null,this.animation.currentTime=pr(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(a){this.animation.startTime=a}attachTimeline({timeline:a,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&lS()?(this.animation.timeline=a,Xa):n(this)}}const mj={anticipate:qv,backInOut:Iv,circInOut:Gv};function gS(s){return s in mj}function hS(s){typeof s.ease=="string"&&gS(s.ease)&&(s.ease=mj[s.ease])}const Fy=10;class xS extends mS{constructor(a){hS(a),ij(a),super(a),a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){const{motionValue:n,onUpdate:i,onComplete:c,element:d,...u}=this.options;if(!n)return;if(a!==void 0){n.set(a);return}const h=new Qg({...u,autoplay:!1}),x=pr(this.finishedTime??this.time);n.setWithVelocity(h.sample(x-Fy).value,h.sample(x).value,Fy),h.stop()}}const Py=(s,a)=>a==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ln.test(s)||s==="0")&&!s.startsWith("url("));function fS(s){const a=s[0];if(s.length===1)return!0;for(let n=0;n<s.length;n++)if(s[n]!==a)return!0}function pS(s,a,n,i){const c=s[0];if(c===null)return!1;if(a==="display"||a==="visibility")return!0;const d=s[s.length-1],u=Py(c,a),h=Py(d,a);return!u||!h?!1:fS(s)||(n==="spring"||uj(n))&&i}function rg(s){s.duration=0,s.type="keyframes"}const yS=new Set(["opacity","clipPath","filter","transform"]),bS=Vg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function vS(s){const{motionValue:a,name:n,repeatDelay:i,repeatType:c,damping:d,type:u}=s;if(!(a?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:x,transformTemplate:f}=a.owner.getProps();return bS()&&n&&yS.has(n)&&(n!=="transform"||!f)&&!x&&!i&&c!=="mirror"&&d!==0&&u!=="inertia"}const jS=40;class NS extends Zg{constructor({autoplay:a=!0,delay:n=0,type:i="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:u="loop",keyframes:h,name:x,motionValue:f,element:y,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ua.now();const v={autoplay:a,delay:n,type:i,repeat:c,repeatDelay:d,repeatType:u,name:x,motionValue:f,element:y,...b},N=y?.KeyframeResolver||Wg;this.keyframeResolver=new N(h,(E,M,L)=>this.onKeyframesResolved(E,M,v,!L),x,f,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,n,i,c){this.keyframeResolver=void 0;const{name:d,type:u,velocity:h,delay:x,isHandoff:f,onUpdate:y}=i;this.resolvedAt=ua.now(),pS(a,d,u,h)||((Xr.instantAnimations||!x)&&y?.(Kg(a,i,n)),a[0]=a[a.length-1],rg(i),i.repeat=0);const v={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>jS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:a},N=!f&&vS(v)?new xS({...v,element:v.motionValue.owner.current}):new Qg(v);N.finished.then(()=>this.notifyFinished()).catch(Xa),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(a,n){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),rS()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wS(s){const a=kS.exec(s);if(!a)return[,];const[,n,i,c]=a;return[`--${n??i}`,c]}function gj(s,a,n=1){const[i,c]=wS(s);if(!i)return;const d=window.getComputedStyle(a).getPropertyValue(i);if(d){const u=d.trim();return Lv(u)?parseFloat(u):u}return qg(c)?gj(c,a,n+1):c}function Jg(s,a){return s?.[a]??s?.default??s}const hj=new Set(["width","height","top","left","right","bottom",...vl]),SS={test:s=>s==="auto",parse:s=>s},xj=s=>a=>a.test(s),fj=[bl,Ie,yr,Rn,f2,x2,SS],zy=s=>fj.find(xj(s));function CS(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Pv(s):!0}const AS=new Set(["brightness","contrast","saturate","opacity"]);function TS(s){const[a,n]=s.slice(0,-1).split("(");if(a==="drop-shadow")return s;const[i]=n.match(Hg)||[];if(!i)return s;const c=n.replace(i,"");let d=AS.has(a)?1:0;return i!==n&&(d*=100),a+"("+d+c+")"}const ES=/\b([a-z-]*)\(.*?\)/gu,ng={...Ln,getAnimatableNone:s=>{const a=s.match(ES);return a?a.map(TS).join(" "):s}},Vy={...bl,transform:Math.round},RS={rotate:Rn,rotateX:Rn,rotateY:Rn,rotateZ:Rn,scale:gd,scaleX:gd,scaleY:gd,scaleZ:gd,skew:Rn,skewX:Rn,skewY:Rn,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Lo,originX:Cy,originY:Cy,originZ:Ie},eh={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...RS,zIndex:Vy,fillOpacity:Lo,strokeOpacity:Lo,numOctaves:Vy},DS={...eh,color:bs,backgroundColor:bs,outlineColor:bs,fill:bs,stroke:bs,borderColor:bs,borderTopColor:bs,borderRightColor:bs,borderBottomColor:bs,borderLeftColor:bs,filter:ng,WebkitFilter:ng},pj=s=>DS[s];function yj(s,a){let n=pj(s);return n!==ng&&(n=Ln),n.getAnimatableNone?n.getAnimatableNone(a):void 0}const OS=new Set(["auto","none","0"]);function _S(s,a,n){let i=0,c;for(;i<s.length&&!c;){const d=s[i];typeof d=="string"&&!OS.has(d)&&Fo(d).values.length&&(c=s[i]),i++}if(c&&n)for(const d of a)s[d]=yj(n,c)}class MS extends Wg{constructor(a,n,i,c,d){super(a,n,i,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:a,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let x=0;x<a.length;x++){let f=a[x];if(typeof f=="string"&&(f=f.trim(),qg(f))){const y=gj(f,n.current);y!==void 0&&(a[x]=y),x===a.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!hj.has(i)||a.length!==2)return;const[c,d]=a,u=zy(c),h=zy(d);if(u!==h)if(My(u)&&My(h))for(let x=0;x<a.length;x++){const f=a[x];typeof f=="string"&&(a[x]=parseFloat(f))}else xi[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:a,name:n}=this,i=[];for(let c=0;c<a.length;c++)(a[c]===null||CS(a[c]))&&i.push(c);i.length&&_S(a,i,n)}measureInitialState(){const{element:a,unresolvedKeyframes:n,name:i}=this;if(!a||!a.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xi[i](a.measureViewportBox(),window.getComputedStyle(a.current)),n[0]=this.measuredOrigin;const c=n[n.length-1];c!==void 0&&a.getValue(i,c).jump(c,!1)}measureEndState(){const{element:a,name:n,unresolvedKeyframes:i}=this;if(!a||!a.current)return;const c=a.getValue(n);c&&c.jump(this.measuredOrigin,!1);const d=i.length-1,u=i[d];i[d]=xi[n](a.measureViewportBox(),window.getComputedStyle(a.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,x])=>{a.getValue(h).set(x)}),this.resolveNoneKeyframes()}}function LS(s,a,n){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let i=document;const c=n?.[s]??i.querySelectorAll(s);return c?Array.from(c):[]}return Array.from(s)}const bj=(s,a)=>a&&typeof s=="number"?a.transform(s):s;function vj(s){return Fv(s)&&"offsetHeight"in s}const $y=30,FS=s=>!isNaN(parseFloat(s));class PS{constructor(a,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const c=ua.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=n.owner}setCurrent(a){this.current=a,this.updatedAt=ua.now(),this.canTrackVelocity===null&&a!==void 0&&(this.canTrackVelocity=FS(this.current))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,n){this.events[a]||(this.events[a]=new $g);const i=this.events[a].add(n);return a==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,n){this.passiveEffect=a,this.stopPassiveEffect=n}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-i}jump(a,n=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const a=ua.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||a-this.updatedAt>$y)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$y);return zv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(a){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=a(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(s,a){return new PS(s,a)}const{schedule:th}=Kv(queueMicrotask,!1),ar={x:!1,y:!1};function jj(){return ar.x||ar.y}function zS(s){return s==="x"||s==="y"?ar[s]?null:(ar[s]=!0,()=>{ar[s]=!1}):ar.x||ar.y?null:(ar.x=ar.y=!0,()=>{ar.x=ar.y=!1})}function Nj(s,a){const n=LS(s),i=new AbortController,c={passive:!0,...a,signal:i.signal};return[n,c,()=>i.abort()]}function Uy(s){return!(s.pointerType==="touch"||jj())}function VS(s,a,n={}){const[i,c,d]=Nj(s,n),u=h=>{if(!Uy(h))return;const{target:x}=h,f=a(x,h);if(typeof f!="function"||!x)return;const y=b=>{Uy(b)&&(f(b),x.removeEventListener("pointerleave",y))};x.addEventListener("pointerleave",y,c)};return i.forEach(h=>{h.addEventListener("pointerenter",u,c)}),d}const kj=(s,a)=>a?s===a?!0:kj(s,a.parentElement):!1,sh=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,$S=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function US(s){return $S.has(s.tagName)||s.tabIndex!==-1}const Cd=new WeakSet;function By(s){return a=>{a.key==="Enter"&&s(a)}}function vm(s,a){s.dispatchEvent(new PointerEvent("pointer"+a,{isPrimary:!0,bubbles:!0}))}const BS=(s,a)=>{const n=s.currentTarget;if(!n)return;const i=By(()=>{if(Cd.has(n))return;vm(n,"down");const c=By(()=>{vm(n,"up")}),d=()=>vm(n,"cancel");n.addEventListener("keyup",c,a),n.addEventListener("blur",d,a)});n.addEventListener("keydown",i,a),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),a)};function Iy(s){return sh(s)&&!jj()}function IS(s,a,n={}){const[i,c,d]=Nj(s,n),u=h=>{const x=h.currentTarget;if(!Iy(h))return;Cd.add(x);const f=a(x,h),y=(N,E)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",v),Cd.has(x)&&Cd.delete(x),Iy(N)&&typeof f=="function"&&f(N,{success:E})},b=N=>{y(N,x===window||x===document||n.useGlobalTarget||kj(x,N.target))},v=N=>{y(N,!1)};window.addEventListener("pointerup",b,c),window.addEventListener("pointercancel",v,c)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,c),vj(h)&&(h.addEventListener("focus",f=>BS(f,c)),!US(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),d}function wj(s){return Fv(s)&&"ownerSVGElement"in s}function qS(s){return wj(s)&&s.tagName==="svg"}const Is=s=>!!(s&&s.getVelocity),HS=[...fj,bs,Ln],GS=s=>HS.find(xj(s)),ah=p.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function qy(s,a){if(typeof s=="function")return s(a);s!=null&&(s.current=a)}function YS(...s){return a=>{let n=!1;const i=s.map(c=>{const d=qy(c,a);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let c=0;c<i.length;c++){const d=i[c];typeof d=="function"?d():qy(s[c],null)}}}}function XS(...s){return p.useCallback(YS(...s),s)}class KS extends p.Component{getSnapshotBeforeUpdate(a){const n=this.props.childRef.current;if(n&&a.isPresent&&!this.props.isPresent){const i=n.offsetParent,c=vj(i)&&i.offsetWidth||0,d=this.props.sizeRef.current;d.height=n.offsetHeight||0,d.width=n.offsetWidth||0,d.top=n.offsetTop,d.left=n.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZS({children:s,isPresent:a,anchorX:n,root:i}){const c=p.useId(),d=p.useRef(null),u=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=p.useContext(ah),x=XS(d,s?.ref);return p.useInsertionEffect(()=>{const{width:f,height:y,top:b,left:v,right:N}=u.current;if(a||!d.current||!f||!y)return;const E=n==="left"?`left: ${v}`:`right: ${N}`;d.current.dataset.motionPopId=c;const M=document.createElement("style");h&&(M.nonce=h);const L=i??document.head;return L.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${y}px !important;
            ${E}px !important;
            top: ${b}px !important;
          }
        `),()=>{L.contains(M)&&L.removeChild(M)}},[a]),e.jsx(KS,{isPresent:a,childRef:d,sizeRef:u,children:p.cloneElement(s,{ref:x})})}const QS=({children:s,initial:a,isPresent:n,onExitComplete:i,custom:c,presenceAffectsLayout:d,mode:u,anchorX:h,root:x})=>{const f=Mg(WS),y=p.useId();let b=!0,v=p.useMemo(()=>(b=!1,{id:y,initial:a,isPresent:n,custom:c,onExitComplete:N=>{f.set(N,!0);for(const E of f.values())if(!E)return;i&&i()},register:N=>(f.set(N,!1),()=>f.delete(N))}),[n,f,i]);return d&&b&&(v={...v}),p.useMemo(()=>{f.forEach((N,E)=>f.set(E,!1))},[n]),p.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),u==="popLayout"&&(s=e.jsx(ZS,{isPresent:n,anchorX:h,root:x,children:s})),e.jsx(Zd.Provider,{value:v,children:s})};function WS(){return new Map}function Sj(s=!0){const a=p.useContext(Zd);if(a===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:c}=a,d=p.useId();p.useEffect(()=>{if(s)return c(d)},[s]);const u=p.useCallback(()=>s&&i&&i(d),[d,i,s]);return!n&&i?[!1,u]:[!0]}const hd=s=>s.key||"";function Hy(s){const a=[];return p.Children.forEach(s,n=>{p.isValidElement(n)&&a.push(n)}),a}const Nr=({children:s,custom:a,initial:n=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:h="left",root:x})=>{const[f,y]=Sj(u),b=p.useMemo(()=>Hy(s),[s]),v=u&&!f?[]:b.map(hd),N=p.useRef(!0),E=p.useRef(b),M=Mg(()=>new Map),[L,w]=p.useState(b),[T,A]=p.useState(b);Mv(()=>{N.current=!1,E.current=b;for(let S=0;S<T.length;S++){const k=hd(T[S]);v.includes(k)?M.delete(k):M.get(k)!==!0&&M.set(k,!1)}},[T,v.length,v.join("-")]);const D=[];if(b!==L){let S=[...b];for(let k=0;k<T.length;k++){const P=T[k],G=hd(P);v.includes(G)||(S.splice(k,0,P),D.push(P))}return d==="wait"&&D.length&&(S=D),A(Hy(S)),w(b),null}const{forceRender:C}=p.useContext(_g);return e.jsx(e.Fragment,{children:T.map(S=>{const k=hd(S),P=u&&!f?!1:b===T||v.includes(k),G=()=>{if(M.has(k))M.set(k,!0);else return;let U=!0;M.forEach(Q=>{Q||(U=!1)}),U&&(C?.(),A(E.current),u&&y?.(),i&&i())};return e.jsx(QS,{isPresent:P,initial:!N.current||n?void 0:!1,custom:a,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:P?void 0:G,anchorX:h,children:S},k)})})},Cj=p.createContext({strict:!1}),Gy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xl={};for(const s in Gy)xl[s]={isEnabled:a=>Gy[s].some(n=>!!a[n])};function JS(s){for(const a in s)xl[a]={...xl[a],...s[a]}}const eC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ud(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||eC.has(s)}let Aj=s=>!Ud(s);function tC(s){typeof s=="function"&&(Aj=a=>a.startsWith("on")?!Ud(a):s(a))}try{tC(require("@emotion/is-prop-valid").default)}catch{}function sC(s,a,n){const i={};for(const c in s)c==="values"&&typeof s.values=="object"||(Aj(c)||n===!0&&Ud(c)||!a&&!Ud(c)||s.draggable&&c.startsWith("onDrag"))&&(i[c]=s[c]);return i}const Qd=p.createContext({});function Wd(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Po(s){return typeof s=="string"||Array.isArray(s)}const rh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nh=["initial",...rh];function Jd(s){return Wd(s.animate)||nh.some(a=>Po(s[a]))}function Tj(s){return!!(Jd(s)||s.variants)}function aC(s,a){if(Jd(s)){const{initial:n,animate:i}=s;return{initial:n===!1||Po(n)?n:void 0,animate:Po(i)?i:void 0}}return s.inherit!==!1?a:{}}function rC(s){const{initial:a,animate:n}=aC(s,p.useContext(Qd));return p.useMemo(()=>({initial:a,animate:n}),[Yy(a),Yy(n)])}function Yy(s){return Array.isArray(s)?s.join(" "):s}const zo={};function nC(s){for(const a in s)zo[a]=s[a],Ig(a)&&(zo[a].isCSSVariable=!0)}function Ej(s,{layout:a,layoutId:n}){return jl.has(s)||s.startsWith("origin")||(a||n!==void 0)&&(!!zo[s]||s==="opacity")}const iC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lC=vl.length;function oC(s,a,n){let i="",c=!0;for(let d=0;d<lC;d++){const u=vl[d],h=s[u];if(h===void 0)continue;let x=!0;if(typeof h=="number"?x=h===(u.startsWith("scale")?1:0):x=parseFloat(h)===0,!x||n){const f=bj(h,eh[u]);if(!x){c=!1;const y=iC[u]||u;i+=`${y}(${f}) `}n&&(a[u]=f)}}return i=i.trim(),n?i=n(a,c?"":i):c&&(i="none"),i}function ih(s,a,n){const{style:i,vars:c,transformOrigin:d}=s;let u=!1,h=!1;for(const x in a){const f=a[x];if(jl.has(x)){u=!0;continue}else if(Ig(x)){c[x]=f;continue}else{const y=bj(f,eh[x]);x.startsWith("origin")?(h=!0,d[x]=y):i[x]=y}}if(a.transform||(u||n?i.transform=oC(a,s.transform,n):i.transform&&(i.transform="none")),h){const{originX:x="50%",originY:f="50%",originZ:y=0}=d;i.transformOrigin=`${x} ${f} ${y}`}}const lh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rj(s,a,n){for(const i in a)!Is(a[i])&&!Ej(i,n)&&(s[i]=a[i])}function cC({transformTemplate:s},a){return p.useMemo(()=>{const n=lh();return ih(n,a,s),Object.assign({},n.vars,n.style)},[a])}function dC(s,a){const n=s.style||{},i={};return Rj(i,n,s),Object.assign(i,cC(s,a)),i}function uC(s,a){const n={},i=dC(s,a);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=i,n}const mC={offset:"stroke-dashoffset",array:"stroke-dasharray"},gC={offset:"strokeDashoffset",array:"strokeDasharray"};function hC(s,a,n=1,i=0,c=!0){s.pathLength=1;const d=c?mC:gC;s[d.offset]=Ie.transform(-i);const u=Ie.transform(a),h=Ie.transform(n);s[d.array]=`${u} ${h}`}function Dj(s,{attrX:a,attrY:n,attrScale:i,pathLength:c,pathSpacing:d=1,pathOffset:u=0,...h},x,f,y){if(ih(s,h,f),x){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:b,style:v}=s;b.transform&&(v.transform=b.transform,delete b.transform),(v.transform||b.transformOrigin)&&(v.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),v.transform&&(v.transformBox=y?.transformBox??"fill-box",delete b.transformBox),a!==void 0&&(b.x=a),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),c!==void 0&&hC(b,c,d,u,!1)}const Oj=()=>({...lh(),attrs:{}}),_j=s=>typeof s=="string"&&s.toLowerCase()==="svg";function xC(s,a,n,i){const c=p.useMemo(()=>{const d=Oj();return Dj(d,a,_j(i),s.transformTemplate,s.style),{...d.attrs,style:{...d.style}}},[a]);if(s.style){const d={};Rj(d,s.style,s),c.style={...d,...c.style}}return c}const fC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oh(s){return typeof s!="string"||s.includes("-")?!1:!!(fC.indexOf(s)>-1||/[A-Z]/u.test(s))}function pC(s,a,n,{latestValues:i},c,d=!1){const h=(oh(s)?xC:uC)(a,i,c,s),x=sC(a,typeof s=="string",d),f=s!==p.Fragment?{...x,...h,ref:n}:{},{children:y}=a,b=p.useMemo(()=>Is(y)?y.get():y,[y]);return p.createElement(s,{...f,children:b})}function Xy(s){const a=[{},{}];return s?.values.forEach((n,i)=>{a[0][i]=n.get(),a[1][i]=n.getVelocity()}),a}function ch(s,a,n,i){if(typeof a=="function"){const[c,d]=Xy(i);a=a(n!==void 0?n:s.custom,c,d)}if(typeof a=="string"&&(a=s.variants&&s.variants[a]),typeof a=="function"){const[c,d]=Xy(i);a=a(n!==void 0?n:s.custom,c,d)}return a}function Ad(s){return Is(s)?s.get():s}function yC({scrapeMotionValuesFromProps:s,createRenderState:a},n,i,c){return{latestValues:bC(n,i,c,s),renderState:a()}}function bC(s,a,n,i){const c={},d=i(s,{});for(const v in d)c[v]=Ad(d[v]);let{initial:u,animate:h}=s;const x=Jd(s),f=Tj(s);a&&f&&!x&&s.inherit!==!1&&(u===void 0&&(u=a.initial),h===void 0&&(h=a.animate));let y=n?n.initial===!1:!1;y=y||u===!1;const b=y?h:u;if(b&&typeof b!="boolean"&&!Wd(b)){const v=Array.isArray(b)?b:[b];for(let N=0;N<v.length;N++){const E=ch(s,v[N]);if(E){const{transitionEnd:M,transition:L,...w}=E;for(const T in w){let A=w[T];if(Array.isArray(A)){const D=y?A.length-1:0;A=A[D]}A!==null&&(c[T]=A)}for(const T in M)c[T]=M[T]}}}return c}const Mj=s=>(a,n)=>{const i=p.useContext(Qd),c=p.useContext(Zd),d=()=>yC(s,a,i,c);return n?d():Mg(d)};function dh(s,a,n){const{style:i}=s,c={};for(const d in i)(Is(i[d])||a.style&&Is(a.style[d])||Ej(d,s)||n?.getValue(d)?.liveStyle!==void 0)&&(c[d]=i[d]);return c}const vC=Mj({scrapeMotionValuesFromProps:dh,createRenderState:lh});function Lj(s,a,n){const i=dh(s,a,n);for(const c in s)if(Is(s[c])||Is(a[c])){const d=vl.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;i[d]=s[c]}return i}const jC=Mj({scrapeMotionValuesFromProps:Lj,createRenderState:Oj}),NC=Symbol.for("motionComponentSymbol");function nl(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function kC(s,a,n){return p.useCallback(i=>{i&&s.onMount&&s.onMount(i),a&&(i?a.mount(i):a.unmount()),n&&(typeof n=="function"?n(i):nl(n)&&(n.current=i))},[a])}const uh=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wC="framerAppearId",Fj="data-"+uh(wC),Pj=p.createContext({});function SC(s,a,n,i,c){const{visualElement:d}=p.useContext(Qd),u=p.useContext(Cj),h=p.useContext(Zd),x=p.useContext(ah).reducedMotion,f=p.useRef(null);i=i||u.renderer,!f.current&&i&&(f.current=i(s,{visualState:a,parent:d,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:x}));const y=f.current,b=p.useContext(Pj);y&&!y.projection&&c&&(y.type==="html"||y.type==="svg")&&CC(f.current,n,c,b);const v=p.useRef(!1);p.useInsertionEffect(()=>{y&&v.current&&y.update(n,h)});const N=n[Fj],E=p.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return Mv(()=>{y&&(v.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),E.current&&y.animationState&&y.animationState.animateChanges())}),p.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),E.current=!1),y.enteringChildren=void 0)}),y}function CC(s,a,n,i){const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:x,layoutRoot:f,layoutCrossfade:y}=a;s.projection=new n(s.latestValues,a["data-framer-portal-id"]?void 0:zj(s.parent)),s.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&nl(h),visualElement:s,animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,crossfade:y,layoutScroll:x,layoutRoot:f})}function zj(s){if(s)return s.options.allowProjection!==!1?s.projection:zj(s.parent)}function jm(s,{forwardMotionProps:a=!1}={},n,i){n&&JS(n);const c=oh(s)?jC:vC;function d(h,x){let f;const y={...p.useContext(ah),...h,layoutId:AC(h)},{isStatic:b}=y,v=rC(h),N=c(h,b);if(!b&&Lg){TC();const E=EC(y);f=E.MeasureLayout,v.visualElement=SC(s,N,y,i,E.ProjectionNode)}return e.jsxs(Qd.Provider,{value:v,children:[f&&v.visualElement?e.jsx(f,{visualElement:v.visualElement,...y}):null,pC(s,h,kC(N,v.visualElement,x),N,b,a)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=p.forwardRef(d);return u[NC]=s,u}function AC({layoutId:s}){const a=p.useContext(_g).id;return a&&s!==void 0?a+"-"+s:s}function TC(s,a){p.useContext(Cj).strict}function EC(s){const{drag:a,layout:n}=xl;if(!a&&!n)return{};const i={...a,...n};return{MeasureLayout:a?.isEnabled(s)||n?.isEnabled(s)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function RC(s,a){if(typeof Proxy>"u")return jm;const n=new Map,i=(d,u)=>jm(d,u,s,a),c=(d,u)=>i(d,u);return new Proxy(c,{get:(d,u)=>u==="create"?i:(n.has(u)||n.set(u,jm(u,void 0,s,a)),n.get(u))})}function Vj({top:s,left:a,right:n,bottom:i}){return{x:{min:a,max:n},y:{min:s,max:i}}}function DC({x:s,y:a}){return{top:a.min,right:s.max,bottom:a.max,left:s.min}}function OC(s,a){if(!a)return s;const n=a({x:s.left,y:s.top}),i=a({x:s.right,y:s.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Nm(s){return s===void 0||s===1}function ig({scale:s,scaleX:a,scaleY:n}){return!Nm(s)||!Nm(a)||!Nm(n)}function mi(s){return ig(s)||$j(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function $j(s){return Ky(s.x)||Ky(s.y)}function Ky(s){return s&&s!=="0%"}function Bd(s,a,n){const i=s-n,c=a*i;return n+c}function Zy(s,a,n,i,c){return c!==void 0&&(s=Bd(s,c,i)),Bd(s,n,i)+a}function lg(s,a=0,n=1,i,c){s.min=Zy(s.min,a,n,i,c),s.max=Zy(s.max,a,n,i,c)}function Uj(s,{x:a,y:n}){lg(s.x,a.translate,a.scale,a.originPoint),lg(s.y,n.translate,n.scale,n.originPoint)}const Qy=.999999999999,Wy=1.0000000000001;function _C(s,a,n,i=!1){const c=n.length;if(!c)return;a.x=a.y=1;let d,u;for(let h=0;h<c;h++){d=n[h],u=d.projectionDelta;const{visualElement:x}=d.options;x&&x.props.style&&x.props.style.display==="contents"||(i&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ll(s,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),u&&(a.x*=u.x.scale,a.y*=u.y.scale,Uj(s,u)),i&&mi(d.latestValues)&&ll(s,d.latestValues))}a.x<Wy&&a.x>Qy&&(a.x=1),a.y<Wy&&a.y>Qy&&(a.y=1)}function il(s,a){s.min=s.min+a,s.max=s.max+a}function Jy(s,a,n,i,c=.5){const d=Kt(s.min,s.max,c);lg(s,a,n,d,i)}function ll(s,a){Jy(s.x,a.x,a.scaleX,a.scale,a.originX),Jy(s.y,a.y,a.scaleY,a.scale,a.originY)}function Bj(s,a){return Vj(OC(s.getBoundingClientRect(),a))}function MC(s,a,n){const i=Bj(s,n),{scroll:c}=a;return c&&(il(i.x,c.offset.x),il(i.y,c.offset.y)),i}const eb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ol=()=>({x:eb(),y:eb()}),tb=()=>({min:0,max:0}),us=()=>({x:tb(),y:tb()}),og={current:null},Ij={current:!1};function LC(){if(Ij.current=!0,!!Lg)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),a=()=>og.current=s.matches;s.addEventListener("change",a),a()}else og.current=!1}const FC=new WeakMap;function PC(s,a,n){for(const i in a){const c=a[i],d=n[i];if(Is(c))s.addValue(i,c);else if(Is(d))s.addValue(i,hl(c,{owner:s}));else if(d!==c)if(s.hasValue(i)){const u=s.getValue(i);u.liveStyle===!0?u.jump(c):u.hasAnimated||u.set(c)}else{const u=s.getStaticValue(i);s.addValue(i,hl(u!==void 0?u:c,{owner:s}))}}for(const i in n)a[i]===void 0&&s.removeValue(i);return a}const sb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zC{scrapeMotionValuesFromProps(a,n,i){return{}}constructor({parent:a,props:n,presenceContext:i,reducedMotionConfig:c,blockInitialAnimation:d,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ua.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Gt.render(this.render,!1,!0))};const{latestValues:x,renderState:f}=u;this.latestValues=x,this.baseTarget={...x},this.initialValues=n.initial?{...x}:{},this.renderState=f,this.parent=a,this.props=n,this.presenceContext=i,this.depth=a?a.depth+1:0,this.reducedMotionConfig=c,this.options=h,this.blockInitialAnimation=!!d,this.isControllingVariants=Jd(n),this.isVariantNode=Tj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in b){const N=b[v];x[v]!==void 0&&Is(N)&&N.set(x[v])}}mount(a){this.current=a,FC.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Ij.current||LC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:og.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mn(this.notifyUpdate),Mn(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const n=this.features[a];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,n){this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();const i=jl.has(a);i&&this.onBindTransform&&this.onBindTransform();const c=n.on("change",u=>{this.latestValues[a]=u,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,a,n)),this.valueSubscriptions.set(a,()=>{c(),d&&d(),n.owner&&n.stop()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}updateFeatures(){let a="animation";for(a in xl){const n=xl[a];if(!n)continue;const{isEnabled:i,Feature:c}=n;if(!this.features[a]&&c&&i(this.props)&&(this.features[a]=new c(this)),this.features[a]){const d=this.features[a];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):us()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,n){this.latestValues[a]=n}update(a,n){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<sb.length;i++){const c=sb[i];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,u=a[d];u&&(this.propEventSubscriptions[c]=this.on(c,u))}this.prevMotionValues=PC(this,this.scrapeMotionValuesFromProps(a,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(a),()=>n.variantChildren.delete(a)}addValue(a,n){const i=this.values.get(a);n!==i&&(i&&this.removeValue(a),this.bindToMotionValue(a,n),this.values.set(a,n),this.latestValues[a]=n.get())}removeValue(a){this.values.delete(a);const n=this.valueSubscriptions.get(a);n&&(n(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,n){if(this.props.values&&this.props.values[a])return this.props.values[a];let i=this.values.get(a);return i===void 0&&n!==void 0&&(i=hl(n===null?void 0:n,{owner:this}),this.addValue(a,i)),i}readValue(a,n){let i=this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options);return i!=null&&(typeof i=="string"&&(Lv(i)||Pv(i))?i=parseFloat(i):!GS(i)&&Ln.test(n)&&(i=yj(a,n)),this.setBaseTarget(a,Is(i)?i.get():i)),Is(i)?i.get():i}setBaseTarget(a,n){this.baseTarget[a]=n}getBaseTarget(a){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const d=ch(this.props,n,this.presenceContext?.custom);d&&(i=d[a])}if(n&&i!==void 0)return i;const c=this.getBaseTargetFromProps(this.props,a);return c!==void 0&&!Is(c)?c:this.initialValues[a]!==void 0&&i===void 0?void 0:this.baseTarget[a]}on(a,n){return this.events[a]||(this.events[a]=new $g),this.events[a].add(n)}notify(a,...n){this.events[a]&&this.events[a].notify(...n)}scheduleRenderMicrotask(){th.render(this.render)}}class qj extends zC{constructor(){super(...arguments),this.KeyframeResolver=MS}sortInstanceNodePosition(a,n){return a.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(a,n){return a.style?a.style[n]:void 0}removeValueFromRenderState(a,{vars:n,style:i}){delete n[a],delete i[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:a}=this.props;Is(a)&&(this.childSubscription=a.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Hj(s,{style:a,vars:n},i,c){const d=s.style;let u;for(u in a)d[u]=a[u];c?.applyProjectionStyles(d,i);for(u in n)d.setProperty(u,n[u])}function VC(s){return window.getComputedStyle(s)}class $C extends qj{constructor(){super(...arguments),this.type="html",this.renderInstance=Hj}readValueFromInstance(a,n){if(jl.has(n))return this.projection?.isProjecting?Jm(n):J2(a,n);{const i=VC(a),c=(Ig(n)?i.getPropertyValue(n):i[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(a,{transformPagePoint:n}){return Bj(a,n)}build(a,n,i){ih(a,n,i.transformTemplate)}scrapeMotionValuesFromProps(a,n,i){return dh(a,n,i)}}const Gj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UC(s,a,n,i){Hj(s,a,void 0,i);for(const c in a.attrs)s.setAttribute(Gj.has(c)?c:uh(c),a.attrs[c])}class BC extends qj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=us}getBaseTargetFromProps(a,n){return a[n]}readValueFromInstance(a,n){if(jl.has(n)){const i=pj(n);return i&&i.default||0}return n=Gj.has(n)?n:uh(n),a.getAttribute(n)}scrapeMotionValuesFromProps(a,n,i){return Lj(a,n,i)}build(a,n,i){Dj(a,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(a,n,i,c){UC(a,n,i,c)}mount(a){this.isSVGTag=_j(a.tagName),super.mount(a)}}const IC=(s,a)=>oh(s)?new BC(a):new $C(a,{allowProjection:s!==p.Fragment});function ul(s,a,n){const i=s.getProps();return ch(i,a,n!==void 0?n:i.custom,s)}const cg=s=>Array.isArray(s);function qC(s,a,n){s.hasValue(a)?s.getValue(a).set(n):s.addValue(a,hl(n))}function HC(s){return cg(s)?s[s.length-1]||0:s}function GC(s,a){const n=ul(s,a);let{transitionEnd:i={},transition:c={},...d}=n||{};d={...d,...i};for(const u in d){const h=HC(d[u]);qC(s,u,h)}}function YC(s){return!!(Is(s)&&s.add)}function dg(s,a){const n=s.getValue("willChange");if(YC(n))return n.add(a);if(!n&&Xr.WillChange){const i=new Xr.WillChange("auto");s.addValue("willChange",i),i.add(a)}}function Yj(s){return s.props[Fj]}const XC=s=>s!==null;function KC(s,{repeat:a,repeatType:n="loop"},i){const c=s.filter(XC),d=a&&n!=="loop"&&a%2===1?0:c.length-1;return c[d]}const ZC={type:"spring",stiffness:500,damping:25,restSpeed:10},QC=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),WC={type:"keyframes",duration:.8},JC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},e3=(s,{keyframes:a})=>a.length>2?WC:jl.has(s)?s.startsWith("scale")?QC(a[1]):ZC:JC;function t3({when:s,delay:a,delayChildren:n,staggerChildren:i,staggerDirection:c,repeat:d,repeatType:u,repeatDelay:h,from:x,elapsed:f,...y}){return!!Object.keys(y).length}const mh=(s,a,n,i={},c,d)=>u=>{const h=Jg(i,s)||{},x=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-pr(x);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:a.getVelocity(),...h,delay:-f,onUpdate:v=>{a.set(v),h.onUpdate&&h.onUpdate(v)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:s,motionValue:a,element:d?void 0:c};t3(h)||Object.assign(y,e3(s,y)),y.duration&&(y.duration=pr(y.duration)),y.repeatDelay&&(y.repeatDelay=pr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(rg(y),y.delay===0&&(b=!0)),(Xr.instantAnimations||Xr.skipAnimations)&&(b=!0,rg(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,b&&!d&&a.get()!==void 0){const v=KC(y.keyframes,h);if(v!==void 0){Gt.update(()=>{y.onUpdate(v),y.onComplete()});return}}return h.isSync?new Qg(y):new NS(y)};function s3({protectedKeys:s,needsAnimating:a},n){const i=s.hasOwnProperty(n)&&a[n]!==!0;return a[n]=!1,i}function Xj(s,a,{delay:n=0,transitionOverride:i,type:c}={}){let{transition:d=s.getDefaultTransition(),transitionEnd:u,...h}=a;i&&(d=i);const x=[],f=c&&s.animationState&&s.animationState.getState()[c];for(const y in h){const b=s.getValue(y,s.latestValues[y]??null),v=h[y];if(v===void 0||f&&s3(f,y))continue;const N={delay:n,...Jg(d||{},y)},E=b.get();if(E!==void 0&&!b.isAnimating&&!Array.isArray(v)&&v===E&&!N.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const w=Yj(s);if(w){const T=window.MotionHandoffAnimation(w,y,Gt);T!==null&&(N.startTime=T,M=!0)}}dg(s,y),b.start(mh(y,b,v,s.shouldReduceMotion&&hj.has(y)?{type:!1}:N,s,M));const L=b.animation;L&&x.push(L)}return u&&Promise.all(x).then(()=>{Gt.update(()=>{u&&GC(s,u)})}),x}function Kj(s,a,n,i=0,c=1){const d=Array.from(s).sort((f,y)=>f.sortNodePosition(y)).indexOf(a),u=s.size,h=(u-1)*i;return typeof n=="function"?n(d,u):c===1?d*i:h-d*i}function ug(s,a,n={}){const i=ul(s,a,n.type==="exit"?s.presenceContext?.custom:void 0);let{transition:c=s.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(c=n.transitionOverride);const d=i?()=>Promise.all(Xj(s,i,n)):()=>Promise.resolve(),u=s.variantChildren&&s.variantChildren.size?(x=0)=>{const{delayChildren:f=0,staggerChildren:y,staggerDirection:b}=c;return a3(s,a,x,f,y,b,n)}:()=>Promise.resolve(),{when:h}=c;if(h){const[x,f]=h==="beforeChildren"?[d,u]:[u,d];return x().then(()=>f())}else return Promise.all([d(),u(n.delay)])}function a3(s,a,n=0,i=0,c=0,d=1,u){const h=[];for(const x of s.variantChildren)x.notify("AnimationStart",a),h.push(ug(x,a,{...u,delay:n+(typeof i=="function"?0:i)+Kj(s.variantChildren,x,i,c,d)}).then(()=>x.notify("AnimationComplete",a)));return Promise.all(h)}function r3(s,a,n={}){s.notify("AnimationStart",a);let i;if(Array.isArray(a)){const c=a.map(d=>ug(s,d,n));i=Promise.all(c)}else if(typeof a=="string")i=ug(s,a,n);else{const c=typeof a=="function"?ul(s,a,n.custom):a;i=Promise.all(Xj(s,c,n))}return i.then(()=>{s.notify("AnimationComplete",a)})}function Zj(s,a){if(!Array.isArray(a))return!1;const n=a.length;if(n!==s.length)return!1;for(let i=0;i<n;i++)if(a[i]!==s[i])return!1;return!0}const n3=nh.length;function Qj(s){if(!s)return;if(!s.isControllingVariants){const n=s.parent?Qj(s.parent)||{}:{};return s.props.initial!==void 0&&(n.initial=s.props.initial),n}const a={};for(let n=0;n<n3;n++){const i=nh[n],c=s.props[i];(Po(c)||c===!1)&&(a[i]=c)}return a}const i3=[...rh].reverse(),l3=rh.length;function o3(s){return a=>Promise.all(a.map(({animation:n,options:i})=>r3(s,n,i)))}function c3(s){let a=o3(s),n=ab(),i=!0;const c=x=>(f,y)=>{const b=ul(s,y,x==="exit"?s.presenceContext?.custom:void 0);if(b){const{transition:v,transitionEnd:N,...E}=b;f={...f,...E,...N}}return f};function d(x){a=x(s)}function u(x){const{props:f}=s,y=Qj(s.parent)||{},b=[],v=new Set;let N={},E=1/0;for(let L=0;L<l3;L++){const w=i3[L],T=n[w],A=f[w]!==void 0?f[w]:y[w],D=Po(A),C=w===x?T.isActive:null;C===!1&&(E=L);let S=A===y[w]&&A!==f[w]&&D;if(S&&i&&s.manuallyAnimateOnMount&&(S=!1),T.protectedKeys={...N},!T.isActive&&C===null||!A&&!T.prevProp||Wd(A)||typeof A=="boolean")continue;const k=d3(T.prevProp,A);let P=k||w===x&&T.isActive&&!S&&D||L>E&&D,G=!1;const U=Array.isArray(A)?A:[A];let Q=U.reduce(c(w),{});C===!1&&(Q={});const{prevResolvedValues:Z={}}=T,ie={...Z,...Q},J=_=>{P=!0,v.has(_)&&(G=!0,v.delete(_)),T.needsAnimating[_]=!0;const z=s.getValue(_);z&&(z.liveStyle=!1)};for(const _ in ie){const z=Q[_],Y=Z[_];if(N.hasOwnProperty(_))continue;let se=!1;cg(z)&&cg(Y)?se=!Zj(z,Y):se=z!==Y,se?z!=null?J(_):v.add(_):z!==void 0&&v.has(_)?J(_):T.protectedKeys[_]=!0}T.prevProp=A,T.prevResolvedValues=Q,T.isActive&&(N={...N,...Q}),i&&s.blockInitialAnimation&&(P=!1);const te=S&&k;P&&(!te||G)&&b.push(...U.map(_=>{const z={type:w};if(typeof _=="string"&&i&&!te&&s.manuallyAnimateOnMount&&s.parent){const{parent:Y}=s,se=ul(Y,_);if(Y.enteringChildren&&se){const{delayChildren:O}=se.transition||{};z.delay=Kj(Y.enteringChildren,s,O)}}return{animation:_,options:z}}))}if(v.size){const L={};if(typeof f.initial!="boolean"){const w=ul(s,Array.isArray(f.initial)?f.initial[0]:f.initial);w&&w.transition&&(L.transition=w.transition)}v.forEach(w=>{const T=s.getBaseTarget(w),A=s.getValue(w);A&&(A.liveStyle=!0),L[w]=T??null}),b.push({animation:L})}let M=!!b.length;return i&&(f.initial===!1||f.initial===f.animate)&&!s.manuallyAnimateOnMount&&(M=!1),i=!1,M?a(b):Promise.resolve()}function h(x,f){if(n[x].isActive===f)return Promise.resolve();s.variantChildren?.forEach(b=>b.animationState?.setActive(x,f)),n[x].isActive=f;const y=u(x);for(const b in n)n[b].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:d,getState:()=>n,reset:()=>{n=ab()}}}function d3(s,a){return typeof a=="string"?a!==s:Array.isArray(a)?!Zj(a,s):!1}function ui(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ab(){return{animate:ui(!0),whileInView:ui(),whileHover:ui(),whileTap:ui(),whileDrag:ui(),whileFocus:ui(),exit:ui()}}class Vn{constructor(a){this.isMounted=!1,this.node=a}update(){}}class u3 extends Vn{constructor(a){super(a),a.animationState||(a.animationState=c3(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();Wd(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:n}=this.node.prevProps||{};a!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let m3=0;class g3 extends Vn{constructor(){super(...arguments),this.id=m3++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===i)return;const c=this.node.animationState.setActive("exit",!a);n&&!a&&c.then(()=>{n(this.id)})}mount(){const{register:a,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),a&&(this.unmount=a(this.id))}unmount(){}}const h3={animation:{Feature:u3},exit:{Feature:g3}};function Vo(s,a,n,i={passive:!0}){return s.addEventListener(a,n,i),()=>s.removeEventListener(a,n)}function tc(s){return{point:{x:s.pageX,y:s.pageY}}}const x3=s=>a=>sh(a)&&s(a,tc(a));function Ao(s,a,n,i){return Vo(s,a,x3(n),i)}const Wj=1e-4,f3=1-Wj,p3=1+Wj,Jj=.01,y3=0-Jj,b3=0+Jj;function Qs(s){return s.max-s.min}function v3(s,a,n){return Math.abs(s-a)<=n}function rb(s,a,n,i=.5){s.origin=i,s.originPoint=Kt(a.min,a.max,s.origin),s.scale=Qs(n)/Qs(a),s.translate=Kt(n.min,n.max,s.origin)-s.originPoint,(s.scale>=f3&&s.scale<=p3||isNaN(s.scale))&&(s.scale=1),(s.translate>=y3&&s.translate<=b3||isNaN(s.translate))&&(s.translate=0)}function To(s,a,n,i){rb(s.x,a.x,n.x,i?i.originX:void 0),rb(s.y,a.y,n.y,i?i.originY:void 0)}function nb(s,a,n){s.min=n.min+a.min,s.max=s.min+Qs(a)}function j3(s,a,n){nb(s.x,a.x,n.x),nb(s.y,a.y,n.y)}function ib(s,a,n){s.min=a.min-n.min,s.max=s.min+Qs(a)}function Eo(s,a,n){ib(s.x,a.x,n.x),ib(s.y,a.y,n.y)}function Ha(s){return[s("x"),s("y")]}const eN=({current:s})=>s?s.ownerDocument.defaultView:null,lb=(s,a)=>Math.abs(s-a);function N3(s,a){const n=lb(s.x,a.x),i=lb(s.y,a.y);return Math.sqrt(n**2+i**2)}class tN{constructor(a,n,{transformPagePoint:i,contextWindow:c=window,dragSnapToOrigin:d=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=wm(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,E=N3(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!E)return;const{point:M}=v,{timestamp:L}=Fs;this.history.push({...M,timestamp:L});const{onStart:w,onMove:T}=this.handlers;N||(w&&w(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,v)},this.handlePointerMove=(v,N)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=km(N,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(v,N)=>{this.end();const{onEnd:E,onSessionEnd:M,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=wm(v.type==="pointercancel"?this.lastMoveEventInfo:km(N,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,w),M&&M(v,w)},!sh(a))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=c||window;const h=tc(a),x=km(h,this.transformPagePoint),{point:f}=x,{timestamp:y}=Fs;this.history=[{...f,timestamp:y}];const{onSessionStart:b}=n;b&&b(a,wm(x,this.history)),this.removeListeners=Wo(Ao(this.contextWindow,"pointermove",this.handlePointerMove),Ao(this.contextWindow,"pointerup",this.handlePointerUp),Ao(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),Mn(this.updatePoint)}}function km(s,a){return a?{point:a(s.point)}:s}function ob(s,a){return{x:s.x-a.x,y:s.y-a.y}}function wm({point:s},a){return{point:s,delta:ob(s,sN(a)),offset:ob(s,k3(a)),velocity:w3(a,.1)}}function k3(s){return s[0]}function sN(s){return s[s.length-1]}function w3(s,a){if(s.length<2)return{x:0,y:0};let n=s.length-1,i=null;const c=sN(s);for(;n>=0&&(i=s[n],!(c.timestamp-i.timestamp>pr(a)));)n--;if(!i)return{x:0,y:0};const d=Ya(c.timestamp-i.timestamp);if(d===0)return{x:0,y:0};const u={x:(c.x-i.x)/d,y:(c.y-i.y)/d};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function S3(s,{min:a,max:n},i){return a!==void 0&&s<a?s=i?Kt(a,s,i.min):Math.max(s,a):n!==void 0&&s>n&&(s=i?Kt(n,s,i.max):Math.min(s,n)),s}function cb(s,a,n){return{min:a!==void 0?s.min+a:void 0,max:n!==void 0?s.max+n-(s.max-s.min):void 0}}function C3(s,{top:a,left:n,bottom:i,right:c}){return{x:cb(s.x,n,c),y:cb(s.y,a,i)}}function db(s,a){let n=a.min-s.min,i=a.max-s.max;return a.max-a.min<s.max-s.min&&([n,i]=[i,n]),{min:n,max:i}}function A3(s,a){return{x:db(s.x,a.x),y:db(s.y,a.y)}}function T3(s,a){let n=.5;const i=Qs(s),c=Qs(a);return c>i?n=Mo(a.min,a.max-i,s.min):i>c&&(n=Mo(s.min,s.max-c,a.min)),Yr(0,1,n)}function E3(s,a){const n={};return a.min!==void 0&&(n.min=a.min-s.min),a.max!==void 0&&(n.max=a.max-s.min),n}const mg=.35;function R3(s=mg){return s===!1?s=0:s===!0&&(s=mg),{x:ub(s,"left","right"),y:ub(s,"top","bottom")}}function ub(s,a,n){return{min:mb(s,a),max:mb(s,n)}}function mb(s,a){return typeof s=="number"?s:s[a]||0}const D3=new WeakMap;class O3{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=us(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const d=b=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(tc(b).point)},u=(b,v)=>{const{drag:N,dragPropagation:E,onDragStart:M}=this.getProps();if(N&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zS(N),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ha(w=>{let T=this.getAxisMotionValue(w).get()||0;if(yr.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const D=A.layout.layoutBox[w];D&&(T=Qs(D)*(parseFloat(T)/100))}}this.originPoint[w]=T}),M&&Gt.postRender(()=>M(b,v)),dg(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},h=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v;const{dragPropagation:N,dragDirectionLock:E,onDirectionLock:M,onDrag:L}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:w}=v;if(E&&this.currentDirection===null){this.currentDirection=_3(w),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",v.point,w),this.updateAxis("y",v.point,w),this.visualElement.render(),L&&L(b,v)},x=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v,this.stop(b,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ha(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new tN(a,{onSessionStart:d,onStart:u,onMove:h,onSessionEnd:x,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:i,contextWindow:eN(this.visualElement)})}stop(a,n){const i=a||this.latestPointerEvent,c=n||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!c||!i)return;const{velocity:u}=c;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&Gt.postRender(()=>h(i,c))}cancel(){this.isDragging=!1;const{projection:a,animationState:n}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(a,n,i){const{drag:c}=this.getProps();if(!i||!xd(a,c,this.currentDirection))return;const d=this.getAxisMotionValue(a);let u=this.originPoint[a]+i[a];this.constraints&&this.constraints[a]&&(u=S3(u,this.constraints[a],this.elastic[a])),d.set(u)}resolveConstraints(){const{dragConstraints:a,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;a&&nl(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&i?this.constraints=C3(i.layoutBox,a):this.constraints=!1,this.elastic=R3(n),c!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ha(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=E3(i.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:a,onMeasureDragConstraints:n}=this.getProps();if(!a||!nl(a))return!1;const i=a.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=MC(i,c.root,this.visualElement.getTransformPagePoint());let u=A3(c.layout.layoutBox,d);if(n){const h=n(DC(u));this.hasMutatedConstraints=!!h,h&&(u=Vj(h))}return u}startAnimation(a){const{drag:n,dragMomentum:i,dragElastic:c,dragTransition:d,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),x=this.constraints||{},f=Ha(y=>{if(!xd(y,n,this.currentDirection))return;let b=x&&x[y]||{};u&&(b={min:0,max:0});const v=c?200:1e6,N=c?40:1e7,E={type:"inertia",velocity:i?a[y]:0,bounceStiffness:v,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...d,...b};return this.startAxisValueAnimation(y,E)});return Promise.all(f).then(h)}startAxisValueAnimation(a,n){const i=this.getAxisMotionValue(a);return dg(this.visualElement,a),i.start(mh(a,i,0,n,this.visualElement,!1))}stopAnimation(){Ha(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){Ha(a=>this.getAxisMotionValue(a).animation?.pause())}getAnimationState(a){return this.getAxisMotionValue(a).animation?.state}getAxisMotionValue(a){const n=`_drag${a.toUpperCase()}`,i=this.visualElement.getProps(),c=i[n];return c||this.visualElement.getValue(a,(i.initial?i.initial[a]:void 0)||0)}snapToCursor(a){Ha(n=>{const{drag:i}=this.getProps();if(!xd(n,i,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(n);if(c&&c.layout){const{min:u,max:h}=c.layout.layoutBox[n];d.set(a[n]-Kt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:a,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!nl(n)||!i||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Ha(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const x=h.get();c[u]=T3({min:x,max:x},this.constraints[u])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ha(u=>{if(!xd(u,a,null))return;const h=this.getAxisMotionValue(u),{min:x,max:f}=this.constraints[u];h.set(Kt(x,f,c[u]))})}addListeners(){if(!this.visualElement.current)return;D3.set(this.visualElement,this);const a=this.visualElement.current,n=Ao(a,"pointerdown",x=>{const{drag:f,dragListener:y=!0}=this.getProps();f&&y&&this.start(x)}),i=()=>{const{dragConstraints:x}=this.getProps();nl(x)&&x.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",i);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),Gt.read(i);const u=Vo(window,"resize",()=>this.scalePositionWithinConstraints()),h=c.addEventListener("didUpdate",(({delta:x,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ha(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=x[y].translate,b.set(b.get()+x[y].translate))}),this.visualElement.render())}));return()=>{u(),n(),d(),h&&h()}}getProps(){const a=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:u=mg,dragMomentum:h=!0}=a;return{...a,drag:n,dragDirectionLock:i,dragPropagation:c,dragConstraints:d,dragElastic:u,dragMomentum:h}}}function xd(s,a,n){return(a===!0||a===s)&&(n===null||n===s)}function _3(s,a=10){let n=null;return Math.abs(s.y)>a?n="y":Math.abs(s.x)>a&&(n="x"),n}class M3 extends Vn{constructor(a){super(a),this.removeGroupControls=Xa,this.removeListeners=Xa,this.controls=new O3(a)}mount(){const{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xa}unmount(){this.removeGroupControls(),this.removeListeners()}}const gb=s=>(a,n)=>{s&&Gt.postRender(()=>s(a,n))};class L3 extends Vn{constructor(){super(...arguments),this.removePointerDownListener=Xa}onPointerDown(a){this.session=new tN(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eN(this.node)})}createPanHandlers(){const{onPanSessionStart:a,onPanStart:n,onPan:i,onPanEnd:c}=this.node.getProps();return{onSessionStart:gb(a),onStart:gb(n),onMove:i,onEnd:(d,u)=>{delete this.session,c&&Gt.postRender(()=>c(d,u))}}}mount(){this.removePointerDownListener=Ao(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hb(s,a){return a.max===a.min?0:s/(a.max-a.min)*100}const po={correct:(s,a)=>{if(!a.target)return s;if(typeof s=="string")if(Ie.test(s))s=parseFloat(s);else return s;const n=hb(s,a.target.x),i=hb(s,a.target.y);return`${n}% ${i}%`}},F3={correct:(s,{treeScale:a,projectionDelta:n})=>{const i=s,c=Ln.parse(s);if(c.length>5)return i;const d=Ln.createTransformer(s),u=typeof c[0]!="number"?1:0,h=n.x.scale*a.x,x=n.y.scale*a.y;c[0+u]/=h,c[1+u]/=x;const f=Kt(h,x,.5);return typeof c[2+u]=="number"&&(c[2+u]/=f),typeof c[3+u]=="number"&&(c[3+u]/=f),d(c)}};let Sm=!1;class P3 extends p.Component{componentDidMount(){const{visualElement:a,layoutGroup:n,switchLayoutGroup:i,layoutId:c}=this.props,{projection:d}=a;nC(z3),d&&(n.group&&n.group.add(d),i&&i.register&&c&&i.register(d),Sm&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Td.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){const{layoutDependency:n,visualElement:i,drag:c,isPresent:d}=this.props,{projection:u}=i;return u&&(u.isPresent=d,Sm=!0,c||a.layoutDependency!==n||n===void 0||a.isPresent!==d?u.willUpdate():this.safeToRemove(),a.isPresent!==d&&(d?u.promote():u.relegate()||Gt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),th.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:a,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:c}=a;Sm=!0,c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),i&&i.deregister&&i.deregister(c))}safeToRemove(){const{safeToRemove:a}=this.props;a&&a()}render(){return null}}function aN(s){const[a,n]=Sj(),i=p.useContext(_g);return e.jsx(P3,{...s,layoutGroup:i,switchLayoutGroup:p.useContext(Pj),isPresent:a,safeToRemove:n})}const z3={borderRadius:{...po,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:po,borderTopRightRadius:po,borderBottomLeftRadius:po,borderBottomRightRadius:po,boxShadow:F3};function V3(s,a,n){const i=Is(s)?s:hl(s);return i.start(mh("",i,a,n)),i.animation}const $3=(s,a)=>s.depth-a.depth;class U3{constructor(){this.children=[],this.isDirty=!1}add(a){Fg(this.children,a),this.isDirty=!0}remove(a){Pg(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort($3),this.isDirty=!1,this.children.forEach(a)}}function B3(s,a){const n=ua.now(),i=({timestamp:c})=>{const d=c-n;d>=a&&(Mn(i),s(d-a))};return Gt.setup(i,!0),()=>Mn(i)}const rN=["TopLeft","TopRight","BottomLeft","BottomRight"],I3=rN.length,xb=s=>typeof s=="string"?parseFloat(s):s,fb=s=>typeof s=="number"||Ie.test(s);function q3(s,a,n,i,c,d){c?(s.opacity=Kt(0,n.opacity??1,H3(i)),s.opacityExit=Kt(a.opacity??1,0,G3(i))):d&&(s.opacity=Kt(a.opacity??1,n.opacity??1,i));for(let u=0;u<I3;u++){const h=`border${rN[u]}Radius`;let x=pb(a,h),f=pb(n,h);if(x===void 0&&f===void 0)continue;x||(x=0),f||(f=0),x===0||f===0||fb(x)===fb(f)?(s[h]=Math.max(Kt(xb(x),xb(f),i),0),(yr.test(f)||yr.test(x))&&(s[h]+="%")):s[h]=f}(a.rotate||n.rotate)&&(s.rotate=Kt(a.rotate||0,n.rotate||0,i))}function pb(s,a){return s[a]!==void 0?s[a]:s.borderRadius}const H3=nN(0,.5,Hv),G3=nN(.5,.95,Xa);function nN(s,a,n){return i=>i<s?0:i>a?1:n(Mo(s,a,i))}function yb(s,a){s.min=a.min,s.max=a.max}function qa(s,a){yb(s.x,a.x),yb(s.y,a.y)}function bb(s,a){s.translate=a.translate,s.scale=a.scale,s.originPoint=a.originPoint,s.origin=a.origin}function vb(s,a,n,i,c){return s-=a,s=Bd(s,1/n,i),c!==void 0&&(s=Bd(s,1/c,i)),s}function Y3(s,a=0,n=1,i=.5,c,d=s,u=s){if(yr.test(a)&&(a=parseFloat(a),a=Kt(u.min,u.max,a/100)-u.min),typeof a!="number")return;let h=Kt(d.min,d.max,i);s===d&&(h-=a),s.min=vb(s.min,a,n,h,c),s.max=vb(s.max,a,n,h,c)}function jb(s,a,[n,i,c],d,u){Y3(s,a[n],a[i],a[c],a.scale,d,u)}const X3=["x","scaleX","originX"],K3=["y","scaleY","originY"];function Nb(s,a,n,i){jb(s.x,a,X3,n?n.x:void 0,i?i.x:void 0),jb(s.y,a,K3,n?n.y:void 0,i?i.y:void 0)}function kb(s){return s.translate===0&&s.scale===1}function iN(s){return kb(s.x)&&kb(s.y)}function wb(s,a){return s.min===a.min&&s.max===a.max}function Z3(s,a){return wb(s.x,a.x)&&wb(s.y,a.y)}function Sb(s,a){return Math.round(s.min)===Math.round(a.min)&&Math.round(s.max)===Math.round(a.max)}function lN(s,a){return Sb(s.x,a.x)&&Sb(s.y,a.y)}function Cb(s){return Qs(s.x)/Qs(s.y)}function Ab(s,a){return s.translate===a.translate&&s.scale===a.scale&&s.originPoint===a.originPoint}class Q3{constructor(){this.members=[]}add(a){Fg(this.members,a),a.scheduleRender()}remove(a){if(Pg(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(a){const n=this.members.findIndex(c=>a===c);if(n===0)return!1;let i;for(let c=n;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){i=d;break}}return i?(this.promote(i),!0):!1}promote(a,n){const i=this.lead;if(a!==i&&(this.prevLead=i,this.lead=a,a.show(),i)){i.instance&&i.scheduleRender(),a.scheduleRender(),a.resumeFrom=i,n&&(a.resumeFrom.preserveOpacity=!0),i.snapshot&&(a.snapshot=i.snapshot,a.snapshot.latestValues=i.animationValues||i.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);const{crossfade:c}=a.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(a=>{const{options:n,resumingFrom:i}=a;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function W3(s,a,n){let i="";const c=s.x.translate/a.x,d=s.y.translate/a.y,u=n?.z||0;if((c||d||u)&&(i=`translate3d(${c}px, ${d}px, ${u}px) `),(a.x!==1||a.y!==1)&&(i+=`scale(${1/a.x}, ${1/a.y}) `),n){const{transformPerspective:f,rotate:y,rotateX:b,rotateY:v,skewX:N,skewY:E}=n;f&&(i=`perspective(${f}px) ${i}`),y&&(i+=`rotate(${y}deg) `),b&&(i+=`rotateX(${b}deg) `),v&&(i+=`rotateY(${v}deg) `),N&&(i+=`skewX(${N}deg) `),E&&(i+=`skewY(${E}deg) `)}const h=s.x.scale*a.x,x=s.y.scale*a.y;return(h!==1||x!==1)&&(i+=`scale(${h}, ${x})`),i||"none"}const Cm=["","X","Y","Z"],J3=1e3;let e4=0;function Am(s,a,n,i){const{latestValues:c}=a;c[s]&&(n[s]=c[s],a.setStaticValue(s,0),i&&(i[s]=0))}function oN(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:a}=s.options;if(!a)return;const n=Yj(a);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:c,layoutId:d}=s.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(c||d))}const{parent:i}=s;i&&!i.hasCheckedOptimisedAppear&&oN(i)}function cN({attachResizeListener:s,defaultParent:a,measureScroll:n,checkIsScrollRoot:i,resetTransform:c}){return class{constructor(u={},h=a?.()){this.id=e4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(a4),this.nodes.forEach(l4),this.nodes.forEach(o4),this.nodes.forEach(r4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let x=0;x<this.path.length;x++)this.path[x].shouldResetTransform=!0;this.root===this&&(this.nodes=new U3)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new $g),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const x=this.eventHandlers.get(u);x&&x.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=wj(u)&&!qS(u),this.instance=u;const{layoutId:h,layout:x,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(x||h)&&(this.isLayoutDirty=!0),s){let y,b=0;const v=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{b=window.innerWidth}),s(u,()=>{const N=window.innerWidth;N!==b&&(b=N,this.root.updateBlockedByResize=!0,y&&y(),y=B3(v,250),Td.hasAnimatedSinceResize&&(Td.hasAnimatedSinceResize=!1,this.nodes.forEach(Rb)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||x)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:v,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||g4,{onLayoutAnimationStart:M,onLayoutAnimationComplete:L}=f.getProps(),w=!this.targetLayout||!lN(this.targetLayout,N),T=!b&&v;if(this.options.layoutRoot||this.resumeFrom||T||b&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...Jg(E,"layout"),onPlay:M,onComplete:L};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(y,T)}else b||Rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c4),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:h,layout:x}=this.options;if(h===void 0&&!x)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Eb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(i4),this.nodes.forEach(t4),this.nodes.forEach(s4)):this.nodes.forEach(Eb),this.clearAllSnapshots();const h=ua.now();Fs.delta=Yr(0,1e3/60,h-Fs.timestamp),Fs.timestamp=h,Fs.isProcessing=!0,xm.update.process(Fs),xm.preRender.process(Fs),xm.render.process(Fs),Fs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n4),this.sharedNodes.forEach(d4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qs(this.snapshot.measuredBox.x)&&!Qs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let x=0;x<this.path.length;x++)this.path[x].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=us(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const x=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:x,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:x}}}resetTransform(){if(!c)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!iN(this.projectionDelta),x=this.getTransformTemplate(),f=x?x(this.latestValues,""):void 0,y=f!==this.prevTransformTemplateValue;u&&this.instance&&(h||mi(this.latestValues)||y)&&(c(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let x=this.removeElementScroll(h);return u&&(x=this.removeTransform(x)),h4(x),{animationId:this.root.animationId,measuredBox:h,layoutBox:x,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return us();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(x4))){const{scroll:f}=this.root;f&&(il(h.x,f.offset.x),il(h.y,f.offset.y))}return h}removeElementScroll(u){const h=us();if(qa(h,u),this.scroll?.wasRoot)return h;for(let x=0;x<this.path.length;x++){const f=this.path[x],{scroll:y,options:b}=f;f!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&qa(h,u),il(h.x,y.offset.x),il(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const x=us();qa(x,u);for(let f=0;f<this.path.length;f++){const y=this.path[f];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&ll(x,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),mi(y.latestValues)&&ll(x,y.latestValues)}return mi(this.latestValues)&&ll(x,this.latestValues),x}removeTransform(u){const h=us();qa(h,u);for(let x=0;x<this.path.length;x++){const f=this.path[x];if(!f.instance||!mi(f.latestValues))continue;ig(f.latestValues)&&f.updateSnapshot();const y=us(),b=f.measurePageBox();qa(y,b),Nb(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,y)}return mi(this.latestValues)&&Nb(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==h;if(!(u||x&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Fs.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),Eo(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),qa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=us(),this.targetWithTransforms=us()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qa(this.target,this.layout.layoutBox),Uj(this.target,this.targetDelta)):qa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),Eo(this.relativeTargetOrigin,this.target,v.target),qa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ig(this.parent.latestValues)||$j(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let x=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(x=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===Fs.timestamp&&(x=!1),x)return;const{layout:f,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||y))return;qa(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,v=this.treeScale.y;_C(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=us());const{target:N}=u;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bb(this.prevProjectionDelta.x,this.projectionDelta.x),bb(this.prevProjectionDelta.y,this.projectionDelta.y)),To(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==v||!Ab(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ab(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ol(),this.projectionDelta=ol(),this.projectionDeltaWithTransform=ol()}setAnimationOrigin(u,h=!1){const x=this.snapshot,f=x?x.latestValues:{},y={...this.latestValues},b=ol();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const v=us(),N=x?x.source:void 0,E=this.layout?this.layout.source:void 0,M=N!==E,L=this.getStack(),w=!L||L.members.length<=1,T=!!(M&&!w&&this.options.crossfade===!0&&!this.path.some(m4));this.animationProgress=0;let A;this.mixTargetDelta=D=>{const C=D/1e3;Db(b.x,u.x,C),Db(b.y,u.y,C),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Eo(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u4(this.relativeTarget,this.relativeTargetOrigin,v,C),A&&Z3(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=us()),qa(A,this.relativeTarget)),M&&(this.animationValues=y,q3(y,f,this.latestValues,C,T,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Mn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Td.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hl(0)),this.currentAnimation=V3(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(J3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:x,layout:f,latestValues:y}=u;if(!(!h||!x||!f)){if(this!==u&&this.layout&&f&&dN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){x=this.target||us();const b=Qs(this.layout.layoutBox.x);x.x.min=u.target.x.min,x.x.max=x.x.min+b;const v=Qs(this.layout.layoutBox.y);x.y.min=u.target.y.min,x.y.max=x.y.min+v}qa(h,x),ll(h,y),To(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new Q3),this.sharedNodes.get(u).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:x}={}){const f=this.getStack();f&&f.promote(this,x),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:x}=u;if((x.z||x.rotate||x.rotateX||x.rotateY||x.rotateZ||x.skewX||x.skewY)&&(h=!0),!h)return;const f={};x.z&&Am("z",u,f,this.animationValues);for(let y=0;y<Cm.length;y++)Am(`rotate${Cm[y]}`,u,f,this.animationValues),Am(`skew${Cm[y]}`,u,f,this.animationValues);u.render();for(const y in f)u.setStaticValue(y,f[y]),this.animationValues&&(this.animationValues[y]=f[y]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const x=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Ad(h?.pointerEvents)||"",u.transform=x?x(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Ad(h?.pointerEvents)||""),this.hasProjected&&!mi(this.latestValues)&&(u.transform=x?x({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=f.animationValues||f.latestValues;this.applyTransformsToTarget();let b=W3(this.projectionDeltaWithTransform,this.treeScale,y);x&&(b=x(y,b)),u.transform=b;const{x:v,y:N}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${N.origin*100}% 0`,f.animationValues?u.opacity=f===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=f===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const E in zo){if(y[E]===void 0)continue;const{correct:M,applyTo:L,isCSSVariable:w}=zo[E],T=b==="none"?y[E]:M(y[E],f);if(L){const A=L.length;for(let D=0;D<A;D++)u[L[D]]=T}else w?this.options.visualElement.renderState.vars[E]=T:u[E]=T}this.options.layoutId&&(u.pointerEvents=f===this?Ad(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(Tb),this.root.sharedNodes.clear()}}}function t4(s){s.updateLayout()}function s4(s){const a=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&a&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=s.layout,{animationType:c}=s.options,d=a.source!==s.layout.source;c==="size"?Ha(y=>{const b=d?a.measuredBox[y]:a.layoutBox[y],v=Qs(b);b.min=n[y].min,b.max=b.min+v}):dN(c,a.layoutBox,n)&&Ha(y=>{const b=d?a.measuredBox[y]:a.layoutBox[y],v=Qs(n[y]);b.max=b.min+v,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[y].max=s.relativeTarget[y].min+v)});const u=ol();To(u,n,a.layoutBox);const h=ol();d?To(h,s.applyTransform(i,!0),a.measuredBox):To(h,n,a.layoutBox);const x=!iN(u);let f=!1;if(!s.resumeFrom){const y=s.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:v}=y;if(b&&v){const N=us();Eo(N,a.layoutBox,b.layoutBox);const E=us();Eo(E,n,v.layoutBox),lN(N,E)||(f=!0),y.options.layoutRoot&&(s.relativeTarget=E,s.relativeTargetOrigin=N,s.relativeParent=y)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:a,delta:h,layoutDelta:u,hasLayoutChanged:x,hasRelativeLayoutChanged:f})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function a4(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function r4(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function n4(s){s.clearSnapshot()}function Tb(s){s.clearMeasurements()}function Eb(s){s.isLayoutDirty=!1}function i4(s){const{visualElement:a}=s.options;a&&a.getProps().onBeforeLayoutMeasure&&a.notify("BeforeLayoutMeasure"),s.resetTransform()}function Rb(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function l4(s){s.resolveTargetDelta()}function o4(s){s.calcProjection()}function c4(s){s.resetSkewAndRotation()}function d4(s){s.removeLeadSnapshot()}function Db(s,a,n){s.translate=Kt(a.translate,0,n),s.scale=Kt(a.scale,1,n),s.origin=a.origin,s.originPoint=a.originPoint}function Ob(s,a,n,i){s.min=Kt(a.min,n.min,i),s.max=Kt(a.max,n.max,i)}function u4(s,a,n,i){Ob(s.x,a.x,n.x,i),Ob(s.y,a.y,n.y,i)}function m4(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const g4={duration:.45,ease:[.4,0,.1,1]},_b=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Mb=_b("applewebkit/")&&!_b("chrome/")?Math.round:Xa;function Lb(s){s.min=Mb(s.min),s.max=Mb(s.max)}function h4(s){Lb(s.x),Lb(s.y)}function dN(s,a,n){return s==="position"||s==="preserve-aspect"&&!v3(Cb(a),Cb(n),.2)}function x4(s){return s!==s.root&&s.scroll?.wasRoot}const f4=cN({attachResizeListener:(s,a)=>Vo(s,"resize",a),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tm={current:void 0},uN=cN({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Tm.current){const s=new f4({});s.mount(window),s.setOptions({layoutScroll:!0}),Tm.current=s}return Tm.current},resetTransform:(s,a)=>{s.style.transform=a!==void 0?a:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),p4={pan:{Feature:L3},drag:{Feature:M3,ProjectionNode:uN,MeasureLayout:aN}};function Fb(s,a,n){const{props:i}=s;s.animationState&&i.whileHover&&s.animationState.setActive("whileHover",n==="Start");const c="onHover"+n,d=i[c];d&&Gt.postRender(()=>d(a,tc(a)))}class y4 extends Vn{mount(){const{current:a}=this.node;a&&(this.unmount=VS(a,(n,i)=>(Fb(this.node,i,"Start"),c=>Fb(this.node,c,"End"))))}unmount(){}}class b4 extends Vn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch{a=!0}!a||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wo(Vo(this.node.current,"focus",()=>this.onFocus()),Vo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Pb(s,a,n){const{props:i}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&i.whileTap&&s.animationState.setActive("whileTap",n==="Start");const c="onTap"+(n==="End"?"":n),d=i[c];d&&Gt.postRender(()=>d(a,tc(a)))}class v4 extends Vn{mount(){const{current:a}=this.node;a&&(this.unmount=IS(a,(n,i)=>(Pb(this.node,i,"Start"),(c,{success:d})=>Pb(this.node,c,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gg=new WeakMap,Em=new WeakMap,j4=s=>{const a=gg.get(s.target);a&&a(s)},N4=s=>{s.forEach(j4)};function k4({root:s,...a}){const n=s||document;Em.has(n)||Em.set(n,{});const i=Em.get(n),c=JSON.stringify(a);return i[c]||(i[c]=new IntersectionObserver(N4,{root:s,...a})),i[c]}function w4(s,a,n){const i=k4(a);return gg.set(s,n),i.observe(s),()=>{gg.delete(s),i.unobserve(s)}}const S4={some:0,all:1};class C4 extends Vn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:a={}}=this.node.getProps(),{root:n,margin:i,amount:c="some",once:d}=a,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof c=="number"?c:S4[c]},h=x=>{const{isIntersecting:f}=x;if(this.isInView===f||(this.isInView=f,d&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),v=f?y:b;v&&v(x)};return w4(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:a,prevProps:n}=this.node;["amount","margin","root"].some(A4(a,n))&&this.startObserver()}unmount(){}}function A4({viewport:s={}},{viewport:a={}}={}){return n=>s[n]!==a[n]}const T4={inView:{Feature:C4},tap:{Feature:v4},focus:{Feature:b4},hover:{Feature:y4}},E4={layout:{ProjectionNode:uN,MeasureLayout:aN}},R4={...h3,...T4,...p4,...E4},ze=RC(R4,IC);function Ir(s,a,{checkForDefaultPrevented:n=!0}={}){return function(c){if(s?.(c),n===!1||!c.defaultPrevented)return a?.(c)}}function zb(s,a){if(typeof s=="function")return s(a);s!=null&&(s.current=a)}function mN(...s){return a=>{let n=!1;const i=s.map(c=>{const d=zb(c,a);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let c=0;c<i.length;c++){const d=i[c];typeof d=="function"?d():zb(s[c],null)}}}}function ki(...s){return p.useCallback(mN(...s),s)}function gN(s,a=[]){let n=[];function i(d,u){const h=p.createContext(u),x=n.length;n=[...n,u];const f=b=>{const{scope:v,children:N,...E}=b,M=v?.[s]?.[x]||h,L=p.useMemo(()=>E,Object.values(E));return e.jsx(M.Provider,{value:L,children:N})};f.displayName=d+"Provider";function y(b,v){const N=v?.[s]?.[x]||h,E=p.useContext(N);if(E)return E;if(u!==void 0)return u;throw new Error(`\`${b}\` must be used within \`${d}\``)}return[f,y]}const c=()=>{const d=n.map(u=>p.createContext(u));return function(h){const x=h?.[s]||d;return p.useMemo(()=>({[`__scope${s}`]:{...h,[s]:x}}),[h,x])}};return c.scopeName=s,[i,D4(c,...a)]}function D4(...s){const a=s[0];if(s.length===1)return a;const n=()=>{const i=s.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const u=i.reduce((h,{useScope:x,scopeName:f})=>{const b=x(d)[`__scope${f}`];return{...h,...b}},{});return p.useMemo(()=>({[`__scope${a.scopeName}`]:u}),[u])}};return n.scopeName=a.scopeName,n}var gh=_v();const O4=Dv(gh);function _4(s){const a=M4(s),n=p.forwardRef((i,c)=>{const{children:d,...u}=i,h=p.Children.toArray(d),x=h.find(F4);if(x){const f=x.props.children,y=h.map(b=>b===x?p.Children.count(f)>1?p.Children.only(null):p.isValidElement(f)?f.props.children:null:b);return e.jsx(a,{...u,ref:c,children:p.isValidElement(f)?p.cloneElement(f,void 0,y):null})}return e.jsx(a,{...u,ref:c,children:d})});return n.displayName=`${s}.Slot`,n}function M4(s){const a=p.forwardRef((n,i)=>{const{children:c,...d}=n;if(p.isValidElement(c)){const u=z4(c),h=P4(d,c.props);return c.type!==p.Fragment&&(h.ref=i?mN(i,u):u),p.cloneElement(c,h)}return p.Children.count(c)>1?p.Children.only(null):null});return a.displayName=`${s}.SlotClone`,a}var hN=Symbol("radix.slottable");function L4(s){const a=({children:n})=>e.jsx(e.Fragment,{children:n});return a.displayName=`${s}.Slottable`,a.__radixId=hN,a}function F4(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===hN}function P4(s,a){const n={...a};for(const i in a){const c=s[i],d=a[i];/^on[A-Z]/.test(i)?c&&d?n[i]=(...h)=>{const x=d(...h);return c(...h),x}:c&&(n[i]=c):i==="style"?n[i]={...c,...d}:i==="className"&&(n[i]=[c,d].filter(Boolean).join(" "))}return{...s,...n}}function z4(s){let a=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?s.ref:(a=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var V4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$n=V4.reduce((s,a)=>{const n=_4(`Primitive.${a}`),i=p.forwardRef((c,d)=>{const{asChild:u,...h}=c,x=u?n:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...h,ref:d})});return i.displayName=`Primitive.${a}`,{...s,[a]:i}},{});function $4(s,a){s&&gh.flushSync(()=>s.dispatchEvent(a))}function eu(s){const a=p.useRef(s);return p.useEffect(()=>{a.current=s}),p.useMemo(()=>(...n)=>a.current?.(...n),[])}function U4(s,a=globalThis?.document){const n=eu(s);p.useEffect(()=>{const i=c=>{c.key==="Escape"&&n(c)};return a.addEventListener("keydown",i,{capture:!0}),()=>a.removeEventListener("keydown",i,{capture:!0})},[n,a])}var B4="DismissableLayer",hg="dismissableLayer.update",I4="dismissableLayer.pointerDownOutside",q4="dismissableLayer.focusOutside",Vb,xN=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fN=p.forwardRef((s,a)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,onDismiss:h,...x}=s,f=p.useContext(xN),[y,b]=p.useState(null),v=y?.ownerDocument??globalThis?.document,[,N]=p.useState({}),E=ki(a,k=>b(k)),M=Array.from(f.layers),[L]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=M.indexOf(L),T=y?M.indexOf(y):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,D=T>=w,C=Y4(k=>{const P=k.target,G=[...f.branches].some(U=>U.contains(P));!D||G||(c?.(k),u?.(k),k.defaultPrevented||h?.())},v),S=X4(k=>{const P=k.target;[...f.branches].some(U=>U.contains(P))||(d?.(k),u?.(k),k.defaultPrevented||h?.())},v);return U4(k=>{T===f.layers.size-1&&(i?.(k),!k.defaultPrevented&&h&&(k.preventDefault(),h()))},v),p.useEffect(()=>{if(y)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Vb=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(y)),f.layers.add(y),$b(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Vb)}},[y,v,n,f]),p.useEffect(()=>()=>{y&&(f.layers.delete(y),f.layersWithOutsidePointerEventsDisabled.delete(y),$b())},[y,f]),p.useEffect(()=>{const k=()=>N({});return document.addEventListener(hg,k),()=>document.removeEventListener(hg,k)},[]),e.jsx($n.div,{...x,ref:E,style:{pointerEvents:A?D?"auto":"none":void 0,...s.style},onFocusCapture:Ir(s.onFocusCapture,S.onFocusCapture),onBlurCapture:Ir(s.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ir(s.onPointerDownCapture,C.onPointerDownCapture)})});fN.displayName=B4;var H4="DismissableLayerBranch",G4=p.forwardRef((s,a)=>{const n=p.useContext(xN),i=p.useRef(null),c=ki(a,i);return p.useEffect(()=>{const d=i.current;if(d)return n.branches.add(d),()=>{n.branches.delete(d)}},[n.branches]),e.jsx($n.div,{...s,ref:c})});G4.displayName=H4;function Y4(s,a=globalThis?.document){const n=eu(s),i=p.useRef(!1),c=p.useRef(()=>{});return p.useEffect(()=>{const d=h=>{if(h.target&&!i.current){let x=function(){pN(I4,n,f,{discrete:!0})};const f={originalEvent:h};h.pointerType==="touch"?(a.removeEventListener("click",c.current),c.current=x,a.addEventListener("click",c.current,{once:!0})):x()}else a.removeEventListener("click",c.current);i.current=!1},u=window.setTimeout(()=>{a.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(u),a.removeEventListener("pointerdown",d),a.removeEventListener("click",c.current)}},[a,n]),{onPointerDownCapture:()=>i.current=!0}}function X4(s,a=globalThis?.document){const n=eu(s),i=p.useRef(!1);return p.useEffect(()=>{const c=d=>{d.target&&!i.current&&pN(q4,n,{originalEvent:d},{discrete:!1})};return a.addEventListener("focusin",c),()=>a.removeEventListener("focusin",c)},[a,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function $b(){const s=new CustomEvent(hg);document.dispatchEvent(s)}function pN(s,a,n,{discrete:i}){const c=n.originalEvent.target,d=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});a&&c.addEventListener(s,a,{once:!0}),i?$4(c,d):c.dispatchEvent(d)}var Fn=globalThis?.document?p.useLayoutEffect:()=>{},K4=Ov[" useId ".trim().toString()]||(()=>{}),Z4=0;function Q4(s){const[a,n]=p.useState(K4());return Fn(()=>{n(i=>i??String(Z4++))},[s]),a?`radix-${a}`:""}const W4=["top","right","bottom","left"],Pn=Math.min,Da=Math.max,Id=Math.round,fd=Math.floor,br=s=>({x:s,y:s}),J4={left:"right",right:"left",bottom:"top",top:"bottom"},e6={start:"end",end:"start"};function xg(s,a,n){return Da(s,Pn(a,n))}function Kr(s,a){return typeof s=="function"?s(a):s}function Zr(s){return s.split("-")[0]}function Nl(s){return s.split("-")[1]}function hh(s){return s==="x"?"y":"x"}function xh(s){return s==="y"?"height":"width"}const t6=new Set(["top","bottom"]);function fr(s){return t6.has(Zr(s))?"y":"x"}function fh(s){return hh(fr(s))}function s6(s,a,n){n===void 0&&(n=!1);const i=Nl(s),c=fh(s),d=xh(c);let u=c==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return a.reference[d]>a.floating[d]&&(u=qd(u)),[u,qd(u)]}function a6(s){const a=qd(s);return[fg(s),a,fg(a)]}function fg(s){return s.replace(/start|end/g,a=>e6[a])}const Ub=["left","right"],Bb=["right","left"],r6=["top","bottom"],n6=["bottom","top"];function i6(s,a,n){switch(s){case"top":case"bottom":return n?a?Bb:Ub:a?Ub:Bb;case"left":case"right":return a?r6:n6;default:return[]}}function l6(s,a,n,i){const c=Nl(s);let d=i6(Zr(s),n==="start",i);return c&&(d=d.map(u=>u+"-"+c),a&&(d=d.concat(d.map(fg)))),d}function qd(s){return s.replace(/left|right|bottom|top/g,a=>J4[a])}function o6(s){return{top:0,right:0,bottom:0,left:0,...s}}function yN(s){return typeof s!="number"?o6(s):{top:s,right:s,bottom:s,left:s}}function Hd(s){const{x:a,y:n,width:i,height:c}=s;return{width:i,height:c,top:n,left:a,right:a+i,bottom:n+c,x:a,y:n}}function Ib(s,a,n){let{reference:i,floating:c}=s;const d=fr(a),u=fh(a),h=xh(u),x=Zr(a),f=d==="y",y=i.x+i.width/2-c.width/2,b=i.y+i.height/2-c.height/2,v=i[h]/2-c[h]/2;let N;switch(x){case"top":N={x:y,y:i.y-c.height};break;case"bottom":N={x:y,y:i.y+i.height};break;case"right":N={x:i.x+i.width,y:b};break;case"left":N={x:i.x-c.width,y:b};break;default:N={x:i.x,y:i.y}}switch(Nl(a)){case"start":N[u]-=v*(n&&f?-1:1);break;case"end":N[u]+=v*(n&&f?-1:1);break}return N}const c6=async(s,a,n)=>{const{placement:i="bottom",strategy:c="absolute",middleware:d=[],platform:u}=n,h=d.filter(Boolean),x=await(u.isRTL==null?void 0:u.isRTL(a));let f=await u.getElementRects({reference:s,floating:a,strategy:c}),{x:y,y:b}=Ib(f,i,x),v=i,N={},E=0;for(let M=0;M<h.length;M++){const{name:L,fn:w}=h[M],{x:T,y:A,data:D,reset:C}=await w({x:y,y:b,initialPlacement:i,placement:v,strategy:c,middlewareData:N,rects:f,platform:u,elements:{reference:s,floating:a}});y=T??y,b=A??b,N={...N,[L]:{...N[L],...D}},C&&E<=50&&(E++,typeof C=="object"&&(C.placement&&(v=C.placement),C.rects&&(f=C.rects===!0?await u.getElementRects({reference:s,floating:a,strategy:c}):C.rects),{x:y,y:b}=Ib(f,v,x)),M=-1)}return{x:y,y:b,placement:v,strategy:c,middlewareData:N}};async function $o(s,a){var n;a===void 0&&(a={});const{x:i,y:c,platform:d,rects:u,elements:h,strategy:x}=s,{boundary:f="clippingAncestors",rootBoundary:y="viewport",elementContext:b="floating",altBoundary:v=!1,padding:N=0}=Kr(a,s),E=yN(N),L=h[v?b==="floating"?"reference":"floating":b],w=Hd(await d.getClippingRect({element:(n=await(d.isElement==null?void 0:d.isElement(L)))==null||n?L:L.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(h.floating)),boundary:f,rootBoundary:y,strategy:x})),T=b==="floating"?{x:i,y:c,width:u.floating.width,height:u.floating.height}:u.reference,A=await(d.getOffsetParent==null?void 0:d.getOffsetParent(h.floating)),D=await(d.isElement==null?void 0:d.isElement(A))?await(d.getScale==null?void 0:d.getScale(A))||{x:1,y:1}:{x:1,y:1},C=Hd(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:T,offsetParent:A,strategy:x}):T);return{top:(w.top-C.top+E.top)/D.y,bottom:(C.bottom-w.bottom+E.bottom)/D.y,left:(w.left-C.left+E.left)/D.x,right:(C.right-w.right+E.right)/D.x}}const d6=s=>({name:"arrow",options:s,async fn(a){const{x:n,y:i,placement:c,rects:d,platform:u,elements:h,middlewareData:x}=a,{element:f,padding:y=0}=Kr(s,a)||{};if(f==null)return{};const b=yN(y),v={x:n,y:i},N=fh(c),E=xh(N),M=await u.getDimensions(f),L=N==="y",w=L?"top":"left",T=L?"bottom":"right",A=L?"clientHeight":"clientWidth",D=d.reference[E]+d.reference[N]-v[N]-d.floating[E],C=v[N]-d.reference[N],S=await(u.getOffsetParent==null?void 0:u.getOffsetParent(f));let k=S?S[A]:0;(!k||!await(u.isElement==null?void 0:u.isElement(S)))&&(k=h.floating[A]||d.floating[E]);const P=D/2-C/2,G=k/2-M[E]/2-1,U=Pn(b[w],G),Q=Pn(b[T],G),Z=U,ie=k-M[E]-Q,J=k/2-M[E]/2+P,te=xg(Z,J,ie),$=!x.arrow&&Nl(c)!=null&&J!==te&&d.reference[E]/2-(J<Z?U:Q)-M[E]/2<0,_=$?J<Z?J-Z:J-ie:0;return{[N]:v[N]+_,data:{[N]:te,centerOffset:J-te-_,...$&&{alignmentOffset:_}},reset:$}}}),u6=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(a){var n,i;const{placement:c,middlewareData:d,rects:u,initialPlacement:h,platform:x,elements:f}=a,{mainAxis:y=!0,crossAxis:b=!0,fallbackPlacements:v,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:M=!0,...L}=Kr(s,a);if((n=d.arrow)!=null&&n.alignmentOffset)return{};const w=Zr(c),T=fr(h),A=Zr(h)===h,D=await(x.isRTL==null?void 0:x.isRTL(f.floating)),C=v||(A||!M?[qd(h)]:a6(h)),S=E!=="none";!v&&S&&C.push(...l6(h,M,E,D));const k=[h,...C],P=await $o(a,L),G=[];let U=((i=d.flip)==null?void 0:i.overflows)||[];if(y&&G.push(P[w]),b){const J=s6(c,u,D);G.push(P[J[0]],P[J[1]])}if(U=[...U,{placement:c,overflows:G}],!G.every(J=>J<=0)){var Q,Z;const J=(((Q=d.flip)==null?void 0:Q.index)||0)+1,te=k[J];if(te&&(!(b==="alignment"?T!==fr(te):!1)||U.every(z=>fr(z.placement)===T?z.overflows[0]>0:!0)))return{data:{index:J,overflows:U},reset:{placement:te}};let $=(Z=U.filter(_=>_.overflows[0]<=0).sort((_,z)=>_.overflows[1]-z.overflows[1])[0])==null?void 0:Z.placement;if(!$)switch(N){case"bestFit":{var ie;const _=(ie=U.filter(z=>{if(S){const Y=fr(z.placement);return Y===T||Y==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Y=>Y>0).reduce((Y,se)=>Y+se,0)]).sort((z,Y)=>z[1]-Y[1])[0])==null?void 0:ie[0];_&&($=_);break}case"initialPlacement":$=h;break}if(c!==$)return{reset:{placement:$}}}return{}}}};function qb(s,a){return{top:s.top-a.height,right:s.right-a.width,bottom:s.bottom-a.height,left:s.left-a.width}}function Hb(s){return W4.some(a=>s[a]>=0)}const m6=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(a){const{rects:n}=a,{strategy:i="referenceHidden",...c}=Kr(s,a);switch(i){case"referenceHidden":{const d=await $o(a,{...c,elementContext:"reference"}),u=qb(d,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:Hb(u)}}}case"escaped":{const d=await $o(a,{...c,altBoundary:!0}),u=qb(d,n.floating);return{data:{escapedOffsets:u,escaped:Hb(u)}}}default:return{}}}}},bN=new Set(["left","top"]);async function g6(s,a){const{placement:n,platform:i,elements:c}=s,d=await(i.isRTL==null?void 0:i.isRTL(c.floating)),u=Zr(n),h=Nl(n),x=fr(n)==="y",f=bN.has(u)?-1:1,y=d&&x?-1:1,b=Kr(a,s);let{mainAxis:v,crossAxis:N,alignmentAxis:E}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return h&&typeof E=="number"&&(N=h==="end"?E*-1:E),x?{x:N*y,y:v*f}:{x:v*f,y:N*y}}const h6=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(a){var n,i;const{x:c,y:d,placement:u,middlewareData:h}=a,x=await g6(a,s);return u===((n=h.offset)==null?void 0:n.placement)&&(i=h.arrow)!=null&&i.alignmentOffset?{}:{x:c+x.x,y:d+x.y,data:{...x,placement:u}}}}},x6=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(a){const{x:n,y:i,placement:c}=a,{mainAxis:d=!0,crossAxis:u=!1,limiter:h={fn:L=>{let{x:w,y:T}=L;return{x:w,y:T}}},...x}=Kr(s,a),f={x:n,y:i},y=await $o(a,x),b=fr(Zr(c)),v=hh(b);let N=f[v],E=f[b];if(d){const L=v==="y"?"top":"left",w=v==="y"?"bottom":"right",T=N+y[L],A=N-y[w];N=xg(T,N,A)}if(u){const L=b==="y"?"top":"left",w=b==="y"?"bottom":"right",T=E+y[L],A=E-y[w];E=xg(T,E,A)}const M=h.fn({...a,[v]:N,[b]:E});return{...M,data:{x:M.x-n,y:M.y-i,enabled:{[v]:d,[b]:u}}}}}},f6=function(s){return s===void 0&&(s={}),{options:s,fn(a){const{x:n,y:i,placement:c,rects:d,middlewareData:u}=a,{offset:h=0,mainAxis:x=!0,crossAxis:f=!0}=Kr(s,a),y={x:n,y:i},b=fr(c),v=hh(b);let N=y[v],E=y[b];const M=Kr(h,a),L=typeof M=="number"?{mainAxis:M,crossAxis:0}:{mainAxis:0,crossAxis:0,...M};if(x){const A=v==="y"?"height":"width",D=d.reference[v]-d.floating[A]+L.mainAxis,C=d.reference[v]+d.reference[A]-L.mainAxis;N<D?N=D:N>C&&(N=C)}if(f){var w,T;const A=v==="y"?"width":"height",D=bN.has(Zr(c)),C=d.reference[b]-d.floating[A]+(D&&((w=u.offset)==null?void 0:w[b])||0)+(D?0:L.crossAxis),S=d.reference[b]+d.reference[A]+(D?0:((T=u.offset)==null?void 0:T[b])||0)-(D?L.crossAxis:0);E<C?E=C:E>S&&(E=S)}return{[v]:N,[b]:E}}}},p6=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(a){var n,i;const{placement:c,rects:d,platform:u,elements:h}=a,{apply:x=()=>{},...f}=Kr(s,a),y=await $o(a,f),b=Zr(c),v=Nl(c),N=fr(c)==="y",{width:E,height:M}=d.floating;let L,w;b==="top"||b==="bottom"?(L=b,w=v===(await(u.isRTL==null?void 0:u.isRTL(h.floating))?"start":"end")?"left":"right"):(w=b,L=v==="end"?"top":"bottom");const T=M-y.top-y.bottom,A=E-y.left-y.right,D=Pn(M-y[L],T),C=Pn(E-y[w],A),S=!a.middlewareData.shift;let k=D,P=C;if((n=a.middlewareData.shift)!=null&&n.enabled.x&&(P=A),(i=a.middlewareData.shift)!=null&&i.enabled.y&&(k=T),S&&!v){const U=Da(y.left,0),Q=Da(y.right,0),Z=Da(y.top,0),ie=Da(y.bottom,0);N?P=E-2*(U!==0||Q!==0?U+Q:Da(y.left,y.right)):k=M-2*(Z!==0||ie!==0?Z+ie:Da(y.top,y.bottom))}await x({...a,availableWidth:P,availableHeight:k});const G=await u.getDimensions(h.floating);return E!==G.width||M!==G.height?{reset:{rects:!0}}:{}}}};function tu(){return typeof window<"u"}function kl(s){return vN(s)?(s.nodeName||"").toLowerCase():"#document"}function _a(s){var a;return(s==null||(a=s.ownerDocument)==null?void 0:a.defaultView)||window}function Sr(s){var a;return(a=(vN(s)?s.ownerDocument:s.document)||window.document)==null?void 0:a.documentElement}function vN(s){return tu()?s instanceof Node||s instanceof _a(s).Node:!1}function lr(s){return tu()?s instanceof Element||s instanceof _a(s).Element:!1}function kr(s){return tu()?s instanceof HTMLElement||s instanceof _a(s).HTMLElement:!1}function Gb(s){return!tu()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof _a(s).ShadowRoot}const y6=new Set(["inline","contents"]);function sc(s){const{overflow:a,overflowX:n,overflowY:i,display:c}=or(s);return/auto|scroll|overlay|hidden|clip/.test(a+i+n)&&!y6.has(c)}const b6=new Set(["table","td","th"]);function v6(s){return b6.has(kl(s))}const j6=[":popover-open",":modal"];function su(s){return j6.some(a=>{try{return s.matches(a)}catch{return!1}})}const N6=["transform","translate","scale","rotate","perspective"],k6=["transform","translate","scale","rotate","perspective","filter"],w6=["paint","layout","strict","content"];function ph(s){const a=yh(),n=lr(s)?or(s):s;return N6.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!a&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!a&&(n.filter?n.filter!=="none":!1)||k6.some(i=>(n.willChange||"").includes(i))||w6.some(i=>(n.contain||"").includes(i))}function S6(s){let a=zn(s);for(;kr(a)&&!fl(a);){if(ph(a))return a;if(su(a))return null;a=zn(a)}return null}function yh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const C6=new Set(["html","body","#document"]);function fl(s){return C6.has(kl(s))}function or(s){return _a(s).getComputedStyle(s)}function au(s){return lr(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function zn(s){if(kl(s)==="html")return s;const a=s.assignedSlot||s.parentNode||Gb(s)&&s.host||Sr(s);return Gb(a)?a.host:a}function jN(s){const a=zn(s);return fl(a)?s.ownerDocument?s.ownerDocument.body:s.body:kr(a)&&sc(a)?a:jN(a)}function Uo(s,a,n){var i;a===void 0&&(a=[]),n===void 0&&(n=!0);const c=jN(s),d=c===((i=s.ownerDocument)==null?void 0:i.body),u=_a(c);if(d){const h=pg(u);return a.concat(u,u.visualViewport||[],sc(c)?c:[],h&&n?Uo(h):[])}return a.concat(c,Uo(c,[],n))}function pg(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function NN(s){const a=or(s);let n=parseFloat(a.width)||0,i=parseFloat(a.height)||0;const c=kr(s),d=c?s.offsetWidth:n,u=c?s.offsetHeight:i,h=Id(n)!==d||Id(i)!==u;return h&&(n=d,i=u),{width:n,height:i,$:h}}function bh(s){return lr(s)?s:s.contextElement}function ml(s){const a=bh(s);if(!kr(a))return br(1);const n=a.getBoundingClientRect(),{width:i,height:c,$:d}=NN(a);let u=(d?Id(n.width):n.width)/i,h=(d?Id(n.height):n.height)/c;return(!u||!Number.isFinite(u))&&(u=1),(!h||!Number.isFinite(h))&&(h=1),{x:u,y:h}}const A6=br(0);function kN(s){const a=_a(s);return!yh()||!a.visualViewport?A6:{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}}function T6(s,a,n){return a===void 0&&(a=!1),!n||a&&n!==_a(s)?!1:a}function yi(s,a,n,i){a===void 0&&(a=!1),n===void 0&&(n=!1);const c=s.getBoundingClientRect(),d=bh(s);let u=br(1);a&&(i?lr(i)&&(u=ml(i)):u=ml(s));const h=T6(d,n,i)?kN(d):br(0);let x=(c.left+h.x)/u.x,f=(c.top+h.y)/u.y,y=c.width/u.x,b=c.height/u.y;if(d){const v=_a(d),N=i&&lr(i)?_a(i):i;let E=v,M=pg(E);for(;M&&i&&N!==E;){const L=ml(M),w=M.getBoundingClientRect(),T=or(M),A=w.left+(M.clientLeft+parseFloat(T.paddingLeft))*L.x,D=w.top+(M.clientTop+parseFloat(T.paddingTop))*L.y;x*=L.x,f*=L.y,y*=L.x,b*=L.y,x+=A,f+=D,E=_a(M),M=pg(E)}}return Hd({width:y,height:b,x,y:f})}function ru(s,a){const n=au(s).scrollLeft;return a?a.left+n:yi(Sr(s)).left+n}function wN(s,a){const n=s.getBoundingClientRect(),i=n.left+a.scrollLeft-ru(s,n),c=n.top+a.scrollTop;return{x:i,y:c}}function E6(s){let{elements:a,rect:n,offsetParent:i,strategy:c}=s;const d=c==="fixed",u=Sr(i),h=a?su(a.floating):!1;if(i===u||h&&d)return n;let x={scrollLeft:0,scrollTop:0},f=br(1);const y=br(0),b=kr(i);if((b||!b&&!d)&&((kl(i)!=="body"||sc(u))&&(x=au(i)),kr(i))){const N=yi(i);f=ml(i),y.x=N.x+i.clientLeft,y.y=N.y+i.clientTop}const v=u&&!b&&!d?wN(u,x):br(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-x.scrollLeft*f.x+y.x+v.x,y:n.y*f.y-x.scrollTop*f.y+y.y+v.y}}function R6(s){return Array.from(s.getClientRects())}function D6(s){const a=Sr(s),n=au(s),i=s.ownerDocument.body,c=Da(a.scrollWidth,a.clientWidth,i.scrollWidth,i.clientWidth),d=Da(a.scrollHeight,a.clientHeight,i.scrollHeight,i.clientHeight);let u=-n.scrollLeft+ru(s);const h=-n.scrollTop;return or(i).direction==="rtl"&&(u+=Da(a.clientWidth,i.clientWidth)-c),{width:c,height:d,x:u,y:h}}const Yb=25;function O6(s,a){const n=_a(s),i=Sr(s),c=n.visualViewport;let d=i.clientWidth,u=i.clientHeight,h=0,x=0;if(c){d=c.width,u=c.height;const y=yh();(!y||y&&a==="fixed")&&(h=c.offsetLeft,x=c.offsetTop)}const f=ru(i);if(f<=0){const y=i.ownerDocument,b=y.body,v=getComputedStyle(b),N=y.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,E=Math.abs(i.clientWidth-b.clientWidth-N);E<=Yb&&(d-=E)}else f<=Yb&&(d+=f);return{width:d,height:u,x:h,y:x}}const _6=new Set(["absolute","fixed"]);function M6(s,a){const n=yi(s,!0,a==="fixed"),i=n.top+s.clientTop,c=n.left+s.clientLeft,d=kr(s)?ml(s):br(1),u=s.clientWidth*d.x,h=s.clientHeight*d.y,x=c*d.x,f=i*d.y;return{width:u,height:h,x,y:f}}function Xb(s,a,n){let i;if(a==="viewport")i=O6(s,n);else if(a==="document")i=D6(Sr(s));else if(lr(a))i=M6(a,n);else{const c=kN(s);i={x:a.x-c.x,y:a.y-c.y,width:a.width,height:a.height}}return Hd(i)}function SN(s,a){const n=zn(s);return n===a||!lr(n)||fl(n)?!1:or(n).position==="fixed"||SN(n,a)}function L6(s,a){const n=a.get(s);if(n)return n;let i=Uo(s,[],!1).filter(h=>lr(h)&&kl(h)!=="body"),c=null;const d=or(s).position==="fixed";let u=d?zn(s):s;for(;lr(u)&&!fl(u);){const h=or(u),x=ph(u);!x&&h.position==="fixed"&&(c=null),(d?!x&&!c:!x&&h.position==="static"&&!!c&&_6.has(c.position)||sc(u)&&!x&&SN(s,u))?i=i.filter(y=>y!==u):c=h,u=zn(u)}return a.set(s,i),i}function F6(s){let{element:a,boundary:n,rootBoundary:i,strategy:c}=s;const u=[...n==="clippingAncestors"?su(a)?[]:L6(a,this._c):[].concat(n),i],h=u[0],x=u.reduce((f,y)=>{const b=Xb(a,y,c);return f.top=Da(b.top,f.top),f.right=Pn(b.right,f.right),f.bottom=Pn(b.bottom,f.bottom),f.left=Da(b.left,f.left),f},Xb(a,h,c));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}}function P6(s){const{width:a,height:n}=NN(s);return{width:a,height:n}}function z6(s,a,n){const i=kr(a),c=Sr(a),d=n==="fixed",u=yi(s,!0,d,a);let h={scrollLeft:0,scrollTop:0};const x=br(0);function f(){x.x=ru(c)}if(i||!i&&!d)if((kl(a)!=="body"||sc(c))&&(h=au(a)),i){const N=yi(a,!0,d,a);x.x=N.x+a.clientLeft,x.y=N.y+a.clientTop}else c&&f();d&&!i&&c&&f();const y=c&&!i&&!d?wN(c,h):br(0),b=u.left+h.scrollLeft-x.x-y.x,v=u.top+h.scrollTop-x.y-y.y;return{x:b,y:v,width:u.width,height:u.height}}function Rm(s){return or(s).position==="static"}function Kb(s,a){if(!kr(s)||or(s).position==="fixed")return null;if(a)return a(s);let n=s.offsetParent;return Sr(s)===n&&(n=n.ownerDocument.body),n}function CN(s,a){const n=_a(s);if(su(s))return n;if(!kr(s)){let c=zn(s);for(;c&&!fl(c);){if(lr(c)&&!Rm(c))return c;c=zn(c)}return n}let i=Kb(s,a);for(;i&&v6(i)&&Rm(i);)i=Kb(i,a);return i&&fl(i)&&Rm(i)&&!ph(i)?n:i||S6(s)||n}const V6=async function(s){const a=this.getOffsetParent||CN,n=this.getDimensions,i=await n(s.floating);return{reference:z6(s.reference,await a(s.floating),s.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function $6(s){return or(s).direction==="rtl"}const U6={convertOffsetParentRelativeRectToViewportRelativeRect:E6,getDocumentElement:Sr,getClippingRect:F6,getOffsetParent:CN,getElementRects:V6,getClientRects:R6,getDimensions:P6,getScale:ml,isElement:lr,isRTL:$6};function AN(s,a){return s.x===a.x&&s.y===a.y&&s.width===a.width&&s.height===a.height}function B6(s,a){let n=null,i;const c=Sr(s);function d(){var h;clearTimeout(i),(h=n)==null||h.disconnect(),n=null}function u(h,x){h===void 0&&(h=!1),x===void 0&&(x=1),d();const f=s.getBoundingClientRect(),{left:y,top:b,width:v,height:N}=f;if(h||a(),!v||!N)return;const E=fd(b),M=fd(c.clientWidth-(y+v)),L=fd(c.clientHeight-(b+N)),w=fd(y),A={rootMargin:-E+"px "+-M+"px "+-L+"px "+-w+"px",threshold:Da(0,Pn(1,x))||1};let D=!0;function C(S){const k=S[0].intersectionRatio;if(k!==x){if(!D)return u();k?u(!1,k):i=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!AN(f,s.getBoundingClientRect())&&u(),D=!1}try{n=new IntersectionObserver(C,{...A,root:c.ownerDocument})}catch{n=new IntersectionObserver(C,A)}n.observe(s)}return u(!0),d}function I6(s,a,n,i){i===void 0&&(i={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:x=!1}=i,f=bh(s),y=c||d?[...f?Uo(f):[],...Uo(a)]:[];y.forEach(w=>{c&&w.addEventListener("scroll",n,{passive:!0}),d&&w.addEventListener("resize",n)});const b=f&&h?B6(f,n):null;let v=-1,N=null;u&&(N=new ResizeObserver(w=>{let[T]=w;T&&T.target===f&&N&&(N.unobserve(a),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var A;(A=N)==null||A.observe(a)})),n()}),f&&!x&&N.observe(f),N.observe(a));let E,M=x?yi(s):null;x&&L();function L(){const w=yi(s);M&&!AN(M,w)&&n(),M=w,E=requestAnimationFrame(L)}return n(),()=>{var w;y.forEach(T=>{c&&T.removeEventListener("scroll",n),d&&T.removeEventListener("resize",n)}),b?.(),(w=N)==null||w.disconnect(),N=null,x&&cancelAnimationFrame(E)}}const q6=h6,H6=x6,G6=u6,Y6=p6,X6=m6,Zb=d6,K6=f6,Z6=(s,a,n)=>{const i=new Map,c={platform:U6,...n},d={...c.platform,_c:i};return c6(s,a,{...c,platform:d})};var Q6=typeof document<"u",W6=function(){},Ed=Q6?p.useLayoutEffect:W6;function Gd(s,a){if(s===a)return!0;if(typeof s!=typeof a)return!1;if(typeof s=="function"&&s.toString()===a.toString())return!0;let n,i,c;if(s&&a&&typeof s=="object"){if(Array.isArray(s)){if(n=s.length,n!==a.length)return!1;for(i=n;i--!==0;)if(!Gd(s[i],a[i]))return!1;return!0}if(c=Object.keys(s),n=c.length,n!==Object.keys(a).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(a,c[i]))return!1;for(i=n;i--!==0;){const d=c[i];if(!(d==="_owner"&&s.$$typeof)&&!Gd(s[d],a[d]))return!1}return!0}return s!==s&&a!==a}function TN(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Qb(s,a){const n=TN(s);return Math.round(a*n)/n}function Dm(s){const a=p.useRef(s);return Ed(()=>{a.current=s}),a}function J6(s){s===void 0&&(s={});const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:c,elements:{reference:d,floating:u}={},transform:h=!0,whileElementsMounted:x,open:f}=s,[y,b]=p.useState({x:0,y:0,strategy:n,placement:a,middlewareData:{},isPositioned:!1}),[v,N]=p.useState(i);Gd(v,i)||N(i);const[E,M]=p.useState(null),[L,w]=p.useState(null),T=p.useCallback(z=>{z!==S.current&&(S.current=z,M(z))},[]),A=p.useCallback(z=>{z!==k.current&&(k.current=z,w(z))},[]),D=d||E,C=u||L,S=p.useRef(null),k=p.useRef(null),P=p.useRef(y),G=x!=null,U=Dm(x),Q=Dm(c),Z=Dm(f),ie=p.useCallback(()=>{if(!S.current||!k.current)return;const z={placement:a,strategy:n,middleware:v};Q.current&&(z.platform=Q.current),Z6(S.current,k.current,z).then(Y=>{const se={...Y,isPositioned:Z.current!==!1};J.current&&!Gd(P.current,se)&&(P.current=se,gh.flushSync(()=>{b(se)}))})},[v,a,n,Q,Z]);Ed(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,b(z=>({...z,isPositioned:!1})))},[f]);const J=p.useRef(!1);Ed(()=>(J.current=!0,()=>{J.current=!1}),[]),Ed(()=>{if(D&&(S.current=D),C&&(k.current=C),D&&C){if(U.current)return U.current(D,C,ie);ie()}},[D,C,ie,U,G]);const te=p.useMemo(()=>({reference:S,floating:k,setReference:T,setFloating:A}),[T,A]),$=p.useMemo(()=>({reference:D,floating:C}),[D,C]),_=p.useMemo(()=>{const z={position:n,left:0,top:0};if(!$.floating)return z;const Y=Qb($.floating,y.x),se=Qb($.floating,y.y);return h?{...z,transform:"translate("+Y+"px, "+se+"px)",...TN($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:se}},[n,h,$.floating,y.x,y.y]);return p.useMemo(()=>({...y,update:ie,refs:te,elements:$,floatingStyles:_}),[y,ie,te,$,_])}const eA=s=>{function a(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:s,fn(n){const{element:i,padding:c}=typeof s=="function"?s(n):s;return i&&a(i)?i.current!=null?Zb({element:i.current,padding:c}).fn(n):{}:i?Zb({element:i,padding:c}).fn(n):{}}}},tA=(s,a)=>({...q6(s),options:[s,a]}),sA=(s,a)=>({...H6(s),options:[s,a]}),aA=(s,a)=>({...K6(s),options:[s,a]}),rA=(s,a)=>({...G6(s),options:[s,a]}),nA=(s,a)=>({...Y6(s),options:[s,a]}),iA=(s,a)=>({...X6(s),options:[s,a]}),lA=(s,a)=>({...eA(s),options:[s,a]});var oA="Arrow",EN=p.forwardRef((s,a)=>{const{children:n,width:i=10,height:c=5,...d}=s;return e.jsx($n.svg,{...d,ref:a,width:i,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});EN.displayName=oA;var cA=EN;function dA(s){const[a,n]=p.useState(void 0);return Fn(()=>{if(s){n({width:s.offsetWidth,height:s.offsetHeight});const i=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let u,h;if("borderBoxSize"in d){const x=d.borderBoxSize,f=Array.isArray(x)?x[0]:x;u=f.inlineSize,h=f.blockSize}else u=s.offsetWidth,h=s.offsetHeight;n({width:u,height:h})});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else n(void 0)},[s]),a}var vh="Popper",[RN,DN]=gN(vh),[uA,ON]=RN(vh),_N=s=>{const{__scopePopper:a,children:n}=s,[i,c]=p.useState(null);return e.jsx(uA,{scope:a,anchor:i,onAnchorChange:c,children:n})};_N.displayName=vh;var MN="PopperAnchor",LN=p.forwardRef((s,a)=>{const{__scopePopper:n,virtualRef:i,...c}=s,d=ON(MN,n),u=p.useRef(null),h=ki(a,u),x=p.useRef(null);return p.useEffect(()=>{const f=x.current;x.current=i?.current||u.current,f!==x.current&&d.onAnchorChange(x.current)}),i?null:e.jsx($n.div,{...c,ref:h})});LN.displayName=MN;var jh="PopperContent",[mA,gA]=RN(jh),FN=p.forwardRef((s,a)=>{const{__scopePopper:n,side:i="bottom",sideOffset:c=0,align:d="center",alignOffset:u=0,arrowPadding:h=0,avoidCollisions:x=!0,collisionBoundary:f=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:v=!1,updatePositionStrategy:N="optimized",onPlaced:E,...M}=s,L=ON(jh,n),[w,T]=p.useState(null),A=ki(a,Oe=>T(Oe)),[D,C]=p.useState(null),S=dA(D),k=S?.width??0,P=S?.height??0,G=i+(d!=="center"?"-"+d:""),U=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},Q=Array.isArray(f)?f:[f],Z=Q.length>0,ie={padding:U,boundary:Q.filter(xA),altBoundary:Z},{refs:J,floatingStyles:te,placement:$,isPositioned:_,middlewareData:z}=J6({strategy:"fixed",placement:G,whileElementsMounted:(...Oe)=>I6(...Oe,{animationFrame:N==="always"}),elements:{reference:L.anchor},middleware:[tA({mainAxis:c+P,alignmentAxis:u}),x&&sA({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?aA():void 0,...ie}),x&&rA({...ie}),nA({...ie,apply:({elements:Oe,rects:Ne,availableWidth:Ge,availableHeight:At})=>{const{width:Pt,height:Qt}=Ne.reference,Vt=Oe.floating.style;Vt.setProperty("--radix-popper-available-width",`${Ge}px`),Vt.setProperty("--radix-popper-available-height",`${At}px`),Vt.setProperty("--radix-popper-anchor-width",`${Pt}px`),Vt.setProperty("--radix-popper-anchor-height",`${Qt}px`)}}),D&&lA({element:D,padding:h}),fA({arrowWidth:k,arrowHeight:P}),v&&iA({strategy:"referenceHidden",...ie})]}),[Y,se]=VN($),O=eu(E);Fn(()=>{_&&O?.()},[_,O]);const K=z.arrow?.x,ue=z.arrow?.y,oe=z.arrow?.centerOffset!==0,[Ee,we]=p.useState();return Fn(()=>{w&&we(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:_?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(mA,{scope:n,placedSide:Y,onArrowChange:C,arrowX:K,arrowY:ue,shouldHideArrow:oe,children:e.jsx($n.div,{"data-side":Y,"data-align":se,...M,ref:A,style:{...M.style,animation:_?void 0:"none"}})})})});FN.displayName=jh;var PN="PopperArrow",hA={top:"bottom",right:"left",bottom:"top",left:"right"},zN=p.forwardRef(function(a,n){const{__scopePopper:i,...c}=a,d=gA(PN,i),u=hA[d.placedSide];return e.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:e.jsx(cA,{...c,ref:n,style:{...c.style,display:"block"}})})});zN.displayName=PN;function xA(s){return s!==null}var fA=s=>({name:"transformOrigin",options:s,fn(a){const{placement:n,rects:i,middlewareData:c}=a,u=c.arrow?.centerOffset!==0,h=u?0:s.arrowWidth,x=u?0:s.arrowHeight,[f,y]=VN(n),b={start:"0%",center:"50%",end:"100%"}[y],v=(c.arrow?.x??0)+h/2,N=(c.arrow?.y??0)+x/2;let E="",M="";return f==="bottom"?(E=u?b:`${v}px`,M=`${-x}px`):f==="top"?(E=u?b:`${v}px`,M=`${i.floating.height+x}px`):f==="right"?(E=`${-x}px`,M=u?b:`${N}px`):f==="left"&&(E=`${i.floating.width+x}px`,M=u?b:`${N}px`),{data:{x:E,y:M}}}});function VN(s){const[a,n="center"]=s.split("-");return[a,n]}var pA=_N,yA=LN,bA=FN,vA=zN,jA="Portal",$N=p.forwardRef((s,a)=>{const{container:n,...i}=s,[c,d]=p.useState(!1);Fn(()=>d(!0),[]);const u=n||c&&globalThis?.document?.body;return u?O4.createPortal(e.jsx($n.div,{...i,ref:a}),u):null});$N.displayName=jA;function NA(s,a){return p.useReducer((n,i)=>a[n][i]??n,s)}var Nh=s=>{const{present:a,children:n}=s,i=kA(a),c=typeof n=="function"?n({present:i.isPresent}):p.Children.only(n),d=ki(i.ref,wA(c));return typeof n=="function"||i.isPresent?p.cloneElement(c,{ref:d}):null};Nh.displayName="Presence";function kA(s){const[a,n]=p.useState(),i=p.useRef(null),c=p.useRef(s),d=p.useRef("none"),u=s?"mounted":"unmounted",[h,x]=NA(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const f=pd(i.current);d.current=h==="mounted"?f:"none"},[h]),Fn(()=>{const f=i.current,y=c.current;if(y!==s){const v=d.current,N=pd(f);s?x("MOUNT"):N==="none"||f?.display==="none"?x("UNMOUNT"):x(y&&v!==N?"ANIMATION_OUT":"UNMOUNT"),c.current=s}},[s,x]),Fn(()=>{if(a){let f;const y=a.ownerDocument.defaultView??window,b=N=>{const M=pd(i.current).includes(CSS.escape(N.animationName));if(N.target===a&&M&&(x("ANIMATION_END"),!c.current)){const L=a.style.animationFillMode;a.style.animationFillMode="forwards",f=y.setTimeout(()=>{a.style.animationFillMode==="forwards"&&(a.style.animationFillMode=L)})}},v=N=>{N.target===a&&(d.current=pd(i.current))};return a.addEventListener("animationstart",v),a.addEventListener("animationcancel",b),a.addEventListener("animationend",b),()=>{y.clearTimeout(f),a.removeEventListener("animationstart",v),a.removeEventListener("animationcancel",b),a.removeEventListener("animationend",b)}}else x("ANIMATION_END")},[a,x]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:p.useCallback(f=>{i.current=f?getComputedStyle(f):null,n(f)},[])}}function pd(s){return s?.animationName||"none"}function wA(s){let a=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?s.ref:(a=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var SA=Ov[" useInsertionEffect ".trim().toString()]||Fn;function CA({prop:s,defaultProp:a,onChange:n=()=>{},caller:i}){const[c,d,u]=AA({defaultProp:a,onChange:n}),h=s!==void 0,x=h?s:c;{const y=p.useRef(s!==void 0);p.useEffect(()=>{const b=y.current;b!==h&&console.warn(`${i} is changing from ${b?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=h},[h,i])}const f=p.useCallback(y=>{if(h){const b=TA(y)?y(s):y;b!==s&&u.current?.(b)}else d(y)},[h,s,d,u]);return[x,f]}function AA({defaultProp:s,onChange:a}){const[n,i]=p.useState(s),c=p.useRef(n),d=p.useRef(a);return SA(()=>{d.current=a},[a]),p.useEffect(()=>{c.current!==n&&(d.current?.(n),c.current=n)},[n,c]),[n,i,d]}function TA(s){return typeof s=="function"}var EA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RA="VisuallyHidden",UN=p.forwardRef((s,a)=>e.jsx($n.span,{...s,ref:a,style:{...EA,...s.style}}));UN.displayName=RA;var DA=UN,[nu]=gN("Tooltip",[DN]),iu=DN(),BN="TooltipProvider",OA=700,yg="tooltip.open",[_A,kh]=nu(BN),IN=s=>{const{__scopeTooltip:a,delayDuration:n=OA,skipDelayDuration:i=300,disableHoverableContent:c=!1,children:d}=s,u=p.useRef(!0),h=p.useRef(!1),x=p.useRef(0);return p.useEffect(()=>{const f=x.current;return()=>window.clearTimeout(f)},[]),e.jsx(_A,{scope:a,isOpenDelayedRef:u,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(x.current),u.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>u.current=!0,i)},[i]),isPointerInTransitRef:h,onPointerInTransitChange:p.useCallback(f=>{h.current=f},[]),disableHoverableContent:c,children:d})};IN.displayName=BN;var Bo="Tooltip",[MA,ac]=nu(Bo),qN=s=>{const{__scopeTooltip:a,children:n,open:i,defaultOpen:c,onOpenChange:d,disableHoverableContent:u,delayDuration:h}=s,x=kh(Bo,s.__scopeTooltip),f=iu(a),[y,b]=p.useState(null),v=Q4(),N=p.useRef(0),E=u??x.disableHoverableContent,M=h??x.delayDuration,L=p.useRef(!1),[w,T]=CA({prop:i,defaultProp:c??!1,onChange:k=>{k?(x.onOpen(),document.dispatchEvent(new CustomEvent(yg))):x.onClose(),d?.(k)},caller:Bo}),A=p.useMemo(()=>w?L.current?"delayed-open":"instant-open":"closed",[w]),D=p.useCallback(()=>{window.clearTimeout(N.current),N.current=0,L.current=!1,T(!0)},[T]),C=p.useCallback(()=>{window.clearTimeout(N.current),N.current=0,T(!1)},[T]),S=p.useCallback(()=>{window.clearTimeout(N.current),N.current=window.setTimeout(()=>{L.current=!0,T(!0),N.current=0},M)},[M,T]);return p.useEffect(()=>()=>{N.current&&(window.clearTimeout(N.current),N.current=0)},[]),e.jsx(pA,{...f,children:e.jsx(MA,{scope:a,contentId:v,open:w,stateAttribute:A,trigger:y,onTriggerChange:b,onTriggerEnter:p.useCallback(()=>{x.isOpenDelayedRef.current?S():D()},[x.isOpenDelayedRef,S,D]),onTriggerLeave:p.useCallback(()=>{E?C():(window.clearTimeout(N.current),N.current=0)},[C,E]),onOpen:D,onClose:C,disableHoverableContent:E,children:n})})};qN.displayName=Bo;var bg="TooltipTrigger",HN=p.forwardRef((s,a)=>{const{__scopeTooltip:n,...i}=s,c=ac(bg,n),d=kh(bg,n),u=iu(n),h=p.useRef(null),x=ki(a,h,c.onTriggerChange),f=p.useRef(!1),y=p.useRef(!1),b=p.useCallback(()=>f.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),e.jsx(yA,{asChild:!0,...u,children:e.jsx($n.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...i,ref:x,onPointerMove:Ir(s.onPointerMove,v=>{v.pointerType!=="touch"&&!y.current&&!d.isPointerInTransitRef.current&&(c.onTriggerEnter(),y.current=!0)}),onPointerLeave:Ir(s.onPointerLeave,()=>{c.onTriggerLeave(),y.current=!1}),onPointerDown:Ir(s.onPointerDown,()=>{c.open&&c.onClose(),f.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:Ir(s.onFocus,()=>{f.current||c.onOpen()}),onBlur:Ir(s.onBlur,c.onClose),onClick:Ir(s.onClick,c.onClose)})})});HN.displayName=bg;var wh="TooltipPortal",[LA,FA]=nu(wh,{forceMount:void 0}),GN=s=>{const{__scopeTooltip:a,forceMount:n,children:i,container:c}=s,d=ac(wh,a);return e.jsx(LA,{scope:a,forceMount:n,children:e.jsx(Nh,{present:n||d.open,children:e.jsx($N,{asChild:!0,container:c,children:i})})})};GN.displayName=wh;var pl="TooltipContent",YN=p.forwardRef((s,a)=>{const n=FA(pl,s.__scopeTooltip),{forceMount:i=n.forceMount,side:c="top",...d}=s,u=ac(pl,s.__scopeTooltip);return e.jsx(Nh,{present:i||u.open,children:u.disableHoverableContent?e.jsx(XN,{side:c,...d,ref:a}):e.jsx(PA,{side:c,...d,ref:a})})}),PA=p.forwardRef((s,a)=>{const n=ac(pl,s.__scopeTooltip),i=kh(pl,s.__scopeTooltip),c=p.useRef(null),d=ki(a,c),[u,h]=p.useState(null),{trigger:x,onClose:f}=n,y=c.current,{onPointerInTransitChange:b}=i,v=p.useCallback(()=>{h(null),b(!1)},[b]),N=p.useCallback((E,M)=>{const L=E.currentTarget,w={x:E.clientX,y:E.clientY},T=UA(w,L.getBoundingClientRect()),A=BA(w,T),D=IA(M.getBoundingClientRect()),C=HA([...A,...D]);h(C),b(!0)},[b]);return p.useEffect(()=>()=>v(),[v]),p.useEffect(()=>{if(x&&y){const E=L=>N(L,y),M=L=>N(L,x);return x.addEventListener("pointerleave",E),y.addEventListener("pointerleave",M),()=>{x.removeEventListener("pointerleave",E),y.removeEventListener("pointerleave",M)}}},[x,y,N,v]),p.useEffect(()=>{if(u){const E=M=>{const L=M.target,w={x:M.clientX,y:M.clientY},T=x?.contains(L)||y?.contains(L),A=!qA(w,u);T?v():A&&(v(),f())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[x,y,u,f,v]),e.jsx(XN,{...s,ref:d})}),[zA,VA]=nu(Bo,{isInside:!1}),$A=L4("TooltipContent"),XN=p.forwardRef((s,a)=>{const{__scopeTooltip:n,children:i,"aria-label":c,onEscapeKeyDown:d,onPointerDownOutside:u,...h}=s,x=ac(pl,n),f=iu(n),{onClose:y}=x;return p.useEffect(()=>(document.addEventListener(yg,y),()=>document.removeEventListener(yg,y)),[y]),p.useEffect(()=>{if(x.trigger){const b=v=>{v.target?.contains(x.trigger)&&y()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[x.trigger,y]),e.jsx(fN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:b=>b.preventDefault(),onDismiss:y,children:e.jsxs(bA,{"data-state":x.stateAttribute,...f,...h,ref:a,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx($A,{children:i}),e.jsx(zA,{scope:n,isInside:!0,children:e.jsx(DA,{id:x.contentId,role:"tooltip",children:c||i})})]})})});YN.displayName=pl;var KN="TooltipArrow",ZN=p.forwardRef((s,a)=>{const{__scopeTooltip:n,...i}=s,c=iu(n);return VA(KN,n).isInside?null:e.jsx(vA,{...c,...i,ref:a})});ZN.displayName=KN;function UA(s,a){const n=Math.abs(a.top-s.y),i=Math.abs(a.bottom-s.y),c=Math.abs(a.right-s.x),d=Math.abs(a.left-s.x);switch(Math.min(n,i,c,d)){case d:return"left";case c:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function BA(s,a,n=5){const i=[];switch(a){case"top":i.push({x:s.x-n,y:s.y+n},{x:s.x+n,y:s.y+n});break;case"bottom":i.push({x:s.x-n,y:s.y-n},{x:s.x+n,y:s.y-n});break;case"left":i.push({x:s.x+n,y:s.y-n},{x:s.x+n,y:s.y+n});break;case"right":i.push({x:s.x-n,y:s.y-n},{x:s.x-n,y:s.y+n});break}return i}function IA(s){const{top:a,right:n,bottom:i,left:c}=s;return[{x:c,y:a},{x:n,y:a},{x:n,y:i},{x:c,y:i}]}function qA(s,a){const{x:n,y:i}=s;let c=!1;for(let d=0,u=a.length-1;d<a.length;u=d++){const h=a[d],x=a[u],f=h.x,y=h.y,b=x.x,v=x.y;y>i!=v>i&&n<(b-f)*(i-y)/(v-y)+f&&(c=!c)}return c}function HA(s){const a=s.slice();return a.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),GA(a)}function GA(s){if(s.length<=1)return s.slice();const a=[];for(let i=0;i<s.length;i++){const c=s[i];for(;a.length>=2;){const d=a[a.length-1],u=a[a.length-2];if((d.x-u.x)*(c.y-u.y)>=(d.y-u.y)*(c.x-u.x))a.pop();else break}a.push(c)}a.pop();const n=[];for(let i=s.length-1;i>=0;i--){const c=s[i];for(;n.length>=2;){const d=n[n.length-1],u=n[n.length-2];if((d.x-u.x)*(c.y-u.y)>=(d.y-u.y)*(c.x-u.x))n.pop();else break}n.push(c)}return n.pop(),a.length===1&&n.length===1&&a[0].x===n[0].x&&a[0].y===n[0].y?a:a.concat(n)}var YA=IN,Wb=qN,Jb=HN,ev=GN,tv=YN,sv=ZN;const QN=p.createContext(void 0),Sh=()=>{const s=p.useContext(QN);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s};function Io(s){const n=s.replace("#","").match(/.{1,2}/g);return!n||n.length<3?[255,255,255]:[parseInt(n[0],16),parseInt(n[1],16),parseInt(n[2],16)]}function WN(s,a,n){s/=255,a/=255,n/=255;const i=Math.max(s,a,n),c=Math.min(s,a,n);let d=0,u=0;const h=(i+c)/2;if(i!==c){const x=i-c;switch(u=h>.5?x/(2-i-c):x/(i+c),i){case s:d=((a-n)/x+(a<n?6:0))/6;break;case a:d=((n-s)/x+2)/6;break;case n:d=((s-a)/x+4)/6;break}}return[d*360,u*100,h*100]}function vg(s,a,n){const[i,c,d]=[s,a,n].map(u=>(u=u/255,u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4)));return .2126*i+.7152*c+.0722*d}function JN(s,a){const n=Io(s),i=Io(a),c=vg(...n),d=vg(...i),u=Math.max(c,d),h=Math.min(c,d);return(u+.05)/(h+.05)}function av(s,a,n=4.5){const[i,c,d]=Io(s),[u,h,x]=WN(i,c,d),y=vg(...Io(a))>.5,b=15;for(let N=5;N<=b;N+=5){const E=y?Math.max(0,x-N):Math.min(100,x+N);return rv(u,h,E)}const v=y?Math.max(0,x-b):Math.min(100,x+b);return rv(u,h,v)}function rv(s,a,n){a/=100,n/=100;const i=a*Math.min(n,1-n),c=d=>{const u=(d+s/30)%12,h=n-i*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*h).toString(16).padStart(2,"0")};return`#${c(0)}${c(8)}${c(4)}`}function XA(s,a){const n=JN(s,a),i=n<3;let c;return i&&(s.toUpperCase()==="#FFFFFF"?c=av(a,s,3):c=av(s,a,3)),{ratio:n,passesAA:n>=4.5,passesAAA:n>=7,passesAALarge:n>=3,passesAAALarge:n>=4.5,isLowContrast:i,suggestedColor:c}}function KA(s){const[a,n,i]=Io(s),[c,d,u]=WN(a,n,i);return{"--accent-color":s,"--accent-color-rgb":`${a}, ${n}, ${i}`,"--accent-color-h":`${c}`,"--accent-color-s":`${d}%`,"--accent-color-l":`${u}%`,"--accent-hover":`hsl(${c}, ${d}%, ${Math.max(0,u-10)}%)`,"--accent-light":`hsl(${c}, ${d}%, ${Math.min(95,u+25)}%)`,"--accent-dark":`hsl(${c}, ${d}%, ${Math.max(0,u-15)}%)`,"--accent-subtle":`hsla(${c}, ${d}%, ${u}%, 0.1)`,"--accent-muted":`hsla(${c}, ${d}%, ${u}%, 0.2)`}}const nv=({children:s,defaultTheme:a="system"})=>{const[n,i]=p.useState(()=>localStorage.getItem("theme")||a),[c,d]=p.useState("light"),[u,h]=p.useState(()=>localStorage.getItem("accentColor")||"#FF6A00"),x=p.useCallback(b=>{const v=document.documentElement,N=KA(b);Object.entries(N).forEach(([E,M])=>{v.style.setProperty(E,M)})},[]),f=p.useCallback(b=>{h(b),localStorage.setItem("accentColor",b),x(b)},[x]);p.useEffect(()=>{const b=()=>{if(n==="system"){const N=window.matchMedia("(prefers-color-scheme: dark)").matches;d(N?"dark":"light")}else d(n)};b();const v=window.matchMedia("(prefers-color-scheme: dark)");return v.addEventListener("change",b),()=>{v.removeEventListener("change",b)}},[n]),p.useEffect(()=>{const b=document.documentElement;c==="dark"?b.classList.add("dark"):b.classList.remove("dark"),localStorage.setItem("theme",n)},[n,c]),p.useEffect(()=>{x(u)},[u,x]);const y={theme:n,actualTheme:c,setTheme:i,accentColor:u,setAccentColor:f,getContrastRatio:JN,checkContrast:XA};return e.jsx(QN.Provider,{value:y,children:s})};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QA=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,n,i)=>i?i.toUpperCase():n.toLowerCase()),iv=s=>{const a=QA(s);return a.charAt(0).toUpperCase()+a.slice(1)},ek=(...s)=>s.filter((a,n,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===n).join(" ").trim(),WA=s=>{for(const a in s)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=p.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...h},x)=>p.createElement("svg",{ref:x,...JA,width:a,height:a,stroke:s,strokeWidth:i?Number(n)*24/Number(a):n,className:ek("lucide",c),...!d&&!WA(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,y])=>p.createElement(f,y)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(s,a)=>{const n=p.forwardRef(({className:i,...c},d)=>p.createElement(eT,{ref:d,iconNode:a,className:ek(`lucide-${ZA(iv(s))}`,`lucide-${s}`,i),...c}));return n.displayName=iv(s),n};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pi=be("activity",tT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],aT=be("arrow-right",sT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],nT=be("bell",rT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],qo=be("box",iT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],oT=be("braces",lT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],gl=be("building",cT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jg=be("calendar",dT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cl=be("check",uT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wi=be("chevron-down",mT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bi=be("chevron-right",gT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bt=be("circle-alert",hT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],yd=be("circle-arrow-up",xT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fe=be("circle-check-big",fT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ho=be("circle-check",pT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],bT=be("circle-stop",yT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jo=be("circle",vT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ga=be("circle-x",jT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oa=be("clock",NT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Go=be("code",kT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ST=be("copy",wT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Rd=be("cpu",CT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],TT=be("crown",AT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Yd=be("database",ET);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vi=be("download",RT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],OT=be("ellipsis-vertical",DT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MT=be("eye-off",_T);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hr=be("eye",LT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],yl=be("file-code",FT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],zT=be("file-plus",PT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],As=be("file-text",VT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],tk=be("folder-kanban",$T);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Yo=be("folder-open",UT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bd=be("folder-plus",BT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Xd=be("folder",IT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lv=be("funnel",qT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Qr=be("git-branch",HT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Ng=be("git-commit-horizontal",GT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ov=be("grid-3x3",YT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],KT=be("grip-vertical",XT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],sk=be("hard-drive",ZT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],WT=be("hash",QT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],e5=be("history",JT);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],s5=be("house",t5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gr=be("info",a5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Wr=be("key",r5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],ak=be("laptop",n5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],rk=be("link",i5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],o5=be("list",l5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qs=be("loader-circle",c5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],u5=be("lock",d5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],g5=be("log-out",m5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xo=be("mail",h5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],f5=be("map-pin",x5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],y5=be("menu",p5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],v5=be("message-circle",b5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],kg=be("monitor",j5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],k5=be("network",N5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M12 3v6",key:"1holv5"}],["path",{d:"M16.76 3a2 2 0 0 1 1.8 1.1l2.23 4.479a2 2 0 0 1 .21.891V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9.472a2 2 0 0 1 .211-.894L5.45 4.1A2 2 0 0 1 7.24 3z",key:"187q7i"}],["path",{d:"M3.054 9.013h17.893",key:"grwhos"}]],cv=be("package-2",w5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],da=be("package",S5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],A5=be("palette",C5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ch=be("pause",T5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],R5=be("pen-line",E5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],O5=be("pen",D5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Jr=be("play",_5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ir=be("plus",M5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],F5=be("redo",L5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ko=be("refresh-cw",P5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M14 4a1 1 0 0 1 1-1",key:"dhj8ez"}],["path",{d:"M15 10a1 1 0 0 1-1-1",key:"1mnyi5"}],["path",{d:"M21 4a1 1 0 0 0-1-1",key:"sfs9ap"}],["path",{d:"M21 9a1 1 0 0 1-1 1",key:"mp6qeo"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a2 2 0 0 1 2-2h2",key:"15xut4"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}]],dv=be("replace",z5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Dd=be("rotate-ccw",V5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lu=be("save",$5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ah=be("search",U5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Od=be("server",B5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zt=be("settings",I5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qe=be("shield",q5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],G5=be("skip-forward",H5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],X5=be("smartphone",Y5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],nk=be("square-pen",K5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Q5=be("square",Z5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ji=be("tag",W5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ro=be("target",J5);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Om=be("test-tube",eE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Un=be("trash-2",tE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],aE=be("tree-pine",sE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jt=be("triangle-alert",rE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],iE=be("undo",nE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ou=be("upload",lE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cE=be("user-check",oE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ik=be("user-cog",dE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dn=be("user",uE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ws=be("users",mE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hE=be("wifi-off",gE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],wg=be("wifi",xE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pt=be("x",fE);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lk=be("zap",pE);function Th({isOpen:s,onSelectType:a,onClose:n}){const[i,c]=p.useState("solo"),[d,u]=p.useState(!1),h=()=>{a(i)},x=()=>{n&&u(!0)},f=()=>{u(!1),n&&n()},y=()=>{u(!1)};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 top-0 left-0 right-0 bottom-0 bg-black bg-opacity-75 flex items-center justify-center z-[1000] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl relative",children:[n&&e.jsx("button",{onClick:x,className:"absolute top-4 right-4 z-10 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close modal",children:e.jsx(pt,{size:20,className:"text-gray-600 dark:text-gray-400"})}),e.jsx("div",{className:"bg-gradient-to-r from-[#FF6A00] to-orange-600 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(qe,{size:32}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Choose Your License Type"}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Select the license that fits your needs"})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select the type of license you want to activate for this device."})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-4 transition-all ${i==="solo"?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"licenseType",value:"solo",checked:i==="solo",onChange:b=>c(b.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Dn,{size:18,className:"text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Solo License"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Individual developer license for single device use"})]})]})})}),e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-4 transition-all ${i==="teams"?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"licenseType",value:"teams",checked:i==="teams",onChange:b=>c(b.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ws,{size:18,className:"text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Teams License"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-seat license with collaboration features for small teams"})]})]})})}),e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-4 transition-all ${i==="enterprise"?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"licenseType",value:"enterprise",checked:i==="enterprise",onChange:b=>c(b.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(qe,{size:18,className:"text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Enterprise License"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Advanced security, RBAC, approval workflows, and audit controls"})]})]})})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[n&&e.jsx("button",{onClick:x,className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:h,className:"px-6 py-2 bg-gradient-to-r from-[#FF6A00] to-orange-600 text-white rounded-lg text-sm font-medium hover:from-[#E55F00] hover:to-orange-700 transition-all shadow-lg",children:"Continue"})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[10000] p-4",children:e.jsxs(ze.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:e.jsx(jt,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Close License Activation?"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Without an active license, you won't be able to create or access projects. You can only view your profile and settings."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Continue Activation"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Close Anyway"})]})]})})]}):null}function Eh({isOpen:s,onClose:a}){const[n,i]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(!1),[x,f]=p.useState(!1),[y,b]=p.useState(!1),{isActivatingLicense:v,activationError:N,activateLicense:E}=ma(),M=()=>{a&&b(!0)},L=()=>{b(!1),f(!1),a&&a()},w=()=>{b(!1)},T=()=>{h(!0),setTimeout(()=>{h(!1),f(!0)},1500)},A=k=>k.replace(/\D/g,"").substring(0,16).replace(/(\d{4})(?=\d)/g,"$1-"),D=k=>{const P=A(k.target.value);i(P)},C=async()=>{const k=n.trim(),P=c.trim();if(!k||!P)return;await E(k,P)&&console.log("License activated, user can now access the application")},S=n.trim().length>0&&c.trim().length>0;return s?e.jsx("div",{className:"fixed inset-0 top-0 left-0 right-0 bottom-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl relative",children:[a&&e.jsx("button",{onClick:M,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close modal",children:e.jsx(pt,{size:24,className:"text-white"})}),e.jsx("div",{className:"bg-gradient-to-r from-[#FF6A00] to-orange-600 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(qe,{size:32}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Activate Pandaura AS License"}),e.jsx("p",{className:"text-orange-100 text-base mt-2",children:"License activation required to continue"})]})]})}),e.jsxs("div",{className:"p-12 space-y-8",children:[N&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Activation Failed"}),e.jsx("p",{children:N})]})]})}),x&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-yellow-600 dark:text-yellow-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("p",{className:"font-semibold mb-3 text-lg",children:"Limited Access Without License"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:" Restricted Features:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"Cannot create new projects"}),e.jsx("li",{children:"Cannot open existing projects"}),e.jsx("li",{children:"Cannot use version control"}),e.jsx("li",{children:"Cannot deploy applications"}),e.jsx("li",{children:"Cannot access advanced features"})]}),e.jsx("p",{className:"font-medium text-green-600 dark:text-green-400 mt-3",children:" Available Features:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"View application interface"}),e.jsx("li",{children:"Access settings and profile"}),e.jsx("li",{children:"License activation (this modal)"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/50 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:" To unlock all features, please activate your license above."})})]}),e.jsx("button",{onClick:()=>f(!1),className:"mt-4 text-sm text-yellow-700 dark:text-yellow-300 underline hover:no-underline",children:"Hide this message"})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"licenseKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx(Wr,{size:18,className:"inline mr-2 text-[#FF6A00]"}),"License Key"]}),e.jsx("input",{id:"licenseKey",type:"text",value:n,onChange:D,placeholder:"XXXX-XXXX-XXXX-XXXX",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] transition-colors font-mono text-lg tracking-wide",disabled:v,autoComplete:"off",maxLength:19})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ownerEmail",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx(Xo,{size:18,className:"inline mr-2 text-[#FF6A00]"}),"Owner Email (for certificate bind)"]}),e.jsx("input",{id:"ownerEmail",type:"email",value:c,onChange:k=>d(k.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] transition-colors",disabled:v,autoComplete:"email"})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-8 py-6 rounded-b-lg",children:e.jsxs("div",{className:"flex justify-center items-center space-x-6",children:[e.jsx("button",{onClick:T,disabled:v,className:"px-6 py-3 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors disabled:opacity-50 font-medium border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:u?"Closing...":"Exit"}),e.jsxs("button",{onClick:C,disabled:!S||v,className:"px-8 py-3 bg-gradient-to-r from-[#FF6A00] to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:bg-gray-400 disabled:from-gray-400 disabled:to-gray-400 text-white rounded-lg transition-all duration-200 flex items-center space-x-2 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:[v&&e.jsx(qs,{className:"animate-spin",size:18}),e.jsx("span",{children:v?"Activating...":"Activate"})]})]})}),y&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-20 rounded-lg backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(bt,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Close Without Activating?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:"You won't be able to create or access projects without a license. You can activate your license later from the profile page."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:"Stay Here"}),e.jsx("button",{onClick:L,className:"flex-1 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Close Anyway"})]})]})})]})}):null}function ok({isOpen:s,onComplete:a}){const[n,i]=p.useState(!1),[c,d]=p.useState(null),[u,h]=p.useState(!1),[x,f]=p.useState(!1),[y,b]=p.useState(!1),[v,N]=p.useState(""),[E,M]=p.useState(""),L=D=>D.replace(/\D/g,"").substring(0,16).replace(/(\d{4})(?=\d)/g,"$1-"),w=D=>{const C=L(D.target.value);N(C),d(null),C.length>=19&&T(C)},T=async D=>{h(!0);try{const S=await(await fetch("/api/license/teams/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:D})})).json();S.success?(f(S.needsSetup),S.needsSetup||d("This license is already configured. You will join as a team member.")):f(!0)}catch(C){console.error("Error checking license:",C),f(!0)}finally{h(!1)}},A=async()=>{if(!v||v.length<19||!E){d("Please enter a complete license key and email");return}i(!0),d(null);try{if(!await Ct.getSessionToken())throw new Error("No session token available. Please refresh and try again.");const S=await(await fetch("/api/device/activate-license",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({licenseKey:v,ownerEmail:E,licenseType:"teams"})})).json();S.success?(b(!0),setTimeout(()=>{a()},1500)):d(S.error||"Failed to activate license")}catch(D){d(D.message||"Failed to activate license")}finally{i(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10000] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ws,{size:32}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Activate Teams License"}),e.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Enter your license key and email to activate"})]})]})}),e.jsx("div",{className:"px-8 py-8",children:y?e.jsxs(ze.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Fe,{size:48,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Teams License Activated Successfully!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x?"You can now configure your organization settings using the 'Manage License' button.":"You have successfully joined the team."})]}):e.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{size:20,className:"text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Activate Teams License"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enter your Teams license key and admin email to begin setup"})]}),u&&v.length>=19&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Checking license status..."})}),!x&&v.length>=19&&!u&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:" This license is already configured. You will join the team after activation."})}),x&&v.length>=19&&!u&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:' First device - After activation, use "Manage License" to configure organization settings.'})}),c&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:c})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Teams License Key"}),e.jsx("input",{type:"text",value:v,onChange:w,placeholder:"1111-1111-1111-1111",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-lg",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Email"}),e.jsx("input",{type:"email",value:E,onChange:D=>{M(D.target.value),d(null)},placeholder:"admin@company.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:n}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This email will be the primary admin for the Teams license"})]}),e.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200 dark:border-gray-600",children:e.jsx("button",{onClick:A,disabled:!v||v.length<19||!E||n||u,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ze.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(Zt,{size:20})}),"Activating..."]}):u?"Checking...":e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:20}),"Activate License"]})})})]})})]})}):null}function Ye({children:s,className:a=""}){return e.jsx("div",{className:`bg-white dark:bg-panda-card-dark border border-gray-200 dark:border-panda-border-dark rounded-lg shadow-soft dark:shadow-soft-dark transition-colors duration-300 ${a}`,children:s})}function Ps({children:s,className:a=""}){return e.jsx("h2",{className:`text-lg font-medium mb-3 text-gray-800 dark:text-white ${a}`,children:s})}const uv=[{key:"programs",label:"Programs",icon:yl,description:"Complete program logic and structure",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/20"},{key:"executionUnits",label:"Execution Units",icon:pi,description:"Tasks, phases, and execution sequences",color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/20"},{key:"tags",label:"Tags",icon:Yd,description:"Controller-scoped and program-scoped tags",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/20"},{key:"dataTypes",label:"Data Types (UDTs)",icon:qo,description:"User-defined data types and structures",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/20"},{key:"routines",label:"Routines",icon:Go,description:"Ladder logic, structured text, and function blocks",color:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-100 dark:bg-cyan-900/20"},{key:"aois",label:"Add-On Instructions",icon:qo,description:"Reusable instruction definitions",color:"text-pink-600 dark:text-pink-400",bgColor:"bg-pink-100 dark:bg-pink-900/20"},{key:"constants",label:"Constants",icon:sk,description:"System and user-defined constants",color:"text-gray-600 dark:text-gray-400",bgColor:"bg-gray-100 dark:bg-gray-900/20"}];function yE({runtimeId:s,selectedScope:a,onScopeChange:n,disabled:i=!1}){const[c,d]=p.useState(null),[u,h]=p.useState(null),[x,f]=p.useState(!0),[y,b]=p.useState(null);p.useEffect(()=>{v()},[s]),p.useEffect(()=>{N()},[a,c]);const v=async()=>{if(!s){b("No runtime selected"),f(!1);return}f(!0),b(null);try{const A=await Ct.getSessionToken();if(!A)throw new Error("No session token available. Please log in.");const D={Authorization:`Bearer ${A}`},C=await fetch(`http://localhost:8000/api/runtimes/${s}`,{headers:D});if(!C.ok){const Z=await C.json().catch(()=>({}));throw new Error(Z.error||`Failed to fetch runtime details: ${C.status}`)}const k=(await C.json()).runtime;if(!k)throw new Error("Runtime not found");const P=`http://${k.ipAddress}:${k.port}`;console.log(` Fetching counts from ${P}/snapshot/summary`);const G=await fetch(`${P}/snapshot/summary`);if(!G.ok)throw new Error(`Runtime summary endpoint failed: ${G.status}`);const U=await G.json();console.log(" Loaded dynamic object counts from runtime:",U);const Q={programs:U.programs||0,executionUnits:U.tasks||0,tags:U.symbols||0,dataTypes:U.types||0,routines:0,aois:0,constants:U.constants||0};d(Q),b(null)}catch(A){const D=A instanceof Error?A.message:"Failed to load object counts";console.error(" Error loading object counts:",D),b(D),d(null)}finally{f(!1)}},N=()=>{if(!c)return;let A=0,D=0;a.programs&&(A+=c.programs,D+=c.programs*50),a.executionUnits&&(A+=c.executionUnits,D+=c.executionUnits*10),a.tags&&(A+=c.tags,D+=c.tags*2),a.dataTypes&&(A+=c.dataTypes,D+=c.dataTypes*5),a.routines&&(A+=c.routines,D+=c.routines*20),a.aois&&(A+=c.aois,D+=c.aois*30),a.constants&&(A+=c.constants,D+=c.constants*.5),h({totalObjects:A,estimatedMemoryKB:D})},E=A=>{i||n({...a,[A]:!a[A]})},M=()=>{i||n({programs:!0,executionUnits:!0,tags:!0,dataTypes:!0,routines:!0,aois:!0,constants:!0})},L=()=>{i||n({programs:!1,executionUnits:!1,tags:!1,dataTypes:!1,routines:!1,aois:!1,constants:!1})},w=Object.values(a).filter(Boolean).length,T=w>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Snapshot Scope"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Select what to extract from the PLC runtime"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,disabled:i,className:"text-sm text-[#FF6A00] hover:text-[#FF6A00]/80 transition-colors disabled:opacity-50",children:"Select All"}),e.jsx("span",{className:"text-gray-300 dark:text-gray-700",children:"|"}),e.jsx("button",{onClick:L,disabled:i,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors disabled:opacity-50",children:"Clear"})]})]}),y&&e.jsx(Ye,{className:"p-3 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bt,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Failed to Load Object Counts"}),e.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:y}),e.jsx("button",{onClick:v,className:"mt-2 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 underline",children:"Try Again"})]})]})}),!T&&e.jsx(Ye,{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-100",children:"No Items Selected"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:"You must select at least one scope item to proceed. Nothing will be extracted with the current selection."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:uv.map(A=>{const D=A.icon,C=a[A.key],S=c?.[A.key]??0;return e.jsx("div",{className:`p-4 cursor-pointer transition-all rounded-lg border border-gray-200 dark:border-gray-700 ${C?"ring-2 ring-[#FF6A00] bg-orange-50 dark:bg-orange-900/10":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"} ${i?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!i&&E(A.key),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 ${A.bgColor} rounded-lg flex-shrink-0`,children:e.jsx(D,{className:`w-5 h-5 ${A.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:A.label}),C&&e.jsx(cl,{className:"w-5 h-5 text-[#FF6A00] flex-shrink-0"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:A.description}),x?e.jsx("div",{className:"mt-2 h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):y?e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:"Error"}),e.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"unable to load"})]}):c?e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:S.toLocaleString()}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"objects"})]}):e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"?"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"unknown"})]})]})]})},A.key)})}),u&&T&&e.jsx(Ye,{className:"p-4 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Selection Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Categories:"}),e.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:[w," of ",uv.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Total Objects:"}),e.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:u.totalObjects.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Estimated Size:"}),e.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:bE(u.estimatedMemoryKB)})]})]})]}),e.jsx(sk,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})]})})]})}function bE(s){if(s<1024)return`${s.toFixed(1)} KB`;const a=s/1024;return a<1024?`${a.toFixed(2)} MB`:`${(a/1024).toFixed(2)} GB`}class vE{state="idle";context={entryPoint:"manual",requiresApproval:!1,scope:{programs:!1,tags:!1,dataTypes:!1,routines:!1,aois:!1,executionUnits:!1,constants:!1}};listeners=[];getState(){return this.state}getContext(){return{...this.context}}subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(n=>n!==a)}}setState(a,n){this.state=a,n&&(this.context={...this.context,...n}),this.notifyListeners()}notifyListeners(){this.listeners.forEach(a=>a(this.state,this.context))}send(a){switch(console.log(`[PullFlow] Event: ${a.type}, Current State: ${this.state}`),a.type){case"START":this.setState("selecting-runtime",{entryPoint:a.payload.entryPoint,projectId:a.payload.projectId,projectName:a.payload.projectName});break;case"RUNTIME_SELECTED":this.setState("selecting-scope",{runtimeId:a.payload.runtimeId,runtimeName:a.payload.runtimeName,runtimeEnvironment:a.payload.environment});break;case"SCOPE_SELECTED":this.setState("reviewing-approval",{scope:a.payload});break;case"APPROVAL_REQUIRED":this.setState("approval-pending",{requiresApproval:!0,approvalRequestId:a.payload.requestId});break;case"EXECUTE_PULL":this.setState("executing-pull");break;case"PULL_SUCCESS":this.setState("success",{snapshotId:a.payload.snapshotId,itemsPulled:a.payload.itemsPulled,createdProjectId:a.payload.projectId,createdProjectName:a.payload.projectName});break;case"PULL_ERROR":this.setState("error",{error:a.payload.error});break;case"RESET":case"CANCEL":this.state="idle",this.context={entryPoint:"manual",requiresApproval:!1,scope:{programs:!1,tags:!1,dataTypes:!1,routines:!1,aois:!1,executionUnits:!1,constants:!1}},this.notifyListeners();break}}}const sr=new vE,jE={admin:{canPullFromPLC:!0,canPullFromProduction:!0,canPullFromStaging:!0,canPullFromDevelopment:!0,canCloneImportedBaseline:!0,canModifyBaseline:!0,canDeleteBaseline:!0,canCreateDraft:!0,canEditDraft:!0,canPromoteDraft:!0,canApproveProductionPull:!0,canBypassApproval:!0,canViewPendingApprovals:!0,canViewAuditLog:!0,canExportAuditLog:!0},engineer:{canPullFromPLC:!0,canPullFromProduction:!1,canPullFromStaging:!0,canPullFromDevelopment:!0,canCloneImportedBaseline:!0,canModifyBaseline:!0,canDeleteBaseline:!1,canCreateDraft:!0,canEditDraft:!0,canPromoteDraft:!1,canApproveProductionPull:!1,canBypassApproval:!1,canViewPendingApprovals:!0,canViewAuditLog:!0,canExportAuditLog:!1},operator:{canPullFromPLC:!0,canPullFromProduction:!1,canPullFromStaging:!1,canPullFromDevelopment:!0,canCloneImportedBaseline:!1,canModifyBaseline:!1,canDeleteBaseline:!1,canCreateDraft:!0,canEditDraft:!1,canPromoteDraft:!1,canApproveProductionPull:!1,canBypassApproval:!1,canViewPendingApprovals:!1,canViewAuditLog:!1,canExportAuditLog:!1},viewer:{canPullFromPLC:!1,canPullFromProduction:!1,canPullFromStaging:!1,canPullFromDevelopment:!1,canCloneImportedBaseline:!1,canModifyBaseline:!1,canDeleteBaseline:!1,canCreateDraft:!1,canEditDraft:!1,canPromoteDraft:!1,canApproveProductionPull:!1,canBypassApproval:!1,canViewPendingApprovals:!1,canViewAuditLog:!1,canExportAuditLog:!1}};function ck(s){return jE[s]}function NE(s,a){if(!s.canPullFromPLC)return!1;switch(a){case"production":return s.canPullFromProduction;case"staging":return s.canPullFromStaging;case"development":return s.canPullFromDevelopment;default:return!1}}function kE(s,a){return s.canBypassApproval?!1:a==="production"?!s.canApproveProductionPull:!1}const wE=24;function SE(s){const a=new Date,n=new Date(a.getTime()+wE*60*60*1e3);return{id:_E(),type:s.type,requestedBy:s.requestedBy,requestedAt:a.toISOString(),runtime:s.runtime,reason:s.reason,snapshotScope:s.snapshotScope,status:"pending",expiresAt:n.toISOString(),projectId:s.projectId}}async function CE(s){try{const a=await fetch("http://localhost:8000/api/approvals/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`Failed to submit approval request: ${a.statusText}`);return{success:!0,requestId:(await a.json()).request_id||s.id}}catch(a){throw console.error("Failed to submit approval request:",a),a}}async function AE(){try{const s=await fetch("http://localhost:8000/api/approvals/pending");if(!s.ok)throw new Error(`Failed to fetch pending approvals: ${s.statusText}`);return(await s.json()).requests||[]}catch(s){return console.error("Failed to fetch pending approvals:",s),[]}}async function TE(s){try{const a=await fetch(`http://localhost:8000/api/approvals/my-requests?user_id=${s}`);if(!a.ok)throw new Error(`Failed to fetch user approvals: ${a.statusText}`);return(await a.json()).requests||[]}catch(a){return console.error("Failed to fetch user approval requests:",a),[]}}async function EE(s,a,n){try{const i={requestId:s,decision:"approve",decidedBy:a,decidedAt:new Date().toISOString(),notes:n},c=await fetch(`http://localhost:8000/api/approvals/${s}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!c.ok)throw new Error(`Failed to approve request: ${c.statusText}`);return!0}catch(i){return console.error("Failed to approve request:",i),!1}}async function RE(s,a,n,i){try{const c={requestId:s,decision:"reject",decidedBy:a,decidedAt:new Date().toISOString(),reason:n,notes:i},d=await fetch(`http://localhost:8000/api/approvals/${s}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error(`Failed to reject request: ${d.statusText}`);return!0}catch(c){return console.error("Failed to reject request:",c),!1}}async function DE(s,a){try{const n=await fetch(`http://localhost:8000/api/approvals/${s}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a})});if(!n.ok)throw new Error(`Failed to cancel request: ${n.statusText}`);return!0}catch(n){return console.error("Failed to cancel request:",n),!1}}function OE(s){if(s.status!=="pending")return"N/A";const a=new Date,i=new Date(s.expiresAt).getTime()-a.getTime();if(i<=0)return"Expired";const c=Math.floor(i/(1e3*60*60)),d=Math.floor(i%(1e3*60*60)/(1e3*60));return c>0?`${c}h ${d}m`:`${d}m`}function _E(){return`APR-${Date.now()}-${Math.random().toString(36).substring(2,9).toUpperCase()}`}function ME(s){switch(s){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";case"expired":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}}const LE="http://localhost:8000/api";async function FE(s){const a={id:nc(),timestamp:new Date().toISOString(),action:"pull-initiated",severity:s.runtimeEnvironment==="production"?"warning":"info",userId:s.userId,username:s.username,userRole:s.userRole,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,projectId:s.projectId,approvalRequestId:s.approvalRequestId,details:{snapshot_scope:s.snapshotScope,requires_approval:s.requiresApproval},success:!0};await rc(a)}async function PE(s){const a={id:nc(),timestamp:new Date().toISOString(),action:"pull-completed",severity:"info",userId:s.userId,username:s.username,userRole:s.userRole,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,projectId:s.projectId,snapshotId:s.snapshotId,details:{items_pulled:s.itemsPulled,duration_ms:s.duration},success:!0};await rc(a)}async function zE(s){const a={id:nc(),timestamp:new Date().toISOString(),action:"pull-failed",severity:s.runtimeEnvironment==="production"?"critical":"error",userId:s.userId,username:s.username,userRole:s.userRole,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,projectId:s.projectId,details:s.errorDetails||{},success:!1,errorMessage:s.error};await rc(a)}async function VE(s){const a={id:nc(),timestamp:new Date().toISOString(),action:"approval-requested",severity:"warning",userId:s.userId,username:s.username,userRole:s.userRole,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,approvalRequestId:s.approvalRequestId,details:{reason:s.reason},success:!0};await rc(a)}async function mv(s){const a={id:nc(),timestamp:new Date().toISOString(),action:"permission-denied",severity:"warning",userId:s.userId,username:s.username,userRole:s.userRole,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,details:{attempted_action:s.attemptedAction,missing_permission:s.missingPermission},success:!1,errorMessage:`Permission denied: ${s.missingPermission}`};await rc(a)}async function rc(s){try{const a=await Ct.getSessionToken(),n={"Content-Type":"application/json"};a&&(n.Authorization=`Bearer ${a}`);const i=await fetch(`${LE}/audit/plc-pull`,{method:"POST",headers:n,body:JSON.stringify(s)});i.ok||console.error("Failed to send audit entry:",i.statusText)}catch(a){console.error("Failed to send audit entry:",a),$E(s)}}function $E(s){try{const a=localStorage.getItem("pandaura_audit_fallback")||"[]",n=JSON.parse(a);n.push(s),n.length>100&&n.shift(),localStorage.setItem("pandaura_audit_fallback",JSON.stringify(n))}catch(a){console.error("Failed to store audit locally:",a)}}function nc(){return`AUD-${Date.now()}-${Math.random().toString(36).substring(2,9).toUpperCase()}`}async function UE(s,a){if(!a.canPullFromPLC)return await mv({userId:s.user.userId,username:s.user.username,userRole:s.user.role,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,attemptedAction:"pull-from-plc",missingPermission:"canPullFromPLC"}),{allowed:!1,requiresApproval:!1,denialReason:"User does not have permission to pull from PLC"};if(!NE(a,s.runtimeEnvironment))return await mv({userId:s.user.userId,username:s.user.username,userRole:s.user.role,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,attemptedAction:`pull-from-${s.runtimeEnvironment}`,missingPermission:`canPullFrom${BE(s.runtimeEnvironment)}`}),{allowed:!1,requiresApproval:!1,denialReason:`User does not have permission to pull from ${s.runtimeEnvironment} runtimes`};if(kE(a,s.runtimeEnvironment)){const c=SE({type:"production-pull",requestedBy:{userId:s.user.userId,username:s.user.username,role:s.user.role},runtime:{id:s.runtimeId,name:s.runtimeName,environment:s.runtimeEnvironment,ipAddress:"Unknown"},reason:s.reason||"Pull from production runtime",snapshotScope:{programs:s.snapshotScope.includePrograms,tags:s.snapshotScope.includeTags,dataTypes:s.snapshotScope.includeDataTypes,routines:s.snapshotScope.includeRoutines,aois:s.snapshotScope.includeAOIs},projectId:s.projectId});try{const d=await CE(c);return await VE({userId:s.user.userId,username:s.user.username,userRole:s.user.role,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,approvalRequestId:d.requestId,reason:c.reason}),{allowed:!1,requiresApproval:!0,approvalRequestId:d.requestId,warning:"Production pull requires approval. Request has been submitted."}}catch{return{allowed:!1,requiresApproval:!0,denialReason:"Failed to submit approval request. Please try again."}}}return await FE({userId:s.user.userId,username:s.user.username,userRole:s.user.role,runtimeId:s.runtimeId,runtimeName:s.runtimeName,runtimeEnvironment:s.runtimeEnvironment,projectId:s.projectId,snapshotScope:{programs:s.snapshotScope.includePrograms,tags:s.snapshotScope.includeTags,dataTypes:s.snapshotScope.includeDataTypes,routines:s.snapshotScope.includeRoutines,aois:s.snapshotScope.includeAOIs},requiresApproval:!1}),{allowed:!0,requiresApproval:!1}}function BE(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Sg={snapshotScope:{includePrograms:!0,includeTags:!0,includeDataTypes:!0,includeRoutines:!0,includeAOIs:!0},conflictResolution:"ask",warningBehavior:"show-all",autoShadowRuntime:!0},dk="pandaura_import_defaults";function uk(){try{const s=localStorage.getItem(dk);if(s){const a=JSON.parse(s);if(a.snapshotScope&&a.conflictResolution&&a.warningBehavior!==void 0)return a}}catch(s){console.error("Failed to load import defaults:",s)}return Sg}function IE(s){try{return localStorage.setItem(dk,JSON.stringify(s)),!0}catch(a){return console.error("Failed to save import defaults:",a),!1}}function mk({isOpen:s,onClose:a,currentUser:n,projectId:i,projectName:c,entryPoint:d="manual"}){const[u,h]=p.useState("idle"),[x,f]=p.useState(sr.getContext()),[y,b]=p.useState([]),[v,N]=p.useState(""),[E,M]=p.useState({programs:!1,tags:!1,dataTypes:!1,routines:!1,aois:!1,executionUnits:!1,constants:!1}),[L,w]=p.useState(""),[T,A]=p.useState(!1),[D,C]=p.useState(""),S=ck(n.role),{loadProjects:k,setActiveProject:P,getProjectById:G}=jr();p.useEffect(()=>{if(s){sr.send({type:"START",payload:{entryPoint:d,projectId:i,projectName:c}});const z=uk();M({programs:z.snapshotScope.includePrograms,tags:z.snapshotScope.includeTags,dataTypes:z.snapshotScope.includeDataTypes,routines:z.snapshotScope.includeRoutines,aois:z.snapshotScope.includeAOIs,executionUnits:!0,constants:!0}),U()}},[s]),p.useEffect(()=>sr.subscribe((Y,se)=>{h(Y),f(se)}),[]);const U=async()=>{try{const z=await Ct.getSessionToken();if(!z){console.warn(" No session token available, using mock runtimes"),b(vd);return}const Y=await fetch("http://localhost:8000/api/runtimes",{headers:{Authorization:`Bearer ${z}`}});if(Y.ok){const O=((await Y.json()).runtimes||[]).map(K=>({id:K.id,name:K.name,environment:K.isProduction?"production":K.environment||"development",ipAddress:K.ipAddress,status:Q(K.status)}));console.log(" Loaded",O.length,"runtimes for pull selection"),b(O.length>0?O:vd)}else console.warn("Failed to load runtimes, using mock data"),b(vd)}catch(z){console.error("Error loading runtimes:",z),b(vd)}},Q=z=>{switch(z?.toLowerCase()){case"connected":case"online":return"connected";case"error":case"faulted":case"maintenance":return"error";default:return"disconnected"}},Z=z=>{N(z.id),sr.send({type:"RUNTIME_SELECTED",payload:{runtimeId:z.id,runtimeName:z.name,environment:z.environment}})},ie=()=>{if(!v)return;const z=y.find(Y=>Y.id===v);z&&Z(z)},J=()=>{if(!Object.values(E).some(Y=>Y)){C("Please select at least one scope item");return}sr.send({type:"SCOPE_SELECTED",payload:E})},te=async()=>{const z=y.find(Y=>Y.id===v);if(z){A(!0),C("");try{const Y=await UE({runtimeId:z.id,runtimeName:z.name,runtimeEnvironment:z.environment,projectId:i,snapshotScope:{includePrograms:E.programs,includeTags:E.tags,includeDataTypes:E.dataTypes,includeRoutines:E.routines,includeAOIs:E.aois},user:n,reason:L||"Pull from PLC"},S);if(!Y.allowed){if(Y.requiresApproval){sr.send({type:"APPROVAL_REQUIRED",payload:{requestId:Y.approvalRequestId}});return}C(Y.denialReason||"Permission denied"),sr.send({type:"PULL_ERROR",payload:{error:Y.denialReason||"Permission denied"}});return}sr.send({type:"EXECUTE_PULL"});const se=await Ct.getSessionToken();if(!se)throw new Error("No authentication token available");const O=Date.now(),K=await fetch(`http://localhost:8000/api/runtimes/${z.id}/snapshot`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},body:JSON.stringify({project_id:i,snapshot_scope:{include_programs:E.programs,include_tags:E.tags,include_data_types:E.dataTypes,include_routines:E.routines,include_aois:E.aois,include_execution_units:E.executionUnits,include_constants:E.constants}})});if(!K.ok)throw new Error(`Pull failed: ${K.statusText}`);const ue=await K.json(),oe=Date.now()-O;if(await PE({userId:n.userId,username:n.username,userRole:n.role,runtimeId:z.id,runtimeName:z.name,runtimeEnvironment:z.environment,projectId:i,snapshotId:ue.snapshot_id,itemsPulled:ue.items_pulled||0,duration:oe}),sr.send({type:"PULL_SUCCESS",payload:{snapshotId:ue.snapshot_id,itemsPulled:ue.items_pulled||0,projectId:ue.project_id,projectName:ue.project_name}}),ue.project_id){console.log(` Reloading projects to find: ${ue.project_id}`),await k(),await new Promise(we=>setTimeout(we,200));const Ee=G(ue.project_id);if(Ee)console.log(` Found project: ${Ee.name} (${Ee.id})`),console.log(`   Logic Files: ${Ee.stats?.logicFiles||0}`),console.log(`   Tags: ${Ee.stats?.tags||0}`),P(Ee),console.log(" Active project set - Logic Editor should reload automatically");else{console.warn(` Could not find project with ID: ${ue.project_id}`);const we=jr.getState().projects;console.log(`Available projects (${we.length}):`,we.map(Oe=>({id:Oe.id,name:Oe.name})))}}}catch(Y){const se=Y instanceof Error?Y.message:"Pull operation failed";C(se),await zE({userId:n.userId,username:n.username,userRole:n.role,runtimeId:z.id,runtimeName:z.name,runtimeEnvironment:z.environment,projectId:i,error:se}),sr.send({type:"PULL_ERROR",payload:{error:se}})}finally{A(!1)}}},$=()=>{sr.send({type:"RESET"}),N(""),w(""),C(""),a()};if(!s)return null;const _=y.find(z=>z.id===v);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Pull from PLC"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[c&&`Project: ${c}  `,"Entry: ",d.replace(/-/g," ")]})]}),e.jsx("button",{onClick:$,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u==="selecting-runtime"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Select PLC Runtime"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:y.map(z=>e.jsx("button",{onClick:()=>N(z.id),className:`p-4 border-2 rounded-lg text-left transition-all ${v===z.id?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Od,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:z.name}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[z.ipAddress,"  ",z.environment]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${z.status==="connected"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:z.status})]})},z.id))})]}),u==="selecting-scope"&&_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Od,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:_.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.environment})]})]}),e.jsx(yE,{runtimeId:_.id,selectedScope:E,onScopeChange:M})]}),u==="reviewing-approval"&&_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Od,{className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:_.name}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Object.values(E).filter(Boolean).length," categories selected"]})]})]}),_.environment==="production"&&!S.canBypassApproval&&e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-100",children:"Approval Required"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:"Production pulls require approval. Please provide a reason for this pull."})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Reason for Pull ",_.environment==="production"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:L,onChange:z=>w(z.target.value),placeholder:"Describe why you need to pull from this runtime...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[#FF6A00] resize-none",rows:4})]})]}),u==="executing-pull"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(qs,{className:"w-12 h-12 text-[#FF6A00] animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Pulling from PLC..."}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"This may take a few moments"})]}),u==="success"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(Fe,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Pull Successful!"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[x.itemsPulled," objects extracted"]}),x.createdProjectName&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Saved to Project:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.createdProjectName})]})]}),u==="approval-pending"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(qe,{className:"w-10 h-10 text-yellow-600 dark:text-yellow-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Approval Required"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Request ID: ",x.approvalRequestId]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"You'll be notified when approved"})]}),u==="error"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(bt,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Pull Failed"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 text-center max-w-md",children:D||x.error})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[u==="success"?e.jsx("button",{onClick:$,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:"Close"}):e.jsx("button",{onClick:$,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:u==="error"||u==="approval-pending"?"Close":"Cancel"}),u==="success"&&x.createdProjectName&&e.jsx("button",{onClick:()=>{$(),window.location.hash="#/logic-editor"},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors",children:"Open in Logic Editor "}),u==="selecting-runtime"&&e.jsx("button",{onClick:ie,disabled:!v,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"}),u==="selecting-scope"&&e.jsx("button",{onClick:J,disabled:!Object.values(E).some(z=>z),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Review & Continue"}),u==="reviewing-approval"&&e.jsxs("button",{onClick:te,disabled:T||_?.environment==="production"&&!L.trim(),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T&&e.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Execute Pull"]})]})]})})}const vd=[{id:"1",name:"Production PLC-01",environment:"production",ipAddress:"192.168.1.100",status:"connected"},{id:"2",name:"Staging PLC-02",environment:"staging",ipAddress:"192.168.1.101",status:"connected"},{id:"3",name:"Dev PLC-03",environment:"development",ipAddress:"192.168.1.102",status:"connected"}],_m=[{key:"dashboard",label:"Dashboard",icon:e.jsx(s5,{size:18})},{key:"projects",label:"Projects",icon:e.jsx(tk,{size:18})},{key:"shadow",label:"Shadow Runtime",icon:e.jsx(pi,{size:18})},{key:"tags",label:"Tag Database",icon:e.jsx(Yd,{size:18})},{key:"logic",label:"Logic Editor",icon:e.jsx(oT,{size:18})},{key:"deploy",label:"Deploy",icon:e.jsx(ou,{size:18})},{key:"versioning",label:"Versioning Center",icon:e.jsx(Qr,{size:18})},{key:"settings",label:"Settings",icon:e.jsx(Zt,{size:18})}];function qE({children:s}){const a=Pd(Z=>Z.activeRoute),n=Pd(Z=>Z.setActiveRoute),{projects:i,activeProject:c,isLoading:d,setActiveProject:u,loadProjects:h}=jr(),{hasValidLicense:x}=ma();Sh();const[f,y]=p.useState(!1),[b,v]=p.useState(!1),[N,E]=p.useState(!1),[M,L]=p.useState(!1),[w,T]=p.useState(!1),[A,D]=p.useState(!1),[C,S]=p.useState(!1);p.useEffect(()=>{h()},[h]),p.useEffect(()=>{const Z=ie=>{const J=ie.target;b&&!J.closest("[data-project-dropdown]")&&v(!1),N&&!J.closest("[data-profile-dropdown]")&&E(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[b,N]);const k=p.useMemo(()=>{const Z=_m.find(J=>J.key===a);return`${x&&c?`${c.name}  `:""}${Z?.label??""}`},[a,c,x]),P=Z=>{n(Z),y(!1)},G=Z=>{L(!1),Z==="solo"?T(!0):(Z==="teams"||Z==="enterprise")&&D(!0)},U=async()=>{T(!1);const{checkLicenseStatus:Z}=ma.getState();await Z()},Q=async()=>{D(!1);const{checkLicenseStatus:Z}=ma.getState();await Z()};return e.jsx(YA,{delayDuration:300,children:e.jsxs("div",{className:"h-full grid xl:grid-cols-[240px_1fr] lg:grid-cols-[64px_1fr] md:grid-cols-[64px_1fr] grid-cols-1 bg-white dark:bg-panda-surface-dark transition-colors duration-300",style:{gridTemplateRows:"auto 1fr auto"},children:[e.jsxs("aside",{className:"hidden md:flex col-start-1 row-span-3 bg-[#FF6A00] dark:bg-gray-900 text-white flex-col transition-colors duration-300",children:[e.jsxs("div",{className:"h-14 flex items-center px-4 font-semibold tracking-wide text-base xl:justify-start lg:justify-center md:justify-center justify-start",children:[e.jsx("span",{className:"xl:inline lg:hidden md:hidden inline",children:"Pandaura"}),e.jsx("span",{className:"xl:hidden lg:inline md:inline hidden text-xl",children:"P"})]}),e.jsx("nav",{className:"flex-1 px-2 space-y-1",children:_m.map(Z=>{const ie=a===Z.key;return e.jsxs(Wb,{children:[e.jsx(Jb,{asChild:!0,children:e.jsxs("button",{onClick:()=>n(Z.key),className:`w-full flex items-center gap-3 xl:px-3 lg:px-2 md:px-2 px-3 py-2 xl:justify-start lg:justify-center md:justify-center justify-start rounded-md transition-all duration-200 ${ie?"bg-white/20 shadow-sm":"hover:bg-white/10"}`,"aria-current":ie?"page":void 0,children:[e.jsx("span",{className:"opacity-95",children:Z.icon}),e.jsx("span",{className:"text-sm xl:inline lg:hidden md:hidden inline",children:Z.label})]})}),e.jsx(ev,{children:e.jsxs(tv,{side:"right",className:"bg-neutral-900 text-white text-xs px-2 py-1 rounded shadow-lg xl:hidden lg:block md:block hidden",sideOffset:8,children:[Z.label,e.jsx(sv,{className:"fill-neutral-900"})]})})]},Z.key)})})]}),e.jsx(Nr,{children:f&&e.jsxs(e.Fragment,{children:[e.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(!1),className:"md:hidden fixed inset-0 bg-black/50 z-40"}),e.jsxs(ze.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"md:hidden fixed left-0 top-0 bottom-0 w-64 bg-[#FF6A00] dark:bg-gray-900 text-white flex flex-col z-50 shadow-2xl",children:[e.jsxs("div",{className:"h-14 flex items-center justify-between px-4",children:[e.jsx("span",{className:"font-semibold tracking-wide text-base",children:"Pandaura"}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-white/10 rounded-md transition-colors",children:e.jsx(pt,{size:20})})]}),e.jsx("nav",{className:"flex-1 px-2 space-y-1 py-2",children:_m.map(Z=>{const ie=a===Z.key;return e.jsxs("button",{onClick:()=>P(Z.key),className:`w-full flex items-center gap-3 px-3 py-3 rounded-md transition-all duration-200 ${ie?"bg-white/20 shadow-sm":"hover:bg-white/10"}`,children:[e.jsx("span",{className:"opacity-95",children:Z.icon}),e.jsx("span",{className:"text-sm",children:Z.label})]},Z.key)})})]})]})}),!x&&e.jsxs("div",{className:"md:col-start-2 col-start-1 bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 flex items-center justify-between gap-3 shadow-lg z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jt,{size:18,className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:"License Activation Required"}),e.jsx("p",{className:"text-xs opacity-90",children:"Device initialized with TPM security. Activate license to unlock all features."})]})]}),e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-white text-orange-600 rounded-lg hover:bg-orange-50 transition-colors font-medium text-sm whitespace-nowrap flex-shrink-0",children:[e.jsx(Wr,{size:16}),"Activate License"]})]}),e.jsxs("header",{className:"md:col-start-2 col-start-1 row-start-1 bg-white dark:bg-panda-card-dark shadow-soft dark:shadow-soft-dark border-b border-[#E5E7EB] dark:border-panda-border-dark flex items-center justify-between px-4 md:px-6 h-14 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>y(!0),className:"md:hidden p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-md transition-colors",children:e.jsx(y5,{size:20,className:"text-neutral-700 dark:text-neutral-300"})}),e.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300 truncate",children:k})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[x&&e.jsxs(Wb,{children:[e.jsx(Jb,{asChild:!0,children:e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[e.jsx(vi,{size:16}),e.jsx("span",{className:"hidden md:inline",children:"Pull from PLC"})]})}),e.jsx(ev,{children:e.jsxs(tv,{side:"bottom",className:"bg-neutral-900 text-white text-xs px-2 py-1 rounded shadow-lg md:hidden",sideOffset:5,children:["Pull from PLC",e.jsx(sv,{className:"fill-neutral-900"})]})})]}),e.jsxs("div",{className:"relative","data-project-dropdown":!0,children:[e.jsxs("button",{onClick:()=>x&&v(!b),disabled:!x,className:`flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors ${x?"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":"opacity-60 cursor-not-allowed"}`,children:[e.jsx(Yo,{size:16,style:{color:"var(--accent-color)"}}),e.jsx("span",{className:"hidden sm:inline text-gray-700 dark:text-gray-300",children:x?d?"Loading...":c?c.name:"Select Project":"Activate License"}),e.jsx(wi,{size:14,className:"text-gray-500 dark:text-gray-400"})]}),b&&x&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:[i.length>0?e.jsx("div",{className:"py-1",children:i.map(Z=>e.jsxs("button",{onClick:()=>{u(Z),v(!1)},className:`w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors flex items-center gap-2 ${c?.id===Z.id?"border-l-2":""}`,style:c?.id===Z.id?{backgroundColor:"var(--accent-subtle)",borderLeftColor:"var(--accent-color)"}:{},children:[e.jsx(Yo,{size:14,style:c?.id===Z.id?{color:"var(--accent-color)"}:{color:"#9ca3af"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",style:{color:c?.id===Z.id?"var(--accent-color)":"#374151"},children:Z.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:new Date(Z.last_opened).toLocaleDateString()})]})]},Z.id))}):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No projects available"}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("button",{onClick:()=>{n("projects"),v(!1)},className:"w-full px-4 py-2 text-sm hover:bg-gray-50 transition-colors flex items-center gap-2",style:{color:"var(--accent-color)"},children:[e.jsx(tk,{size:14}),"Manage Projects"]})})]})]}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400 hidden sm:block",children:"Connected  Shadow Runtime"}),e.jsxs("div",{className:"relative","data-profile-dropdown":!0,children:[e.jsx("button",{onClick:()=>E(!N),className:"w-8 h-8 rounded-full flex items-center justify-center hover:shadow-md transition-shadow",style:{background:"linear-gradient(to bottom right, var(--accent-color), var(--accent-dark))"},children:e.jsx(Dn,{size:16,className:"text-white"})}),N&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--accent-color), var(--accent-dark))"},children:e.jsx(Dn,{size:18,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:"Natasha"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"natasha@pandaura.com"})]})]})}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{n("profile"),E(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors flex items-center gap-3",children:[e.jsx(Dn,{size:16,className:"text-gray-400 dark:text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"View Profile"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Manage your account settings"})]})]}),e.jsxs("button",{onClick:()=>{n("settings"),E(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors flex items-center gap-3",children:[e.jsx(Zt,{size:16,className:"text-gray-400 dark:text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Settings"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Configure your workspace"})]})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),e.jsxs("button",{onClick:()=>{E(!1),alert("Logout functionality would be implemented here")},className:"w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors flex items-center gap-3",children:[e.jsx(g5,{size:16,className:"text-gray-400 dark:text-gray-500"}),e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Sign out"})]})]})]})]})]})]}),e.jsx("main",{className:"md:col-start-2 col-start-1 row-start-2 overflow-auto p-4 md:p-6 bg-white dark:bg-panda-surface-dark transition-colors duration-300",children:e.jsx(Nr,{mode:"wait",children:e.jsx(ze.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.25},className:"min-h-full",children:s},a)})}),e.jsxs("footer",{className:"md:col-start-2 col-start-1 row-start-3 bg-[#F3F4F6] dark:bg-panda-bg-secondary-dark text-[11px] md:text-[13px] text-neutral-700 dark:text-neutral-300 border-t border-[#E5E7EB] dark:border-panda-border-dark px-3 md:px-4 flex items-center gap-2 md:gap-4 h-7 md:h-auto overflow-x-auto transition-colors duration-300",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Connected"}),e.jsx("span",{className:"text-neutral-400 hidden sm:inline",children:"|"}),e.jsx("span",{className:"whitespace-nowrap hidden sm:inline",children:"CPU: --%"}),e.jsx("span",{className:"text-neutral-400 hidden md:inline",children:"|"}),e.jsx("span",{className:"whitespace-nowrap hidden md:inline",children:new Date().toLocaleString()}),e.jsx("span",{className:"ml-auto whitespace-nowrap",children:"Mode: Simulation"})]}),e.jsx(Th,{isOpen:M,onSelectType:G,onClose:()=>L(!1)}),e.jsx(Eh,{isOpen:w,onClose:U}),e.jsx(ok,{isOpen:A,onComplete:Q}),e.jsx(mk,{isOpen:C,onClose:()=>S(!1),currentUser:{userId:"1",username:"developer",role:"engineer"},projectId:c?.id,projectName:c?.name,entryPoint:"topbar-menu"})]})})}function HE({status:s,size:a="sm"}){const n=a==="sm"?"w-2 h-2":"w-3 h-3",i={online:"bg-green-500",warning:"bg-yellow-500",offline:"bg-red-500"}[s];return e.jsx("div",{className:`${n} rounded-full ${i}`})}const GE=[{id:"1",message:"Logic updated: PID_Control_Loop",timestamp:new Date(Date.now()-300*1e3)},{id:"2",message:"Tag sync completed",timestamp:new Date(Date.now()-720*1e3)},{id:"3",message:"Deployment to PLC-01",timestamp:new Date(Date.now()-7200*1e3)},{id:"4",message:"Connection established: PLC-02",timestamp:new Date(Date.now()-10800*1e3)}],YE=[{id:"1",name:"PLC-01",ip:"192.168.1.100",status:"online"},{id:"2",name:"PLC-02",ip:"192.168.1.101",status:"online"},{id:"3",name:"HMI Station",ip:"192.168.1.50",status:"warning"}],XE=[{id:"1",name:"Motor_Speed",type:"REAL",value:1450.5,address:"DB1.DBD0",lastUpdate:new Date},{id:"2",name:"Pump_Status",type:"BOOL",value:!0,address:"DB1.DBX4.0",lastUpdate:new Date},{id:"3",name:"Temperature_Setpoint",type:"INT",value:75,address:"DB1.DBW8",lastUpdate:new Date},{id:"4",name:"Conveyor_Enable",type:"BOOL",value:!1,address:"DB1.DBX4.1",lastUpdate:new Date},{id:"5",name:"Flow_Rate",type:"REAL",value:23.7,address:"DB1.DBD12",lastUpdate:new Date},{id:"6",name:"Pressure_Value",type:"REAL",value:101.3,address:"DB1.DBD16",lastUpdate:new Date},{id:"7",name:"Alarm_Active",type:"BOOL",value:!1,address:"DB1.DBX4.2",lastUpdate:new Date},{id:"8",name:"Cycle_Counter",type:"INT",value:3421,address:"DB1.DBW20",lastUpdate:new Date},{id:"9",name:"Product_Name",type:"STRING",value:"Widget_A",address:"DB1.DBB24",lastUpdate:new Date},{id:"10",name:"Emergency_Stop",type:"BOOL",value:!1,address:"DB1.DBX4.3",lastUpdate:new Date}];function KE(){const[s,a]=p.useState([]),[n,i]=p.useState([]),[c,d]=p.useState({activeTags:0,logicBlocks:18,runtimeStatus:"Running",lastDeploy:"2h ago"});p.useEffect(()=>{a(GE.slice(0,3)),i(YE),d(h=>({...h,activeTags:XE.length}))},[]);const u=h=>{const x=Math.floor((Date.now()-h.getTime())/1e3);if(x<60)return`${x}s ago`;const f=Math.floor(x/60);if(f<60)return`${f}m ago`;const y=Math.floor(f/60);return y<24?`${y}h ago`:`${Math.floor(y/24)}d ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Ye,{children:[e.jsx(Ps,{children:"Project Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600 dark:text-gray-400",children:"Active Tags:"}),e.jsx("span",{className:"font-semibold text-neutral-900 dark:text-white",children:c.activeTags})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600 dark:text-gray-400",children:"Logic Blocks:"}),e.jsx("span",{className:"font-semibold text-neutral-900 dark:text-white",children:c.logicBlocks})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600 dark:text-gray-400",children:"Runtime Status:"}),e.jsx("span",{className:"font-semibold text-green-600",children:c.runtimeStatus})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600 dark:text-gray-400",children:"Last Deploy:"}),e.jsx("span",{className:"font-semibold text-neutral-900 dark:text-white",children:c.lastDeploy})]})]})]}),e.jsxs(Ye,{children:[e.jsx(Ps,{children:"Recent Activity"}),e.jsx("div",{className:"space-y-2 text-sm",children:s.map(h=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-neutral-400 dark:text-gray-500 mt-0.5",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-900 dark:text-white",children:h.message}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:u(h.timestamp)})]})]},h.id))})]}),e.jsxs(Ye,{children:[e.jsx(Ps,{children:"Connections"}),e.jsx("div",{className:"space-y-3",children:n.map(h=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:h.name}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:h.ip})]}),e.jsx(HE,{status:h.status})]},h.id))})]})]})]})}const wr=Object.create(null);wr.open="0";wr.close="1";wr.ping="2";wr.pong="3";wr.message="4";wr.upgrade="5";wr.noop="6";const _d=Object.create(null);Object.keys(wr).forEach(s=>{_d[wr[s]]=s});const Cg={type:"error",data:"parser error"},gk=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",hk=typeof ArrayBuffer=="function",xk=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Rh=({type:s,data:a},n,i)=>gk&&a instanceof Blob?n?i(a):gv(a,i):hk&&(a instanceof ArrayBuffer||xk(a))?n?i(a):gv(new Blob([a]),i):i(wr[s]+(a||"")),gv=(s,a)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];a("b"+(i||""))},n.readAsDataURL(s)};function hv(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Mm;function ZE(s,a){if(gk&&s.data instanceof Blob)return s.data.arrayBuffer().then(hv).then(a);if(hk&&(s.data instanceof ArrayBuffer||xk(s.data)))return a(hv(s.data));Rh(s,!1,n=>{Mm||(Mm=new TextEncoder),a(Mm.encode(n))})}const xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",No=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<xv.length;s++)No[xv.charCodeAt(s)]=s;const QE=s=>{let a=s.length*.75,n=s.length,i,c=0,d,u,h,x;s[s.length-1]==="="&&(a--,s[s.length-2]==="="&&a--);const f=new ArrayBuffer(a),y=new Uint8Array(f);for(i=0;i<n;i+=4)d=No[s.charCodeAt(i)],u=No[s.charCodeAt(i+1)],h=No[s.charCodeAt(i+2)],x=No[s.charCodeAt(i+3)],y[c++]=d<<2|u>>4,y[c++]=(u&15)<<4|h>>2,y[c++]=(h&3)<<6|x&63;return f},WE=typeof ArrayBuffer=="function",Dh=(s,a)=>{if(typeof s!="string")return{type:"message",data:fk(s,a)};const n=s.charAt(0);return n==="b"?{type:"message",data:JE(s.substring(1),a)}:_d[n]?s.length>1?{type:_d[n],data:s.substring(1)}:{type:_d[n]}:Cg},JE=(s,a)=>{if(WE){const n=QE(s);return fk(n,a)}else return{base64:!0,data:s}},fk=(s,a)=>{switch(a){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},pk="",eR=(s,a)=>{const n=s.length,i=new Array(n);let c=0;s.forEach((d,u)=>{Rh(d,!1,h=>{i[u]=h,++c===n&&a(i.join(pk))})})},tR=(s,a)=>{const n=s.split(pk),i=[];for(let c=0;c<n.length;c++){const d=Dh(n[c],a);if(i.push(d),d.type==="error")break}return i};function sR(){return new TransformStream({transform(s,a){ZE(s,n=>{const i=n.length;let c;if(i<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,i);else if(i<65536){c=new Uint8Array(3);const d=new DataView(c.buffer);d.setUint8(0,126),d.setUint16(1,i)}else{c=new Uint8Array(9);const d=new DataView(c.buffer);d.setUint8(0,127),d.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(c[0]|=128),a.enqueue(c),a.enqueue(n)})}})}let Lm;function jd(s){return s.reduce((a,n)=>a+n.length,0)}function Nd(s,a){if(s[0].length===a)return s.shift();const n=new Uint8Array(a);let i=0;for(let c=0;c<a;c++)n[c]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),n}function aR(s,a){Lm||(Lm=new TextDecoder);const n=[];let i=0,c=-1,d=!1;return new TransformStream({transform(u,h){for(n.push(u);;){if(i===0){if(jd(n)<1)break;const x=Nd(n,1);d=(x[0]&128)===128,c=x[0]&127,c<126?i=3:c===126?i=1:i=2}else if(i===1){if(jd(n)<2)break;const x=Nd(n,2);c=new DataView(x.buffer,x.byteOffset,x.length).getUint16(0),i=3}else if(i===2){if(jd(n)<8)break;const x=Nd(n,8),f=new DataView(x.buffer,x.byteOffset,x.length),y=f.getUint32(0);if(y>Math.pow(2,21)-1){h.enqueue(Cg);break}c=y*Math.pow(2,32)+f.getUint32(4),i=3}else{if(jd(n)<c)break;const x=Nd(n,c);h.enqueue(Dh(d?x:Lm.decode(x),a)),i=0}if(c===0||c>s){h.enqueue(Cg);break}}}})}const yk=4;function vs(s){if(s)return rR(s)}function rR(s){for(var a in vs.prototype)s[a]=vs.prototype[a];return s}vs.prototype.on=vs.prototype.addEventListener=function(s,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(a),this};vs.prototype.once=function(s,a){function n(){this.off(s,n),a.apply(this,arguments)}return n.fn=a,this.on(s,n),this};vs.prototype.off=vs.prototype.removeListener=vs.prototype.removeAllListeners=vs.prototype.removeEventListener=function(s,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+s];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,c=0;c<n.length;c++)if(i=n[c],i===a||i.fn===a){n.splice(c,1);break}return n.length===0&&delete this._callbacks["$"+s],this};vs.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),n=this._callbacks["$"+s],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,c=n.length;i<c;++i)n[i].apply(this,a)}return this};vs.prototype.emitReserved=vs.prototype.emit;vs.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};vs.prototype.hasListeners=function(s){return!!this.listeners(s).length};const cu=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,n)=>n(a,0),Ga=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nR="arraybuffer";function bk(s,...a){return a.reduce((n,i)=>(s.hasOwnProperty(i)&&(n[i]=s[i]),n),{})}const iR=Ga.setTimeout,lR=Ga.clearTimeout;function du(s,a){a.useNativeTimers?(s.setTimeoutFn=iR.bind(Ga),s.clearTimeoutFn=lR.bind(Ga)):(s.setTimeoutFn=Ga.setTimeout.bind(Ga),s.clearTimeoutFn=Ga.clearTimeout.bind(Ga))}const oR=1.33;function cR(s){return typeof s=="string"?dR(s):Math.ceil((s.byteLength||s.size)*oR)}function dR(s){let a=0,n=0;for(let i=0,c=s.length;i<c;i++)a=s.charCodeAt(i),a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(i++,n+=4);return n}function vk(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function uR(s){let a="";for(let n in s)s.hasOwnProperty(n)&&(a.length&&(a+="&"),a+=encodeURIComponent(n)+"="+encodeURIComponent(s[n]));return a}function mR(s){let a={},n=s.split("&");for(let i=0,c=n.length;i<c;i++){let d=n[i].split("=");a[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return a}class gR extends Error{constructor(a,n,i){super(a),this.description=n,this.context=i,this.type="TransportError"}}class Oh extends vs{constructor(a){super(),this.writable=!1,du(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,n,i){return super.emitReserved("error",new gR(a,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const n=Dh(a,this.socket.binaryType);this.onPacket(n)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,n={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const n=uR(a);return n.length?"?"+n:""}}class hR extends Oh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const n=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};tR(a,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,eR(a,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=vk()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(a,n)}}let jk=!1;try{jk=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const xR=jk;function fR(){}class pR extends hR{constructor(a){if(super(a),typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||i!==a.port}}doWrite(a,n){const i=this.request({method:"POST",data:a});i.on("success",n),i.on("error",(c,d)=>{this.onError("xhr post error",c,d)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=a}}class vr extends vs{constructor(a,n,i){super(),this.createRequest=a,du(this,i),this._opts=i,this._method=i.method||"GET",this._uri=n,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var a;const n=bk(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(n);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&i.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var c;i.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=vr.requestsCount++,vr.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=fR,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete vr.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}vr.requestsCount=0;vr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",fv);else if(typeof addEventListener=="function"){const s="onpagehide"in Ga?"pagehide":"unload";addEventListener(s,fv,!1)}}function fv(){for(let s in vr.requests)vr.requests.hasOwnProperty(s)&&vr.requests[s].abort()}const yR=(function(){const s=Nk({xdomain:!1});return s&&s.responseType!==null})();class bR extends pR{constructor(a){super(a);const n=a&&a.forceBase64;this.supportsBinary=yR&&!n}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new vr(Nk,this.uri(),a)}}function Nk(s){const a=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||xR))return new XMLHttpRequest}catch{}if(!a)try{return new Ga[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const kk=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vR extends Oh{get name(){return"websocket"}doOpen(){const a=this.uri(),n=this.opts.protocols,i=kk?{}:bk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,n,i)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let n=0;n<a.length;n++){const i=a[n],c=n===a.length-1;Rh(i,this.supportsBinary,d=>{try{this.doWrite(i,d)}catch{}c&&cu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=vk()),this.supportsBinary||(n.b64=1),this.createUri(a,n)}}const Fm=Ga.WebSocket||Ga.MozWebSocket;class jR extends vR{createSocket(a,n,i){return kk?new Fm(a,n,i):n?new Fm(a,n):new Fm(a)}doWrite(a,n){this.ws.send(n)}}class NR extends Oh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const n=aR(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=a.readable.pipeThrough(n).getReader(),c=sR();c.readable.pipeTo(a.writable),this._writer=c.writable.getWriter();const d=()=>{i.read().then(({done:h,value:x})=>{h||(this.onPacket(x),d())}).catch(h=>{})};d();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let n=0;n<a.length;n++){const i=a[n],c=n===a.length-1;this._writer.write(i).then(()=>{c&&cu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const kR={websocket:jR,webtransport:NR,polling:bR},wR=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,SR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ag(s){if(s.length>8e3)throw"URI too long";const a=s,n=s.indexOf("["),i=s.indexOf("]");n!=-1&&i!=-1&&(s=s.substring(0,n)+s.substring(n,i).replace(/:/g,";")+s.substring(i,s.length));let c=wR.exec(s||""),d={},u=14;for(;u--;)d[SR[u]]=c[u]||"";return n!=-1&&i!=-1&&(d.source=a,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=CR(d,d.path),d.queryKey=AR(d,d.query),d}function CR(s,a){const n=/\/{2,9}/g,i=a.replace(n,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&i.splice(0,1),a.slice(-1)=="/"&&i.splice(i.length-1,1),i}function AR(s,a){const n={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,c,d){c&&(n[c]=d)}),n}const Tg=typeof addEventListener=="function"&&typeof removeEventListener=="function",Md=[];Tg&&addEventListener("offline",()=>{Md.forEach(s=>s())},!1);class On extends vs{constructor(a,n){if(super(),this.binaryType=nR,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(n=a,a=null),a){const i=Ag(a);n.hostname=i.host,n.secure=i.protocol==="https"||i.protocol==="wss",n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=Ag(n.host).host);du(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(i=>{const c=i.prototype.name;this.transports.push(c),this._transportsByName[c]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mR(this.opts.query)),Tg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Md.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const n=Object.assign({},this.opts.query);n.EIO=yk,n.transport=a,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&On.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(a);n.open(),this.setTransport(n)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",On.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=a.data,this._onError(n);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const c=this.writeBuffer[i].data;if(c&&(n+=cR(c)),i>0&&n>this._maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,cu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,n,i){return this._sendPacket("message",a,n,i),this}send(a,n,i){return this._sendPacket("message",a,n,i),this}_sendPacket(a,n,i,c){if(typeof n=="function"&&(c=n,n=void 0),typeof i=="function"&&(c=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const d={type:a,data:n,options:i};this.emitReserved("packetCreate",d),this.writeBuffer.push(d),c&&this.once("flush",c),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),a()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():a()}):this.upgrading?i():a()),this}_onError(a){if(On.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Tg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Md.indexOf(this._offlineEventListener);i!==-1&&Md.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,n),this.writeBuffer=[],this._prevBufferLen=0}}}On.protocol=yk;class TR extends On{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let n=this.createTransport(a),i=!1;On.priorWebsocketSuccess=!1;const c=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",b=>{if(!i)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;On.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function d(){i||(i=!0,y(),n.close(),n=null)}const u=b=>{const v=new Error("probe error: "+b);v.transport=n.name,d(),this.emitReserved("upgradeError",v)};function h(){u("transport closed")}function x(){u("socket closed")}function f(b){n&&b.name!==n.name&&d()}const y=()=>{n.removeListener("open",c),n.removeListener("error",u),n.removeListener("close",h),this.off("close",x),this.off("upgrading",f)};n.once("open",c),n.once("error",u),n.once("close",h),this.once("close",x),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const n=[];for(let i=0;i<a.length;i++)~this.transports.indexOf(a[i])&&n.push(a[i]);return n}}let ER=class extends TR{constructor(a,n={}){const i=typeof a=="object"?a:n;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(c=>kR[c]).filter(c=>!!c)),super(a,i)}};function RR(s,a="",n){let i=s;n=n||typeof location<"u"&&location,s==null&&(s=n.protocol+"//"+n.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=n.protocol+s:s=n.host+s),/^(https?|wss?):\/\//.test(s)||(typeof n<"u"?s=n.protocol+"//"+s:s="https://"+s),i=Ag(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const d=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+d+":"+i.port+a,i.href=i.protocol+"://"+d+(n&&n.port===i.port?"":":"+i.port),i}const DR=typeof ArrayBuffer=="function",OR=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,wk=Object.prototype.toString,_R=typeof Blob=="function"||typeof Blob<"u"&&wk.call(Blob)==="[object BlobConstructor]",MR=typeof File=="function"||typeof File<"u"&&wk.call(File)==="[object FileConstructor]";function _h(s){return DR&&(s instanceof ArrayBuffer||OR(s))||_R&&s instanceof Blob||MR&&s instanceof File}function Ld(s,a){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let n=0,i=s.length;n<i;n++)if(Ld(s[n]))return!0;return!1}if(_h(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Ld(s.toJSON(),!0);for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&Ld(s[n]))return!0;return!1}function LR(s){const a=[],n=s.data,i=s;return i.data=Eg(n,a),i.attachments=a.length,{packet:i,buffers:a}}function Eg(s,a){if(!s)return s;if(_h(s)){const n={_placeholder:!0,num:a.length};return a.push(s),n}else if(Array.isArray(s)){const n=new Array(s.length);for(let i=0;i<s.length;i++)n[i]=Eg(s[i],a);return n}else if(typeof s=="object"&&!(s instanceof Date)){const n={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=Eg(s[i],a));return n}return s}function FR(s,a){return s.data=Rg(s.data,a),delete s.attachments,s}function Rg(s,a){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<a.length)return a[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let n=0;n<s.length;n++)s[n]=Rg(s[n],a);else if(typeof s=="object")for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(s[n]=Rg(s[n],a));return s}const PR=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zR=5;var ut;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(ut||(ut={}));class VR{constructor(a){this.replacer=a}encode(a){return(a.type===ut.EVENT||a.type===ut.ACK)&&Ld(a)?this.encodeAsBinary({type:a.type===ut.EVENT?ut.BINARY_EVENT:ut.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let n=""+a.type;return(a.type===ut.BINARY_EVENT||a.type===ut.BINARY_ACK)&&(n+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(n+=a.nsp+","),a.id!=null&&(n+=a.id),a.data!=null&&(n+=JSON.stringify(a.data,this.replacer)),n}encodeAsBinary(a){const n=LR(a),i=this.encodeAsString(n.packet),c=n.buffers;return c.unshift(i),c}}function pv(s){return Object.prototype.toString.call(s)==="[object Object]"}class Mh extends vs{constructor(a){super(),this.reviver=a}add(a){let n;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(a);const i=n.type===ut.BINARY_EVENT;i||n.type===ut.BINARY_ACK?(n.type=i?ut.EVENT:ut.ACK,this.reconstructor=new $R(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(_h(a)||a.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(a),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let n=0;const i={type:Number(a.charAt(0))};if(ut[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===ut.BINARY_EVENT||i.type===ut.BINARY_ACK){const d=n+1;for(;a.charAt(++n)!=="-"&&n!=a.length;);const u=a.substring(d,n);if(u!=Number(u)||a.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(a.charAt(n+1)==="/"){const d=n+1;for(;++n&&!(a.charAt(n)===","||n===a.length););i.nsp=a.substring(d,n)}else i.nsp="/";const c=a.charAt(n+1);if(c!==""&&Number(c)==c){const d=n+1;for(;++n;){const u=a.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===a.length)break}i.id=Number(a.substring(d,n+1))}if(a.charAt(++n)){const d=this.tryParse(a.substr(n));if(Mh.isPayloadValid(i.type,d))i.data=d;else throw new Error("invalid payload")}return i}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,n){switch(a){case ut.CONNECT:return pv(n);case ut.DISCONNECT:return n===void 0;case ut.CONNECT_ERROR:return typeof n=="string"||pv(n);case ut.EVENT:case ut.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&PR.indexOf(n[0])===-1);case ut.ACK:case ut.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $R{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const n=FR(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const UR=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mh,Encoder:VR,get PacketType(){return ut},protocol:zR},Symbol.toStringTag,{value:"Module"}));function rr(s,a,n){return s.on(a,n),function(){s.off(a,n)}}const BR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Sk extends vs{constructor(a,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[rr(a,"open",this.onopen.bind(this)),rr(a,"packet",this.onpacket.bind(this)),rr(a,"error",this.onerror.bind(this)),rr(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...n){var i,c,d;if(BR.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(n.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const u={type:ut.EVENT,data:n};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,b=n.pop();this._registerAckCallback(y,b),u.id=y}const h=(c=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||c===void 0?void 0:c.writable,x=this.connected&&!(!((d=this.io.engine)===null||d===void 0)&&d._hasPingExpired());return this.flags.volatile&&!h||(x?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(a,n){var i;const c=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(c===void 0){this.acks[a]=n;return}const d=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===a&&this.sendBuffer.splice(h,1);n.call(this,new Error("operation has timed out"))},c),u=(...h)=>{this.io.clearTimeoutFn(d),n.apply(this,h)};u.withError=!0,this.acks[a]=u}emitWithAck(a,...n){return new Promise((i,c)=>{const d=(u,h)=>u?c(u):i(h);d.withError=!0,n.push(d),this.emit(a,...n)})}_addToQueue(a){let n;typeof a[a.length-1]=="function"&&(n=a.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((c,...d)=>i!==this._queue[0]?void 0:(c!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(c)):(this._queue.shift(),n&&n(null,...d)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!a||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:ut.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(i=>String(i.id)===a)){const i=this.acks[a];delete this.acks[a],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case ut.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ut.EVENT:case ut.BINARY_EVENT:this.onevent(a);break;case ut.ACK:case ut.BINARY_ACK:this.onack(a);break;case ut.DISCONNECT:this.ondisconnect();break;case ut.CONNECT_ERROR:this.destroy();const i=new Error(a.data.message);i.data=a.data.data,this.emitReserved("connect_error",i);break}}onevent(a){const n=a.data||[];a.id!=null&&n.push(this.ack(a.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const n=this;let i=!1;return function(...c){i||(i=!0,n.packet({type:ut.ACK,id:a,data:c}))}}onack(a){const n=this.acks[a.id];typeof n=="function"&&(delete this.acks[a.id],n.withError&&a.data.unshift(null),n.apply(this,a.data))}onconnect(a,n){this.id=a,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ut.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(a===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(a===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,a.data)}}}function wl(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}wl.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),n=Math.floor(a*this.jitter*s);s=(Math.floor(a*10)&1)==0?s-n:s+n}return Math.min(s,this.max)|0};wl.prototype.reset=function(){this.attempts=0};wl.prototype.setMin=function(s){this.ms=s};wl.prototype.setMax=function(s){this.max=s};wl.prototype.setJitter=function(s){this.jitter=s};class Dg extends vs{constructor(a,n){var i;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(n=a,a=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,du(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new wl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=a;const c=n.parser||UR;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var n;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(n=this.backoff)===null||n===void 0||n.setMin(a),this)}randomizationFactor(a){var n;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(n=this.backoff)===null||n===void 0||n.setJitter(a),this)}reconnectionDelayMax(a){var n;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(n=this.backoff)===null||n===void 0||n.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new ER(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const c=rr(n,"open",function(){i.onopen(),a&&a()}),d=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),a?a(h):this.maybeReconnectOnOpen()},u=rr(n,"error",d);if(this._timeout!==!1){const h=this._timeout,x=this.setTimeoutFn(()=>{c(),d(new Error("timeout")),n.close()},h);this.opts.autoUnref&&x.unref(),this.subs.push(()=>{this.clearTimeoutFn(x)})}return this.subs.push(c),this.subs.push(u),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(rr(a,"ping",this.onping.bind(this)),rr(a,"data",this.ondata.bind(this)),rr(a,"error",this.onerror.bind(this)),rr(a,"close",this.onclose.bind(this)),rr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(n){this.onclose("parse error",n)}}ondecoded(a){cu(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,n){let i=this.nsps[a];return i?this._autoConnect&&!i.active&&i.connect():(i=new Sk(this,a,n),this.nsps[a]=i),i}_destroy(a){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(a){const n=this.encoder.encode(a);for(let i=0;i<n.length;i++)this.engine.write(n[i],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,n){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(c=>{c?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",c)):a.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const yo={};function Fd(s,a){typeof s=="object"&&(a=s,s=void 0),a=a||{};const n=RR(s,a.path||"/socket.io"),i=n.source,c=n.id,d=n.path,u=yo[c]&&d in yo[c].nsps,h=a.forceNew||a["force new connection"]||a.multiplex===!1||u;let x;return h?x=new Dg(i,a):(yo[c]||(yo[c]=new Dg(i,a)),x=yo[c]),n.query&&!a.query&&(a.query=n.queryKey),x.socket(n.path,a)}Object.assign(Fd,{Manager:Dg,Socket:Sk,io:Fd,connect:Fd});class IR{handlers=[];connected=!1;socket=null;heartbeatInterval;reconnectTimeout;WS_URL="http://localhost:8000";constructor(){this.initializeConnection()}initializeConnection(){try{this.socket=Fd(this.WS_URL,{transports:["websocket","polling"],timeout:5e3,reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:5}),this.setupSocketListeners()}catch(a){console.error("[WebSocket] Failed to initialize connection:",a),this.scheduleReconnect()}}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("[WebSocket] Connected to backend"),this.connected=!0,this.clearReconnectTimeout(),this.socket?.emit("connect_client",{clientType:"frontend",timestamp:new Date().toISOString()}),this.emit({type:"connect",payload:{success:!0,timestamp:new Date().toISOString()}}),this.startHeartbeat()}),this.socket.on("disconnect",a=>{console.log("[WebSocket] Disconnected:",a),this.connected=!1,this.stopHeartbeat(),a==="io server disconnect"&&this.scheduleReconnect()}),this.socket.on("connect_error",a=>{console.error("[WebSocket] Connection error:",a),this.connected=!1,this.scheduleReconnect()}),this.socket.on("connect_ack",a=>{console.log("[WebSocket] Connection acknowledged:",a)}),this.socket.on("heartbeat_ack",a=>{this.emit({type:"heartbeat",payload:{timestamp:a.ts,latency:Date.now()-new Date(a.ts).getTime()}})}),this.socket.on("tag_update",a=>{this.emit({type:"tag_update",payload:a})}),this.socket.on("logic_push_response",a=>{this.emit({type:"logic_push_response",payload:a})}),this.socket.on("logic_push_request",a=>{this.emit({type:"logic_push_request",payload:a})}),this.socket.on("sync_conflict",a=>{this.emit({type:"conflict",payload:a})}),this.socket.on("sync_status_update",a=>{this.emit({type:"sync_status",payload:a})}))}scheduleReconnect(){this.reconnectTimeout||(console.log("[WebSocket] Scheduling reconnect in 5 seconds..."),this.reconnectTimeout=window.setTimeout(()=>{this.reconnectTimeout=void 0,this.initializeConnection()},5e3))}clearReconnectTimeout(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0)}connect(a){console.log(`[WebSocket] Connecting to project: ${a}`),(!this.socket||!this.connected)&&this.initializeConnection(),this.socket&&this.connected&&this.socket.emit("project_connect",{projectId:a})}disconnect(){this.connected=!1,this.stopHeartbeat(),this.clearReconnectTimeout(),this.socket&&(this.socket.disconnect(),this.socket=null),console.log("[WebSocket] Disconnected")}isConnected(){return this.connected&&this.socket?.connected===!0}on(a){return this.handlers.push(a),()=>{this.handlers=this.handlers.filter(n=>n!==a)}}send(a){if(!this.socket||!this.connected){console.warn("[WebSocket] Not connected, message not sent:",a);return}switch(console.log("[WebSocket] Sending:",a),a.type){case"logic_push_request":this.socket.emit("logic_push_request",a.payload);break;case"tag_update":this.socket.emit("tag_update",a.payload);break;case"heartbeat":this.socket.emit("heartbeat");break;default:console.warn("[WebSocket] Unknown message type:",a.type)}}emit(a){this.handlers.forEach(n=>{try{n(a)}catch(i){console.error("[WebSocket] Handler error:",i)}})}startHeartbeat(){this.stopHeartbeat(),this.heartbeatInterval=window.setInterval(()=>{this.connected&&this.socket&&this.socket.emit("heartbeat")},5e3)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=void 0)}createSyncEvent(a,n){return{id:Math.random().toString(36).substr(2,9),type:a,timestamp:new Date().toISOString(),payload:n}}reconnect(){this.disconnect(),setTimeout(()=>{this.initializeConnection()},1e3)}}const sl=new IR,je="http://localhost:8000/api";async function Zo(){const s=await Ct.getSessionToken(),a={};return s&&(a.Authorization=`Bearer ${s}`),a}const al={async getAll(s){const a=s?`${je}/logic?projectId=${s}`:`${je}/logic`,n=await Zo();return(await fetch(a,{headers:n})).json()},async getById(s){const a=await Zo();console.log(` Fetching logic file by ID: ${s}`);const i=await(await fetch(`${je}/logic/${s}`,{headers:a})).json();return console.log(" Received file from API:",{id:i.id,name:i.name,contentLength:i.content?.length||0,content:i.content?.substring(0,50)}),i},async create(s){return(await fetch(`${je}/logic`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()},async update(s,a){return(await fetch(`${je}/logic/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async validate(s,a="neutral"){return(await fetch(`${je}/logic/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s,vendor:a})})).json()},async loadSamples(){return(await fetch(`${je}/logic/samples`)).json()},async loadSample(s){return(await fetch(`${je}/logic/load-sample`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sampleId:s})})).json()},async format(s,a={}){return(await fetch(`${je}/logic/format`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s,options:a})})).json()}},bo={async pushToShadow(s){return(await fetch(`${je}/logic/${s}/push-to-shadow`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async pushToLive(s){return(await fetch(`${je}/sync/push`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logicId:s,target:"live"})})).json()},async syncTags(){return(await fetch(`${je}/sync/tags`,{method:"POST"})).json()},async generateConflicts(){return(await fetch(`${je}/sync/generate-conflicts`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async resolveConflict(s,a){return(await fetch(`${je}/sync/resolve-conflict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conflictId:s,resolution:a})})).json()}},qr={async run(s,a){return(await fetch(`${je}/simulate/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logic:s,...a})})).json()},async step(){return(await fetch(`${je}/simulate/step`,{method:"POST"})).json()},async stop(){return(await fetch(`${je}/simulate/stop`,{method:"POST"})).json()},async getLogs(){return(await fetch(`${je}/simulate/logs`)).json()},async pause(){return(await fetch(`${je}/simulate/pause`,{method:"POST"})).json()},async getStatus(){const s=await Zo();return(await fetch(`${je}/simulate/status`,{headers:s})).json()},async reset(){return(await fetch(`${je}/simulate/reset`,{method:"POST"})).json()},async getVariables(){return(await fetch(`${je}/simulate/variables`)).json()},async getVariable(s){return(await fetch(`${je}/simulate/variables/${s}`)).json()},async setVariable(s,a){return(await fetch(`${je}/simulate/variables/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:a})})).json()},async setBreakpoints(s){return(await fetch(`${je}/simulate/breakpoint`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({breakpoints:s})})).json()},async setIOValue(s,a){return(await fetch(`${je}/simulate/io`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,value:a})})).json()}},Ls={async getAll(s){const a=await Ct.getSessionToken(),n={};a&&(n.Authorization=`Bearer ${a}`);const i=s?`${je}/tags?project_id=${s}`:`${je}/tags`;console.log(` Fetching tags from: ${i}`);const d=await(await fetch(i,{headers:n})).json();return console.log(` Received ${d.length} tags for project ${s||"all"}`),d},async create(s){return(await fetch(`${je}/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()},async update(s,a){return(await fetch(`${je}/tags/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async exportTags(){return(await fetch(`${je}/tags/export`)).blob()},async importTags(s,a=!1){const n=await s.text(),i=JSON.parse(n);return(await fetch(`${je}/tags/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:i.tags,replaceExisting:a})})).json()},async syncFromSimulator(){return(await fetch(`${je}/tags/sync-from-simulator`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json()},async getUDTs(s){const a=s?`?projectId=${s}`:"";return(await fetch(`${je}/tags/udts${a}`)).json()},async createUDT(s,a){return(await fetch(`${je}/tags/udts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,projectId:a})})).json()},async getHierarchy(s){const a=s?`?projectId=${s}`:"";return(await fetch(`${je}/tags/hierarchy${a}`)).json()},async bulkOperation(s){return(await fetch(`${je}/tags/bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()},async getRefactoringPreview(s,a,n){const i=new URLSearchParams({newName:a});return n&&i.append("projectId",n),(await fetch(`${je}/tags/${s}/refactor-preview?${i}`)).json()},async applyRefactoring(s,a){return(await fetch(`${je}/tags/refactor-apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,projectId:a})})).json()},async previewImport(s,a,n){const i=new FormData;return i.append("file",s),i.append("vendor",a),n&&i.append("projectId",n),(await fetch(`${je}/tags/import-preview`,{method:"POST",body:i})).json()},async getDependencies(s,a){const n=a?`?projectId=${a}`:"";return(await fetch(`${je}/tags/${s}/dependencies${n}`)).json()},async getTagDependencies(s,a){return this.getDependencies(s,a)},async saveTagAliases(s,a,n){return(await fetch(`${je}/tags/${s}/aliases`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliases:a,projectId:n})})).json()},async getTagAliases(s,a){const n=a?`?projectId=${a}`:"";return(await fetch(`${je}/tags/${s}/aliases${n}`)).json()},async saveTagValidationRules(s,a,n){return(await fetch(`${je}/tags/${s}/validation-rules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rules:a,projectId:n})})).json()},async getTagValidationRules(s,a){const n=a?`?projectId=${a}`:"";return(await fetch(`${je}/tags/${s}/validation-rules${n}`)).json()},async addValidationRule(s,a){return(await fetch(`${je}/tags/${s}/validation-rules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async addAlias(s,a){return(await fetch(`${je}/tags/${s}/aliases`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async updateLifecycle(s,a){return(await fetch(`${je}/tags/${s}/lifecycle`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lifecycle:a})})).json()},async updateScope(s,a,n=!1){return(await fetch(`${je}/tags/${s}/scope`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope:a,locked:n})})).json()}},Xt={async getBranches(s){const a=await Zo();return(await fetch(`${je}/versions/projects/${s}/branches`,{headers:a})).json()},async createBranch(s,a){return(await fetch(`${je}/versions/projects/${s}/branches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async deleteBranch(s){return(await fetch(`${je}/versions/branches/${s}`,{method:"DELETE"})).json()},async getVersions(s,a){const n=new URLSearchParams;a?.branchId&&n.append("branchId",a.branchId),a?.status&&n.append("status",a.status),a?.limit&&n.append("limit",a.limit.toString());const i=`${je}/versions/projects/${s}/versions${n.toString()?"?"+n.toString():""}`;return(await fetch(i)).json()},async getVersionById(s){return(await fetch(`${je}/versions/${s}`)).json()},async getVersionFiles(s){return(await fetch(`${je}/versions/${s}/files`)).json()},async createVersion(s,a){return(await fetch(`${je}/versions/projects/${s}/versions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async updateVersionStatus(s,a,n){return(await fetch(`${je}/versions/${s}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a,actor:n})})).json()},async signVersion(s,a){return(await fetch(`${je}/versions/${s}/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signedBy:a})})).json()},async approveVersion(s,a){return(await fetch(`${je}/versions/${s}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approver:a})})).json()},async compareVersions(s,a){return(await fetch(`${je}/versions/compare/${s}/${a}`)).json()},async getSnapshots(s){return(await fetch(`${je}/versions/projects/${s}/snapshots`)).json()},async getSnapshotById(s){return(await fetch(`${je}/versions/snapshots/${s}`)).json()},async createSnapshot(s,a){return(await fetch(`${je}/versions/projects/${s}/snapshots`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async getReleases(s,a){const n=new URLSearchParams;a?.status&&n.append("status",a.status),a?.environment&&n.append("environment",a.environment);const i=`${je}/versions/projects/${s}/releases${n.toString()?"?"+n.toString():""}`,c=await Zo();return(await fetch(i,{headers:c})).json()},async getReleaseById(s){return(await fetch(`${je}/versions/releases/${s}`)).json()},async getRelease(s,a){return(await fetch(`${je}/versions/projects/${s}/releases/${a}`)).json()},async getReleaseSafetyChecks(s){return(await fetch(`${je}/versions/releases/${s}/safety-checks`)).json()},async runSafetyChecks(s){return(await fetch(`${je}/versions/releases/${s}/run-safety-checks`,{method:"POST"})).json()},async initiateDeploy(s,a,n="atomic"){return(await fetch(`${je}/deploy/initiate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({releaseId:s,environment:a,strategy:n,initiatedBy:"current-user"})})).json()},async createRelease(s,a){return(await fetch(`${je}/versions/projects/${s}/releases`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async promoteRelease(s,a,n){return(await fetch(`${je}/versions/releases/${s}/promote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetEnvironment:a,promotedBy:n})})).json()},async signRelease(s,a){return(await fetch(`${je}/versions/releases/${s}/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signedBy:a})})).json()},async getHistory(s,a){const n=new URLSearchParams;a&&n.append("limit",a.toString());const i=`${je}/versions/projects/${s}/history${n.toString()?"?"+n.toString():""}`;return(await fetch(i)).json()},async getStats(s){return(await fetch(`${je}/versions/projects/${s}/stats`)).json()}},ko={async createDeployment(s,a){return(await fetch(`${je}/deploy/projects/${s}/deployments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()},async getDeployments(s,a){const n=new URLSearchParams;a?.environment&&n.append("environment",a.environment),a?.status&&n.append("status",a.status),a?.limit&&n.append("limit",a.limit.toString());const i=`${je}/deploy/projects/${s}/deployments${n.toString()?"?"+n.toString():""}`;return(await fetch(i)).json()},async getDeploymentById(s){return(await fetch(`${je}/deploy/deployments/${s}`)).json()},async startDeployment(s){return(await fetch(`${je}/deploy/deployments/${s}/start`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async pauseDeployment(s){return(await fetch(`${je}/deploy/deployments/${s}/pause`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async cancelDeployment(s){return(await fetch(`${je}/deploy/deployments/${s}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async getDeploymentChecks(s){return(await fetch(`${je}/deploy/deployments/${s}/checks`)).json()},async rerunChecks(s){return(await fetch(`${je}/deploy/deployments/${s}/checks/rerun`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()},async getDeploymentApprovals(s){return(await fetch(`${je}/deploy/deployments/${s}/approvals`)).json()},async submitApproval(s,a,n,i){return(await fetch(`${je}/deploy/approvals/${s}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approverName:a,status:n,comment:i})})).json()},async getDeploymentLogs(s,a){const n=new URLSearchParams;a?.limit&&n.append("limit",a.limit.toString()),a?.level&&n.append("level",a.level);const i=`${je}/deploy/deployments/${s}/logs${n.toString()?"?"+n.toString():""}`;return(await fetch(i)).json()},async executeRollback(s,a,n){return(await fetch(`${je}/deploy/deployments/${s}/rollback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({triggeredBy:a,reason:n})})).json()},async getRollbackHistory(s){return(await fetch(`${je}/deploy/deployments/${s}/rollbacks`)).json()},async promoteSnapshot(s,a,n,i){return(await fetch(`${je}/deploy/snapshots/${s}/promote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toStage:a,promotedBy:n,notes:i})})).json()},async getPromotionHistory(s){return(await fetch(`${je}/deploy/snapshots/${s}/promotions`)).json()},async getDeploymentStats(s){return(await fetch(`${je}/deploy/projects/${s}/stats`)).json()}},Sl=Ni((s,a)=>({status:{connected:!1,shadowOk:!1,liveOk:!1,lastSync:null,latency:0,conflicts:[]},events:[],isPushing:!1,deployedLogic:null,connect:n=>{sl.connect(n),a().fetchDeployedLogic(),sl.on(i=>{switch(i.type){case"connect":s(c=>({status:{...c.status,connected:!0}}));break;case"heartbeat":{const c=i.payload;s(d=>({status:{...d.status,latency:c.latency}}));break}case"sync_status":{const c=i.payload;s(d=>({status:{...d.status,...c}}));break}case"conflict":{const c=i.payload;s(d=>({status:{...d.status,conflicts:[...d.status.conflicts,c]}}));break}case"tag_update":{const c=sl.createSyncEvent("TAG_UPDATE",i.payload);s(d=>({events:[c,...d.events].slice(0,100)}));break}case"logic_push_response":{const c=i.payload;c.success&&s(d=>({status:{...d.status,lastSync:new Date().toISOString(),shadowOk:c.target==="shadow"||d.status.shadowOk,liveOk:c.target==="live"||d.status.liveOk}})),s({isPushing:!1});break}}})},disconnect:()=>{sl.disconnect(),s(n=>({status:{...n.status,connected:!1,shadowOk:!1,liveOk:!1}}))},pushToShadow:async n=>{s({isPushing:!0});try{const i=await bo.pushToShadow(n);return sl.send({type:"logic_push_request",payload:{logicId:n,target:"shadow"}}),i.success?(s(c=>({status:{...c.status,shadowOk:!0,lastSync:new Date().toISOString()},isPushing:!1})),await a().fetchDeployedLogic()):s({isPushing:!1}),i.success}catch(i){return console.error("Failed to push to shadow:",i),s({isPushing:!1}),!1}},pushToLive:async n=>{s({isPushing:!0});try{const i=await bo.pushToLive(n);return sl.send({type:"logic_push_request",payload:{logicId:n,target:"live"}}),i.success?s(c=>({status:{...c.status,liveOk:!0,lastSync:new Date().toISOString()},events:[{id:`event-${Date.now()}`,type:"LOGIC_PUSH",timestamp:new Date().toISOString(),payload:{logicId:n,target:"live",success:!0,warnings:i.warnings}},...c.events].slice(0,100),isPushing:!1})):s({isPushing:!1}),i.success}catch(i){return console.error("Failed to push to live:",i),s({isPushing:!1}),!1}},resolveConflict:async(n,i)=>{try{await bo.resolveConflict(n,i),s(c=>({status:{...c.status,conflicts:c.status.conflicts.map(d=>d.id===n?{...d,resolved:!0,resolution:i}:d)}})),s(c=>({events:[{id:`event-${Date.now()}`,type:"CONFLICT_RESOLVED",timestamp:new Date().toISOString(),payload:{conflictId:n,resolution:i}},...c.events].slice(0,100)})),console.log(`Resolved conflict ${n} with ${i}`)}catch(c){console.error("Failed to resolve conflict:",c)}},syncTags:async()=>{try{await bo.syncTags(),s(n=>({status:{...n.status,lastSync:new Date().toISOString()}}))}catch(n){console.error("Failed to sync tags:",n)}},simulateConflicts:async()=>{try{(await bo.generateConflicts()).success&&await a().fetchDeployedLogic()}catch(n){console.error("Failed to generate conflicts:",n);const i=[{id:"conflict-1",tagName:"Temperature_SP",shadowValue:75,liveValue:72.5,timestamp:new Date().toISOString(),type:"VALUE_CONFLICT",resolved:!1,description:"Setpoint value differs between shadow and live runtime"},{id:"conflict-2",tagName:"Pump_Run",shadowValue:!0,liveValue:!1,timestamp:new Date().toISOString(),type:"VALUE_CONFLICT",resolved:!1,description:"Pump control state mismatch detected"}];s(c=>({status:{...c.status,conflicts:[...c.status.conflicts,...i]}}))}},fetchDeployedLogic:async()=>{try{const n=await Ct.getSessionToken(),i={};n&&(i.Authorization=`Bearer ${n}`);const d=await(await fetch("http://localhost:8000/api/sync/status",{headers:i})).json();s(u=>({status:{...u.status,...d},deployedLogic:d.deployedLogic||null}))}catch(n){console.error("Failed to fetch deployed logic:",n)}}}));typeof window<"u"&&setTimeout(()=>{Sl.getState().connect("default-project")},1e3);const Pm="http://localhost:8000/api";class qR{sessionId;constructor(){this.sessionId=localStorage.getItem("pandaura-session-id")||this.generateSessionId(),localStorage.setItem("pandaura-session-id",this.sessionId)}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async getSession(){try{const a=await fetch(`${Pm}/sessions/${this.sessionId}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Failed to get session:",a),this.getDefaultSession()}}async updateSession(a){try{const n=await fetch(`${Pm}/sessions/${this.sessionId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`)}catch(n){console.error("Failed to update session:",n),this.saveToLocalStorage(a)}}async saveEditorState(a){try{const n=await fetch(`${Pm}/sessions/${this.sessionId}/save-editor-state`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`)}catch(n){console.error("Failed to save editor state:",n),localStorage.setItem("pandaura-editor-state",JSON.stringify(a))}}getDefaultSession(){const a=localStorage.getItem("pandaura-session");if(a)try{return JSON.parse(a)}catch(n){console.error("Failed to parse stored session:",n)}return{id:this.sessionId,editor_state:{activeFileId:null,openTabs:[],unsavedChanges:{}},settings:{autoSave:!1,vendor:"neutral",theme:"light"},last_accessed:new Date().toISOString()}}saveToLocalStorage(a){const i={...this.getDefaultSession(),...a};localStorage.setItem("pandaura-session",JSON.stringify(i))}autoSaveTimeout=null;debouncedSaveEditorState(a,n=1e3){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{this.saveEditorState(a)},n)}}const zm=new qR;let En=null;const Do=Ni((s,a)=>({currentFile:null,files:[],openTabs:[],unsavedChanges:{},undoRedoStacks:{},isModified:!1,isSaving:!1,isValidating:!1,validationResult:null,validationTimeout:null,changeMarkers:[],showDiffs:!1,vendor:"neutral",autoSave:!1,loadFile:async n=>{try{console.log(` Loading file: ${n}`);const i=await al.getById(n);console.log(" File loaded from API:",{name:i.name,contentLength:i.content?.length||0,contentPreview:i.content?.substring(0,50)||"EMPTY",fullContent:i.content}),console.log(" Setting currentFile in store..."),s({currentFile:i}),console.log(" currentFile has been set"),a().openTabs.find(d=>d.id===i.id)?a().switchTab(i.id):a().openTab(i),await a().saveSession()}catch(i){console.error("Failed to load file:",i)}},loadAllFiles:async n=>{try{console.log(` Loading files for project: ${n||"all"}`);const i=await al.getAll(n);console.log(` Loaded ${i.length} files:`,i.map(c=>c.name)),console.log(" Files content check:",i.map(c=>({name:c.name,hasContent:!!c.content,contentLength:c.content?.length||0}))),s({files:i})}catch(i){console.error("Failed to load files:",i)}},createFile:async(n,i)=>{try{const c=await al.create({name:n,content:`(* New Logic File *)
PROGRAM New_Program
VAR
  (* Variables here *)
END_VAR

(* Logic here *)

END_PROGRAM`,vendor:a().vendor,author:"Engineer",projectId:i});s(d=>({files:[...d.files,c],currentFile:c})),a().openTab(c),await a().saveSession()}catch(c){console.error("Failed to create file:",c)}},updateContent:n=>{const i=a().currentFile;if(!i)return;const c=a(),d=c.unsavedChanges[i.id]||i.content;let u=c.undoRedoStacks[i.id];u||(u={undoStack:[],redoStack:[],maxStackSize:50}),d!==n&&(u.undoStack.push(d),u.redoStack=[],u.undoStack.length>u.maxStackSize&&u.undoStack.shift()),s(h=>({currentFile:i,unsavedChanges:{...h.unsavedChanges,[i.id]:n},undoRedoStacks:{...h.undoRedoStacks,[i.id]:u},isModified:!0,validationResult:null})),s(h=>({openTabs:h.openTabs.map(x=>x.id===i.id?{...x,unsaved:!0}:x)})),s({validationResult:null}),a().updateChangeMarkers(),zm.debouncedSaveEditorState({activeFileId:i.id,openTabs:a().openTabs,unsavedChanges:a().unsavedChanges})},saveFile:async n=>{const i=n||a().currentFile?.id;if(!i)return;const c=a(),d=c.files.find(h=>h.id===i);if(!d)return;const u=c.unsavedChanges[i]||d.content;s({isSaving:!0});try{const h=await al.update(i,{...d,content:u});s(x=>({files:x.files.map(f=>f.id===i?h:f),currentFile:x.currentFile?.id===i?h:x.currentFile,unsavedChanges:{...x.unsavedChanges,[i]:void 0},openTabs:x.openTabs.map(f=>f.id===i?{...f,unsaved:!1}:f),isModified:x.currentFile?.id===i?!1:x.isModified,isSaving:!1,changeMarkers:x.currentFile?.id===i?[]:x.changeMarkers})),await a().saveSession()}catch(h){console.error("Failed to save file:",h),s({isSaving:!1})}},validate:async n=>{const i=a().currentFile;if(!i)return;const c=a(),d=n||c.unsavedChanges[i.id]||i.content;s({isValidating:!0});try{const u=await al.validate(d,c.vendor);s({validationResult:u,isValidating:!1,validationTimeout:null})}catch(u){console.error("Failed to validate:",u),s({isValidating:!1,validationTimeout:null})}},setVendor:n=>{s({vendor:n}),a().saveSession()},clearValidation:()=>{s({validationResult:null,isValidating:!1})},openTab:n=>{s(i=>i.openTabs.find(d=>d.id===n.id)?{currentFile:n}:{openTabs:[...i.openTabs,{id:n.id,name:n.name,unsaved:!!i.unsavedChanges[n.id]}],currentFile:n})},closeTab:n=>{s(i=>{const c=i.openTabs.filter(u=>u.id!==n);let d=i.currentFile;if(i.currentFile?.id===n)if(c.length>0){const u=c[c.length-1];d=i.files.find(h=>h.id===u.id)||null}else d=null;return{openTabs:c,currentFile:d}}),a().saveSession()},switchTab:n=>{const c=a().files.find(d=>d.id===n);c&&(s({currentFile:c}),a().saveSession())},getUnsavedContent:n=>a().unsavedChanges[n]||null,hasUnsavedChanges:n=>{const i=a();return n?!!i.unsavedChanges[n]:Object.keys(i.unsavedChanges).some(c=>i.unsavedChanges[c])},discardChanges:n=>{s(i=>({unsavedChanges:{...i.unsavedChanges,[n]:void 0},openTabs:i.openTabs.map(c=>c.id===n?{...c,unsaved:!1}:c),isModified:i.currentFile?.id===n?!1:i.isModified,changeMarkers:i.currentFile?.id===n?[]:i.changeMarkers}))},toggleShowDiffs:()=>{s(n=>({showDiffs:!n.showDiffs}))},updateChangeMarkers:async()=>{const n=a().currentFile;if(!n)return;const i=a().unsavedChanges[n.id];if(!i){s({changeMarkers:[]});return}try{const c=await Ct.getSessionToken(),d={};c&&(d.Authorization=`Bearer ${c}`);const u=await fetch(`http://localhost:8000/api/logic/${n.id}/diff?currentContent=${encodeURIComponent(i)}`,{headers:d});if(u.ok){const h=await u.json();s({changeMarkers:h.changes||[]})}}catch(c){console.error("Failed to get diff:",c)}},setAutoSave:n=>{s({autoSave:n}),n&&!En?En=setInterval(()=>{const i=a();i.hasUnsavedChanges()&&Object.keys(i.unsavedChanges).forEach(c=>{i.unsavedChanges[c]&&i.saveFile(c)})},300*1e3):!n&&En&&(clearInterval(En),En=null),a().saveSession()},loadSession:async()=>{try{const n=await zm.getSession();if(s({vendor:n.settings.vendor,autoSave:n.settings.autoSave,openTabs:(n.editor_state.openTabs||[]).map(i=>({...i,unsaved:i.unsaved||!1})),unsavedChanges:n.editor_state.unsavedChanges||{}}),n.editor_state.activeFileId){const c=a().files.find(d=>d.id===n.editor_state.activeFileId);c&&s({currentFile:c})}n.settings.autoSave&&a().setAutoSave(!0)}catch(n){console.error("Failed to load session:",n)}},saveSession:async()=>{const n=a();try{await zm.updateSession({editor_state:{activeFileId:n.currentFile?.id||null,openTabs:n.openTabs,unsavedChanges:Object.fromEntries(Object.entries(n.unsavedChanges).filter(([i,c])=>c!==void 0))},settings:{autoSave:n.autoSave,vendor:n.vendor,theme:"light"}})}catch(i){console.error("Failed to save session:",i)}},undo:()=>{const n=a(),i=n.currentFile;if(!i)return;const c=n.undoRedoStacks[i.id];if(!c||c.undoStack.length===0)return;const d=n.unsavedChanges[i.id]||i.content,u=c.undoStack.pop();c.redoStack.push(d),s(h=>({unsavedChanges:{...h.unsavedChanges,[i.id]:u},undoRedoStacks:{...h.undoRedoStacks,[i.id]:c},isModified:!0})),a().updateContent(u)},redo:()=>{const n=a(),i=n.currentFile;if(!i)return;const c=n.undoRedoStacks[i.id];if(!c||c.redoStack.length===0)return;const d=n.unsavedChanges[i.id]||i.content,u=c.redoStack.pop();c.undoStack.push(d),s(h=>({unsavedChanges:{...h.unsavedChanges,[i.id]:u},undoRedoStacks:{...h.undoRedoStacks,[i.id]:c},isModified:!0})),a().updateContent(u)},canUndo:()=>{const n=a(),i=n.currentFile;if(!i)return!1;const c=n.undoRedoStacks[i.id];return!!(c&&c.undoStack.length>0)},canRedo:()=>{const n=a(),i=n.currentFile;if(!i)return!1;const c=n.undoRedoStacks[i.id];return!!(c&&c.redoStack.length>0)},reset:()=>{En&&(clearInterval(En),En=null),s({currentFile:null,files:[],openTabs:[],unsavedChanges:{},undoRedoStacks:{},isModified:!1,isSaving:!1,isValidating:!1,validationResult:null,changeMarkers:[],showDiffs:!1,vendor:"neutral",autoSave:!1})}}));if(typeof window<"u"){const s=Do.getState();s.loadAllFiles().then(()=>{s.loadSession()})}function HR({isOpen:s,onClose:a,conflicts:n,onResolve:i,onResolveAll:c}){const[d,u]=p.useState({});if(!s)return null;const h=n.filter(b=>!b.resolved),x=(b,v)=>{i(b,v);const N={...d};delete N[b],u(N)},f=b=>{c(b),u({}),a()},y=b=>typeof b=="boolean"?b?"TRUE":"FALSE":typeof b=="number"?b.toFixed(2):typeof b=="string"?`"${b}"`:String(b);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jt,{className:"w-6 h-6 text-amber-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-amber-900",children:"Sync Conflicts Detected"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[h.length," conflict",h.length!==1?"s":""," require resolution before pushing to live runtime"]})]})]}),e.jsx("button",{onClick:a,className:"text-amber-600 hover:text-amber-800 transition-colors",children:e.jsx(ga,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fe,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"All Conflicts Resolved"}),e.jsx("p",{className:"text-green-700",children:"You can now proceed with the push operation."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4 border border-neutral-200",children:[e.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Quick Resolution"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>f("shadow"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Keep All Shadow Values"]}),e.jsxs("button",{onClick:()=>f("live"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Keep All Live Values"]})]}),e.jsx("p",{className:"text-xs text-neutral-600 mt-2",children:"Or resolve conflicts individually below"})]}),e.jsx("div",{className:"space-y-3",children:h.map(b=>e.jsxs("div",{className:"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:b.tagName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600 mt-1",children:[e.jsx(Oa,{className:"w-4 h-4"}),e.jsxs("span",{children:["Detected: ",new Date(b.timestamp).toLocaleString()]})]})]}),e.jsx("div",{className:"text-xs text-neutral-500 bg-neutral-100 px-2 py-1 rounded",children:b.type||"VALUE_CONFLICT"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Shadow Runtime"}),e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})]}),e.jsx("div",{className:"font-mono text-lg text-blue-800",children:y(b.shadowValue)}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Test environment value"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Live Runtime"}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),e.jsx("div",{className:"font-mono text-lg text-green-800",children:y(b.liveValue)}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Production environment value"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>x(b.id,"shadow"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Keep Shadow Value"]}),e.jsxs("button",{onClick:()=>x(b.id,"live"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Keep Live Value"]})]}),b.description&&e.jsxs("div",{className:"mt-3 p-2 bg-neutral-50 rounded text-sm text-neutral-700",children:[e.jsx("strong",{children:"Details:"})," ",b.description]})]},b.id))})]})}),e.jsx("div",{className:"bg-neutral-50 border-t border-neutral-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-neutral-600",children:h.length>0?e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 inline mr-1 text-amber-500"}),"Resolve all conflicts to proceed with push"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 inline mr-1 text-green-500"}),"All conflicts resolved"]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 transition-colors",children:h.length>0?"Cancel Push":"Close"}),h.length===0&&e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm bg-[#FF6A00] text-white rounded-md hover:bg-[#FF8020] transition-colors",children:"Continue Push"})]})]})})]})})}function GR({isOpen:s,onClose:a,onConfirm:n,logicName:i="Unknown Logic",shadowLogic:c="",liveLogic:d="",targetRuntime:u}){const[h,x]=p.useState("summary"),[f,y]=p.useState([]),[b,v]=p.useState([]),[N,E]=p.useState(!0);p.useEffect(()=>{s&&(M(),L())},[s,c,d]);const M=async()=>{E(!0),await new Promise(k=>setTimeout(k,1e3));const S=[{id:"syntax",name:"Syntax Validation",status:"pass",message:"No syntax errors detected",details:"All ST constructs are properly formatted"},{id:"tags",name:"Tag References",status:c.includes("undefined_tag")?"error":"pass",message:c.includes("undefined_tag")?"Undefined tag references found":"All referenced tags are defined",details:c.includes("undefined_tag")?'Tag "undefined_tag" is not declared in any VAR section':"All tag references validated against Tag Database"},{id:"critical_tags",name:"Critical Tag Protection",status:c.toLowerCase().includes("emergency")?"warning":"pass",message:c.toLowerCase().includes("emergency")?"Logic modifies emergency/safety tags":"No critical safety tags affected",details:c.toLowerCase().includes("emergency")?"Changes affect emergency stop or safety interlock systems":"No safety-critical systems are modified"},{id:"runtime_compatibility",name:"Runtime Compatibility",status:"pass",message:"Logic is compatible with target runtime",details:`Compatible with ${u} runtime environment`},{id:"performance",name:"Performance Impact",status:c.length>1e3?"warning":"pass",message:c.length>1e3?"Large logic file may impact cycle time":"Minimal performance impact expected",details:`Logic size: ${c.length} characters`}];y(S),E(!1)},L=()=>{const S=c.split(`
`),k=d.split(`
`),P=[],G=Math.max(S.length,k.length);for(let U=0;U<G;U++){const Q=U<S.length?S[U]:void 0,Z=U<k.length?k[U]:void 0;Q===void 0&&Z!==void 0?P.push({type:"removed",lineNumber:U+1,content:Z,oldContent:Z}):Q!==void 0&&Z===void 0?P.push({type:"added",lineNumber:U+1,content:Q}):Q!==Z?P.push({type:"modified",lineNumber:U+1,content:Q||"",oldContent:Z}):Q===Z&&P.push({type:"unchanged",lineNumber:U+1,content:Q||""})}v(P)};if(!s)return null;const w=f.some(S=>S.status==="error"),T=f.some(S=>S.status==="warning"),A=b.filter(S=>S.type!=="unchanged").length,D=S=>{switch(S){case"pass":return e.jsx(Fe,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(jt,{className:"w-5 h-5 text-amber-600"});case"error":return e.jsx(ga,{className:"w-5 h-5 text-red-600"})}},C=S=>{switch(S){case"added":return"bg-green-50 dark:bg-green-900/30 border-l-4 border-green-400 text-green-800 dark:text-green-300";case"removed":return"bg-red-50 dark:bg-red-900/30 border-l-4 border-red-400 text-red-800 dark:text-red-300";case"modified":return"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-400 text-blue-800 dark:text-blue-300";default:return"bg-neutral-50 dark:bg-gray-700 text-neutral-600 dark:text-gray-400"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-[#FF6A00] text-white px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Preview Changes"}),e.jsxs("p",{className:"text-orange-100 text-sm",children:['Review changes before pushing "',i,'" to ',u," runtime"]})]})]}),e.jsx("button",{onClick:a,className:"text-orange-100 hover:text-white transition-colors",children:e.jsx(ga,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"border-b border-neutral-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>x("summary"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${h==="summary"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:[e.jsx(As,{className:"w-4 h-4 inline mr-2"}),"Summary"]}),e.jsxs("button",{onClick:()=>x("diff"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${h==="diff"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:[e.jsx(lk,{className:"w-4 h-4 inline mr-2"}),"Changes (",A,")"]}),e.jsxs("button",{onClick:()=>x("safety"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${h==="safety"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:[e.jsx(qe,{className:"w-4 h-4 inline mr-2"}),"Safety Checks",w&&e.jsx("span",{className:"ml-1 w-2 h-2 bg-red-500 rounded-full inline-block"}),!w&&T&&e.jsx("span",{className:"ml-1 w-2 h-2 bg-amber-500 rounded-full inline-block"})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-[#FF6A00] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-600 dark:text-gray-400",children:"Analyzing changes and running safety checks..."})]})}):e.jsxs(e.Fragment,{children:[h==="summary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3 dark:text-white",children:"Change Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Target Runtime"}),e.jsx("div",{className:"font-semibold capitalize dark:text-gray-200",children:u})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Logic File"}),e.jsx("div",{className:"font-semibold dark:text-gray-200",children:i})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Changes"}),e.jsxs("div",{className:"font-semibold dark:text-gray-200",children:[A," lines"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Safety Status"}),e.jsx("div",{className:`font-semibold ${w?"text-red-600":T?"text-amber-600":"text-green-600"}`,children:w?"Blocked":T?"Warnings":"Clear"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 border border-neutral-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3 dark:text-white",children:"Safety Check Summary"}),e.jsx("div",{className:"space-y-2",children:f.map(S=>e.jsxs("div",{className:"flex items-center gap-3",children:[D(S.status),e.jsx("span",{className:"flex-1 dark:text-gray-200",children:S.name}),e.jsx("span",{className:"text-sm text-neutral-600 dark:text-gray-400",children:S.message})]},S.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 border border-neutral-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3 dark:text-white",children:"Impact Assessment"}),e.jsxs("div",{className:"text-sm text-neutral-700 dark:text-gray-300 space-y-2",children:[e.jsxs("p",{children:[" This push will update the ",u," runtime with new logic"]}),e.jsxs("p",{children:[" ",A," line",A!==1?"s":""," will be modified"]}),T&&e.jsx("p",{className:"text-amber-600",children:" Review warnings before proceeding"}),w&&e.jsx("p",{className:"text-red-600",children:" Critical errors must be resolved first"})]})]})]}),h==="diff"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold dark:text-white",children:"Logic Changes"}),e.jsxs("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:[A," change",A!==1?"s":""," detected"]})]}),e.jsx("div",{className:"bg-neutral-900 text-neutral-100 rounded-lg p-4 font-mono text-sm max-h-96 overflow-y-auto",children:b.length===0?e.jsx("div",{className:"text-neutral-500 dark:text-gray-400 text-center py-4",children:"No changes detected"}):e.jsx("div",{className:"space-y-1",children:b.filter(S=>S.type!=="unchanged").map((S,k)=>e.jsx("div",{className:`p-2 rounded ${C(S.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xs text-neutral-500 w-8 flex-shrink-0",children:S.lineNumber}),e.jsxs("span",{className:"text-xs font-medium w-8 flex-shrink-0",children:[S.type==="added"&&"+",S.type==="removed"&&"-",S.type==="modified"&&"~"]}),e.jsxs("div",{className:"flex-1",children:[S.type==="modified"&&S.oldContent&&e.jsxs("div",{className:"text-red-700 mb-1",children:["- ",S.oldContent]}),e.jsxs("div",{className:S.type==="modified"?"text-green-700":"",children:[S.type==="added"&&"+ ",S.type==="removed"&&"- ",S.type==="modified"&&"+ ",S.content]})]})]})},k))})})]}),h==="safety"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold dark:text-white",children:"Safety Check Details"}),e.jsx("div",{className:"space-y-3",children:f.map(S=>e.jsx("div",{className:"bg-white dark:bg-gray-700 border border-neutral-200 dark:border-gray-600 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[D(S.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium dark:text-white",children:S.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${S.status==="pass"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":S.status==="warning"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:S.status.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-neutral-700 dark:text-gray-300 mb-2",children:S.message}),S.details&&e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 bg-neutral-50 dark:bg-gray-600 p-2 rounded",children:S.details})]})]})},S.id))})]})]})}),e.jsx("div",{className:"bg-neutral-50 dark:bg-gray-700 border-t border-neutral-200 dark:border-gray-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600 dark:text-gray-400",children:[e.jsx(Oa,{className:"w-4 h-4"}),e.jsxs("span",{children:["Analysis completed at ",new Date().toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm border border-neutral-300 dark:border-gray-600 text-neutral-700 dark:text-gray-200 bg-white dark:bg-gray-800 rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:n,disabled:w,className:`px-6 py-2 text-sm rounded-md transition-colors ${w?"bg-neutral-200 text-neutral-500 cursor-not-allowed":"bg-[#FF6A00] text-white hover:bg-[#FF8020]"}`,children:w?"Cannot Push (Errors)":T?"Push with Warnings":"Confirm Push"})]})]})})]})})}function YR(){const{status:s,events:a,isPushing:n,resolveConflict:i,syncTags:c,pushToLive:d,simulateConflicts:u}=Sl(),{currentFile:h}=Do(),[x,f]=p.useState(!1),[y,b]=p.useState(!1),[v,N]=p.useState([]),E=s.conflicts.filter(A=>!A.resolved);p.useEffect(()=>{Ct.getSessionToken().then(D=>{const C={"Content-Type":"application/json"};D&&(C.Authorization=`Bearer ${D}`),fetch("http://localhost:8000/api/sync/start-streaming",{method:"POST",headers:C}).catch(S=>console.error("Failed to start streaming:",S))});const A=setInterval(async()=>{try{const C=await(await fetch("http://localhost:8000/api/sync/stream-tags")).json();if(C.tags&&C.streaming){const S=Object.entries(C.tags).map(([k,P])=>({name:k,value:P,timestamp:C.timestamp||new Date().toISOString()}));N(k=>[...S,...k].slice(0,20))}}catch(D){console.error("Failed to fetch tag stream:",D)}},1e3);return()=>clearInterval(A)},[]);const M=(A,D)=>{i(A,D)},L=A=>{E.forEach(D=>{i(D.id,A)})},w=()=>{E.length>0?f(!0):b(!0)},T=async()=>{h&&(b(!1),await d(h.id))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold dark:text-white",children:"Connection Status"}),e.jsx("div",{className:"flex items-center gap-2",children:s.connected?e.jsxs(e.Fragment,{children:[e.jsx(wg,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx(hE,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-600",children:"Disconnected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Shadow Runtime"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.shadowOk?e.jsx(Fe,{className:"w-4 h-4 text-green-600"}):e.jsx(ga,{className:"w-4 h-4 text-neutral-400"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium dark:text-gray-200",children:s.shadowOk?"OK":"Not Ready"}),s.executionMode&&e.jsx("span",{className:"text-xs text-neutral-500 dark:text-gray-400",children:s.executionMode==="simulation"?"Simulation":s.executionMode==="beremiz"?"Beremiz":"Failed"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Live Runtime"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.liveOk?e.jsx(Fe,{className:"w-4 h-4 text-green-600"}):e.jsx(ga,{className:"w-4 h-4 text-neutral-400"}),e.jsx("span",{className:"text-sm font-medium dark:text-gray-200",children:s.liveOk?"OK":"Not Ready"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Latency"}),e.jsxs("div",{className:"text-sm font-medium dark:text-gray-200",children:[s.latency,"ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Last Sync"}),e.jsx("div",{className:"text-sm font-medium dark:text-gray-200",children:s.lastSync?new Date(s.lastSync).toLocaleTimeString():"Never"})]})]})]}),E.length>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-amber-900 mb-2",children:[E.length," Conflict",E.length>1?"s":""," Detected"]}),e.jsx("div",{className:"space-y-2",children:E.map(A=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded border border-amber-300 dark:border-amber-500 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-sm dark:text-white",children:A.tagName}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:new Date(A.timestamp).toLocaleTimeString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Shadow"}),e.jsx("div",{className:"font-mono font-medium dark:text-gray-200",children:String(A.shadowValue)})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Live"}),e.jsx("div",{className:"font-mono font-medium dark:text-gray-200",children:String(A.liveValue)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(A.id,"shadow"),className:"flex-1 px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Keep Shadow"}),e.jsx("button",{onClick:()=>M(A.id,"live"),className:"flex-1 px-3 py-1.5 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Keep Live"})]})]},A.id))})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm dark:text-white",children:"Live Tag Stream"}),e.jsx(pi,{className:"w-4 h-4 text-green-600 animate-pulse"})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto text-xs",children:v.length>0?v.map((A,D)=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-neutral-100 dark:border-gray-700 last:border-0",children:[e.jsx("div",{className:"font-mono text-neutral-900 dark:text-gray-200",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-neutral-600 dark:text-gray-300",children:typeof A.value=="number"?A.value.toFixed(1):String(A.value)}),e.jsx("span",{className:"text-neutral-400 dark:text-gray-500",children:new Date(A.timestamp).toLocaleTimeString()})]})]},`live-${A.name}-${D}`)):e.jsx("div",{className:"text-neutral-500 text-center py-4",children:"Starting tag stream..."})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm dark:text-white",children:"Shadow Tag Stream"}),e.jsx(pi,{className:"w-4 h-4 text-blue-600 animate-pulse"})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto text-xs",children:v.length>0?v.map((A,D)=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-neutral-100 dark:border-gray-700 last:border-0",children:[e.jsx("div",{className:"font-mono text-neutral-900 dark:text-gray-200",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-neutral-600 dark:text-gray-300",children:typeof A.value=="number"?A.value.toFixed(1):String(A.value)}),e.jsx("span",{className:"text-neutral-400 dark:text-gray-500",children:new Date(A.timestamp).toLocaleTimeString()})]})]},`shadow-${A.name}-${D}`)):e.jsx("div",{className:"text-neutral-500 text-center py-4",children:"Starting tag stream..."})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm dark:text-white",children:"Recent Sync Log"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(),className:"px-3 py-1.5 text-xs bg-[#FF6A00] text-white rounded hover:bg-[#FF8020] transition-colors",children:"Sync Tags Now"}),e.jsx("button",{onClick:()=>u(),className:"px-3 py-1.5 text-xs bg-amber-600 text-white rounded hover:bg-amber-700 transition-colors",title:"Simulate conflicts for demo",children:"Demo Conflicts"})]})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[a.slice(0,20).map(A=>e.jsxs("div",{className:"flex items-start gap-3 py-2 border-b border-neutral-100 dark:border-gray-700 last:border-0",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 mt-1.5 ${A.type==="CONFLICT"?"bg-amber-500":A.type==="HEARTBEAT"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium dark:text-gray-200",children:A.type.replace(/_/g," ")}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:new Date(A.timestamp).toLocaleString()})]})]},A.id)),a.length===0&&e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400 text-center py-4",children:"No sync events yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold text-sm mb-3 dark:text-white",children:"Push to Live"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400",children:"Push current shadow logic to live runtime. This will update the production PLC."}),e.jsx("button",{onClick:w,className:"w-full px-4 py-2 text-sm bg-neutral-100 dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-gray-200 rounded-md hover:bg-neutral-200 dark:hover:bg-gray-600 transition-colors",children:"Preview Changes"}),e.jsx("button",{disabled:n||!s.shadowOk,className:`w-full px-4 py-2 text-sm rounded-md transition-colors ${!n&&s.shadowOk?"bg-[#FF6A00] text-white hover:bg-[#FF8020]":"bg-neutral-200 text-neutral-500 cursor-not-allowed"}`,children:n?"Pushing to Live...":"Push to Live (with Safety Checks)"}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:" Advanced safety checks will be added in Milestone 3"})]})]}),e.jsx(HR,{isOpen:x,onClose:()=>f(!1),conflicts:s.conflicts,onResolve:M,onResolveAll:L}),e.jsx(GR,{isOpen:y,onClose:()=>b(!1),onConfirm:T,logicName:h?.name||"Unknown Logic",shadowLogic:h?.content||"",liveLogic:"",targetRuntime:"live"})]})}const Lh=Ni((s,a)=>({isRunning:!1,isPaused:!1,speed:1,logs:[],ioValues:{},breakpoints:[],currentLine:void 0,run:async n=>{try{const i=await qr.run(n);i.success&&(console.log(" Simulator run result:",i),console.log(" Initial ioValues from logic:",i.ioValues),s({isRunning:!0,isPaused:!1,currentLine:1,ioValues:i.ioValues||{}}),a().addLog("Simulator started","info"),a().addLog(`Loaded ${Object.keys(i.ioValues||{}).length} variables from code`,"info"),Object.entries(i.ioValues||{}).forEach(([c,d])=>{a().addLog(`${c}: ${d} (initial from code)`,"info")}),setTimeout(()=>{a().isRunning&&a().simulateExecution()},100))}catch(i){console.error("Failed to run simulator:",i),a().addLog("Failed to start simulator","error")}},pause:()=>{s({isPaused:!0}),a().addLog("Simulator paused","info")},resume:()=>{s({isPaused:!1}),a().addLog("Simulator resumed","info"),a().simulateExecution()},step:async()=>{try{await qr.step();const n=a();n.currentLine!==void 0&&s({currentLine:n.currentLine+1}),a().addLog(`Stepped to line ${a().currentLine}`,"info")}catch(n){console.error("Failed to step:",n)}},stop:()=>{s({isRunning:!1,isPaused:!1,currentLine:void 0,ioValues:{}}),a().addLog("Simulator stopped","info")},setSpeed:n=>{s({speed:n}),a().addLog(`Speed set to ${n}x`,"info")},setIOValue:async(n,i)=>{try{await qr.setIOValue(n,i),s(c=>({ioValues:{...c.ioValues,[n]:i}})),a().addLog(`${n} set to ${i}`,"tag_change")}catch(c){console.error("Failed to set I/O value:",c)}},toggleBreakpoint:async n=>{const i=a(),c=i.breakpoints.includes(n)?i.breakpoints.filter(d=>d!==n):[...i.breakpoints,n];try{await qr.setBreakpoints(c),s({breakpoints:c});const d=c.includes(n)?"set":"removed";a().addLog(`Breakpoint ${d} at line ${n}`,"info")}catch(d){console.error("Failed to toggle breakpoint:",d),a().addLog(`Failed to toggle breakpoint at line ${n}`,"error")}},addLog:(n,i)=>{const c={id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),message:n,type:i};s(d=>({logs:[c,...d.logs].slice(0,200)}))},clearLogs:()=>{s({logs:[]})},simulateExecution:()=>{const n=a();!n.isRunning||n.isPaused||Promise.all([qr.getStatus(),qr.getLogs()]).then(([i,c])=>{const d=a();if(d.isRunning){i.ioValues&&console.log(" Updating ioValues from backend:",i.ioValues);const u=new Set(d.logs.map(x=>x.timestamp+x.message)),h=c.filter(x=>!u.has(x.timestamp+x.message));s({currentLine:i.currentLine,isPaused:i.isPaused,ioValues:i.ioValues||{},breakpoints:i.breakpoints||d.breakpoints,logs:[...h,...d.logs].slice(0,200)}),i.isPaused&&!d.isPaused&&a().addLog(`Hit breakpoint at line ${i.currentLine}`,"warning"),d.isRunning&&!d.isPaused&&setTimeout(()=>a().simulateExecution(),1e3/d.speed)}}).catch(i=>{console.error("Failed to get simulator status:",i),a().isRunning&&!a().isPaused&&setTimeout(()=>a().simulateExecution(),2e3)})}}));function yt({isOpen:s,onClose:a,title:n,message:i,children:c,type:d="info",size:u="medium",actions:h}){if(p.useEffect(()=>{const b=v=>{v.key==="Escape"&&a()};return s&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[s,a]),!s)return null;const x=()=>{switch(d){case"success":return e.jsx(Fe,{className:"w-6 h-6 text-green-600"});case"error":return e.jsx(bt,{className:"w-6 h-6 text-red-600"});case"warning":return e.jsx(jt,{className:"w-6 h-6 text-amber-600"});default:return e.jsx(Gr,{className:"w-6 h-6 text-blue-600"})}},f=()=>{switch(d){case"success":return"bg-green-50 border-green-200 dark:bg-green-900 dark:border-green-700";case"error":return"bg-red-50 border-red-200 dark:bg-red-900 dark:border-red-700";case"warning":return"bg-amber-50 border-amber-200 dark:bg-amber-900 dark:border-amber-700";default:return"bg-blue-50 border-blue-200 dark:bg-blue-900 dark:border-blue-700"}},y=()=>{switch(u){case"small":return"max-w-sm";case"medium":return"max-w-md";case"large":return"max-w-3xl";case"xl":return"max-w-6xl";default:return"max-w-md"}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 rounded-lg shadow-xl ${y()} w-full mx-4 animate-in zoom-in-95 duration-200`,children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 border-b border-neutral-200 dark:border-gray-700 rounded-t-lg ${i?f():"bg-gray-50 dark:bg-gray-800"}`,children:[i&&x(),e.jsx("h2",{className:"font-semibold text-lg text-neutral-900 dark:text-text-dark",children:n}),e.jsx("button",{onClick:a,className:"ml-auto p-1 hover:bg-black hover:bg-opacity-10 dark:hover:bg-white dark:hover:bg-opacity-10 rounded-md transition-colors",children:e.jsx(pt,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),i?e.jsx("div",{className:"p-4 bg-white dark:bg-gray-900",children:e.jsx("p",{className:"text-neutral-700 dark:text-text-dark whitespace-pre-line",children:i})}):e.jsx("div",{className:"bg-white dark:bg-gray-900",children:c}),i&&e.jsx("div",{className:"flex gap-3 p-4 border-t border-neutral-200 dark:border-gray-700",children:h&&h.length>0?h.map((b,v)=>e.jsx("button",{onClick:()=>{b.onClick(),a()},className:`px-4 py-2 rounded-md font-medium transition-colors ${b.variant==="danger"?"bg-red-600 text-white hover:bg-red-700":b.variant==="primary"?"text-white":"bg-neutral-200 text-neutral-800 hover:bg-neutral-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}`,style:b.variant==="primary"?{backgroundColor:"var(--accent-color)"}:{},children:b.label},v)):e.jsx("button",{onClick:a,className:"ml-auto px-4 py-2 rounded-md font-medium bg-neutral-200 text-neutral-800 hover:bg-neutral-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors",children:"OK"})})]})]})}function XR(){const{isRunning:s,isPaused:a,speed:n,logs:i,ioValues:c,currentLine:d,run:u,pause:h,resume:x,step:f,stop:y,setSpeed:b,setIOValue:v,clearLogs:N}=Lh(),{deployedLogic:E}=Sl(),M=c,[L,w]=p.useState(!1),[T,A]=p.useState({scanTimeMs:100,ioLatencyMin:1,ioLatencyMax:5,ioJitter:.5,computeQuota:80,enableWatchdog:!0,watchdogTimeout:1e3,enableDataTypeValidation:!0}),D=k=>{const P=M[k];v(k,!P)},C=(k,P)=>{v(k,P)},S=()=>{const k=i.map(Q=>`[${Q.timestamp}] [${Q.type.toUpperCase()}] ${Q.message}`).join(`
`),P=new Blob([k],{type:"text/plain"}),G=URL.createObjectURL(P),U=document.createElement("a");U.href=G,U.download=`simulator-log-${new Date().toISOString()}.log`,U.click(),URL.revokeObjectURL(G)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[a?e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(Jr,{className:"w-4 h-4"}),"Resume"]}):e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition-colors",children:[e.jsx(Ch,{className:"w-4 h-4"}),"Pause"]}),e.jsxs("button",{onClick:f,disabled:!a,className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${a?"bg-blue-600 text-white hover:bg-blue-700":"bg-neutral-200 dark:bg-gray-600 text-neutral-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx(G5,{className:"w-4 h-4"}),"Step"]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(Q5,{className:"w-4 h-4"}),"Stop"]})]}):e.jsxs("button",{onClick:()=>u(E?E.content:"(* No logic deployed *)"),disabled:!E,className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${E?"bg-green-600 text-white hover:bg-green-700":"bg-neutral-200 dark:bg-gray-600 text-neutral-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Jr,{className:"w-4 h-4"}),"Start"]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm dark:text-gray-200",children:["Speed:",e.jsxs("select",{value:n,onChange:k=>b(Number(k.target.value)),className:"px-2 py-1 border border-neutral-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{value:.5,children:"0.5x"}),e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:5,children:"5x"}),e.jsx("option",{value:10,children:"10x"})]})]}),d&&e.jsxs("div",{className:"px-3 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 rounded-md text-sm font-medium",children:["Line: ",d]}),e.jsx("div",{className:`px-3 py-1 rounded-md text-sm font-medium ${s?a?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-neutral-100 dark:bg-gray-700 text-neutral-600 dark:text-gray-300"}`,children:s?a?"Paused":"Running":"Stopped"}),e.jsx("div",{className:`px-3 py-1 rounded-md text-sm font-medium ${E?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:E?`Logic: ${E.name}`:"No Logic Deployed"}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-gray-200 rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors shadow-sm",title:"Simulator Settings",children:[e.jsx(Zt,{className:"w-4 h-4"}),"Settings"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold mb-4 dark:text-white",children:"I/O Panel"}),Object.keys(M).length===0?e.jsx("div",{className:"text-sm text-neutral-500 dark:text-gray-400 text-center py-8",children:"No variables loaded. Start the simulator to see I/O values."}):e.jsxs("div",{className:"space-y-4",children:[Object.entries(M).some(([k,P])=>typeof P=="boolean")&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"Digital I/O"}),e.jsx("div",{className:"space-y-2",children:Object.entries(M).filter(([k,P])=>typeof P=="boolean").map(([k,P])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-50 dark:bg-gray-700 rounded",children:[e.jsx("span",{className:"text-sm font-mono dark:text-gray-300",children:k}),e.jsx("button",{onClick:()=>D(k),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${P?"bg-green-600 text-white":"bg-neutral-300 dark:bg-neutral-600 text-neutral-700 dark:text-neutral-200"}`,children:P?"ON":"OFF"})]},k))})]}),Object.entries(M).some(([k,P])=>typeof P=="number")&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"Analog I/O"}),e.jsx("div",{className:"space-y-3",children:Object.entries(M).filter(([k,P])=>typeof P=="number").map(([k,P])=>{const G=k.includes("Output")||k.includes("output"),U=k.includes("Level")||k.includes("Output")||k.includes("Humidity"),Q=k.includes("Temp")||k.includes("temp"),Z=0,ie=U?100:Q?150:100,J=Q?"C":U?"%":"";return e.jsxs("div",{className:`p-2 rounded ${G?"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"bg-neutral-50 dark:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-mono dark:text-gray-300",children:k}),e.jsxs("span",{className:`text-sm font-medium ${G?"text-blue-800 dark:text-blue-300":"dark:text-gray-200"}`,children:[typeof P=="number"?P.toFixed(2):P,J]})]}),!G&&e.jsx("input",{type:"range",min:Z,max:ie,step:"0.1",value:P,onChange:te=>C(k,Number(te.target.value)),className:"w-full"}),G&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 w-full bg-neutral-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,P))}%`}})}),e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Output (read-only)"})]})]},k)})})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200 dark:border-gray-700",children:e.jsx("button",{className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-gray-200 rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>alert("Snapshot saved"),disabled:Object.keys(M).length===0,children:"Save I/O Snapshot"})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-700 p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold dark:text-white",children:"Trace Log"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-1 px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-gray-200 rounded hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",title:"Download Logs",children:[e.jsx(vi,{className:"w-3 h-3"}),"Export"]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-1 px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-gray-200 rounded hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",title:"Clear Logs",children:[e.jsx(Un,{className:"w-3 h-3"}),"Clear"]})]})]}),e.jsx("div",{className:"flex-1 bg-neutral-900 text-neutral-100 rounded-md p-3 font-mono text-xs overflow-y-auto max-h-96",children:i.length===0?e.jsx("div",{className:"text-neutral-500 dark:text-gray-400",children:"No logs yet. Start the simulator to see activity."}):e.jsx("div",{className:"space-y-1",children:i.map(k=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-neutral-500 flex-shrink-0",children:new Date(k.timestamp).toLocaleTimeString()}),e.jsxs("span",{className:`flex-shrink-0 ${k.type==="error"?"text-red-400":k.type==="warning"?"text-amber-400":k.type==="tag_change"?"text-blue-400":k.type==="drift"?"text-orange-400":k.type==="execution"?"text-purple-400":"text-green-400"}`,children:["[",k.type.toUpperCase(),"]"]}),e.jsx("span",{children:k.message})]},k.id))})})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:e.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-300",children:[e.jsx("strong",{children:" Tip:"})," Click in the editor's left margin to set breakpoints. The simulator will pause when execution reaches a breakpoint line."]})}),e.jsx(yt,{isOpen:L,onClose:()=>w(!1),title:"Simulator Configuration",size:"xl",children:e.jsxs("div",{className:"space-y-8 p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-neutral-200 dark:border-gray-600 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-white",children:"Performance Settings"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mt-1",children:"Configure scan cycle timing and resource limits"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Scan Time (ms)"}),e.jsx("input",{type:"number",min:"1",max:"10000",value:T.scanTimeMs,onChange:k=>A(P=>({...P,scanTimeMs:Number(k.target.value)})),className:"w-full px-4 py-3 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:"PLC scan cycle execution time"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"CPU Quota (%)"}),e.jsx("input",{type:"number",min:"10",max:"100",value:T.computeQuota,onChange:k=>A(P=>({...P,computeQuota:Number(k.target.value)})),className:"w-full px-4 py-3 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:"Maximum CPU usage per scan cycle"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-neutral-200 dark:border-gray-600 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-white",children:"I/O Latency Simulation"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mt-1",children:"Realistic network and device response delays"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Min Latency (ms)"}),e.jsx("input",{type:"number",min:"0",max:"1000",step:"0.1",value:T.ioLatencyMin,onChange:k=>A(P=>({...P,ioLatencyMin:Number(k.target.value)})),className:"w-full px-3 py-2.5 text-sm border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Max Latency (ms)"}),e.jsx("input",{type:"number",min:"0",max:"1000",step:"0.1",value:T.ioLatencyMax,onChange:k=>A(P=>({...P,ioLatencyMax:Number(k.target.value)})),className:"w-full px-3 py-2.5 text-sm border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Jitter (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:T.ioJitter,onChange:k=>A(P=>({...P,ioJitter:Number(k.target.value)})),className:"w-full px-3 py-2.5 text-sm border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-neutral-200 dark:border-gray-600 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-white",children:"Safety & Diagnostics"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mt-1",children:"System monitoring and error detection"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",id:"enableWatchdog",checked:T.enableWatchdog,onChange:k=>A(P=>({...P,enableWatchdog:k.target.checked})),className:"mt-1 h-4 w-4 text-[#FF6A00] focus:ring-[#FF6A00] border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"enableWatchdog",className:"text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Enable Watchdog Timer"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-gray-400 mt-1",children:"Monitors scan cycle execution time for safety"})]})]}),T.enableWatchdog&&e.jsxs("div",{className:"ml-8 space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Watchdog Timeout (ms)"}),e.jsx("input",{type:"number",min:"100",max:"60000",value:T.watchdogTimeout,onChange:k=>A(P=>({...P,watchdogTimeout:Number(k.target.value)})),className:"w-full max-w-xs px-4 py-3 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent transition-colors"}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:"Maximum allowed scan time before fault condition"})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",id:"enableDataTypeValidation",checked:T.enableDataTypeValidation,onChange:k=>A(P=>({...P,enableDataTypeValidation:k.target.checked})),className:"mt-1 h-4 w-4 text-[#FF6A00] focus:ring-[#FF6A00] border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"enableDataTypeValidation",className:"text-sm font-medium text-neutral-700 dark:text-gray-300",children:"Enable Data Type Overflow Modeling"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-gray-400 mt-1",children:"Simulate real PLC data type limitations and overflow behavior"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-neutral-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-6 py-3 bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-700 dark:text-gray-200 rounded-lg hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>{console.log("Applying simulator settings:",T),w(!1)},className:"px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#FF6A00]/90 transition-colors font-medium shadow-sm",children:"Apply Settings"})]})]})})]})}function KR({config:s,onConfigChange:a,targets:n,onClose:i}){const[c,d]=p.useState(s||x()),[u,h]=p.useState("strategy");p.useEffect(()=>{s&&d(s)},[s]);function x(){return{id:`config-${Date.now()}`,name:"New Deployment Configuration",strategy:"atomic",patchStrategy:"quiesce",targets:[],rollbackTriggers:[],deployWatchWindow:5,atomic:{strategy:"atomic",validateBeforeSwap:!0,rollbackOnFailure:!0,tempAreaPath:"/tmp/deploy",swapTimeout:30,cleanupAfterSuccess:!0,preDeployValidation:[],postDeployValidation:[]},dryRunFirst:!1,requireApproval:!1,notificationSettings:{onStart:[],onSuccess:[],onFailure:[],onRollback:[]}}}const f=C=>{const S={...c,...C};d(S),a(S)},y=C=>{const S=c.strategy;f({[S]:{...c[S],...C}})},b=()=>{const C={id:`target-${Date.now()}`,name:"New Target",type:"plc",address:"",runtime:"PandaUra Runtime",status:"offline",capabilities:["deploy","rollback"],canQuiesce:!0};f({targets:[...c.targets,C]})},v=(C,S)=>{const k=[...c.targets];k[C]={...k[C],...S},f({targets:k})},N=C=>{const S=c.targets.filter((k,P)=>P!==C);f({targets:S})},E=()=>{if(!c.canary)return;const C={id:`check-${Date.now()}`,name:"New Health Check",type:"tag_range",enabled:!0,config:{timeout:30,retryCount:3},thresholds:{warning:1,critical:3}};y({healthChecks:[...c.canary.healthChecks||[],C]})},M=()=>{if(!c.canary)return;const C={id:`cohort-${Date.now()}`,name:`Cohort ${(c.canary.cohorts?.length||0)+1}`,fraction:25,targets:[],order:(c.canary.cohorts?.length||0)+1,healthChecks:[],waitTime:300,autoPromote:!1};y({cohorts:[...c.canary.cohorts||[],C]})},L=()=>{const C={id:`trigger-${Date.now()}`,type:"health_check",enabled:!0,threshold:3,watchWindow:5,autoRollback:!1,config:{}};f({rollbackTriggers:[...c.rollbackTriggers,C]})},w=()=>{switch(c.strategy){case"atomic":return T();case"canary":return A();case"chunked":return D();default:return null}},T=()=>{const C=c.atomic||x().atomic;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(qe,{size:20}),e.jsx("span",{className:"font-medium",children:"Atomic Deployment"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:"Compute tree of changed files  Stage in temp area  Validate  Atomic swap  Cleanup"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.validateBeforeSwap,onChange:S=>y({validateBeforeSwap:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Validate before swap"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.rollbackOnFailure,onChange:S=>y({rollbackOnFailure:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Auto rollback on failure"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.cleanupAfterSuccess,onChange:S=>y({cleanupAfterSuccess:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Cleanup temp files on success"})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Temp Area Path"}),e.jsx("input",{type:"text",value:C.tempAreaPath,onChange:S=>y({tempAreaPath:S.target.value}),className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-800 dark:text-gray-200",placeholder:"/tmp/deploy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Swap Timeout (seconds)"}),e.jsx("input",{type:"number",value:C.swapTimeout,onChange:S=>y({swapTimeout:parseInt(S.target.value)}),className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-800 dark:text-gray-200",min:"5",max:"300"})]})]})]})]})},A=()=>{const C=c.canary||{cohorts:[],globalHealthWindow:10,rollbackOnFailure:!0,requireManualPromotion:!1,maxConcurrentTargets:3};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Qr,{size:20}),e.jsx("span",{className:"font-medium",children:"Canary / Phased Deployment"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mb-3",children:"Deploy to cohorts  Run health checks  Promote to next cohort  Repeat"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Health Check Window (minutes)"}),e.jsx("input",{type:"number",value:C.globalHealthWindow,onChange:S=>y({globalHealthWindow:parseInt(S.target.value)}),className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-800 dark:text-gray-200",min:"1",max:"60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Concurrent Targets"}),e.jsx("input",{type:"number",value:C.maxConcurrentTargets,onChange:S=>y({maxConcurrentTargets:parseInt(S.target.value)}),className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-800 dark:text-gray-200",min:"1",max:"10"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.rollbackOnFailure,onChange:S=>y({rollbackOnFailure:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Auto rollback on failure"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.requireManualPromotion,onChange:S=>y({requireManualPromotion:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Require manual promotion between cohorts"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm dark:text-gray-200",children:"Deployment Cohorts"}),e.jsxs("button",{onClick:M,className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 flex items-center gap-1",children:[e.jsx(ir,{size:14}),"Add Cohort"]})]}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[C.cohorts?.map(S=>e.jsx("div",{className:"bg-white dark:bg-gray-700 p-2 rounded border border-gray-200 dark:border-gray-600 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium dark:text-gray-200",children:[S.name," (",S.fraction,"%)"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[S.targets.length," targets"]}),e.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:e.jsx(R5,{size:12})})]})]})},S.id)),(!C.cohorts||C.cohorts.length===0)&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:'No cohorts configured. Click "Add Cohort" to create deployment phases.'})]})]})]})},D=()=>{const C=c.chunked||{autoDetectBoundaries:!0,maxChunkSize:50,dependencyOrdering:!0,stageWiseMode:!1,parallelChunks:!1,rollbackChunkOnFailure:!0};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[e.jsx(cv,{size:20}),e.jsx("span",{className:"font-medium",children:"Large Project Chunking"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-3",children:"Auto-split by logical boundaries  Deploy chunks with dependency ordering  Stage-wise mode available"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Chunk Size (files)"}),e.jsx("input",{type:"number",value:C.maxChunkSize,onChange:S=>y({maxChunkSize:parseInt(S.target.value)}),className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-800 dark:text-gray-200",min:"1",max:"200"})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.autoDetectBoundaries,onChange:S=>y({autoDetectBoundaries:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Auto-detect logical boundaries"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.dependencyOrdering,onChange:S=>y({dependencyOrdering:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Use dependency ordering (topological sort)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.stageWiseMode,onChange:S=>y({stageWiseMode:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Stage-wise mode (force chunk boundaries)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.parallelChunks,onChange:S=>y({parallelChunks:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Deploy independent chunks in parallel"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:C.rollbackChunkOnFailure,onChange:S=>y({rollbackChunkOnFailure:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Rollback chunk on failure"})]})]}),e.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[e.jsx("div",{className:"font-medium mb-1",children:"Boundary Types:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Per-program: Each PROGRAM block becomes a chunk"}),e.jsx("li",{children:"Per-controller: Files grouped by target controller"}),e.jsx("li",{children:"Per-IO block: I/O configuration files grouped separately"})]})]})]})]})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Deployment Strategy Configuration"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure deployment strategy, targets, and rollback behavior"})]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:e.jsx(Zt,{size:24})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600 px-6",children:e.jsx("div",{className:"flex space-x-6",children:[{id:"strategy",label:"Strategy",icon:Zt},{id:"targets",label:"Targets",icon:Ro},{id:"health",label:"Health Checks",icon:Fe},{id:"rollback",label:"Rollback",icon:Dd}].map(({id:C,label:S,icon:k})=>e.jsxs("button",{onClick:()=>h(C),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${u===C?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx(k,{size:16}),S]},C))})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)] dark:bg-gray-800",children:[u==="strategy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Configuration Name"}),e.jsx("input",{type:"text",value:c.name,onChange:C=>f({name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-gray-200",placeholder:"My Deployment Strategy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Deploy Watch Window (minutes)"}),e.jsx("input",{type:"number",value:c.deployWatchWindow,onChange:C=>f({deployWatchWindow:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-gray-200",min:"1",max:"60"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Deployment Strategy"}),e.jsx("div",{className:"flex space-x-4",children:[{value:"atomic",label:"Atomic Deploy (Default)",icon:qe},{value:"canary",label:"Canary / Phased Deploy",icon:Qr},{value:"chunked",label:"Large Project Chunking",icon:cv}].map(({value:C,label:S,icon:k})=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"strategy",value:C,checked:c.strategy===C,onChange:P=>f({strategy:P.target.value}),className:"text-[#FF6A00]"}),e.jsx(k,{size:16,className:"dark:text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:S})]},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Patch Strategy"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"patchStrategy",value:"quiesce",checked:c.patchStrategy==="quiesce",onChange:C=>f({patchStrategy:C.target.value}),className:"text-[#FF6A00]"}),e.jsx(Ch,{size:16,className:"dark:text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Quiesce (Pause system)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"patchStrategy",value:"live",checked:c.patchStrategy==="live",onChange:C=>f({patchStrategy:C.target.value}),className:"text-[#FF6A00]"}),e.jsx(Jr,{size:16,className:"dark:text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Live Patch (Hot swap)"})]})]})]})]})]}),w(),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"Common Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.dryRunFirst,onChange:C=>f({dryRunFirst:C.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Run dry run simulation first"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.requireApproval,onChange:C=>f({requireApproval:C.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Require manual approval before deployment"})]})]})]})]}),u==="targets"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Deployment Targets"}),e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-orange-600 flex items-center gap-2",children:[e.jsx(ir,{size:16}),"Add Target"]})]}),e.jsxs("div",{className:"space-y-3",children:[c.targets.map((C,S)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ro,{size:16,className:"text-gray-500 dark:text-gray-400"}),e.jsx("input",{type:"text",value:C.name,onChange:k=>v(S,{name:k.target.value}),className:"font-medium border-none bg-transparent dark:text-gray-200",placeholder:"Target Name"})]}),e.jsx("button",{onClick:()=>N(S),className:"text-red-600 hover:text-red-800",children:e.jsx(Un,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Type"}),e.jsxs("select",{value:C.type,onChange:k=>v(S,{type:k.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"plc",children:"PLC"}),e.jsx("option",{value:"hmi",children:"HMI"}),e.jsx("option",{value:"scada",children:"SCADA"}),e.jsx("option",{value:"cluster",children:"Cluster"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:C.address,onChange:k=>v(S,{address:k.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-800 dark:text-gray-200",placeholder:"192.168.1.100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Runtime"}),e.jsx("input",{type:"text",value:C.runtime,onChange:k=>v(S,{runtime:k.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-800 dark:text-gray-200",placeholder:"PandaUra Runtime"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:C.canQuiesce,onChange:k=>v(S,{canQuiesce:k.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"}),"Can Quiesce"]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs ${C.status==="online"?"bg-green-100 text-green-700":C.status==="offline"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:C.status})]})]},C.id)),c.targets.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ro,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No deployment targets configured."}),e.jsx("p",{className:"text-sm",children:"Add targets to define where your deployment will be executed."})]})]})]}),u==="health"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Health Checks"}),e.jsxs("button",{onClick:E,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-orange-600 flex items-center gap-2",disabled:c.strategy!=="canary",children:[e.jsx(ir,{size:16}),"Add Check"]})]}),c.strategy!=="canary"&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-300",children:[e.jsx(jt,{size:16}),e.jsx("span",{className:"font-medium",children:"Health checks are only available for Canary deployments"})]}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"Switch to Canary/Phased deployment strategy to configure health monitoring."})]}),c.strategy==="canary"&&c.canary&&e.jsxs("div",{className:"space-y-3",children:[c.canary.healthChecks?.map(C=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{size:16,className:C.enabled?"text-green-600":"text-gray-400"}),e.jsx("input",{type:"text",value:C.name,className:"font-medium border-none bg-transparent flex-1 dark:text-gray-200",placeholder:"Health Check Name"}),e.jsxs("label",{className:"flex items-center gap-1 text-sm dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:C.enabled,className:"rounded border-gray-300 dark:border-gray-600"}),"Enabled"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Type"}),e.jsxs("select",{value:C.type,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"script",children:"Test Script"}),e.jsx("option",{value:"tag_range",children:"Tag Value Range"}),e.jsx("option",{value:"exception_log",children:"Exception Logs"}),e.jsx("option",{value:"resource_usage",children:"Resource Usage"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Timeout (seconds)"}),e.jsx("input",{type:"number",value:C.config.timeout||30,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Warning Threshold"}),e.jsx("input",{type:"number",value:C.thresholds.warning,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Critical Threshold"}),e.jsx("input",{type:"number",value:C.thresholds.critical,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200"})]})]})]},C.id))||[],(!c.canary.healthChecks||c.canary.healthChecks.length===0)&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Fe,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No health checks configured."}),e.jsx("p",{className:"text-sm",children:"Add health checks to monitor deployment success."})]})]})]}),u==="rollback"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Rollback Triggers"}),e.jsxs("button",{onClick:L,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-orange-600 flex items-center gap-2",children:[e.jsx(ir,{size:16}),"Add Trigger"]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Automated Rollback Conditions"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Triggers activated within the deploy watch window (",c.deployWatchWindow," minutes) will initiate rollback procedures."]})]}),e.jsxs("div",{className:"space-y-3",children:[c.rollbackTriggers.map(C=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Dd,{size:16,className:C.enabled?"text-red-600":"text-gray-400"}),e.jsxs("select",{value:C.type,className:"font-medium border-none bg-transparent dark:text-gray-200",children:[e.jsx("option",{value:"health_check",children:"Failed Health Checks"}),e.jsx("option",{value:"exception_count",children:"Unhandled Exceptions"}),e.jsx("option",{value:"tag_limit",children:"Critical Tag Limits"}),e.jsx("option",{value:"resource_usage",children:"Excessive Resource Usage"}),e.jsx("option",{value:"manual",children:"Manual Trigger"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm ml-auto dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:C.enabled,className:"rounded border-gray-300 dark:border-gray-600"}),"Enabled"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Threshold"}),e.jsx("input",{type:"number",value:C.threshold,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Watch Window (min)"}),e.jsx("input",{type:"number",value:C.watchWindow,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-800 dark:text-gray-200"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-1 text-sm dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:C.autoRollback,className:"rounded border-gray-300 dark:border-gray-600"}),"Auto Rollback"]})})]})]},C.id)),c.rollbackTriggers.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Dd,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No rollback triggers configured."}),e.jsx("p",{className:"text-sm",children:"Add triggers to automatically detect and respond to deployment failures."})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Strategy: ",e.jsx("span",{className:"font-medium capitalize dark:text-gray-300",children:c.strategy})," | Targets: ",e.jsx("span",{className:"font-medium dark:text-gray-300",children:c.targets.length})," | Triggers: ",e.jsx("span",{className:"font-medium dark:text-gray-300",children:c.rollbackTriggers.length})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:()=>{a(c),i()},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-orange-600",children:"Save Configuration"})]})]})]})})}function Ck({environment:s}){const{activeProject:a}=jr(),[n,i]=p.useState([]),[c,d]=p.useState(null),[u,h]=p.useState([]),[x,f]=p.useState([]),[y,b]=p.useState(!1),[v,N]=p.useState(new Set),[E,M]=p.useState(!1),[L,w]=p.useState(!1),[T,A]=p.useState(!1),[D,C]=p.useState(!1),[S,k]=p.useState(""),[P,G]=p.useState(!1),[U,Q]=p.useState(""),[Z,ie]=p.useState(""),[J,te]=p.useState(!1),[$,_]=p.useState(null),[z,Y]=p.useState(null),[se,O]=p.useState(!0),[K,ue]=p.useState([]),[oe,Ee]=p.useState(null),[we,Oe]=p.useState(!1),[Ne,Ge]=p.useState(null),[At,Pt]=p.useState("atomic"),[Qt,Vt]=p.useState([]),[ye,H]=p.useState([]),[Ae,Ve]=p.useState(null),[Ze,$t]=p.useState(!1),[Ut,Nt]=p.useState({event_type:"",actor:"",resource:""}),[zs,Js]=p.useState(!1),[Le,Vs]=p.useState(null),[ns,ms]=p.useState(null),[ws,Hs]=p.useState(!1),[Wt,ha]=p.useState(!1),[xa,$s]=p.useState(!1),[Tt,js]=p.useState(!1),[kt,ea]=p.useState(null);console.log("Deploy console loading:",se,"releases count:",K.length),console.log("Active deployment ID:",kt),p.useEffect(()=>{c&&Y(c.id)},[c]);const[is,fa]=p.useState([]),[rt,ta]=p.useState(null),[He,Jt]=p.useState([]),[ls,Gs]=p.useState(!1);p.useEffect(()=>{const F=[{id:"target-primary",name:`${s.charAt(0).toUpperCase()+s.slice(1)} Runtime Primary`,type:"plc",address:s==="staging"?"192.168.1.100":"10.0.1.50",runtime:"PandaUra Runtime v2.1",status:"online",capabilities:["deploy","rollback","health-check"],canQuiesce:!0},{id:"target-backup",name:`${s.charAt(0).toUpperCase()+s.slice(1)} Runtime Backup`,type:"plc",address:s==="staging"?"192.168.1.101":"10.0.1.51",runtime:"PandaUra Runtime v2.1",status:"online",capabilities:["deploy","rollback"],canQuiesce:!0}];Vt(F)},[s]),p.useEffect(()=>{a&&Ka()},[a,s]),p.useEffect(()=>{zs&&et()},[zs,Ut]);const Ka=async()=>{if(a)try{O(!0);const F=await Xt.getReleases(a.id);if(F.success){const he=F.releases.filter(fe=>fe.stage==="staging"||fe.stage==="qa").map(fe=>({id:fe.id,versionId:fe.versionId||fe.version_id,version:fe.version,author:fe.createdBy||fe.created_by,targetRuntimes:fe.metadata?.targetRuntimes||[`${s.charAt(0).toUpperCase()+s.slice(1)}-Runtime`],status:"queued",priority:fe.metadata?.priority||"normal",scheduledTime:fe.deployedAt,releaseData:fe}));i(he),ue(F.releases)}}catch(F){console.error("Failed to load releases:",F),i([])}finally{O(!1)}};p.useEffect(()=>{c&&a&&es(c.id)},[c,a]);const es=async F=>{try{console.log(" Loading deployment details for:",F);const ce=n.find(he=>he.id===F);if(console.log(" Found selectedDeploy:",!!ce,ce?.releaseData?"with release data":"without release data"),ce?.releaseData)console.log(" Setting selectedRelease:",ce.releaseData.id),ta(ce.releaseData),await me(ce.releaseData),await I(ce.releaseData.id);else{console.warn(" No release data found for deploy:",F);try{const he=await Xt.getRelease(a.id,F);he.success&&he.release&&(console.log(" Found release directly:",he.release.id),ta(he.release),await me(he.release),await I(he.release.id))}catch(he){console.warn("Could not load release directly:",he)}}try{const he=await ko.getDeploymentApprovals(F);he.success&&he.approvals?.length>0?f(he.approvals):f([{id:"safety-approval",approver:"Safety Engineer",status:"pending"}])}catch(he){console.error("Failed to load approvals:",he),f([{id:"safety-approval",approver:"Safety Engineer",status:"pending"}])}await mt()}catch(ce){console.error("Failed to load deployment details:",ce)}},I=async F=>{try{console.log(" Loading safety checks for release:",F);const ce=await Xt.getReleaseSafetyChecks(F);if(ce.success&&ce.safetyChecks.hasResults){const he=ce.safetyChecks.results.checks||[];console.log(" Loaded safety checks from release:",he.length,"checks");const fe=he.map((Te,ve)=>({id:`check-${ve}`,name:Te.name,status:Te.status==="passed"?"passed":Te.status==="failed"?"failed":"warning",message:Te.message||Te.details||"No details available",severity:Te.severity||"warning"}));h(fe)}else console.log(" No safety check results found for release, will run them when deploy starts"),h([])}catch(ce){console.error("Failed to load safety checks from release:",ce),h([])}},me=async F=>{if(!(!a||!F))try{if(Gs(!0),F.snapshotId){const ce=await Xt.getSnapshots(a.id);if(ce.success){const he=ce.snapshots.find(fe=>fe.id===F.snapshotId);if(he){console.log(" Loading files for version:",he.versionId);const fe=await Xt.getVersionFiles(he.versionId);if(fe.success&&fe.files){const Te=fe.files;console.log(" API returned files:",Te.length,Te.map(Be=>({path:Be.filePath,type:Be.fileType,size:Be.fileSizeBytes,hasContent:!!Be.content,contentLength:Be.content?Be.content.length:0})));const ve=[".st",".scl",".fbd",".lad",".sfc",".il"],nt=Te.filter(Be=>ve.some(at=>Be.filePath.toLowerCase().endsWith(at))),gt=Te.filter(Be=>{const at=Be.filePath.toLowerCase();return!at.includes("tags")&&!at.endsWith(".json")&&!at.includes("config")});console.log(" Filtered logic files:",nt.length,nt.map(Be=>({path:Be.filePath,hasContent:!!Be.content,contentLength:Be.content?Be.content.length:0}))),console.log(" Non-tag files for display:",gt.length),fa(gt),Jt(nt)}else{console.log(" Version files API did not return files. Result:",fe);const Te=[{filePath:"src/Main_Program.st",changeType:"modified",size:4567,content:`PROGRAM Main_Program
VAR
  Temperature_PV : REAL;
  Pressure_SP : REAL := 15.0;
END_VAR

// Main control logic
IF Temperature_PV > 75.0 THEN
  Cooling_Valve := TRUE;
END_IF;
END_PROGRAM`,lastModified:new Date().toISOString()},{filePath:"src/PID_Controller.st",changeType:"added",size:2345,content:`FUNCTION_BLOCK FB_PIDController
VAR_INPUT
  SetPoint : REAL;
  ProcessValue : REAL;
END_VAR

// PID control logic
Output := Kp * Error + Ki * Integral + Kd * Derivative;
END_FUNCTION_BLOCK`,lastModified:new Date().toISOString()},{filePath:"src/Safety_Logic.st",changeType:"modified",size:1890,content:`PROGRAM Safety_Logic
VAR
  Emergency_Stop : BOOL;
  Safety_OK : BOOL;
END_VAR

// Safety interlock logic
Safety_OK := NOT Emergency_Stop AND Temperature_PV < 100.0;
END_PROGRAM`,lastModified:new Date().toISOString()},{filePath:"tags/Process_Tags.json",changeType:"modified",size:3456},{filePath:"config/Runtime_Config.json",changeType:"added",size:1234}];fa(Te),Jt(Te.filter(ve=>ve.filePath.endsWith(".st"))),console.log(" Loaded mock files:",Te.length,"Logic files:",Te.filter(ve=>ve.filePath.endsWith(".st")).length)}}else console.log(" No snapshot found for release:",F)}else console.log(" Failed to get snapshots or no snapshots found")}else console.log(" Release has no snapshotId:",F)}catch(ce){console.error("Failed to load snapshot files:",ce),fa([]),Jt([])}finally{Gs(!1),console.log(" Finished loading files. Logic files count:",He.length)}},ke=F=>["VAR","END_VAR","VAR_INPUT","VAR_OUTPUT","VAR_IN_OUT","VAR_TEMP","VAR_EXTERNAL","PROGRAM","END_PROGRAM","FUNCTION","END_FUNCTION","FUNCTION_BLOCK","END_FUNCTION_BLOCK","IF","THEN","ELSE","ELSIF","END_IF","CASE","OF","END_CASE","FOR","TO","BY","DO","END_FOR","WHILE","END_WHILE","REPEAT","UNTIL","END_REPEAT","AND","OR","XOR","NOT","MOD","TRUE","FALSE","BOOL","BYTE","WORD","DWORD","LWORD","SINT","INT","DINT","LINT","USINT","UINT","UDINT","ULINT","REAL","LREAL","TIME","DATE","STRING","ARRAY","STRUCT","END_STRUCT","TYPE","END_TYPE","GE","LE","GT","LT","EQ","NE","ADD","SUB","MUL","DIV"].includes(F),tt=F=>{let ce=0,he=0,fe=0,Te=0,ve=[],nt=[];F.forEach(Be=>{if(!Be.content)return;const at=Be.content.toUpperCase(),Us=at.match(/PROGRAM\s+\w+/g);Us&&(ce+=Us.length);const Ss=at.match(/FUNCTION\s+\w+/g);Ss&&(he+=Ss.length);const Ot=at.match(/FUNCTION_BLOCK\s+\w+/g);Ot&&(fe+=Ot.length);const Ns=at.match(/VAR[^;]*?END_VAR/gs);Ns&&Ns.forEach(hs=>{const _t=hs.match(/^\s*\w+\s*:/gm);_t&&(Te+=_t.length)});const Ks=Be.content;console.log(` Analyzing file: ${Be.filePath}`),console.log(" File content preview:",Ks.substring(0,200));const Xe=[/VAR[\s\S]*?END_VAR/gi,/VAR[^]*?END_VAR/gi,/VAR\s[\s\S]*?\sEND_VAR/gi];let Bt=[];for(const hs of Xe){const _t=Ks.match(hs);if(_t){Bt=_t,console.log(` Found ${_t.length} VAR blocks using pattern: ${hs}`);break}}Bt.length===0&&(console.log(` No VAR blocks found in ${Be.filePath}`),Ks.split(`
`).forEach((_t,tn)=>{(_t.toUpperCase().includes("VAR")||_t.includes(":"))&&console.log(` Line ${tn+1}: ${_t.trim()}`)})),Bt.forEach((hs,_t)=>{console.log(` Processing VAR block ${_t+1}:`),console.log(hs),hs.split(`
`).forEach(qn=>{const ja=qn.trim();if(ja.toUpperCase().includes("VAR")||ja.toUpperCase().includes("END_VAR")||ja.startsWith("//")||ja.startsWith("(*")||ja.length===0)return;const sn=ja.match(/^\s*([A-Z_a-z][A-Z0-9_a-z]*)\s*:/i);if(sn){const dr=sn[1].trim().toUpperCase();dr&&!ke(dr)?(ve.push(dr),console.log(`   Found tag declaration: ${dr} in line: "${ja}"`)):ke(dr)&&console.log(`   Skipped reserved word: ${dr}`)}else console.log(`   No match for line: "${ja}"`)})}),Be.content.split(`
`).forEach((hs,_t)=>{hs=hs.trim().toUpperCase(),hs.includes("IF ")&&!at.includes("END_IF")&&nt.push(`${Be.filePath}:${_t+1} - Missing END_IF`),hs.includes("PROGRAM ")&&!at.includes("END_PROGRAM")&&nt.push(`${Be.filePath}:${_t+1} - Missing END_PROGRAM`)})});const gt=[...new Set(ve)];return console.log(" Tag analysis results:"),console.log("  - Files analyzed:",F.length),console.log("  - Total tag references found:",ve.length),console.log("  - Unique tags:",gt.length),console.log("  - Tag list:",gt),console.log("  - Raw tag references:",ve.slice(0,20)),{totalPrograms:ce,totalFunctions:he,totalFunctionBlocks:fe,totalVariables:Te,uniqueTags:gt,syntaxErrors:nt,fileCount:F.length,totalLines:F.reduce((Be,at)=>Be+(at.content?at.content.split(`
`).length:0),0),totalSize:F.reduce((Be,at)=>Be+(at.content?at.content.length:0),0)}},Se=async F=>{if(console.log(" Starting safety checks..."),console.log(" Current state:",{selectedDeploy:!!c,selectedRelease:!!rt,snapshotId:rt?.snapshotId,logicFiles:He.length,snapshotFiles:is.length,loadingFiles:ls}),!c||!rt){console.warn(" No deployment or release selected for safety checks"),alert("Please select a deployment from the queue first");return}if(ls){console.warn(" Files are still loading, please wait..."),alert("Files are still loading from snapshot. Please wait a moment and try again.");return}if(He.length===0){console.warn(" No logic files loaded for safety checks"),console.log(" Available files:",is.map(fe=>fe.filePath)),alert(`No logic files found in snapshot ${rt.snapshotId}. Available files: ${is.map(fe=>fe.filePath).join(", ")}`);return}console.log(` Running safety checks on ${He.length} logic files from snapshot ${rt.snapshotId}:`),He.forEach(fe=>console.log("  ",fe.filePath,`(${fe.content?fe.content.length:0} chars)`)),console.log(" About to analyze logic files:",He.length);const ce=tt(He);console.log(" Analysis complete, unique tags found:",ce.uniqueTags.length);const he=[{id:"syntax-semantic",name:"1. Syntax & Semantic Validation",status:"running",message:"ST parser + semantic analyzer for all vendor dialects; errors are blocking",severity:"critical"},{id:"tag-dependencies",name:"2. Variable Declaration Validation",status:"pending",message:"Verify all variables are properly declared in VAR blocks with correct type annotations",severity:"critical"},{id:"critical-overwrites",name:"3. Critical Tag Overwrite Detection",status:"pending",message:"Tags flagged as critical (in Tag DB) must not be changed without manual approval; if changed, block deploy until approved",severity:"critical"},{id:"resource-limits",name:"4. Resource Usage & Limits",status:"pending",message:"Detect increased memory/cpu estimate of compiled logic (if we support compile) or large file size that may choke target",severity:"warning"},{id:"race-conditions",name:"5. Simultaneous Writes / Race Condition Analyzer",status:"pending",message:"Static analysis to detect multiple tasks writing to same physical output without arbitration",severity:"critical"},{id:"io-conflicts",name:"6. IO Address Conflicts",status:"pending",message:"Detect if two tags map to same physical address",severity:"critical"},{id:"vendor-export",name:"7. Vendor Export Validity",status:"pending",message:"If target runtime requires vendor binary, run vendor exporter and validate (no unresolved symbols)",severity:"critical"},{id:"runtime-lock",name:"8. Runtime Lock & Maintenance Window",status:"pending",message:"If target is live runtime with locks, ensure maintenance window or request one; check active process constraints",severity:"warning"}];h(he);for(let fe=0;fe<he.length;fe++){await new Promise(gt=>setTimeout(gt,1e3+Math.random()*500));const Te=[...he],ve=Te[fe],nt=ve.severity==="critical"?Math.random()>.2:Math.random()>.3;switch(ve.status=nt?"passed":ve.severity==="critical"?"failed":"warning",ve.id){case"syntax-semantic":const gt=ce.syntaxErrors.length>0;ve.status=gt?"failed":"passed",ve.message=gt?`${ce.syntaxErrors.length} syntax errors found`:"All ST code validated successfully",ve.details=gt?ce.syntaxErrors:[`Parsed ${ce.totalPrograms} programs, ${ce.totalFunctions} functions, ${ce.totalFunctionBlocks} function blocks`,`${ce.totalVariables} variables declared`,`${ce.totalLines} lines of code analyzed`,"No syntax errors found"];break;case"tag-dependencies":const Be=ce.uniqueTags.length;console.log(" Tag dependency check - using analysisResults:",{uniqueTagsLength:Be,uniqueTags:ce.uniqueTags}),ve.status="passed",ve.message=Be>0?`All ${Be} variables properly declared and analyzed`:"No variable declarations found - no dependencies to check",ve.details=Be>0?[` ${Be} variables declared in VAR blocks`," All variables have proper type declarations",`Variables found: ${ce.uniqueTags.slice(0,8).join(", ")}${Be>8?"...":""}`,`Files analyzed: ${ce.fileCount} | Lines: ${ce.totalLines}`]:["No VAR blocks found","No tag dependencies to validate"];break;case"critical-overwrites":const at=Math.floor(ce.uniqueTags.length*.3);ve.message=nt?"No critical tags modified":"Critical safety tag may be overwritten",ve.details=nt?[`Scanned ${ce.uniqueTags.length} declared variables`,`${at} marked as critical`,"No critical modifications detected"]:[`${ce.uniqueTags.length} variables analyzed`,`${at} flagged as critical`,"Manual safety approval required"];break;case"resource-limits":const Us=(ce.totalSize/1024).toFixed(1),Ss=(ce.totalSize*2.5/1024).toFixed(1);ve.message=`Bundle size: ${Us}KB, estimated runtime memory: ${Ss}KB`,ve.details=[`${ce.fileCount} logic files`,`${ce.totalLines} lines of code`,`Bundle size: ${Us}KB`,`Estimated memory usage: ${Ss}KB`];break;case"race-conditions":const Ot=ce.uniqueTags.filter(Bt=>Bt.includes("OUTPUT")||Bt.includes("VALVE")||Bt.includes("MOTOR")||Bt.includes("PUMP")).length;ve.message=nt?"No race conditions detected":"Potential race condition in output variables",ve.details=nt?[`Analyzed ${Ot} output variables`,`${ce.totalPrograms+ce.totalFunctions} code blocks checked`,"No conflicts found"]:[`${Ot} output variables found`,"Multiple code blocks may write to same outputs","Recommendation: Add interlock logic"];break;case"io-conflicts":ve.message=nt?"No IO address conflicts":"Potential IO address conflicts detected",ve.details=nt?[`Validated ${ce.uniqueTags.length} variable declarations`,"No address conflicts detected","All variables properly mapped"]:[`${ce.uniqueTags.length} variables require IO mapping`,"Potential address conflicts detected","Verify IO configuration before deployment"];break;case"vendor-export":ve.message=nt?"Vendor export validation passed":"Unresolved symbol in vendor export",ve.details=nt?["Generated vendor binary: 1.2MB","All symbols resolved"]:["Missing symbol: FB_PIDController","Vendor library version mismatch"];break;case"runtime-lock":ve.message=nt?"Maintenance window available":"Runtime locked - maintenance window required",ve.details=nt?["Target runtime idle","No active processes blocking"]:["3 active control processes","Recommend scheduling for 2:00 AM maintenance window"];break;case"dry-run":const Ns=ce.uniqueTags.length;ve.message=nt?"Dry run completed - no behavioral changes":"Dry run detected behavioral changes",ve.details=nt?[`Simulated ${Ns} variables for 60 seconds`,"All values within expected ranges","No behavioral anomalies detected"]:[`${Ns} variables simulated`,"Behavioral changes detected","Review control logic before deployment"];break;case"approval-policy":const Ks=Te.filter(Bt=>Bt.status==="failed"&&Bt.severity==="critical").length,Xe=Te.filter(Bt=>Bt.status==="warning").length;Ks>0?(ve.status="failed",ve.message=`${Ks} critical issues require approval`,ve.details=["2 safety engineer approvals required","Operations manager sign-off needed","Manual override documentation required"]):Xe>2?(ve.status="warning",ve.message=`${Xe} warnings require single approval`,ve.details=["1 senior engineer approval required"]):(ve.status="passed",ve.message="No additional approvals required",ve.details=["Standard deployment - proceed with normal workflow"]);break}h([...Te]),fe<he.length-1&&(Te[fe+1].status="running",h([...Te]))}},mt=async()=>{console.log("Tag metrics now handled by dynamic analysis from logic files")},Qe=async()=>{Hs(!0)},os=async()=>{Hs(!1),ha(!0),$s(!0)},Ys=async()=>{console.log(" Approving atomic deployment - setting atomicApproved to true"),$s(!1),js(!0),setTimeout(()=>{console.log(" Resetting atomic approval state after 5 seconds"),js(!1),ha(!1)},5e3)},Ts=async()=>{if(console.log(" handleStartDeploy called"),console.log("selectedDeploy:",c),console.log("selectedRelease:",rt),!c||!rt){console.warn(" Missing deployment or release selection"),alert("No deployment selected");return}const F=u.filter(he=>he.status==="failed"&&he.severity==="critical"),ce=u.some(he=>he.status==="warning"||he.status==="failed");if(F.length>0||ce)if(st)console.log(` Deployment authorized by ${x.length} approvals despite ${F.length} critical issues`);else{const he=u.filter(ve=>ve.status==="warning").length,fe=F.length;let Te="Deployment authorization required:\\n\\n";fe>0&&(Te+=` ${fe} critical safety issue(s) detected\\n`),he>0&&(Te+=` ${he} warning(s) detected\\n`),Te+=`\\nRequired approvals: ${x.filter(ve=>ve.status==="approved").length}/${x.length} completed\\n\\n`,Te+="Please complete the dynamic approval workflow before proceeding with deployment.",alert(Te);return}try{M(!0),console.log(" Starting enhanced atomic deployment..."),console.log(" Starting local atomic deployment execution for release:",rt.id);const he={releaseId:rt.id,strategy:At,environment:s,vendorConfig:{vendor:"rockwell",ip:s==="staging"?"192.168.1.100":"10.0.1.50",tempDir:"./exports/rockwell"},deploymentConfig:{requiresSafePause:F.length>0,rollbackOnFailure:!0}};console.log(" Deploy request:",he);const fe=`deploy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;ea(fe);const Te={id:fe,deploymentId:fe,configId:"default-config",strategy:At,status:"running",startTime:new Date().toISOString(),progress:0,logs:[],currentPhase:"Initializing",rollbacks:[]};Ge(Te),console.log(" Deployment execution state set:",Te),setTimeout(()=>{console.log(" Verifying deployment state after set")},100),console.log(" Starting local atomic deployment with ID:",fe),console.log(" Executing atomic deployment with logs...",Te),setTimeout(()=>{Xs(Te).catch(ve=>{console.error(" Deployment execution failed:",ve),M(!1)})},100)}catch(he){console.error(" Failed to start deployment:",he),M(!1),Q(`Failed to start deployment: ${he.message}`),ie("Deployment Error"),G(!0),console.log(" Deployment failed but page remains functional")}},Xs=async F=>{console.log(" Starting executeAtomicDeployment function");const ce=oe?.atomic||{tempAreaPath:"/tmp/atomic-deploy",validateBeforeSwap:!0,cleanupAfterSuccess:!0,rollbackOnFailure:!0};console.log(" Using deployment config:",ce);const he=Te=>{const ve={...F,...Te};return Ge(ve),ve},fe=(Te,ve="info")=>{const nt={id:`log-${Date.now()}`,timestamp:new Date().toISOString(),level:ve,message:Te,source:"atomic-deployer"};F.logs.push(nt),he({logs:[...F.logs]})};try{console.log(" Starting atomic deployment phases"),he({currentPhase:"Phase 1: Initialize",progress:5,atomicState:{phase:"staging",stagedFiles:[],validationResults:[]}}),fe(" Atomic Deploy (Vendor Adapter) - Initializing deployment"),fe("Computing change tree and validating deployment target"),console.log(" Phase 1 initialized"),await new Promise(Xe=>setTimeout(Xe,1500)),he({currentPhase:"Phase 2: Staging",progress:15,atomicState:{phase:"staging",stagedFiles:[],validationResults:[]}}),fe(" Staging files to temporary area"),fe(`Staging directory: ${ce.tempAreaPath}`),await new Promise(Xe=>setTimeout(Xe,1800));const ve=(is||[{filePath:"Main.st",size:1024},{filePath:"Config.xml",size:512},{filePath:"Program.acd",size:2048}]).map(Xe=>Xe.filePath);he({progress:25,atomicState:{...F.atomicState,stagedFiles:ve}}),fe(` Staged ${ve.length} files for atomic deployment`),console.log(" Files staged successfully:",ve),he({currentPhase:"Phase 3: Validation",progress:30}),fe(" Running pre-deployment validation checks"),await new Promise(Xe=>setTimeout(Xe,1200)),fe(" Validation complete - Ready for atomic transfer"),he({currentPhase:"Phase 4: Transfer",progress:35}),fe(" Starting chunked file transfer to target system");const nt=5;for(let Xe=1;Xe<=nt;Xe++){await new Promise(In=>setTimeout(In,800));const Bt=35+Xe/nt*25;he({progress:Bt}),fe(` Chunk ${Xe}/${nt} transferred ${Math.round(Xe/nt*100)}% complete`)}fe(" Upload Complete All chunks transferred successfully"),he({currentPhase:"Phase 5: Verification",progress:65}),fe(" Verifying transferred files integrity"),await new Promise(Xe=>setTimeout(Xe,1e3)),fe(" File integrity verified - Ready for atomic swap"),he({currentPhase:"Phase 6: Atomic Apply",progress:75,atomicState:{...F.atomicState,phase:"swapping",swapStartTime:new Date().toISOString()}}),fe(" Initiating atomic pointer swap"),fe(" Swapping Pointer."),await new Promise(Xe=>setTimeout(Xe,2e3)),he({progress:90}),fe(" Atomic swap completed successfully"),ce.cleanupAfterSuccess&&(he({atomicState:{...F.atomicState,phase:"cleanup"}}),fe("Cleaning up temporary files"),await new Promise(Xe=>setTimeout(Xe,1e3))),he({currentPhase:"Completed",status:"completed",progress:100,endTime:new Date().toISOString()}),fe(" Atomic deployment completed successfully"),fe(" System is now running the new deployment"),fe(" Deployment metrics and monitoring active"),await new Promise(Xe=>setTimeout(Xe,1e3)),fe(" Verification & Audit - Validating deployment integrity"),fe(" Deploy Success - L5X checksum verified");const gt=F.logs[0]?.timestamp,Be=gt?Math.floor((new Date().getTime()-new Date(gt).getTime())/1e3):52,at=u.filter(Xe=>Xe.status==="failed"&&Xe.severity==="critical"),Us=u.some(Xe=>Xe.status==="warning"||Xe.status==="failed"),Ss=at.length>0||Us,Ot=Ss&&st,Ns=[];Ot?Ns.push({action:"Override",timestamp:new Date(Date.now()-6e4).toISOString(),user:"Approval System",details:`${at.length} critical issue(s) and ${u.filter(Xe=>Xe.status==="warning").length} warning(s) overridden by ${x.filter(Xe=>Xe.status==="approved").length} approval(s)`}):Ss?Ns.push({action:"Safety Check",timestamp:new Date(Date.now()-6e4).toISOString(),user:"Safety System",details:`${at.length} critical issue(s) detected but deployment blocked until resolved`}):Ns.push({action:"Safety Check",timestamp:new Date(Date.now()-6e4).toISOString(),user:"Safety System",details:"All safety checks passed - no overrides required"}),Ns.push({action:"Deploy",timestamp:new Date(Date.now()-3e4).toISOString(),user:"Atomic Deployer",details:"Atomic deployment executed successfully"},{action:"Verification",timestamp:new Date().toISOString(),user:"System",details:"L5X checksum verified and validated"});const Ks={releaseId:rt.id,releaseName:rt.name,deploymentTime:new Date().toISOString(),strategy:"atomic",wasOverridden:Ot,safetyStatus:Ot?"overridden":Ss?"blocked":"passed",phases:[{name:"Initialize",duration:"0:05",status:"completed"},{name:"Staging",duration:"0:18",status:"completed"},{name:"Validation",duration:"0:12",status:"completed"},{name:"Transfer",duration:"0:25",status:"completed"},{name:"Verification",duration:"0:10",status:"completed"},{name:"Atomic Apply",duration:"0:20",status:"completed"}],totalDuration:Be>0?`${Math.floor(Be/60)}:${(Be%60).toString().padStart(2,"0")}`:"0:52",auditEntries:Ns};fe(Ot?" Audit Log updated with Override, Deploy, and verification entries":Ss?" Audit Log updated with Safety Check (blocked), Deploy, and verification entries":" Audit Log updated with Safety Check (passed), Deploy, and verification entries"),_(Ks),setTimeout(()=>{M(!1),w(!0),te(!0)},2e3)}catch(Te){throw fe(`Deployment failed: ${Te}`,"error"),ce.rollbackOnFailure&&(fe("Initiating automatic rollback"),await zt(F)),he({status:"failed",endTime:new Date().toISOString()}),M(!1),Te}},zt=async F=>{const ce=(he,fe="info")=>{const Te={id:`log-${Date.now()}`,timestamp:new Date().toISOString(),level:fe,message:he,source:"rollback-manager"};F.logs.push(Te),Ge({...F})};ce("Starting rollback procedure"),ce("Pausing writes and quiescing processes"),await new Promise(he=>setTimeout(he,1e3)),ce("Applying pre-deploy snapshot transactionally"),await new Promise(he=>setTimeout(he,2e3)),ce("Running post-rollback health checks"),await new Promise(he=>setTimeout(he,1e3)),ce("Rollback completed successfully")},gs=async(F,ce)=>{if(oe)if(oe.patchStrategy==="quiesce"){ce("Coordinating with runtime to pause control loops");for(const he of oe.targets)he.canQuiesce?(ce(`Sending quiesce request to ${he.name}`,"info"),await new Promise(fe=>setTimeout(fe,500)),ce(`${he.name} confirmed quiesce mode`)):(ce(`${he.name} does not support quiesce - using live patch with watchdog guards`,"warning"),await Es(he,ce));ce("Publishing transition events to all subscribers"),await new Promise(he=>setTimeout(he,300))}else{ce("Using live patch strategy with transactional writes");for(const he of oe.targets)await Es(he,ce)}},Es=async(F,ce)=>{ce(`Activating watchdog guards for ${F.name}`),await new Promise(he=>setTimeout(he,200)),ce(`Setting up transactional write protection on ${F.name}`),await new Promise(he=>setTimeout(he,200)),ce(`Enabling incremental patching mode for ${F.name}`),await new Promise(he=>setTimeout(he,200))},Ma=async()=>{if(z)try{await ko.pauseDeployment(z),alert("Deployment paused. You can resume or cancel.")}catch(F){console.error("Failed to pause deployment:",F),alert("Failed to pause deployment")}},Bn=async()=>{if(z&&confirm("Are you sure you want to cancel this deployment?"))try{(await ko.cancelDeployment(z)).success&&(M(!1),await es(z))}catch(F){console.error("Failed to cancel deployment:",F),alert("Failed to cancel deployment")}},en=async()=>{if(!(!z||!Ne)&&confirm("Are you sure you want to rollback to the previous version?"))try{const F=(ce,he="info")=>{const fe={id:`log-${Date.now()}`,timestamp:new Date().toISOString(),level:he,message:ce,source:"manual-rollback"};Ne.logs.push(fe),Ge({...Ne})};F("Manual rollback initiated by user"),await gs(Ne,F),await zt(Ne),w(!1),F("Manual rollback completed successfully")}catch(F){console.error("Failed to execute rollback:",F),alert("Failed to execute rollback")}},cr=()=>{A(!0)},pa=()=>{C(!0)},Za=(F,ce)=>{const he=[{id:"safety-approval",approver:"Safety Engineer",role:"safety_engineer"},{id:"operations-approval",approver:"Operations Lead",role:"operations_manager"},{id:"lead-engineer-approval",approver:"Lead Engineer",role:"lead_engineer"}],fe=he.findIndex(at=>at.id===F);if(fe===-1)return null;const Te=fe+1;if(Te>=he.length)return null;const ve=he[Te];if(ce.find(at=>at.id===ve.id))return null;const gt=u.filter(at=>at.status==="failed"&&at.severity==="critical").length,Be=u.filter(at=>at.status==="warning").length;return F==="safety-approval"?{id:ve.id,approver:ve.approver,status:"pending"}:F==="operations-approval"&&(gt>0||Be>3)?{id:ve.id,approver:ve.approver,status:"pending"}:null},sa=async()=>{if(!c)return;const F=x.find(gt=>gt.status==="pending");if(!F){alert("No pending approvals");return}try{await ko.submitApproval(F.id,F.approver,"approved",S||void 0)}catch(gt){console.error("Backend approval failed:",gt)}const ce=x.map(gt=>gt.id===F.id?{...gt,status:"approved",comment:S||void 0,timestamp:new Date().toISOString()}:gt),he=Za(F.id,ce);let fe=ce;he&&(console.log(` Creating next approval in workflow: ${he.approver}`),fe=[...ce,he]),f(fe),C(!1),k("");const Te=fe.filter(gt=>gt.status==="approved").length,ve=fe.length;Te===ve?(ie(" All Approvals Completed!"),Q(`All ${ve} required approvals have been submitted successfully. The deployment is now ready to proceed with the enhanced atomic deployment strategy.`)):(ie(` Approval ${Te}/${ve} Submitted`),Q(`Your approval has been recorded and digitally signed.${he?`

Next Step: Approval required from ${he.approver}`:`

The approval workflow will continue based on deployment risk assessment.`}`)),G(!0)},ya=F=>{switch(F){case"critical":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";case"high":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300";case"normal":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}},La=F=>{const ce=new Set(v);ce.has(F)?ce.delete(F):ce.add(F),N(ce)},ba=F=>{switch(F){case"passed":return e.jsx(Fe,{size:16,className:"text-green-600"});case"failed":return e.jsx(ga,{size:16,className:"text-red-600"});case"warning":return e.jsx(jt,{size:16,className:"text-amber-600"});case"running":return e.jsx(Oa,{size:16,className:"text-blue-600 animate-spin"});default:return e.jsx(Oa,{size:16,className:"text-gray-400"})}},st=x.every(F=>F.status==="approved"),aa=u.some(F=>F.status==="warning"||F.status==="failed"),ra=u.some(F=>F.status==="failed"&&F.severity==="critical"),va=(F,ce)=>{switch(F){case"deployment":return ce==="failed"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600";case"approval":return"bg-green-100 text-green-600";case"safety_override":return"bg-amber-100 text-amber-600";case"vendor_adapter":return"bg-purple-100 text-purple-600";default:return"bg-gray-100 text-gray-600"}},B=F=>{switch(F){case"deployment":return e.jsx(da,{size:14});case"approval":return e.jsx(Fe,{size:14});case"safety_override":return e.jsx(jt,{size:14});case"vendor_adapter":return e.jsx(Zt,{size:14});default:return e.jsx(As,{size:14})}},De=F=>new Date(F).toLocaleString(),et=async()=>{$t(!0);try{const F=[{id:"audit-1",timestamp:new Date().toISOString(),event_type:"deployment",actor:"engineer_demo",resource:"Release v1.2.3",action:"queued",details:{version:"1.2.3",environment:"staging"},metadata:{source:"deploy_console"},hash:"a1b2c3d4e5f6789012345678901234567890abcd",sequence:1001}];H(F),Ve({total_entries:F.length,event_types:{deployment:1},actors:{engineer_demo:1},recent_activity:F,integrity:{valid:!0,errors:[],verified_entries:F.length,total_entries:F.length}}),ms({valid:!0,verified_entries:F.length,total_entries:F.length})}catch(F){console.error("Failed to load audit data:",F)}finally{$t(!1)}};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-panda-surface-dark",children:[e.jsx("div",{className:"bg-white dark:bg-panda-card-dark border-b border-gray-200 dark:border-panda-border-dark px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Deploy Console"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Environment:"}),e.jsx("div",{className:"px-3 py-1.5 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-800 dark:text-gray-200",children:s==="staging"?"Shadow Runtime (Staging)":"Production Runtime"})]})]})})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-80 bg-white dark:bg-panda-card-dark border-r border-gray-200 dark:border-panda-border-dark overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Queued Deploys"}),e.jsx("div",{className:"space-y-2",children:n.map(F=>e.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-3 rounded-lg border cursor-pointer transition-all ${c?.id===F.id?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/30 dark:border-orange-400":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-700"}`,onClick:()=>{console.log(" Selecting deployment:",{deployId:F.id,deployVersion:F.version,releaseData:!!F.releaseData}),d(F)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm dark:text-gray-200",children:F.releaseData?.name||F.version}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${ya(F.priority)}`,children:F.priority})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Release: ",F.releaseData?.name||"N/A"]}),e.jsxs("div",{children:["Snapshot: ",F.releaseData?.snapshotName||"N/A"]}),e.jsxs("div",{children:["Created: ",F.releaseData?.createdAt?new Date(F.releaseData.createdAt).toLocaleDateString():"N/A"]}),e.jsxs("div",{children:["Author: ",F.author]}),e.jsxs("div",{children:["Targets: ",F.targetRuntimes.join(", ")]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${F.status==="completed"?"bg-green-500":F.status==="failed"?"bg-red-500":F.status==="deploying"?"bg-blue-500 animate-pulse":"bg-gray-400"}`}),F.status]}),F.scheduledTime&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(Oa,{size:12}),"Scheduled: ",new Date(F.scheduledTime).toLocaleString()]})]})]},F.id))})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(da,{size:20,className:"text-[#FF6A00]"}),"Release Metadata"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Version"}),e.jsx("div",{className:"font-medium dark:text-gray-200",children:c.version})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Author"}),e.jsx("div",{className:"font-medium dark:text-gray-200",children:c.author})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Change Reason"}),e.jsx("div",{className:"font-medium dark:text-gray-200",children:"Performance optimization"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Package Size"}),e.jsx("div",{className:"font-medium dark:text-gray-200",children:"2.3 MB"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 dark:text-gray-200",children:[e.jsx(qe,{size:20,className:"text-blue-600"}),"Pre-Deploy Checks",aa&&e.jsx("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded-full",children:"Issues detected"}),u.length>0&&u.every(F=>F.status==="passed")&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full",children:"All checks passed"})]}),e.jsx("button",{onClick:()=>{console.log(" Safety check button clicked!"),console.log(" Button state:",{selectedDeploy:!!c,selectedDeployId:c?.id,selectedRelease:!!rt,selectedReleaseId:rt?.id}),c?Se(c.id):(console.error(" No selectedDeploy when button clicked!"),alert("No deployment selected. Please select a deployment from the left panel first."))},disabled:!c||u.some(F=>F.status==="running")||ls||rt&&He.length===0,className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${!c||u.some(F=>F.status==="running")||ls||rt&&He.length===0?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:ls?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Loading Files..."]}):u.some(F=>F.status==="running")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Running Checks..."]}):rt&&He.length===0?e.jsxs(e.Fragment,{children:[e.jsx(qe,{size:16}),"No Logic Files Found"]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{size:16}),"Run Pre-Deploy Checks (",He.length," files)"]})})]}),u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qe,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-sm",children:'Click "Run Pre-Deploy Checks" to validate deployment safety'}),e.jsx("p",{className:"text-xs mt-2 text-gray-400 dark:text-gray-500",children:"Industrial-grade validation includes syntax analysis, dependency checks, and safety protocols"}),rt&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-left",children:e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Release:"})," ",rt.name||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Snapshot:"})," ",rt.snapshotId||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Files Loaded:"})," ",is.length," total, ",He.length," logic files"]}),ls&&e.jsx("div",{className:"text-blue-600 dark:text-blue-400 animate-pulse",children:" Loading files..."})]})})]}):e.jsx("div",{className:"space-y-3",children:u.map(F=>e.jsx("div",{className:`p-4 rounded-lg border ${F.status==="failed"?"border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/30":F.status==="warning"?"border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/30":F.status==="passed"?"border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/30":F.status==="running"?"border-blue-200 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:ba(F.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"font-medium text-sm dark:text-gray-200",children:F.name}),F.status==="passed"?e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Passed"}):F.status==="failed"||F.status==="warning"?e.jsx("span",{className:`text-xs px-2 py-1 rounded ${F.severity==="critical"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":F.severity==="warning"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:F.severity}):e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:"Running..."})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 leading-relaxed",children:F.message}),F.details&&F.details.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:F.details.map((ce,he)=>e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-start gap-1",children:[e.jsx(bi,{size:12,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:ce})]},he))})]})]})},F.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 dark:text-gray-200",children:[e.jsx(As,{size:20,className:"text-purple-600"}),"File Changes"]}),e.jsxs("button",{onClick:()=>b(!y),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg flex items-center gap-2 dark:text-gray-200",children:[e.jsx(Hr,{size:16}),y?"Hide":"Show"," Diff"]})]}),y&&e.jsx("div",{className:"space-y-2",children:ls?e.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-600 border-t-gray-600 dark:border-t-gray-400 rounded-full animate-spin mx-auto mb-2"}),"Loading snapshot files..."]}):is.length>0?is.map(F=>{const ce=F.filePath.split("/").pop()||F.filePath,he=v.has(F.filePath),fe=He.some(Te=>Te.filePath===F.filePath);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>La(F.filePath),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between text-sm dark:text-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[he?e.jsx(wi,{size:16}):e.jsx(bi,{size:16}),e.jsx(As,{size:16,className:fe?"text-blue-600":"text-gray-500"}),e.jsx("span",{className:"font-medium",children:ce}),fe&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded",children:"Logic"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${F.changeType==="added"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":F.changeType==="deleted"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:F.changeType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[F.size&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(F.size/1024).toFixed(1),"KB"]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:F.content?`${F.content.split(`
`).length} lines`:"Binary"})]})]}),he&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700",children:[F.content?e.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-3 rounded border border-gray-200 dark:border-gray-600 max-h-64 overflow-y-auto",children:F.content}):e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 italic",children:"Binary file or content not available for preview"}),F.lastModified&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Last modified: ",new Date(F.lastModified).toLocaleString()]})]})]},F.filePath)}):e.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[e.jsx(As,{size:32,className:"mx-auto mb-2 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-sm",children:"No files loaded from snapshot"}),e.jsx("p",{className:"text-xs",children:"Select a queued deployment to view files"})]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gr,{size:16,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"Stage-wise Deploy Available:"})," This deployment can be automatically split into stages to minimize risk. Enable in deploy options."]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 dark:text-gray-200",children:[e.jsx(Ws,{size:20,className:"text-indigo-600"}),"Dynamic Approval Workflow",e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",x.filter(F=>F.status==="approved").length,"/",x.length," completed)"]}),st?e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full flex items-center gap-1",children:[e.jsx(Fe,{size:12}),"All approved"]}):ra?e.jsxs("span",{className:"text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full flex items-center gap-1",children:[e.jsx(jt,{size:12}),"Approvals required"]}):aa?e.jsxs("span",{className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded-full flex items-center gap-1",children:[e.jsx(jt,{size:12}),"Approvals recommended"]}):e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full",children:"Standard deployment"})]}),(ra||aa)&&!st&&e.jsxs("button",{onClick:pa,className:"px-3 py-1.5 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(Ws,{size:16}),"Submit Approval"]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dynamic Workflow Policy"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(Ko,{size:14}),"Approvals are created dynamically based on deployment risk and previous approvals"]}),e.jsxs("div",{className:"text-gray-500 ml-5 space-y-1",children:[e.jsx("div",{children:" Step 1: Safety Engineer approval (always required)"}),e.jsx("div",{children:" Step 2: Operations Lead approval (required after safety approval)"}),e.jsx("div",{children:" Step 3: Lead Engineer approval (required for high-risk deployments)"}),ra&&e.jsx("div",{className:"text-red-600 font-medium",children:" High-risk deployment: All 3 approvals will be required"})]})]})]}),e.jsx("div",{className:"space-y-3",children:x.map((F,ce)=>e.jsxs("div",{className:`p-4 rounded-lg border transition-all ${F.status==="approved"?"border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/30":F.status==="rejected"?"border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/30":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 hover:border-indigo-200 dark:hover:border-indigo-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${F.status==="approved"?"bg-green-100 text-green-700":F.status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:ce+1}),e.jsx("div",{className:"font-medium text-sm dark:text-gray-200",children:F.approver})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[F.status==="approved"&&e.jsx(Fe,{size:16,className:"text-green-600"}),F.status==="rejected"&&e.jsx(ga,{size:16,className:"text-red-600"}),F.status==="pending"&&e.jsx(Oa,{size:16,className:"text-gray-400"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${F.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":F.status==="rejected"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:F.status})]})]}),F.status==="pending"&&e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-2 flex items-center gap-1",children:[e.jsx(Gr,{size:12}),"Waiting for digital signature and approval comments"]}),F.comment&&e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1 p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Comment:"})," ",F.comment]}),F.timestamp&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(jg,{size:12}),"Approved: ",new Date(F.timestamp).toLocaleString()]}),F.status==="pending"&&aa&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded text-xs text-blue-700 dark:text-blue-300",children:"This approval is required due to safety check warnings/failures"})]},F.id))}),!st&&e.jsxs("button",{onClick:pa,className:"mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qe,{size:16}),"Sign & Approve"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 dark:text-gray-200",children:[e.jsx(da,{size:20,className:"text-purple-600"}),"Deploy Strategy"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"deployStrategy",value:"atomic",defaultChecked:!0,className:"mt-1",onChange:F=>Pt(F.target.value)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm flex items-center gap-2 dark:text-gray-200",children:["Atomic Deploy (Recommended)",e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-0.5 rounded",children:"Safe"})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Full transactional: upload  validate  atomic swap  cleanup"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Rollback: Instant via shadow runtime"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"deployStrategy",value:"canary",className:"mt-1",onChange:F=>Pt(F.target.value)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm flex items-center gap-2 dark:text-gray-200",children:["Canary / Phased Deploy",e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded",children:"Advanced"})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Cohort rollout: 10%  50%  100% with health monitoring"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Auto-halt on failure threshold breach"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"deployStrategy",value:"chunked",className:"mt-1",onChange:F=>Pt(F.target.value)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm flex items-center gap-2 dark:text-gray-200",children:["Smart Chunking",e.jsx("span",{className:"text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-2 py-0.5 rounded",children:"Large Projects"})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Auto-split by logical boundaries with dependency ordering"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Parallel deployment where safe, sequential for dependencies"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"deployStrategy",value:"maintenance",className:"mt-1",onChange:F=>Pt(F.target.value)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm flex items-center gap-2 dark:text-gray-200",children:["Maintenance Window",e.jsx("span",{className:"text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 px-2 py-0.5 rounded",children:"Critical"})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Full system quiesce  deploy  restart (for critical updates)"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Requires scheduled downtime approval"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Strategy Auto-Selection:"})," System will recommend optimal strategy based on change analysis"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:"Deployment Strategy"}),e.jsxs("button",{onClick:()=>Oe(!0),className:"px-3 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-orange-600 flex items-center gap-2 text-sm",children:[e.jsx(Zt,{size:16}),"Configure Strategy"]})]}),oe?e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Strategy"}),e.jsxs("div",{className:"font-medium capitalize flex items-center gap-2 dark:text-gray-200",children:[oe.strategy==="atomic"&&e.jsx(qe,{size:14,className:"text-blue-600"}),oe.strategy==="canary"&&e.jsx(Ro,{size:14,className:"text-green-600"}),oe.strategy==="chunked"&&e.jsx(da,{size:14,className:"text-purple-600"}),oe.strategy]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Patch Mode"}),e.jsx("div",{className:"font-medium capitalize dark:text-gray-200",children:oe.patchStrategy})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Targets"}),e.jsxs("div",{className:"font-medium dark:text-gray-200",children:[oe.targets.length," configured"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Rollback Triggers"}),e.jsxs("div",{className:"font-medium dark:text-gray-200",children:[oe.rollbackTriggers.length," active"]})]})]}),oe.strategy==="canary"&&oe.canary&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Canary Configuration:"}),e.jsxs("div",{className:"flex gap-4 text-sm dark:text-gray-300",children:[e.jsxs("span",{children:[oe.canary.cohorts?.length||0," cohorts"]}),e.jsxs("span",{children:[oe.canary.healthChecks?.length||0," health checks"]}),e.jsxs("span",{children:[oe.canary.globalHealthWindow,"min health window"]})]})]}),oe.strategy==="chunked"&&oe.chunked&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Chunking Configuration:"}),e.jsxs("div",{className:"flex gap-4 text-sm dark:text-gray-300",children:[e.jsxs("span",{children:["Max ",oe.chunked.maxChunkSize," files/chunk"]}),e.jsx("span",{children:oe.chunked.dependencyOrdering?"Dependency ordered":"Sequential"}),e.jsxs("span",{children:[oe.chunked.parallelChunks?"Parallel":"Serial"," execution"]})]})]})]}):e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-300",children:[e.jsx(jt,{size:16}),e.jsx("span",{className:"font-medium",children:"No deployment strategy configured"})]}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"Configure a deployment strategy to define how changes will be deployed to target runtimes."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold dark:text-gray-200",children:"Deploy Actions"}),e.jsxs("button",{onClick:()=>Js(!zs),className:`px-3 py-2 text-sm rounded-lg flex items-center gap-2 transition-colors ${zs?"bg-[#FF6A00] text-white hover:bg-orange-600":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(qe,{size:16}),"Audit Trail"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:Qe,disabled:Wt||!c,className:`px-4 py-3 rounded-lg transition-colors flex flex-col items-center gap-2 ${Wt?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 cursor-default":c?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-800/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Hr,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:Wt?"Dry Run ":"Dry Run"})]}),e.jsxs("button",{onClick:Ts,disabled:E||(ra||aa)&&!st||!c,className:`px-4 py-3 rounded-lg transition-colors flex flex-col items-center gap-2 ${Tt?"bg-green-500 text-white animate-pulse":!E&&c&&(!(ra||aa)||st)?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Jr,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:Tt?"Enhanced Deploy Ready!":c?ra&&!st?"Needs Approval":`Start ${At.charAt(0).toUpperCase()+At.slice(1)}`:"Select Release"})]}),e.jsxs("button",{onClick:cr,disabled:!c,className:`px-4 py-3 rounded-lg transition-colors flex flex-col items-center gap-2 ${c?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx(jg,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Schedule"})]}),e.jsxs("button",{onClick:Bn,disabled:!E&&!Ne,className:`px-4 py-3 rounded-lg transition-colors flex flex-col items-center gap-2 ${E||Ne?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx(bT,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:E||Ne?"Cancel":"No Deploy"})]})]}),xa&&e.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(jt,{size:16,className:"text-amber-600"}),e.jsx("span",{className:"font-medium text-amber-800 dark:text-amber-300",children:"Dry Run Safety Check Complete"})]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:'The dry run has executed successfully in the simulator. The deployment has been validated and is ready for production deployment. Click "Approve" to enable atomic deployment.'}),e.jsxs("button",{onClick:Ys,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Fe,{size:16}),"Approve Atomic Deployment"]})]}),Tt&&e.jsx(ze.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.3,ease:"easeOut"},className:"mt-4 p-4 bg-green-50 dark:bg-green-900/30 border-2 border-green-400 dark:border-green-600 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Fe,{size:24,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-green-800 dark:text-green-300 text-lg",children:" Atomic Deployment Approved!"}),e.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded-full font-medium",children:"SUCCESS"})]}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Deployment has been validated and approved. The atomic deployment button is now ready for execution."})]})]})}),E&&e.jsxs("button",{onClick:Ma,className:"mt-3 w-full px-4 py-2 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded-lg hover:bg-amber-200 dark:hover:bg-amber-800/50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ch,{size:16}),"Pause Deployment"]})]}),zs&&e.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-[#FF6A00]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Deployment Audit Trail"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Ae?.total_entries||0," total entries"]})]}),ns&&e.jsxs("div",{className:`p-3 rounded-lg ${ns.valid?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-600 text-green-800 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-600 text-red-800 dark:text-red-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ns.valid?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(ga,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:["Chain Integrity: ",ns.valid?"VERIFIED":"COMPROMISED"]})]}),e.jsxs("p",{className:"text-sm mt-1",children:[ns.verified_entries,"/",ns.total_entries," entries verified"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[e.jsxs("select",{value:Ut.event_type,onChange:F=>Nt({...Ut,event_type:F.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All Events"}),e.jsx("option",{value:"deployment",children:"Deployments"}),e.jsx("option",{value:"approval",children:"Approvals"}),e.jsx("option",{value:"safety_override",children:"Safety Overrides"}),e.jsx("option",{value:"vendor_adapter",children:"Vendor Adapter"})]}),e.jsxs("select",{value:Ut.actor,onChange:F=>Nt({...Ut,actor:F.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All Actors"}),e.jsx("option",{value:"engineer_demo",children:"Engineer Demo"}),e.jsx("option",{value:"admin_demo",children:"Admin Demo"}),e.jsx("option",{value:"supervisor_demo",children:"Supervisor Demo"})]}),e.jsx("button",{onClick:()=>Nt({event_type:"",actor:"",resource:""}),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:"Clear Filters"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:Ze?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF6A00] mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading audit entries..."})]}):ye.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(As,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No audit entries found"})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:ye.map((F,ce)=>e.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:ce*.05},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>Vs(F),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${va(F.event_type,F.action)}`,children:B(F.event_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 capitalize",children:F.event_type.replace("_"," ")}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:""}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 capitalize",children:F.action}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:""}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",F.sequence]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[F.actor,"  ",F.resource]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Oa,{className:"w-3 h-3"}),De(F.timestamp)]}),e.jsxs("span",{className:"font-mono",children:["Hash: ",F.hash?.substring(0,12),"..."]})]})]})]})},F.id))})})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(da,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Select a deploy from the queue to preview"})]})})}),e.jsx("div",{className:"w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-600 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-6",children:[!1,Ne&&!J&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Ne.strategy==="atomic"&&e.jsx(qe,{size:18,className:"text-blue-600"}),Ne.strategy==="canary"&&e.jsx(Ro,{size:18,className:"text-green-600"}),Ne.strategy==="chunked"&&e.jsx(da,{size:18,className:"text-purple-600"}),Ne.strategy.charAt(0).toUpperCase()+Ne.strategy.slice(1)," Deployment in Progress"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ne.status==="completed"?"bg-green-100 text-green-700":Ne.status==="failed"?"bg-red-100 text-red-700":Ne.status==="running"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:Ne.status})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold",children:Ne.currentPhase||"Initializing..."}),e.jsxs("span",{className:"text-sm text-blue-600",children:[Ne.progress,"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${Ne.progress}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",e.jsx("span",{className:"capitalize font-medium",children:Ne.status})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Phase"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:Ne.currentPhase})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Deploy Targets"}),e.jsx("div",{className:"space-y-3",children:c?e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-sm dark:text-gray-200",children:s||"Production"}),e.jsx("span",{className:`w-2 h-2 rounded-full ${c.status==="completed"?"bg-green-500":c.status==="queued"?"bg-amber-500":c.status==="deploying"?"bg-blue-500":"bg-gray-400"}`})]}),c.status==="deploying"&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(Math.random()*100),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(ze.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${Math.round(Math.random()*100)}%`},transition:{duration:.3}})})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Status: ",c.status]}),e.jsxs("div",{children:["Version: ",c.version]}),oe&&e.jsxs("div",{children:["Strategy: ",oe.strategy]}),c.scheduledTime&&e.jsxs("div",{children:["Scheduled: ",new Date(c.scheduledTime).toLocaleString()]})]})]}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-center",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No deployment selected"})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:"Analysis Activity"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-800",children:["Deployment ",c.version," selected"]}),e.jsx("div",{className:"text-gray-500",children:new Date().toLocaleTimeString()})]})]})}),He.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-800",children:["Loaded ",He.length," logic files"]}),e.jsx("div",{className:"text-gray-500",children:new Date().toLocaleTimeString()})]})]})}),e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-800",children:["Variable analysis: ",`${tt(He).uniqueTags.length} variables found`]}),e.jsx("div",{className:"text-gray-500",children:new Date().toLocaleTimeString()})]})]})}),u.length>0&&e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 ${u.filter(F=>F.status==="failed").length>0?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-800",children:["Safety checks: ",u.filter(F=>F.status==="passed").length,"/",u.length," passed"]}),e.jsx("div",{className:"text-gray-500",children:new Date().toLocaleTimeString()})]})]})})]}),ls&&e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-amber-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-800",children:"Loading snapshot files..."}),e.jsx("div",{className:"text-gray-500",children:new Date().toLocaleTimeString()})]})]})})]}):e.jsx("div",{className:"text-center text-gray-500 py-4",children:"Select a deployment to see activity"})})]}),E&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-amber-800 mb-2 font-medium",children:"Deploy Monitoring Active"}),e.jsxs("div",{className:"text-xs text-amber-700 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Watch window:"}),e.jsx("span",{className:"font-mono text-amber-600",children:"4:23 remaining"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Health checks"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Critical tags"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),e.jsx("span",{children:"Resource usage"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"No exceptions"})]})]}),e.jsx("div",{className:"pt-2 border-t border-amber-200",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("strong",{children:"Auto-rollback triggers:"})," CPU >90%, Memory >85%, 3+ critical failures"]})})]})]})}),L&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(Fe,{size:16}),"Deployment Successful - Rollback Available"]}),e.jsx("div",{className:"text-xs text-green-700",children:"Rollback checkpoint created with pre-deploy shadow snapshot"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:en,className:"w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Dd,{size:16}),"Execute Rollback"]}),e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Strategy:"})," Atomic (transactional)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Checkpoint:"})," Pre-deploy shadow snapshot"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Process:"})," Quiesce  Apply  Validate  Resume"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ETA:"})," 2-3 minutes"]})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Deploy Orchestration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Deploy Analysis"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Logic Files:"}),e.jsx("span",{className:"font-mono text-blue-600",children:He.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Files:"}),e.jsx("span",{className:"font-mono text-blue-600",children:is.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Safety Checks:"}),e.jsx("span",{className:"font-mono text-blue-600",children:u.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Passed Checks:"}),e.jsx("span",{className:"font-mono text-green-600",children:u.filter(F=>F.status==="passed").length})]})]})]}),e.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-purple-800 dark:text-purple-300 mb-2",children:"Deploy Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs dark:text-purple-200",children:[e.jsx("span",{children:"Selected Deploy:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-200 px-2 py-0.5 rounded font-mono text-[10px]",children:c?.version||"None"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs dark:text-purple-200",children:[e.jsx("span",{children:"Deploy Type:"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-300 font-mono text-[10px]",children:c?.priority||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs dark:text-purple-200",children:[e.jsx("span",{children:"Analysis Status:"}),e.jsx("span",{className:`font-mono text-[10px] ${He.length>0?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:He.length>0?"Complete":"Loading..."})]})]})]}),e.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Safety Summary"}),e.jsxs("div",{className:"space-y-1 text-xs text-amber-700 dark:text-amber-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Passed Checks:"}),e.jsxs("span",{className:"font-mono text-green-600",children:[u.filter(F=>F.status==="passed").length,"/",u.length]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Failed Checks:"}),e.jsx("span",{className:"font-mono text-red-600",children:u.filter(F=>F.status==="failed").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Warnings:"}),e.jsx("span",{className:"font-mono text-amber-600",children:u.filter(F=>F.status==="warning").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Overall Status:"}),e.jsx("span",{className:`font-mono ${u.filter(F=>F.status==="failed").length>0?"text-red-600":u.filter(F=>F.status==="warning").length>0?"text-amber-600":"text-green-600"}`,children:u.filter(F=>F.status==="failed").length>0?"BLOCKED":u.filter(F=>F.status==="warning").length>0?"CAUTION":"READY"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Logic Analysis"}),e.jsx("div",{className:"space-y-3",children:He.length>0?(()=>{const F=tt(He);return[{name:"Variables",value:F.uniqueTags.length,unit:"declared",status:F.uniqueTags.length>0?"normal":"warning"},{name:"Programs",value:F.totalPrograms,unit:"blocks",status:"normal"},{name:"Functions",value:F.totalFunctions+F.totalFunctionBlocks,unit:"blocks",status:"normal"},{name:"Code Size",value:Math.round(F.totalSize/1024),unit:"KB",status:F.syntaxErrors.length===0?"normal":"critical"}].map((ce,he)=>e.jsxs("div",{className:`p-3 rounded-lg border ${ce.status==="critical"?"border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/30":ce.status==="warning"?"border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/30":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"font-medium text-xs dark:text-gray-200",children:ce.name}),ce.status!=="normal"&&e.jsx(jt,{size:14,className:ce.status==="critical"?"text-red-500":"text-amber-500"})]}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsxs("div",{className:"text-lg font-semibold dark:text-gray-100",children:[ce.value," ",ce.unit]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ce.name==="Code Size"&&F.totalLines?`${F.totalLines} lines`:""})]})]},he))})():e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-center",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No logic files loaded"})})})]})]})})]}),T&&e.jsx(yt,{isOpen:T,onClose:()=>A(!1),title:"Schedule Deployment",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule Date & Time"}),e.jsx("input",{type:"datetime-local",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Window"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{children:"Off-peak hours (2 AM - 4 AM)"}),e.jsx("option",{children:"Low traffic (11 PM - 1 AM)"}),e.jsx("option",{children:"Custom..."})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",id:"auto-rollback",className:"mt-1"}),e.jsx("label",{htmlFor:"auto-rollback",className:"text-sm text-gray-700",children:"Auto-rollback on failure"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>{A(!1),alert("Deployment scheduled successfully!")},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:"Schedule Deploy"})]})]})}),D&&e.jsx(yt,{isOpen:D,onClose:()=>C(!1),title:"Sign & Approve Deployment",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Comments (Optional)"}),e.jsx("textarea",{value:S,onChange:F=>k(F.target.value),placeholder:"Add your approval comments...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00] dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",rows:3})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gr,{size:16,className:"text-blue-600 mt-0.5"}),e.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-300",children:"By approving, you certify that you have reviewed the deployment changes and authorize this deployment to proceed."})]})})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:sa,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(qe,{size:16}),"Approve & Sign"]})]})]})}),we&&e.jsx(KR,{config:oe,onConfigChange:F=>{Ee(F),console.log("Deployment strategy configured:",{strategy:F.strategy,targets:F.targets.length,rollbackTriggers:F.rollbackTriggers.length})},targets:Qt,onClose:()=>Oe(!1)}),ws&&e.jsx(yt,{isOpen:ws,onClose:()=>Hs(!1),title:"Dry Run Safety Check",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{size:20,className:"text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-800 mb-2",children:"Critical Safety Warning"}),e.jsx("p",{className:"text-sm text-amber-700",children:"This deployment will be executed in a safe simulation environment with a copy of the target runtime. The dry run will validate all logic, check for potential issues, and ensure the deployment is safe before any changes are made to the production system."})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Dry Run Process:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:" Create isolated simulation environment"}),e.jsx("li",{children:" Execute deployment in shadow runtime"}),e.jsx("li",{children:" Validate all safety checks and logic"}),e.jsx("li",{children:" Monitor for behavioral changes"}),e.jsx("li",{children:" Generate safety report"})]})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{size:18,className:"text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800 mb-1",children:"Safety Confirmation Required"}),e.jsx("p",{className:"text-sm text-red-700",children:"By proceeding with this dry run, you acknowledge that this deployment affects critical safety systems and must be validated before production deployment."})]})]})})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>Hs(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:os,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(Hr,{size:16}),"Execute Dry Run"]})]})]})}),Le&&e.jsx(yt,{isOpen:!!Le,onClose:()=>Vs(null),title:"Audit Entry Details",children:e.jsx("div",{className:"p-6 max-w-2xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Event Type"}),e.jsx("p",{className:"capitalize text-gray-900 dark:text-gray-100",children:Le.event_type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Action"}),e.jsx("p",{className:"capitalize text-gray-900 dark:text-gray-100",children:Le.action})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actor"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:Le.actor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Resource"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:Le.resource})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Timestamp"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:De(Le.timestamp)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sequence"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:["#",Le.sequence]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Hash (SHA-256)"}),e.jsx("p",{className:"font-mono text-sm break-all bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-2 rounded",children:Le.hash})]}),Object.keys(Le.details).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Details"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-3 rounded text-sm overflow-x-auto max-h-48",children:JSON.stringify(Le.details,null,2)})]}),Object.keys(Le.metadata).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Metadata"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-3 rounded text-sm overflow-x-auto max-h-48",children:JSON.stringify(Le.metadata,null,2)})]})]})})}),J&&$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Fe,{size:24,className:"text-green-600"}),"Deploy Success"]}),e.jsx("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(pt,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Atomic Deploy Completed Successfully"}),e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Deploy Success"})]}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("p",{className:"mb-1",children:["Release: ",e.jsx("span",{className:"font-medium",children:$.releaseName})]}),e.jsxs("p",{className:"mb-1",children:["Total Duration: ",e.jsx("span",{className:"font-medium",children:$.totalDuration})]}),e.jsxs("p",{children:["Strategy: ",e.jsx("span",{className:"font-medium capitalize",children:$.strategy})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Oa,{size:16}),"Deployment Timeline"]}),e.jsx("div",{className:"space-y-2",children:$.phases.map((F,ce)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-medium",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium",children:["Phase ",ce+1,": ",F.name]}),e.jsxs("span",{className:"text-gray-500 ml-2",children:[" ",F.duration]})]}),e.jsx("span",{className:"text-green-600 text-xs font-medium",children:F.status})]},F.name))})]}),Ne&&Ne.logs.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(As,{size:16}),"Live Deployment Logs"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Ne.logs.map(F=>{const ce=Ne?.logs[0]?.timestamp,he=ce?Math.floor((new Date(F.timestamp).getTime()-new Date(ce).getTime())/1e3):0,fe=Math.floor(he/60),Te=he%60,ve=`${fe}:${Te.toString().padStart(2,"0")}`;return e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-gray-500 shrink-0 font-mono font-medium",children:[ve,"  ",F.source==="atomic-deployer"?"Atomic Deploy (Vendor Adapter)":F.source]}),e.jsx("span",{className:`shrink-0 w-2 h-2 rounded-full mt-1.5 ${F.level==="error"?"bg-red-500":F.level==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:`flex-1 ${F.level==="error"?"text-red-700":F.level==="warning"?"text-yellow-700":"text-gray-700"}`,children:F.message})]})},F.id)})})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(qe,{size:16}),"Atomic Deploy Process"]}),e.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:[e.jsx("strong",{children:"Executing Atomic Deploy."})," The Adapter is chunking the upload and performing a pointer swap inside the Studio 5000 controller.",e.jsx("span",{className:"font-medium",children:" Zero downtime achieved."})]}),e.jsx("div",{className:"text-xs text-blue-600 bg-blue-100 rounded px-2 py-1 font-mono",children:"Process: Initialize  Staging  Validation  Transfer  Verification  Atomic Apply  Complete"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(As,{size:16}),Math.floor(parseInt($.totalDuration.split(":")[0])*60+parseInt($.totalDuration.split(":")[1])+7/60),":",((parseInt($.totalDuration.split(":")[1])+7)%60).toString().padStart(2,"0"),"  Verification & Audit"]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Deploy Success"})}),e.jsx("div",{className:"space-y-2 mb-4",children:$.auditEntries.map((F,ce)=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${F.action==="Override"?"bg-yellow-500":F.action==="Deploy"?"bg-blue-500":F.action==="Verification"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:F.action}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(F.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:F.details})]})]},ce))}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[e.jsx(Fe,{size:16}),e.jsx("span",{className:"font-medium",children:"Verified L5X checksum"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Deployment integrity validated. All systems operational."})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("button",{onClick:()=>{te(!1),Ge(null)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Close"})})]})]})}),P&&e.jsx(yt,{isOpen:P,onClose:()=>G(!1),title:Z,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Fe,{size:24,className:"text-green-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line leading-relaxed",children:U}),x.filter(F=>F.status==="approved").length===x.length&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-1",children:[e.jsx(qe,{size:16}),"Deployment Authorization Complete"]}),e.jsx("div",{className:"text-sm text-green-700",children:"All required approvals have been obtained. The deployment can now proceed through the enhanced atomic deployment workflow."})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end gap-3",children:e.jsxs("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Fe,{size:16}),"Continue"]})})]})})]})}function ZR(){const[s,a]=p.useState("overview"),n=Sl(b=>b.status),{isRunning:i,isPaused:c,currentLine:d,ioValues:u}=Lh();p.useEffect(()=>{console.log(" ShadowRuntime ioValues updated:",u),console.log(" Number of values:",Object.keys(u).length)},[u]);const[h,x]=p.useState({latency:0,throughput:0,errors:0,cycleTime:0}),[f,y]=p.useState(null);return p.useEffect(()=>{const b=async()=>{try{const E=await Ct.getSessionToken(),M={};E&&(M.Authorization=`Bearer ${E}`);const L=await fetch("http://localhost:8000/api/sync/status",{headers:M}).then(w=>w.json());y(L.deployedLogic)}catch(E){console.error("Failed to fetch deployed logic:",E)}};b(),Ct.getSessionToken().then(E=>{const M={"Content-Type":"application/json"};E&&(M.Authorization=`Bearer ${E}`),fetch("http://localhost:8000/api/sync/start-streaming",{method:"POST",headers:M}).catch(L=>console.error("Failed to start streaming:",L))});const v=setInterval(b,3e3),N=setInterval(async()=>{try{const E=await Ct.getSessionToken(),M={};E&&(M.Authorization=`Bearer ${E}`);const w=await(await fetch("http://localhost:8000/api/simulate/status",{headers:M})).json(),T=w.ioValues?Object.keys(w.ioValues).length:0,A=i?Math.floor(1e3/(w.cycleTime||100))*T:0;x({latency:n.latency||12,throughput:A,errors:0,cycleTime:i?w.cycleTime||100:50})}catch(E){console.error("Failed to fetch real-time data:",E)}},1e3);return()=>{clearInterval(N),clearInterval(v)}},[n.latency,i]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Shadow Runtime"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mt-1",children:"Test and validate logic in a safe shadow environment before deploying to production"})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg border-2 ${n.connected?"bg-green-50 dark:bg-green-900 dark:bg-opacity-30 border-green-500 text-green-900 dark:text-green-300":"bg-red-50 dark:bg-red-900 dark:bg-opacity-30 border-red-500 text-red-900 dark:text-red-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:n.connected?"Connected":"Disconnected"}),n.executionMode&&e.jsx("span",{className:"text-xs opacity-75",children:n.executionMode==="simulation"?"Simulation Mode":n.executionMode==="beremiz"?"Beremiz Runtime":"Failed"})]})]})})]}),e.jsx("div",{className:"border-b border-neutral-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>a("overview"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${s==="overview"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>a("sync"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${s==="sync"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:["Sync Console",n.conflicts.filter(b=>!b.resolved).length>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full",children:n.conflicts.filter(b=>!b.resolved).length})]}),e.jsx("button",{onClick:()=>a("simulator"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${s==="simulator"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:"Simulator"}),e.jsx("button",{onClick:()=>a("deploy"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${s==="deploy"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-neutral-600 dark:text-gray-300 hover:text-neutral-900 dark:hover:text-white"}`,children:"Deploy"})]})}),s==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ye,{className:"p-6",children:[e.jsx(Ps,{children:"Live Process Mirror"}),e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:Object.keys(u).length===0?e.jsx("div",{className:"text-sm text-neutral-500 text-center py-8",children:"No I/O values available. Start the simulator to see live data."}):e.jsxs(e.Fragment,{children:[Object.entries(u).some(([b,v])=>typeof v=="boolean")&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"Digital I/O"}),e.jsx("div",{className:"space-y-2",children:Object.entries(u).filter(([b,v])=>typeof v=="boolean").map(([b,v])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 dark:bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm font-mono dark:text-gray-300",children:b}),e.jsx("span",{className:`px-3 py-1 rounded-md text-sm font-medium ${v?"bg-green-600 text-white":"bg-neutral-300 dark:bg-neutral-600 text-neutral-700 dark:text-neutral-200"}`,children:v?"ON":"OFF"})]},b))})]}),Object.entries(u).some(([b,v])=>typeof v=="number")&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"Analog I/O"}),e.jsx("div",{className:"space-y-3",children:Object.entries(u).filter(([b,v])=>typeof v=="number").map(([b,v])=>{const N=b.includes("Output")||b.includes("output"),E=b.includes("Level")||b.includes("Output")||b.includes("Humidity"),L=b.includes("Temp")||b.includes("temp")?"C":E?"%":"";return e.jsxs("div",{className:`p-3 rounded ${N?"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"bg-neutral-50 dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-mono dark:text-gray-300",children:b}),e.jsxs("span",{className:`text-sm font-medium ${N?"text-blue-800 dark:text-blue-300":"text-neutral-900 dark:text-gray-100"}`,children:[typeof v=="number"?v.toFixed(2):v,L]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,v))}%`}})}),e.jsx("div",{className:"text-xs text-neutral-600 mt-1",children:"Calculated Output"})]}),!N&&e.jsx("div",{className:"mt-1 w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,v))}%`}})})]},b)})})]}),e.jsxs("div",{className:"pt-3 border-t border-neutral-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:["Last update: ",new Date().toLocaleTimeString()]}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:" Live data from simulator"}),e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Values: ",Object.keys(u).length," variables loaded"]}),!i&&Object.keys(u).length>0&&e.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:" Simulator stopped - showing last known values"})]})]})})]}),e.jsxs(Ye,{className:"p-6",children:[e.jsx(Ps,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Shadow Logic Status"}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i?c?"bg-amber-500":"bg-green-500":"bg-neutral-400"}`}),e.jsx("span",{className:`text-xs font-medium ${i?c?"text-amber-700":"text-green-700":"text-neutral-600"}`,children:i?c?"Paused":"Running":"Deployed"})]})]})}),e.jsx("div",{className:"flex flex-col h-full",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"dark:text-gray-200",children:f.name}),"  ",f.vendor]}),d&&e.jsxs("div",{className:"text-blue-600 font-medium",children:["Line: ",d]})]}),e.jsxs("div",{className:"text-neutral-500 dark:text-gray-400 mt-1",children:["Deployed: ",new Date(f.deployedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex-1 text-xs font-mono text-neutral-700 dark:text-gray-300 space-y-1 bg-neutral-50 dark:bg-gray-800 p-3 rounded border dark:border-gray-700 overflow-y-auto",children:[f.content.split(`
`).slice(0,8).map((b,v)=>e.jsxs("div",{className:`${b.trim().startsWith("(*")?"text-green-600":""} ${d===v+1?"bg-yellow-200 font-bold":""}`,children:[e.jsx("span",{className:"text-neutral-400 dark:text-gray-500 mr-2",children:String(v+1).padStart(2," ")}),b||" "]},v)),f.content.split(`
`).length>8&&e.jsxs("div",{className:"text-neutral-400 dark:text-gray-500",children:["... (",f.content.split(`
`).length-8," more lines)"]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("div",{className:`p-2 border rounded text-xs ${i?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-700 dark:text-green-300":"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300"}`,children:i?` Logic executing ${c?"(paused)":"(active)"}`:" Logic deployed to shadow runtime"}),e.jsx("button",{className:"w-full px-3 py-2 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",onClick:()=>a("simulator"),children:" Open in Simulator"})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-neutral-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("div",{className:"text-sm font-medium",children:"No Logic Deployed"}),e.jsx("div",{className:"text-xs mt-1 text-center",children:"Push logic from Logic Editor to see preview here"})]})})]})]}),e.jsxs(Ye,{className:"p-6",children:[e.jsx(Ps,{children:"Runtime Health"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Latency"}),e.jsxs("div",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:[h.latency,"ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Throughput"}),e.jsxs("div",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:[h.throughput," ops/s"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Errors"}),e.jsx("div",{className:"text-2xl font-semibold text-green-600 dark:text-green-400",children:h.errors})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Cycle Time"}),e.jsxs("div",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:[h.cycleTime,"ms"]})]})]})]}),e.jsxs(Ye,{className:"p-6",children:[e.jsx(Ps,{children:"Sync Status"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Shadow Runtime"}),e.jsx("div",{className:`font-semibold ${n.shadowOk?"text-green-600":"text-neutral-400"}`,children:n.shadowOk?" Ready":" Not Ready"}),n.executionMode&&e.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.executionMode==="simulation"?"Simulation Mode":n.executionMode==="beremiz"?"Beremiz Runtime":"Failed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Live Runtime"}),e.jsx("div",{className:`font-semibold ${n.liveOk?"text-green-600":"text-neutral-400"}`,children:n.liveOk?" Connected":" Not Connected"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Last Sync"}),e.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:n.lastSync?new Date(n.lastSync).toLocaleTimeString():"Never"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-neutral-600 dark:text-gray-400 mb-1",children:"Conflicts"}),e.jsx("div",{className:`font-semibold ${n.conflicts.filter(b=>!b.resolved).length>0?"text-amber-600":"text-green-600"}`,children:n.conflicts.filter(b=>!b.resolved).length})]})]})]})]}),s==="sync"&&e.jsx(YR,{}),s==="simulator"&&e.jsx(XR,{}),s==="deploy"&&e.jsx(Ck,{environment:"staging"})]})}function Oo({isOpen:s,onClose:a,onConfirm:n,title:i,label:c,placeholder:d="",defaultValue:u="",required:h=!1,description:x="",confirmButtonText:f="Confirm"}){const[y,b]=p.useState(u),[v,N]=p.useState(""),E=p.useRef(null);p.useEffect(()=>{s&&(b(u),N(""),setTimeout(()=>{E.current?.focus(),E.current?.select()},100))},[s,u]),p.useEffect(()=>{const w=T=>{T.key==="Escape"&&a()};return s&&(document.addEventListener("keydown",w),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",w),document.body.style.overflow="unset"}},[s,a]);const M=w=>{if(w.preventDefault(),h&&!y.trim()){N("This field is required");return}if(y.trim()){const T=y.trim();if(/[<>:"/\\|?*]/.test(T)){N('Filename contains invalid characters: < > : " / \\ | ? *');return}}n(y.trim()),a()},L=()=>{b(u),N(""),a()};return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:L}),e.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 animate-in zoom-in-95 duration-200",children:e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-gray-600",children:[e.jsx("h2",{className:"font-semibold text-lg text-neutral-900 dark:text-gray-100",children:i}),e.jsx("button",{type:"button",onClick:L,className:"p-1 hover:bg-neutral-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[x&&e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mb-4",children:x}),e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:[c,h&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{ref:E,type:"text",value:y,onChange:w=>{b(w.target.value),N("")},placeholder:d,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 ${v?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-neutral-300 dark:border-gray-600"}`,onKeyDown:w=>{w.key==="Enter"&&M(w)}}),v&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:v})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-neutral-200 dark:border-gray-600",children:[e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 rounded-md font-medium bg-neutral-200 dark:bg-gray-600 text-neutral-800 dark:text-gray-200 hover:bg-neutral-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md font-medium bg-[#FF6A00] text-white hover:bg-[#FF8020] transition-colors",children:f})]})]})})]}):null}function QR({isOpen:s,onClose:a,onSave:n,udt:i}){const[c,d]=p.useState(i?.name||""),[u,h]=p.useState(i?.description||""),[x,f]=p.useState(i?.members||[]),[y,b]=p.useState(new Set),v=T=>{const A={name:`Member${x.length+1}`,type:"BOOL",description:"",defaultValue:!1};if(T){const D=(C,S)=>{if(S.length===0)return C;const[k,...P]=S;return C.map(G=>G.name===k?{...G,members:D(G.members||[],P).concat(A)}:G)};f(D(x,T.split(".")))}else f([...x,A])},N=T=>{const A=T.split("."),D=(C,S)=>{if(S.length===1)return C.filter(G=>G.name!==S[0]);const[k,...P]=S;return C.map(G=>G.name===k?{...G,members:D(G.members||[],P)}:G)};f(D(x,A))},E=(T,A)=>{const D=T.split("."),C=(S,k)=>{if(k.length===1)return S.map(U=>U.name===k[0]?{...U,...A}:U);const[P,...G]=k;return S.map(U=>U.name===P?{...U,members:C(U.members||[],G)}:U)};f(C(x,D))},M=T=>{const A=new Set(y);A.has(T)?A.delete(T):A.add(T),b(A)},L=()=>{if(!c.trim()){alert("UDT name is required");return}const T={id:i?.id||`udt_${Date.now()}`,name:c.trim(),description:u.trim(),members:x,createdAt:i?.createdAt||new Date().toISOString(),createdBy:i?.createdBy||"system"};n(T)},w=(T,A="")=>{const D=A?`${A}.${T.name}`:T.name,C=T.members&&T.members.length>0,S=y.has(D);return e.jsxs("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-4 ml-2",children:[e.jsxs("div",{className:"flex items-center gap-2 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg px-3 mb-2",children:[C&&e.jsx("button",{onClick:()=>M(D),className:"p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:S?e.jsx(wi,{size:16}):e.jsx(bi,{size:16})}),e.jsx(KT,{size:16,className:"text-gray-400 dark:text-gray-500 cursor-move"}),e.jsx("input",{type:"text",value:T.name,onChange:k=>E(D,{name:k.target.value}),className:"flex-1 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Member name"}),e.jsxs("select",{value:T.type,onChange:k=>E(D,{type:k.target.value}),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"BOOL",children:"BOOL"}),e.jsx("option",{value:"INT",children:"INT"}),e.jsx("option",{value:"DINT",children:"DINT"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"STRING",children:"STRING"}),e.jsx("option",{value:"UDT",children:"UDT"}),e.jsx("option",{value:"STRUCT",children:"STRUCT"}),e.jsx("option",{value:"ARRAY",children:"ARRAY"})]}),T.type==="ARRAY"&&e.jsx("input",{type:"number",value:T.arraySize||0,onChange:k=>E(D,{arraySize:parseInt(k.target.value)}),className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Size",min:"0"}),e.jsx("input",{type:"text",value:T.description||"",onChange:k=>E(D,{description:k.target.value}),className:"flex-1 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Description"}),e.jsx("button",{onClick:()=>v(D),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-blue-600 dark:text-blue-400",title:"Add nested member",children:e.jsx(ir,{size:16})}),e.jsx("button",{onClick:()=>N(D),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-red-600 dark:text-red-400",children:e.jsx(Un,{size:16})})]}),C&&S&&e.jsx(Nr,{children:e.jsx(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-4",children:T.members.map(k=>w(k,D))})})]},D)};return e.jsxs(yt,{isOpen:s,onClose:a,title:i?"Edit UDT":"Create New UDT",size:"large",children:[e.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"UDT Name *"}),e.jsx("input",{type:"text",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"MotorUDT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:u,onChange:T=>h(T.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",rows:2,placeholder:"Standard motor control structure with status and faults"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Members (",x.length,")"]}),e.jsxs("button",{onClick:()=>v(),className:"flex items-center gap-2 px-3 py-1.5 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm",children:[e.jsx(ir,{size:16}),"Add Member"]})]}),e.jsx("div",{className:"space-y-2 border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-white dark:bg-gray-800",children:x.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:'No members yet. Click "Add Member" to start building your UDT.'}):x.map(T=>w(T))})]}),x.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Structure Preview"}),e.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-xs overflow-x-auto font-mono",children:`TYPE ${c}
STRUCT
${Ak(x,2)}
END_STRUCT
END_TYPE`})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 p-6 border-t",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:[e.jsx(lu,{size:16}),i?"Update UDT":"Create UDT"]})]})]})}function Ak(s,a=0){return s.map(n=>{const i=" ".repeat(a);let c=`${i}${n.name} : ${n.type}`;return n.type==="ARRAY"&&n.arraySize&&(c=`${i}${n.name} : ARRAY[0..${n.arraySize-1}] OF ${n.baseType||"BOOL"}`),n.members&&n.members.length>0&&(c=`${i}${n.name} : STRUCT
${Ak(n.members,a+2)}
${i}END_STRUCT`),n.description&&(c+=` // ${n.description}`),c}).join(`;
`)+";"}function WR({isOpen:s,onClose:a,onExecute:n,selectedTagsCount:i,previewData:c}){const[d,u]=p.useState("rename"),[h,x]=p.useState(""),[f,y]=p.useState(""),[b,v]=p.useState("global"),[N,E]=p.useState("BOOL"),[M,L]=p.useState(""),[w,T]=p.useState(!1),A=()=>{const S=C();n(d,S,!0),T(!0)},D=()=>{const S=C();n(d,S,!1)},C=()=>{switch(d){case"rename":return{pattern:h,replacement:f};case"move":return{scope:b};case"convert":return{targetType:N};case"duplicate":return{suffix:"_Copy"};case"create-children":return{parentUDT:M};default:return{}}};return e.jsx(yt,{isOpen:s,onClose:a,title:"Bulk Tag Operations",size:"large",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"text-blue-600",size:20}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[i," tag",i!==1?"s":""," selected for bulk operation"]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Operation"}),e.jsxs("select",{value:d,onChange:S=>{u(S.target.value),T(!1)},className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"rename",children:"Bulk Rename (Pattern)"}),e.jsx("option",{value:"move",children:"Move to Scope"}),e.jsx("option",{value:"convert",children:"Type Conversion"}),e.jsx("option",{value:"duplicate",children:"Duplicate Tags"}),e.jsx("option",{value:"create-children",children:"Create Children under UDT"}),e.jsx("option",{value:"delete",children:"Archive Tags"}),e.jsx("option",{value:"export",children:"Export Selection"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[d==="rename"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Find Pattern (Regex supported)"}),e.jsx("input",{type:"text",value:h,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 border rounded-lg font-mono text-sm",placeholder:"e.g., _PV$ or ^Temp"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use regex patterns to match tag names"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Replace With"}),e.jsx("input",{type:"text",value:f,onChange:S=>y(S.target.value),className:"w-full px-3 py-2 border rounded-lg font-mono text-sm",placeholder:"e.g., _ProcessValue"})]})]}),d==="move"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Scope"}),e.jsxs("select",{value:b,onChange:S=>v(S.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"program",children:"Program"}),e.jsx("option",{value:"task",children:"Task"})]}),e.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded p-3",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx(qe,{size:14,className:"inline mr-1"}),"Moving tags to different scopes may require approval"]})})]}),d==="convert"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Data Type"}),e.jsxs("select",{value:N,onChange:S=>E(S.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"BOOL",children:"BOOL"}),e.jsx("option",{value:"INT",children:"INT"}),e.jsx("option",{value:"DINT",children:"DINT"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"STRING",children:"STRING"})]}),e.jsx("div",{className:"mt-3 bg-red-50 border border-red-200 rounded p-3",children:e.jsxs("p",{className:"text-xs text-red-800",children:[e.jsx(jt,{size:14,className:"inline mr-1"}),"Type conversion may cause data loss. Preview changes carefully."]})})]}),d==="create-children"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent UDT Name"}),e.jsx("input",{type:"text",value:M,onChange:S=>L(S.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"MotorUDT"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selected tags will become children of this UDT"})]}),d==="delete"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx(jt,{className:"text-red-600 mb-2",size:24}),e.jsxs("p",{className:"text-sm text-red-900 font-medium mb-2",children:["This will archive ",i," tag",i!==1?"s":""]}),e.jsx("p",{className:"text-xs text-red-800",children:"Archived tags can be restored from the lifecycle filter."})]})]}),w&&c&&e.jsxs(ze.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Dry-Run Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Operation"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:c.operation})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Affected Tags"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:c.affectedTags})]}),e.jsxs("div",{className:"bg-amber-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Status"}),e.jsx("p",{className:"text-lg font-bold text-amber-900",children:c.dryRun?"DRY RUN":"READY"})]})]}),c.changes&&c.changes.length>0&&e.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"Changes:"}),c.changes&&c.changes.slice(0,20).map((S,k)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded text-sm",children:[e.jsx(Fe,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"flex-1",children:[e.jsx("strong",{children:S.tagName}),": ",S.action]})]},k)),c.changes.length>20&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["... and ",c.changes.length-20," more"]})]}),c.affectedFiles&&c.affectedFiles.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"Affected Files:"}),e.jsx("div",{className:"space-y-1",children:c.affectedFiles.map((S,k)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-amber-50 rounded text-sm",children:[e.jsx(As,{size:14,className:"text-amber-600"}),e.jsx("span",{children:S})]},k))})]}),c.requiresApproval&&e.jsxs("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded p-3",children:[e.jsx(qe,{size:16,className:"inline mr-2 text-orange-600"}),e.jsx("span",{className:"text-sm text-orange-800",children:"This operation requires approval before execution"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Jr,{size:16}),"Preview Changes"]}),e.jsxs("button",{onClick:D,disabled:!w||!c,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Fe,{size:16}),"Apply Operation"]})]})]})]})})}function JR({isOpen:s,onClose:a,tag:n,dependencies:i,onNavigate:c}){const d=p.useRef(null),[u,h]=p.useState([]),[x,f]=p.useState([]),[y,b]=p.useState(null),[v,N]=p.useState(null);p.useEffect(()=>{if(!s)return;const L=[],w=[],T={id:n.id,label:n.name,type:"tag",x:400,y:300,color:"#FF6A00"};L.push(T);const A=i.reduce((k,P)=>{const G=P.dependencyType;return k[G]||(k[G]=[]),k[G].push(P),k},{});let D=Math.PI*2/Object.keys(A).length,C=0;const S=200;Object.entries(A).forEach(([k,P])=>{P.forEach((G,U)=>{const Q=C+(U*.3-P.length*.15),Z=400+Math.cos(Q)*S,ie=300+Math.sin(Q)*S,J=`${k}_${G.location.fileName}_${G.location.lineNumber}`,te={id:J,label:`${G.location.fileName}
Line ${G.location.lineNumber}`,type:yv(k),x:Z,y:ie,color:eD(yv(k))};L.push(te),w.push({from:n.id,to:J,type:G.usageType})}),C+=D}),h(L),f(w)},[s,n,i]),p.useEffect(()=>{if(!d.current||u.length===0)return;const L=d.current,w=L.getContext("2d");w&&(w.clearRect(0,0,L.width,L.height),w.strokeStyle="#CBD5E0",w.lineWidth=2,x.forEach(T=>{const A=u.find(k=>k.id===T.from),D=u.find(k=>k.id===T.to);if(!A||!D)return;w.beginPath(),w.moveTo(A.x,A.y),w.lineTo(D.x,D.y),w.stroke();const C=Math.atan2(D.y-A.y,D.x-A.x),S=10;w.fillStyle="#CBD5E0",w.beginPath(),w.moveTo(D.x-S*Math.cos(C-Math.PI/6),D.y-S*Math.sin(C-Math.PI/6)),w.lineTo(D.x,D.y),w.lineTo(D.x-S*Math.cos(C+Math.PI/6),D.y-S*Math.sin(C+Math.PI/6)),w.fill()}),u.forEach(T=>{const A=y?.id===T.id,D=v?.id===T.id,C=A||D?35:30;w.fillStyle=T.color,w.beginPath(),w.arc(T.x,T.y,C,0,Math.PI*2),w.fill(),(A||D)&&(w.strokeStyle="#1F2937",w.lineWidth=3,w.stroke()),w.fillStyle="white",w.font="bold 16px sans-serif",w.textAlign="center",w.textBaseline="middle";const S=tD(T.type);w.fillText(S,T.x,T.y)}))},[u,x,y,v]);const E=L=>{const w=d.current;if(!w)return;const T=w.getBoundingClientRect(),A=L.clientX-T.left,D=L.clientY-T.top,C=u.find(S=>{const k=A-S.x,P=D-S.y;return Math.sqrt(k*k+P*P)<=30});C?(b(C),c&&C.id!==n.id&&c(C.type,C.id)):b(null)},M=L=>{const w=d.current;if(!w)return;const T=w.getBoundingClientRect(),A=L.clientX-T.left,D=L.clientY-T.top,C=u.find(S=>{const k=A-S.x,P=D-S.y;return Math.sqrt(k*k+P*P)<=30});N(C||null),w.style.cursor=C?"pointer":"default"};return e.jsx(yt,{isOpen:s,onClose:a,title:`Dependency Graph: ${n.name}`,size:"large",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:["This graph shows all places where ",e.jsx("strong",{children:n.name})," is referenced. Click on nodes to navigate to their locations."]})}),e.jsx("div",{className:"relative border rounded-lg bg-gray-50 mb-4",children:e.jsx("canvas",{ref:d,width:800,height:600,onClick:E,onMouseMove:M,className:"w-full"})}),e.jsx("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[{type:"tag",label:"Tag",color:"#FF6A00",icon:ji},{type:"routine",label:"Routine",color:"#3B82F6",icon:Go},{type:"file",label:"File",color:"#10B981",icon:As},{type:"hmi",label:"HMI",color:"#8B5CF6",icon:kg},{type:"alarm",label:"Alarm",color:"#EF4444",icon:nT}].map(L=>{const w=L.icon;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:L.color},children:e.jsx(w,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-sm text-gray-700",children:L.label})]},L.type)})}),y&&y.id!==n.id&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-white dark:bg-gray-800",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Selected Node"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium",children:y.type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"font-mono text-xs",children:y.label})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total References"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Routines"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(i.map(L=>L.location.fileName)).size})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Read Operations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(L=>L.usageType==="read").length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Write Operations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(L=>L.usageType==="write").length})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Close"})})]})})}function yv(s){return s.includes("hmi")?"hmi":s.includes("alarm")?"alarm":s.includes("routine")?"routine":s.includes("file")?"file":"tag"}function eD(s){switch(s){case"tag":return"#FF6A00";case"routine":return"#3B82F6";case"file":return"#10B981";case"hmi":return"#8B5CF6";case"alarm":return"#EF4444";default:return"#6B7280"}}function tD(s){switch(s){case"tag":return"T";case"routine":return"R";case"file":return"F";case"hmi":return"H";case"alarm":return"A";default:return"?"}}function sD({tags:s,searchTerm:a,regexSearch:n,onTagSelect:i,onTagEdit:c,onAddressMapping:d,onValidationRules:u,selectedTagId:h}){const[x,f]=p.useState(new Set),[y,b]=p.useState(null),v=p.useMemo(()=>{const D={};return s.forEach(C=>{const S=[];C.area&&S.push({type:"area",name:C.area}),C.equipment&&S.push({type:"equipment",name:C.equipment}),C.routine&&S.push({type:"routine",name:C.routine});let k=D;S.forEach((G,U)=>{const Q=`${G.type}:${G.name}`;k[Q]||(k[Q]={id:Q,type:G.type,name:G.name,children:{},tags:[],path:S.slice(0,U+1).map(Z=>Z.name).join(" / ")}),k=k[Q].children});const P=S.length>0?`${S[S.length-1].type}:${S[S.length-1].name}`:"root";if(S.length>0){let G=D;S.forEach(Q=>{const Z=`${Q.type}:${Q.name}`;G=G[Z].children}),D[P]||(D[P]={children:{},tags:[]});let U=D;S.forEach((Q,Z)=>{const ie=`${Q.type}:${Q.name}`;Z<S.length-1?U=U[ie].children:(U[ie].tags||(U[ie].tags=[]),U[ie].tags.push(C))})}else D.root||(D.root={id:"root",type:"root",name:"Root Tags",children:{},tags:[]}),D.root.tags.push(C)}),D},[s]),N=p.useMemo(()=>{if(!a)return v;const D=k=>{if(n)try{const P=new RegExp(a,"i"),G=[k.area,k.equipment,k.routine,k.name].filter(Boolean).join("/");return P.test(G)||P.test(k.name)}catch{return k.name.toLowerCase().includes(a.toLowerCase())}else{const P=a.toLowerCase();return!!(k.name.toLowerCase().includes(P)||k.area?.toLowerCase().includes(P)||k.equipment?.toLowerCase().includes(P)||k.routine?.toLowerCase().includes(P)||k.metadata?.description?.toLowerCase().includes(P))}},C=k=>{if(!k)return null;const P=k.tags?.filter(D)||[],G={};return Object.keys(k.children||{}).forEach(U=>{const Q=C(k.children[U]);Q&&(G[U]=Q)}),P.length>0||Object.keys(G).length>0?{...k,tags:P,children:G}:null},S={};return Object.keys(v).forEach(k=>{const P=C(v[k]);P&&(S[k]=P,a&&f(G=>new Set([...G,P.id])))}),S},[v,a,n]),E=D=>{f(C=>{const S=new Set(C);return S.has(D)?S.delete(D):S.add(D),S})},M=(D,C)=>{switch(D){case"area":return C?e.jsx(Yo,{size:16,className:"text-blue-500"}):e.jsx(Xd,{size:16,className:"text-blue-500"});case"equipment":return e.jsx(qo,{size:16,className:"text-purple-500"});case"routine":return e.jsx(Zt,{size:16,className:"text-green-500"});case"root":return e.jsx(Xd,{size:16,className:"text-gray-500"});default:return e.jsx(jo,{size:8,className:"text-gray-400"})}},L=D=>D.requiresApproval?e.jsx(u5,{size:12,className:"text-red-500"}):D.lifecycle==="deprecated"?e.jsx(bt,{size:12,className:"text-amber-500"}):D.lifecycle==="active"?e.jsx(Fe,{size:12,className:"text-green-500"}):null,w=D=>{switch(D){case"BOOL":return"bg-blue-100 text-blue-700";case"INT":case"DINT":return"bg-purple-100 text-purple-700";case"REAL":case"LREAL":return"bg-green-100 text-green-700";case"STRING":return"bg-amber-100 text-amber-700";case"UDT":return"bg-pink-100 text-pink-700";default:return"bg-gray-100 text-gray-700"}},T=D=>{if(!a)return D;try{if(n){const C=new RegExp(`(${a})`,"gi");return D.split(C).map((k,P)=>new RegExp(a,"gi").test(k)?e.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-600 font-semibold",children:k},P):k)}else{const C=D.toLowerCase().indexOf(a.toLowerCase());if(C===-1)return D;const S=D.slice(0,C),k=D.slice(C,C+a.length),P=D.slice(C+a.length);return e.jsxs(e.Fragment,{children:[S,e.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-600 font-semibold",children:k}),P]})}}catch{return D}},A=(D,C=0)=>{const S=x.has(D.id),k=Object.keys(D.children||{}).length>0,P=(D.tags||[]).length>0,G=y===D.id;return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-md cursor-pointer transition-colors ${G?"bg-[#FF6A00] bg-opacity-10 border-l-2 border-[#FF6A00]":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:{paddingLeft:`${C*20+8}px`},onClick:()=>{(k||P)&&E(D.id),b(D.id)},children:[k||P?S?e.jsx(wi,{size:16,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}):e.jsx(bi,{size:16,className:"text-gray-500 dark:text-gray-400 flex-shrink-0"}):e.jsx("div",{className:"w-4"}),M(D.type,S),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 flex-1",children:T(D.name)}),P&&e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded",children:D.tags.length})]}),S&&e.jsxs("div",{children:[Object.values(D.children||{}).map(U=>A(U,C+1)),D.tags?.map(U=>e.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-md cursor-pointer transition-colors group ${h===U.id?"bg-[#FF6A00] bg-opacity-20 border-l-2 border-[#FF6A00]":"hover:bg-blue-50 dark:hover:bg-gray-700"}`,style:{paddingLeft:`${(C+1)*20+8}px`},onClick:()=>i(U),onDoubleClick:()=>c(U),children:[e.jsx(ji,{size:14,className:"text-[#FF6A00] flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200 flex-1 font-mono",children:T(U.name)}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded font-medium ${w(U.type)}`,children:U.type}),L(U),U.udtType&&e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:U.udtType}),e.jsxs("div",{className:"hidden group-hover:flex items-center gap-1",children:[d&&e.jsx("button",{onClick:Q=>{Q.stopPropagation(),d(U)},className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900 rounded text-blue-600 dark:text-blue-400",title:"Address Mapping",children:e.jsx(Zt,{size:12})}),u&&e.jsx("button",{onClick:Q=>{Q.stopPropagation(),u(U)},className:"p-1 hover:bg-green-100 dark:hover:bg-green-900 rounded text-green-600 dark:text-green-400",title:"Validation Rules",children:e.jsx(Fe,{size:12})})]})]},U.id))]})]},D.id)};return e.jsx("div",{className:"h-full overflow-auto p-4 bg-white dark:bg-gray-900",children:Object.keys(N).length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(ji,{size:48,className:"mx-auto mb-3 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-sm",children:a?"No tags match your search":"No tags in hierarchy"})]}):e.jsx("div",{className:"space-y-0.5",children:Object.values(N).map(D=>A(D,0))})})}function aD({isOpen:s,onClose:a,tagId:n,tagName:i,onSave:c}){const[d,u]=p.useState([]),[h,x]=p.useState(null),[f,y]=p.useState(""),[b,v]=p.useState([]),[N,E]=p.useState(!1),[M,L]=p.useState(""),[w,T]=p.useState(""),[A,D]=p.useState("");p.useEffect(()=>{s&&n&&C()},[s,n]);const C=async()=>{const te=[{id:"1",tagId:n||"",alias:"TEMP_01",vendorAddress:"40001",description:"Modbus register for temperature sensor 1"},{id:"2",tagId:n||"",alias:"PRESSURE_SENSOR",vendorAddress:"40002",description:"Main pressure transducer"}];u(te),S(te)},S=te=>{const $=te.map(z=>z.vendorAddress).filter(z=>!!z),_=$.filter((z,Y)=>$.indexOf(z)!==Y);v([...new Set(_)])},k=()=>{if(!M.trim())return;const te={id:`alias_${Date.now()}`,tagId:n||"",alias:M.trim(),vendorAddress:w.trim(),description:A.trim()},$=[...d,te];u($),S($),L(""),T(""),D(""),E(!1)},P=(te,$,_)=>{const z=d.map(Y=>Y.id===te?{...Y,[$]:_}:Y);u(z),S(z)},G=te=>{const $=d.filter(_=>_.id!==te);u($),S($)},U=()=>{c(d),a()},Q=()=>{const te=[["Alias","Vendor Address","Description"],...d.map(Y=>[Y.alias,Y.vendorAddress||"",Y.description||""])].map(Y=>Y.join(",")).join(`
`),$=new Blob([te],{type:"text/csv"}),_=URL.createObjectURL($),z=document.createElement("a");z.href=_,z.download=`aliases_${i||"export"}.csv`,z.click(),URL.revokeObjectURL(_)},Z=te=>{const $=te.target.files?.[0];if(!$)return;const _=new FileReader;_.onload=z=>{const O=(z.target?.result).split(`
`).map(ue=>ue.split(",")).slice(1).filter(ue=>ue[0]).map((ue,oe)=>({id:`imported_${Date.now()}_${oe}`,tagId:n||"",alias:ue[0]?.trim()||"",vendorAddress:ue[1]?.trim()||"",description:ue[2]?.trim()||""})),K=[...d,...O];u(K),S(K)},_.readAsText($)},ie=d.filter(te=>te.alias.toLowerCase().includes(f.toLowerCase())||te.vendorAddress?.toLowerCase().includes(f.toLowerCase())||te.description?.toLowerCase().includes(f.toLowerCase())),J=te=>te&&b.includes(te);return e.jsx(yt,{isOpen:s,onClose:a,title:`Address Mapping: ${i||"Tag"}`,size:"large",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ah,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search aliases or addresses...",value:f,onChange:te=>y(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",title:"Export to CSV",children:[e.jsx(vi,{size:16}),"Export"]}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm cursor-pointer bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx(ou,{size:16}),"Import",e.jsx("input",{type:"file",accept:".csv",onChange:Z,className:"hidden"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm",children:[e.jsx(ir,{size:16}),"Add Alias"]})]})]}),b.length>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{size:16,className:"text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Address Conflicts Detected"}),e.jsxs("p",{className:"text-xs text-red-800 mt-1",children:["The following vendor addresses are mapped to multiple aliases: ",b.join(", ")]})]})]})}),e.jsx(Nr,{children:N&&e.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"New Alias"}),e.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:e.jsx(pt,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsx("input",{type:"text",placeholder:"Alias name *",value:M,onChange:te=>L(te.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),e.jsx("input",{type:"text",placeholder:"Vendor address (e.g., 40001)",value:w,onChange:te=>T(te.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-mono bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),e.jsx("input",{type:"text",placeholder:"Description",value:A,onChange:te=>D(te.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsx("button",{onClick:k,disabled:!M.trim(),className:"w-full px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Add Alias"})]})}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Alias"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Vendor Address"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Description"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-700 w-24",children:"Actions"})]})}),e.jsx("tbody",{children:ie.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"text-center py-8 text-gray-500",children:[e.jsx(rk,{size:48,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No aliases defined yet"}),e.jsx("button",{onClick:()=>E(!0),className:"mt-2 text-sm text-[#FF6A00] hover:underline",children:"Add your first alias"})]})}):ie.map(te=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"py-3 px-4",children:h===te.id?e.jsx("input",{type:"text",value:te.alias,onChange:$=>P(te.id,"alias",$.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):e.jsx("span",{className:"font-medium",children:te.alias})}),e.jsx("td",{className:"py-3 px-4",children:h===te.id?e.jsx("input",{type:"text",value:te.vendorAddress||"",onChange:$=>P(te.id,"vendorAddress",$.target.value),className:`w-full px-2 py-1 border rounded text-sm font-mono ${J(te.vendorAddress)?"border-red-500":""}`}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:`text-sm ${J(te.vendorAddress)?"text-red-600":""}`,children:te.vendorAddress||""}),J(te.vendorAddress)&&e.jsx(jt,{size:14,className:"text-red-500"})]})}),e.jsx("td",{className:"py-3 px-4",children:h===te.id?e.jsx("input",{type:"text",value:te.description||"",onChange:$=>P(te.id,"description",$.target.value),className:"w-full px-2 py-1 border rounded text-sm"}):e.jsx("span",{className:"text-gray-600",children:te.description||""})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:h===te.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(null),className:"p-1.5 hover:bg-green-100 rounded text-green-600",title:"Save",children:e.jsx(Fe,{size:16})}),e.jsx("button",{onClick:()=>x(null),className:"p-1.5 hover:bg-gray-200 rounded",title:"Cancel",children:e.jsx(pt,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(te.id),className:"p-1.5 hover:bg-blue-100 rounded text-blue-600",title:"Edit",children:e.jsx(nk,{size:16})}),e.jsx("button",{onClick:()=>G(te.id),className:"p-1.5 hover:bg-red-100 rounded text-red-600",title:"Delete",children:e.jsx(Un,{size:16})})]})})})]},te.id))})]})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[d.length," alias",d.length!==1?"es":""]}),b.length>0&&e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(jt,{size:14}),b.length," conflict",b.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:"Cancel"}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:[e.jsx(lu,{size:16}),"Save Changes"]})]})]})]})})}function rD({isOpen:s,onClose:a,tagId:n,tagName:i,tagType:c,onSave:d}){const[u,h]=p.useState([]),[x,f]=p.useState(!1),[y,b]=p.useState("range"),[v,N]=p.useState({min:0,max:100}),[E,M]=p.useState(""),[L,w]=p.useState("error"),[T,A]=p.useState(""),[D,C]=p.useState(""),[S,k]=p.useState("");p.useEffect(()=>{s&&n&&P()},[s,n]);const P=async()=>{h([{id:"1",type:"range",value:{min:0,max:100},message:"Value must be between 0 and 100",severity:"error"},{id:"2",type:"min",value:0,message:"Value cannot be negative",severity:"warning"}])},G=()=>{const _={id:`rule_${Date.now()}`,type:y,value:v,message:E.trim()||ie(y,v),severity:L};h([...u,_]),Z(),f(!1)},U=_=>{h(u.filter(z=>z.id!==_))},Q=()=>{d(u),a()},Z=()=>{b("range"),N({min:0,max:100}),M(""),w("error")},ie=(_,z)=>{switch(_){case"min":return`Value must be at least ${z}`;case"max":return`Value must not exceed ${z}`;case"range":return`Value must be between ${z.min} and ${z.max}`;case"regex":return`Value must match pattern: ${z}`;case"custom":return"Custom validation failed";default:return"Validation failed"}},J=_=>{switch(_.type){case"range":return`${_.value.min} - ${_.value.max}`;case"regex":return e.jsx("code",{className:"text-xs",children:_.value});case"custom":return e.jsxs("code",{className:"text-xs",children:[_.value.substring(0,30),"..."]});default:return String(_.value)}},te=_=>{switch(_){case"error":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20";case"warning":return"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20";case"info":return"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20";default:return"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700"}},$=()=>c&&["INT","DINT","REAL","LREAL"].includes(c);return e.jsx(yt,{isOpen:s,onClose:a,title:`Validation Rules: ${i||"Tag"}`,size:"large",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gr,{size:16,className:"text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm text-blue-900 dark:text-blue-200",children:["Tag Type: ",e.jsx("strong",{children:c||"Unknown"}),$()&&" (Numeric validations available)"]})]})}),$()&&e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Engineering Settings"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Engineering Units"}),e.jsx("input",{type:"text",value:T,onChange:_=>A(_.target.value),placeholder:"e.g., C, PSI, m/s",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Alarm Min Threshold"}),e.jsx("input",{type:"number",value:D,onChange:_=>C(_.target.value?parseFloat(_.target.value):""),placeholder:"Low alarm",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Alarm Max Threshold"}),e.jsx("input",{type:"number",value:S,onChange:_=>k(_.target.value?parseFloat(_.target.value):""),placeholder:"High alarm",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm",children:[e.jsx(ir,{size:16}),"Add Validation Rule"]})}),e.jsx(Nr,{children:x&&e.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"New Validation Rule"}),e.jsx("button",{onClick:()=>{f(!1),Z()},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(pt,{size:16})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Rule Type"}),e.jsxs("select",{value:y,onChange:_=>{b(_.target.value),_.target.value==="range"?N({min:0,max:100}):_.target.value==="custom"?N(`// Custom validation code
return value > 0;`):N("")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"min",children:"Minimum Value"}),e.jsx("option",{value:"max",children:"Maximum Value"}),e.jsx("option",{value:"range",children:"Range (Min-Max)"}),e.jsx("option",{value:"regex",children:"Regex Pattern"}),e.jsx("option",{value:"custom",children:"Custom Script"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Severity"}),e.jsxs("select",{value:L,onChange:_=>w(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"error",children:"Error (Block)"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Value/Constraint"}),y==="range"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",value:v.min,onChange:_=>N({...v,min:parseFloat(_.target.value)||0}),placeholder:"Min",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),e.jsx("input",{type:"number",value:v.max,onChange:_=>N({...v,max:parseFloat(_.target.value)||0}),placeholder:"Max",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}):y==="custom"?e.jsx("textarea",{value:v,onChange:_=>N(_.target.value),placeholder:"// JavaScript expression\\n// 'value' is the tag value\\nreturn value > 0 && value < 100;",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-mono h-24 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):y==="regex"?e.jsx("input",{type:"text",value:v,onChange:_=>N(_.target.value),placeholder:"^[A-Z0-9]+$",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-mono bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):e.jsx("input",{type:"number",value:v,onChange:_=>N(parseFloat(_.target.value)||0),placeholder:"Enter value",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Error Message (Optional)"}),e.jsx("input",{type:"text",value:E,onChange:_=>M(_.target.value),placeholder:ie(y,v),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsx("button",{onClick:G,className:"w-full px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm",children:"Add Rule"})]})]})}),e.jsx("div",{className:"border rounded-lg",children:e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:u.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Fe,{size:48,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No validation rules defined"}),e.jsx("button",{onClick:()=>f(!0),className:"mt-2 text-sm text-[#FF6A00] hover:underline",children:"Add your first rule"})]}):e.jsx("div",{className:"divide-y",children:u.map(_=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase ",children:_.type}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${te(_.severity)}`,children:_.severity})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Value: "}),e.jsx("span",{className:"text-sm text-gray-900",children:J(_)})]}),e.jsx("p",{className:"text-sm text-gray-600",children:_.message})]}),e.jsx("div",{className:"flex items-center gap-1 ml-4",children:e.jsx("button",{onClick:()=>U(_.id),className:"p-1.5 hover:bg-red-100 rounded text-red-600",title:"Delete",children:e.jsx(Un,{size:16})})})]})},_.id))})})}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{size:16,className:"text-amber-600 dark:text-amber-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-amber-900 dark:text-amber-200",children:"Validation Applies To:"}),e.jsxs("ul",{className:"text-xs text-amber-800 dark:text-amber-300 mt-1 space-y-1",children:[e.jsx("li",{children:" Manual tag value updates"}),e.jsx("li",{children:" CSV/JSON imports"}),e.jsx("li",{children:" Bulk operations"}),e.jsx("li",{children:" PLC writes (if configured)"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[u.length," rule",u.length!==1?"s":""," configured"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:"Cancel"}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:[e.jsx(lu,{size:16}),"Save Rules"]})]})]})]})})}function nD(){const{activeProject:s}=jr(),[a,n]=p.useState([]),[i,c]=p.useState([]),[d,u]=p.useState(""),[h,x]=p.useState(!1),[f,y]=p.useState(!1),[b,v]=p.useState("list"),[N,E]=p.useState({}),[M,L]=p.useState(!1),[w,T]=p.useState(!1),[A,D]=p.useState(!1),[C,S]=p.useState(!1),[k,P]=p.useState(!1),[G,U]=p.useState(!1),[Q,Z]=p.useState(!1),[ie,J]=p.useState(""),[te,$]=p.useState(!1),[_,z]=p.useState(null),[Y,se]=p.useState(!1),[O,K]=p.useState(null),[ue,oe]=p.useState(!1),[Ee,we]=p.useState(null),[Oe,Ne]=p.useState(!1),[Ge,At]=p.useState(null),[Pt,Qt]=p.useState(!1),[Vt,ye]=p.useState(!1),[H,Ae]=p.useState(null),[Ve,Ze]=p.useState(new Set),[$t,Ut]=p.useState(null),[Nt,zs]=p.useState(null),[Js,Le]=p.useState(null),[Vs,ns]=p.useState([]),[ms,ws]=p.useState(""),[Hs,Wt]=p.useState("BOOL"),[ha,xa]=p.useState("global"),[$s,Tt]=p.useState("draft"),[js,kt]=p.useState(""),[ea,is]=p.useState(""),[fa,rt]=p.useState(!1),[ta,He]=p.useState(!1),[Jt,ls]=p.useState(!1),Gs=Sl(B=>B.syncTags);p.useEffect(()=>{s&&Ka()},[s]);const Ka=async()=>{y(!0);try{await Promise.all([es(),I(),me()])}catch(B){console.error("Failed to load tag data:",B)}finally{y(!1)}},es=async()=>{try{const B=await Ls.getAll();Array.isArray(B)?n(B):B&&typeof B=="object"&&"tags"in B&&Array.isArray(B.tags)?n(B.tags):(console.warn("Unexpected tags response format:",B),n([]))}catch(B){console.error("Failed to load tags:",B),n([])}},I=async()=>{try{const B=await Ls.getUDTs(s?.id);c(B||[])}catch(B){console.error("Failed to load UDTs:",B),c([])}},me=async()=>{},ke=async()=>{await Gs(),await es(),J("Tags synced to shadow runtime!"),Z(!0)},tt=async()=>{try{const B=await Ls.exportTags(),De=window.URL.createObjectURL(B),et=document.createElement("a");et.href=De,et.download=`tags-export-${Date.now()}.json`,document.body.appendChild(et),et.click(),document.body.removeChild(et),window.URL.revokeObjectURL(De),J("Tags exported successfully!"),Z(!0)}catch(B){console.error("Export failed:",B),J("Failed to export tags"),Z(!0)}},Se=async B=>{y(!0);try{await Ls.importTags(B,!1),await es(),J("Tags imported successfully!"),Z(!0)}catch(De){console.error("Import failed:",De),J("Failed to import tags: "+De.message),Z(!0)}finally{y(!1)}},mt=async(B,De,et=!0)=>{if(Ve.size===0){J("No tags selected"),Z(!0);return}y(!0);try{const F=await Ls.bulkOperation({operation:B,params:De,tagIds:Array.from(Ve),dryRun:et,projectId:s?.id});et?Le(F):(await es(),Ze(new Set),J(`Bulk operation completed: ${F.affectedTags} tag(s) ${B}`),Z(!0),S(!1))}catch(F){console.error("Bulk operation failed:",F),J("Bulk operation failed: "+F.message),Z(!0)}finally{y(!1)}},Qe=async(B,De)=>{const et=a.find(F=>F.id===B);if(!et){J("Tag not found"),Z(!0);return}K({tagId:B,oldName:et.name,newName:De}),se(!0)},os=async()=>{if(!O)return;const{tagId:B,oldName:De,newName:et}=O;y(!0);try{const F=a.find(ce=>ce.id===B);if(!F)throw new Error("Tag not found");try{const ce=await Ls.getRefactoringPreview(B,et,s?.id);zs(ce),U(!0),se(!1),K(null)}catch(ce){if(ce.message?.includes("<!DOCTYPE")||ce.message?.includes("not valid JSON"))console.warn("Refactoring preview endpoint not available, performing direct rename"),await Ls.update(B,{...F,name:et}),await es(),J(`Tag renamed from "${De}" to "${et}" successfully!`),Z(!0),se(!1),K(null);else throw ce}}catch(F){console.error("Rename failed:",F),J("Failed to rename tag: "+F.message),Z(!0),se(!1),K(null)}finally{y(!1)}},Ys=async()=>{if(Nt){y(!0);try{await Ls.applyRefactoring(Nt,s?.id),U(!1),zs(null),await es(),J("Tag renamed successfully!"),Z(!0)}catch(B){console.error("Refactoring failed:",B),J("Failed to apply refactoring: "+B.message),Z(!0)}finally{y(!1)}}},Ts=async B=>{y(!0);try{await Ls.createUDT(B,s?.id),await I(),D(!1),J("UDT created successfully!"),Z(!0)}catch(De){console.error("UDT creation failed:",De),J("Failed to create UDT: "+De.message),Z(!0)}finally{y(!1)}},Xs=async()=>{if(!ms.trim()){J("Tag name is required"),Z(!0);return}y(!0);try{const De=!["BOOL","INT","DINT","REAL","STRING","TIMER","COUNTER"].includes(Hs),et={name:ms.trim(),type:De?"UDT":Hs,udtType:De?Hs:void 0,scope:ha,lifecycle:$s,address:js.trim()||void 0,readOnly:fa,requiresApproval:ta,scopeLocked:Jt,source:"shadow",lastUpdate:new Date,metadata:{...$t?.metadata,description:ea.trim()||void 0}};$t?(await Ls.update($t.id,et),J(`Tag "${ms}" updated successfully!`)):(await Ls.create(et),J(`Tag "${ms}" created successfully!`)),await es(),zt(),T(!1),Z(!0)}catch(B){console.error("Tag operation failed:",B),J(`Failed to ${$t?"update":"create"} tag: `+B.message),Z(!0)}finally{y(!1)}},zt=()=>{ws(""),Wt("BOOL"),xa("global"),Tt("draft"),kt(""),is(""),rt(!1),He(!1),ls(!1),Ut(null)},gs=B=>{const De=new Set(Ve);De.has(B)?De.delete(B):De.add(B),Ze(De)},Es=async B=>{we(B),oe(!0)},Ma=async B=>{if(Ee){y(!0);try{await Ls.create({...Ee,id:"",name:B}),await es(),J(`Tag "${B}" created successfully!`),Z(!0),oe(!1),we(null)}catch(De){console.error("Copy failed:",De),J("Failed to copy tag: "+De.message),Z(!0)}finally{y(!1)}}},Bn=async B=>{At(B),Ne(!0)},en=async()=>{if(Ge){y(!0);try{await Ls.update(Ge.id,{...Ge,lifecycle:"archived"}),await es(),J(`Tag "${Ge.name}" archived successfully!`),Z(!0),Ne(!1),At(null)}catch(B){console.error("Archive failed:",B),J("Failed to archive tag: "+B.message),Z(!0)}finally{y(!1)}}},cr=B=>{Ut(B),ws(B.name),Wt(B.type==="UDT"&&B.udtType?B.udtType:B.type),xa(B.scope||"global"),Tt(B.lifecycle||"draft"),kt(B.address||""),is(B.metadata?.description||""),rt(B.readOnly||!1),He(B.requiresApproval||!1),ls(B.scopeLocked||!1),T(!0)},pa=async B=>{y(!0);try{const De=await Ls.getTagDependencies(B,s?.id);ns(De)}catch(De){console.error("Failed to load tag dependencies:",De),ns([])}finally{y(!1)}},Za=B=>{Ae(B),Qt(!0)},sa=B=>{Ae(B),ye(!0)},ya=async B=>{if(H){y(!0);try{await Ls.saveTagAliases(H.id,B,s?.id),J("Address mappings saved successfully!"),Z(!0),await es()}catch(De){console.error("Failed to save aliases:",De),J("Failed to save address mappings: "+De.message),Z(!0)}finally{y(!1)}}},La=async B=>{if(H){y(!0);try{await Ls.saveTagValidationRules(H.id,B,s?.id),J("Validation rules saved successfully!"),Z(!0),await es()}catch(De){console.error("Failed to save validation rules:",De),J("Failed to save validation rules: "+De.message),Z(!0)}finally{y(!1)}}},ba=()=>{Ve.size===st.length?Ze(new Set):Ze(new Set(st.map(B=>B.id)))},st=(Array.isArray(a)?a:[]).filter(B=>{if(d){if(h)try{const De=new RegExp(d,"i");if(!De.test(B.name)&&!De.test(B.address||""))return!1}catch{if(!B.name.toLowerCase().includes(d.toLowerCase()))return!1}else if(!B.name.toLowerCase().includes(d.toLowerCase())&&!B.address?.toLowerCase().includes(d.toLowerCase()))return!1}return!(N.type&&N.type.length>0&&!N.type.includes(B.type)||N.scope&&N.scope.length>0&&(!B.scope||!N.scope.includes(B.scope))||N.lifecycle&&N.lifecycle.length>0&&(!B.lifecycle||!N.lifecycle.includes(B.lifecycle))||N.area&&B.area!==N.area||N.equipment&&B.equipment!==N.equipment||N.hasValidation&&(!B.validationRules||B.validationRules.length===0)||N.hasAlias&&(!B.aliases||B.aliases.length===0)||N.requiresApproval!==void 0&&B.requiresApproval!==N.requiresApproval)}),aa=B=>B===null?"NULL":typeof B=="boolean"?B?"TRUE":"FALSE":B.toString(),ra=B=>{switch(B){case"active":return"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200";case"deprecated":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-200";case"archived":return"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200";default:return"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200"}},va=B=>{switch(B){case"global":return e.jsx(ov,{size:14,className:"text-purple-600"});case"program":return e.jsx(Go,{size:14,className:"text-blue-600"});case"task":return e.jsx(As,{size:14,className:"text-orange-600"});default:return e.jsx(ji,{size:14,className:"text-gray-600"})}};return s?e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-panda-surface-dark",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Tag Database"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["- ",s.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>v("list"),className:`px-3 py-1.5 rounded text-sm transition-colors ${b==="list"?"bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:e.jsx(o5,{size:16})}),e.jsx("button",{onClick:()=>v("tree"),className:`px-3 py-1.5 rounded text-sm transition-colors ${b==="tree"?"bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:e.jsx(aE,{size:16})}),e.jsx("button",{onClick:()=>v("hierarchy"),className:`px-3 py-1.5 rounded text-sm transition-colors ${b==="hierarchy"?"bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:e.jsx(k5,{size:16})})]}),e.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[e.jsx(qo,{size:16}),"Create UDT"]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg text-sm font-medium hover:bg-[#E55F00] transition-colors flex items-center gap-2",children:[e.jsx(ir,{size:16}),"Create Tag"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ah,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500"}),e.jsx("input",{type:"text",placeholder:h?"Regex search (e.g., ^Motor_.*)":"Search tags by name or address...",value:d,onChange:B=>u(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:B=>x(B.target.checked),className:"rounded border-gray-300"}),"Regex"]}),e.jsxs("button",{onClick:()=>L(!M),className:`px-4 py-2 border rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${M?"bg-[#FF6A00] text-white border-[#FF6A00]":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx(lv,{size:16}),"Filters"]}),e.jsxs("button",{onClick:()=>P(!0),disabled:!$t,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Qr,{size:16}),"Dependencies"]}),e.jsxs("button",{onClick:()=>S(!0),disabled:Ve.size===0,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Zt,{size:16}),"Bulk Actions (",Ve.size,")"]}),e.jsx("button",{onClick:tt,disabled:f||a.length===0,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:e.jsx(vi,{size:16})}),e.jsxs("label",{className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors cursor-pointer flex items-center gap-2",children:[e.jsx(ou,{size:16}),"Import",e.jsx("input",{type:"file",accept:".json,.xml,.csv",onChange:B=>B.target.files?.[0]&&Se(B.target.files[0]),className:"hidden"})]}),e.jsx("button",{onClick:ke,disabled:f,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:e.jsx(Ko,{size:16})})]}),e.jsx(Nr,{children:M&&e.jsxs(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 p-6 bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-surface-dark rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[e.jsx(lv,{size:16}),"Filter Tags"]}),e.jsx("button",{onClick:()=>E({}),className:"px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-[#FF6A00] hover:bg-orange-50 dark:hover:bg-orange-900 dark:hover:bg-opacity-20 rounded-md transition-colors",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200 mb-2.5",children:"Data Type"}),e.jsxs("select",{multiple:!0,value:N.type||[],onChange:B=>E({...N,type:Array.from(B.target.selectedOptions,De=>De.value)}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark hover:border-gray-400 dark:hover:border-gray-500 transition-colors",style:{height:"160px"},children:[e.jsx("option",{value:"BOOL",className:"py-1.5",children:"BOOL"}),e.jsx("option",{value:"INT",className:"py-1.5",children:"INT"}),e.jsx("option",{value:"DINT",className:"py-1.5",children:"DINT"}),e.jsx("option",{value:"REAL",className:"py-1.5",children:"REAL"}),e.jsx("option",{value:"STRING",className:"py-1.5",children:"STRING"}),e.jsx("option",{value:"UDT",className:"py-1.5",children:"UDT"})]}),e.jsx("p",{className:"mt-1.5 text-xs text-gray-500 dark:text-gray-400",children:"Hold Ctrl/Cmd to select multiple"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200 mb-2.5",children:"Scope"}),e.jsxs("select",{multiple:!0,value:N.scope||[],onChange:B=>E({...N,scope:Array.from(B.target.selectedOptions,De=>De.value)}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark hover:border-gray-400 dark:hover:border-gray-500 transition-colors",style:{height:"160px"},children:[e.jsx("option",{value:"global",className:"py-1.5",children:"Global"}),e.jsx("option",{value:"program",className:"py-1.5",children:"Program"}),e.jsx("option",{value:"task",className:"py-1.5",children:"Task"})]}),e.jsx("p",{className:"mt-1.5 text-xs text-gray-500 dark:text-gray-400",children:"Select tag scope level"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200 mb-2.5",children:"Lifecycle Status"}),e.jsxs("select",{multiple:!0,value:N.lifecycle||[],onChange:B=>E({...N,lifecycle:Array.from(B.target.selectedOptions,De=>De.value)}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark hover:border-gray-400 dark:hover:border-gray-500 transition-colors",style:{height:"160px"},children:[e.jsx("option",{value:"draft",className:"py-1.5",children:"Draft"}),e.jsx("option",{value:"active",className:"py-1.5",children:"Active"}),e.jsx("option",{value:"deprecated",className:"py-1.5",children:"Deprecated"}),e.jsx("option",{value:"archived",className:"py-1.5",children:"Archived"})]}),e.jsx("p",{className:"mt-1.5 text-xs text-gray-500 dark:text-gray-400",children:"Filter by tag status"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-200 mb-2.5",children:"Additional Filters"}),e.jsxs("div",{className:"space-y-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg p-3",style:{height:"160px"},children:[e.jsxs("label",{className:"flex items-center gap-2.5 text-sm text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:N.hasValidation||!1,onChange:B=>E({...N,hasValidation:B.target.checked}),className:"rounded border-gray-300 text-[#FF6A00] focus:ring-[#FF6A00] cursor-pointer"}),e.jsx("span",{className:"group-hover:text-[#FF6A00] transition-colors",children:"Has Validation Rules"})]}),e.jsxs("label",{className:"flex items-center gap-2.5 text-sm text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:N.hasAlias||!1,onChange:B=>E({...N,hasAlias:B.target.checked}),className:"rounded border-gray-300 text-[#FF6A00] focus:ring-[#FF6A00] cursor-pointer"}),e.jsx("span",{className:"group-hover:text-[#FF6A00] transition-colors",children:"Has Aliases"})]}),e.jsxs("label",{className:"flex items-center gap-2.5 text-sm text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:N.requiresApproval||!1,onChange:B=>E({...N,requiresApproval:B.target.checked}),className:"rounded border-gray-300 text-[#FF6A00] focus:ring-[#FF6A00] cursor-pointer"}),e.jsx("span",{className:"group-hover:text-[#FF6A00] transition-colors",children:"Requires Approval"})]})]}),e.jsx("p",{className:"mt-1.5 text-xs text-gray-500 dark:text-gray-400",children:"Special tag properties"})]})]}),(N.type?.length||N.scope?.length||N.lifecycle?.length||N.hasValidation||N.hasAlias||N.requiresApproval)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active Filters:"}),N.type?.map(B=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 rounded-md",children:["Type: ",B]},B)),N.scope?.map(B=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-200 rounded-md",children:["Scope: ",B]},B)),N.lifecycle?.map(B=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200 rounded-md",children:["Status: ",B]},B)),N.hasValidation&&e.jsx("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-200 rounded-md",children:"Has Validation"}),N.hasAlias&&e.jsx("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-200 rounded-md",children:"Has Aliases"}),N.requiresApproval&&e.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200 rounded-md",children:"Requires Approval"})]})})]})})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-6",children:e.jsx(Ye,{children:f?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading tags..."}):e.jsxs(e.Fragment,{children:[b==="list"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:Ve.size===st.length&&st.length>0,onChange:ba,className:"rounded"})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Scope"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Lifecycle"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Value"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Address"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Hierarchy"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Flags"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-200",children:"Actions"})]})}),e.jsx("tbody",{children:st.map((B,De)=>e.jsxs("tr",{className:`border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${Ve.has(B.id)?"bg-blue-50 dark:bg-blue-900":De%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"}`,children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("input",{type:"checkbox",checked:Ve.has(B.id),onChange:()=>gs(B.id),className:"rounded"})}),e.jsxs("td",{className:"py-2 px-4 font-mono text-gray-900 cursor-pointer hover:text-[#FF6A00]",onClick:()=>Ut(B),children:[B.name,B.lifecycle==="deprecated"&&e.jsx(jt,{size:14,className:"inline ml-2 text-yellow-600"})]}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 rounded",children:[B.type,B.udtType&&` (${B.udtType})`]})}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[va(B.scope),e.jsx("span",{className:"text-xs capitalize",children:B.scope||"global"}),B.scopeLocked&&e.jsx(qe,{size:12,className:"text-gray-600"})]})}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${ra(B.lifecycle)}`,children:B.lifecycle||"active"})}),e.jsx("td",{className:"py-2 px-4 font-mono text-gray-900",children:aa(B.value)}),e.jsx("td",{className:"py-2 px-4 font-mono text-gray-600 text-xs",children:B.address}),e.jsx("td",{className:"py-2 px-4 text-xs text-gray-600",children:B.hierarchyPath||"-"}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[B.validationRules&&B.validationRules.length>0&&e.jsx("span",{title:"Has validation rules",children:e.jsx(qe,{size:14,className:"text-green-600 dark:text-green-400"})}),B.aliases&&B.aliases.length>0&&e.jsx("span",{title:"Has aliases",children:e.jsx(rk,{size:14,className:"text-blue-600"})}),B.requiresApproval&&e.jsx("span",{title:"Requires approval",children:e.jsx(qe,{size:14,className:"text-orange-600"})}),B.readOnly&&e.jsx("span",{title:"Read only",children:e.jsx(Hr,{size:14,className:"text-gray-600"})})]})}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:et=>{et.stopPropagation(),cr(B)},className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900 rounded text-blue-600 dark:text-blue-400",title:"Edit",children:e.jsx(nk,{size:14})}),e.jsx("button",{onClick:et=>{et.stopPropagation(),Za(B)},className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900 rounded text-blue-600 dark:text-blue-400",title:"Address Mapping",children:e.jsx(f5,{size:14})}),e.jsx("button",{onClick:et=>{et.stopPropagation(),sa(B)},className:"p-1 hover:bg-green-100 dark:hover:bg-green-900 rounded text-green-600 dark:text-green-400",title:"Validation Rules",children:e.jsx(Ho,{size:14})}),e.jsx("button",{onClick:et=>{et.stopPropagation(),z(B),$(!0)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Rename",children:e.jsx(As,{size:14})}),e.jsx("button",{onClick:et=>{et.stopPropagation(),Es(B)},className:"p-1 hover:bg-gray-200 rounded",title:"Copy",children:e.jsx(ST,{size:14})}),e.jsx("button",{onClick:et=>{et.stopPropagation(),Bn(B)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Delete",children:e.jsx(Un,{size:14})})]})})]},B.id))})]})}),b==="tree"&&e.jsx("div",{className:"p-4",children:e.jsx(sD,{tags:st,searchTerm:d,regexSearch:h,onTagSelect:B=>{Ut(B),pa(B.id)},onTagEdit:B=>{cr(B)},onAddressMapping:Za,onValidationRules:sa,selectedTagId:$t?.id})}),b==="hierarchy"&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ov,{size:16}),"Areas"]}),e.jsxs("div",{className:"space-y-1",children:[Array.from(new Set((Array.isArray(a)?a:[]).filter(B=>B.area).map(B=>B.area))).map(B=>e.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-gray-100 text-sm",children:[B," (",(Array.isArray(a)?a:[]).filter(De=>De.area===B).length,")"]},B)),(Array.isArray(a)?a:[]).filter(B=>B.area).length===0&&e.jsx("p",{className:"text-xs text-gray-500 px-3 py-2",children:"No areas defined"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(qo,{size:16}),"Equipment"]}),e.jsxs("div",{className:"space-y-1",children:[Array.from(new Set((Array.isArray(a)?a:[]).filter(B=>B.equipment).map(B=>B.equipment))).map(B=>e.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-gray-100 text-sm",children:[B," (",(Array.isArray(a)?a:[]).filter(De=>De.equipment===B).length,")"]},B)),(Array.isArray(a)?a:[]).filter(B=>B.equipment).length===0&&e.jsx("p",{className:"text-xs text-gray-500 px-3 py-2",children:"No equipment defined"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Go,{size:16}),"Routines"]}),e.jsxs("div",{className:"space-y-1",children:[Array.from(new Set((Array.isArray(a)?a:[]).filter(B=>B.routine).map(B=>B.routine))).map(B=>e.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-gray-100 text-sm",children:[B," (",(Array.isArray(a)?a:[]).filter(De=>De.routine===B).length,")"]},B)),(Array.isArray(a)?a:[]).filter(B=>B.routine).length===0&&e.jsx("p",{className:"text-xs text-gray-500 px-3 py-2",children:"No routines defined"})]})]})]})}),b==="list"&&e.jsxs("div",{className:"mt-4 px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex items-center justify-between text-xs text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{children:["Showing ",st.length," of ",a.length," tags",Ve.size>0&&`  ${Ve.size} selected`]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[i.length," UDTs defined"]}),e.jsxs("span",{children:[(Array.isArray(a)?a:[]).filter(B=>B.lifecycle==="deprecated").length," deprecated"]}),e.jsxs("span",{children:[(Array.isArray(a)?a:[]).filter(B=>B.requiresApproval).length," protected"]})]})]})]})})}),w&&e.jsx(yt,{isOpen:w,onClose:()=>{T(!1),zt()},title:$t?"Edit Tag":"Create Tag",size:"large",children:e.jsxs("div",{className:"p-6 space-y-4 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Name *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",placeholder:"Tag_Name",value:ms,onChange:B=>ws(B.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Type *"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",value:Hs,onChange:B=>Wt(B.target.value),children:[e.jsxs("optgroup",{label:"Basic Types",children:[e.jsx("option",{value:"BOOL",children:"BOOL"}),e.jsx("option",{value:"INT",children:"INT"}),e.jsx("option",{value:"DINT",children:"DINT"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"STRING",children:"STRING"}),e.jsx("option",{value:"TIMER",children:"TIMER"}),e.jsx("option",{value:"COUNTER",children:"COUNTER"})]}),i.length>0&&e.jsx("optgroup",{label:"User Defined Types",children:i.map(B=>e.jsx("option",{value:B.name,children:B.name},B.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Scope"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",value:ha,onChange:B=>xa(B.target.value),children:[e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"program",children:"Program"}),e.jsx("option",{value:"task",children:"Task"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Lifecycle"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",value:$s,onChange:B=>Tt(B.target.value),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Address"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",placeholder:"DB1.DBX0.0",value:js,onChange:B=>kt(B.target.value)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-text-dark mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-text-dark",rows:2,placeholder:"Tag description...",value:ea,onChange:B=>is(B.target.value)})]}),e.jsxs("div",{className:"col-span-2 flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:fa,onChange:B=>rt(B.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-text-dark",children:"Read Only"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:ta,onChange:B=>He(B.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-text-dark",children:"Requires Approval"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:Jt,onChange:B=>ls(B.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-text-dark",children:"Lock Scope"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-text-dark bg-white dark:bg-gray-800",children:"Cancel"}),e.jsx("button",{onClick:Xs,disabled:f,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] disabled:opacity-50 disabled:cursor-not-allowed",children:f?$t?"Updating...":"Creating...":$t?"Update Tag":"Create Tag"})]})]})}),A&&e.jsx(QR,{isOpen:A,onClose:()=>D(!1),onSave:Ts}),C&&e.jsx(WR,{isOpen:C,onClose:()=>S(!1),onExecute:(B,De,et)=>mt(B,De,et),selectedTagsCount:Ve.size,previewData:Js||void 0}),k&&$t&&e.jsx(JR,{isOpen:k,onClose:()=>P(!1),tag:$t,dependencies:Vs,onNavigate:(B,De)=>{console.log("Navigate to:",B,De)}}),G&&Nt&&e.jsx(iD,{isOpen:G,onClose:()=>U(!1),preview:Nt,onApply:Ys}),Q&&e.jsx(yt,{isOpen:Q,onClose:()=>Z(!1),title:ie.toLowerCase().includes("fail")||ie.toLowerCase().includes("error")?"Error":"Success",message:ie,type:ie.toLowerCase().includes("fail")||ie.toLowerCase().includes("error")?"error":"success",size:"small"}),te&&_&&e.jsx(Oo,{isOpen:te,onClose:()=>{$(!1),z(null)},onConfirm:B=>{B&&B!==_.name&&Qe(_.id,B),$(!1),z(null)},title:"Rename Tag",label:"Tag Name",placeholder:"Enter new tag name",defaultValue:_.name,required:!0,confirmButtonText:"Next"}),Y&&O&&e.jsx(Oo,{isOpen:Y,onClose:()=>{se(!1),K(null)},onConfirm:os,title:"Confirm Rename",label:"New Tag Name",description:`Rename tag "${O.oldName}" to "${O.newName}"? This will update the tag name directly.`,defaultValue:O.newName,required:!0,confirmButtonText:"Update"}),ue&&Ee&&e.jsx(Oo,{isOpen:ue,onClose:()=>{oe(!1),we(null)},onConfirm:B=>{B&&Ma(B)},title:"Copy Tag",label:"New Tag Name",placeholder:"Enter name for the copied tag",defaultValue:`${Ee.name}_copy`,required:!0,confirmButtonText:"Create"}),Oe&&Ge&&e.jsx(yt,{isOpen:Oe,onClose:()=>{Ne(!1),At(null)},title:"Delete Tag",message:`Are you sure you want to delete tag "${Ge.name}"? This will archive the tag and it can be recovered later.`,type:"warning",size:"small",actions:[{label:"Cancel",onClick:()=>{Ne(!1),At(null)},variant:"secondary"},{label:f?"Deleting...":"Delete",onClick:en,variant:"danger"}]}),Pt&&H&&e.jsx(aD,{isOpen:Pt,onClose:()=>{Qt(!1),Ae(null)},tagId:H.id,tagName:H.name,onSave:ya}),Vt&&H&&e.jsx(rD,{isOpen:Vt,onClose:()=>{ye(!1),Ae(null)},tagId:H.id,tagName:H.name,tagType:H.type,onSave:La})]}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jt,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No project selected"})]})})}function iD({isOpen:s,onClose:a,preview:n,onApply:i}){return e.jsx(yt,{isOpen:s,onClose:a,title:"Refactoring Preview",size:"large",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Rename Tag"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:n.oldName}),"  ",e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:n.newName})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Impact Analysis"}),e.jsxs("span",{className:`px-3 py-1 rounded text-xs font-medium ${n.estimatedImpact==="high"?"bg-red-100 text-red-700":n.estimatedImpact==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[n.estimatedImpact.toUpperCase()," IMPACT"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Affected Files"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.affectedFiles.length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Occurrences"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.affectedFiles.reduce((c,d)=>c+d.occurrences,0)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Requires Approval"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.requiresApproval?"YES":"NO"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Affected Files"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:n.affectedFiles.map((c,d)=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:c.fileName})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[c.occurrences," occurrence(s)"]})]}),e.jsxs("div",{className:"space-y-1 pl-6",children:[c.changes.slice(0,3).map((u,h)=>e.jsxs("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"text-gray-500",children:["Line ",u.line,":"]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-red-600",children:["- ",u.oldText]}),e.jsxs("div",{className:"text-green-600",children:["+ ",u.newText]})]})]},h)),c.changes.length>3&&e.jsxs("p",{className:"text-xs text-gray-500 pl-2",children:["... and ",c.changes.length-3," more"]})]})]},d))})]}),n.requiresApproval&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx(qe,{size:16,className:"inline mr-2"}),"This refactoring requires approval before it can be applied."]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:n.requiresApproval?"Request Approval":"Apply Refactoring"})]})]})})}function bv(s,a){(a==null||a>s.length)&&(a=s.length);for(var n=0,i=Array(a);n<a;n++)i[n]=s[n];return i}function lD(s){if(Array.isArray(s))return s}function oD(s,a,n){return(a=xD(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function cD(s,a){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var i,c,d,u,h=[],x=!0,f=!1;try{if(d=(n=n.call(s)).next,a!==0)for(;!(x=(i=d.call(n)).done)&&(h.push(i.value),h.length!==a);x=!0);}catch(y){f=!0,c=y}finally{try{if(!x&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(f)throw c}}return h}}function dD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vv(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,i)}return n}function jv(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?vv(Object(n),!0).forEach(function(i){oD(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):vv(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}function uD(s,a){if(s==null)return{};var n,i,c=mD(s,a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);for(i=0;i<d.length;i++)n=d[i],a.indexOf(n)===-1&&{}.propertyIsEnumerable.call(s,n)&&(c[n]=s[n])}return c}function mD(s,a){if(s==null)return{};var n={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(a.indexOf(i)!==-1)continue;n[i]=s[i]}return n}function gD(s,a){return lD(s)||cD(s,a)||fD(s,a)||dD()}function hD(s,a){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,a);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function xD(s){var a=hD(s,"string");return typeof a=="symbol"?a:a+""}function fD(s,a){if(s){if(typeof s=="string")return bv(s,a);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bv(s,a):void 0}}function pD(s,a,n){return a in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function Nv(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);a&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,i)}return n}function kv(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Nv(Object(n),!0).forEach(function(i){pD(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Nv(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}function yD(){for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return function(i){return a.reduceRight(function(c,d){return d(c)},i)}}function wo(s){return function a(){for(var n=this,i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return c.length>=s.length?s.apply(this,c):function(){for(var u=arguments.length,h=new Array(u),x=0;x<u;x++)h[x]=arguments[x];return a.apply(n,[].concat(c,h))}}}function Kd(s){return{}.toString.call(s).includes("Object")}function bD(s){return!Object.keys(s).length}function Qo(s){return typeof s=="function"}function vD(s,a){return Object.prototype.hasOwnProperty.call(s,a)}function jD(s,a){return Kd(a)||_n("changeType"),Object.keys(a).some(function(n){return!vD(s,n)})&&_n("changeField"),a}function ND(s){Qo(s)||_n("selectorType")}function kD(s){Qo(s)||Kd(s)||_n("handlerType"),Kd(s)&&Object.values(s).some(function(a){return!Qo(a)})&&_n("handlersType")}function wD(s){s||_n("initialIsRequired"),Kd(s)||_n("initialType"),bD(s)&&_n("initialContent")}function SD(s,a){throw new Error(s[a]||s.default)}var CD={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},_n=wo(SD)(CD),kd={changes:jD,selector:ND,handler:kD,initial:wD};function AD(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};kd.initial(s),kd.handler(a);var n={current:s},i=wo(RD)(n,a),c=wo(ED)(n),d=wo(kd.changes)(s),u=wo(TD)(n);function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(y){return y};return kd.selector(f),f(n.current)}function x(f){yD(i,c,d,u)(f)}return[h,x]}function TD(s,a){return Qo(a)?a(s.current):a}function ED(s,a){return s.current=kv(kv({},s.current),a),a}function RD(s,a,n){return Qo(a)?a(s.current):Object.keys(n).forEach(function(i){var c;return(c=a[i])===null||c===void 0?void 0:c.call(a,s.current[i])}),n}var DD={create:AD},OD={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function _D(s){return function a(){for(var n=this,i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return c.length>=s.length?s.apply(this,c):function(){for(var u=arguments.length,h=new Array(u),x=0;x<u;x++)h[x]=arguments[x];return a.apply(n,[].concat(c,h))}}}function MD(s){return{}.toString.call(s).includes("Object")}function LD(s){return s||wv("configIsRequired"),MD(s)||wv("configType"),s.urls?(FD(),{paths:{vs:s.urls.monacoBase}}):s}function FD(){console.warn(Tk.deprecation)}function PD(s,a){throw new Error(s[a]||s.default)}var Tk={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},wv=_D(PD)(Tk),zD={config:LD},VD=function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return function(c){return n.reduceRight(function(d,u){return u(d)},c)}};function Ek(s,a){return Object.keys(a).forEach(function(n){a[n]instanceof Object&&s[n]&&Object.assign(a[n],Ek(s[n],a[n]))}),jv(jv({},s),a)}var $D={type:"cancelation",msg:"operation is manually canceled"};function Vm(s){var a=!1,n=new Promise(function(i,c){s.then(function(d){return a?c($D):i(d)}),s.catch(c)});return n.cancel=function(){return a=!0},n}var UD=["monaco"],BD=DD.create({config:OD,isInitialized:!1,resolve:null,reject:null,monaco:null}),Rk=gD(BD,2),ic=Rk[0],uu=Rk[1];function ID(s){var a=zD.config(s),n=a.monaco,i=uD(a,UD);uu(function(c){return{config:Ek(c.config,i),monaco:n}})}function qD(){var s=ic(function(a){var n=a.monaco,i=a.isInitialized,c=a.resolve;return{monaco:n,isInitialized:i,resolve:c}});if(!s.isInitialized){if(uu({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),Vm($m);if(window.monaco&&window.monaco.editor)return Dk(window.monaco),s.resolve(window.monaco),Vm($m);VD(HD,YD)(XD)}return Vm($m)}function HD(s){return document.body.appendChild(s)}function GD(s){var a=document.createElement("script");return s&&(a.src=s),a}function YD(s){var a=ic(function(i){var c=i.config,d=i.reject;return{config:c,reject:d}}),n=GD("".concat(a.config.paths.vs,"/loader.js"));return n.onload=function(){return s()},n.onerror=a.reject,n}function XD(){var s=ic(function(n){var i=n.config,c=n.resolve,d=n.reject;return{config:i,resolve:c,reject:d}}),a=window.require;a.config(s.config),a(["vs/editor/editor.main"],function(n){var i=n.m;Dk(i),s.resolve(i)},function(n){s.reject(n)})}function Dk(s){ic().monaco||uu({monaco:s})}function KD(){return ic(function(s){var a=s.monaco;return a})}var $m=new Promise(function(s,a){return uu({resolve:s,reject:a})}),Ok={config:ID,init:qD,__getMonacoInstance:KD},ZD={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Um=ZD,QD={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},WD=QD;function JD({children:s}){return nr.createElement("div",{style:WD.container},s)}var eO=JD,tO=eO;function sO({width:s,height:a,isEditorReady:n,loading:i,_ref:c,className:d,wrapperProps:u}){return nr.createElement("section",{style:{...Um.wrapper,width:s,height:a},...u},!n&&nr.createElement(tO,null,i),nr.createElement("div",{ref:c,style:{...Um.fullWidth,...!n&&Um.hide},className:d}))}var aO=sO,_k=p.memo(aO);function rO(s){p.useEffect(s,[])}var Mk=rO;function nO(s,a,n=!0){let i=p.useRef(!0);p.useEffect(i.current||!n?()=>{i.current=!1}:s,a)}var Ra=nO;function _o(){}function dl(s,a,n,i){return iO(s,i)||lO(s,a,n,i)}function iO(s,a){return s.editor.getModel(Lk(s,a))}function lO(s,a,n,i){return s.editor.createModel(a,n,i?Lk(s,i):void 0)}function Lk(s,a){return s.Uri.parse(a)}function oO({original:s,modified:a,language:n,originalLanguage:i,modifiedLanguage:c,originalModelPath:d,modifiedModelPath:u,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:x=!1,theme:f="light",loading:y="Loading...",options:b={},height:v="100%",width:N="100%",className:E,wrapperProps:M={},beforeMount:L=_o,onMount:w=_o}){let[T,A]=p.useState(!1),[D,C]=p.useState(!0),S=p.useRef(null),k=p.useRef(null),P=p.useRef(null),G=p.useRef(w),U=p.useRef(L),Q=p.useRef(!1);Mk(()=>{let te=Ok.init();return te.then($=>(k.current=$)&&C(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>S.current?J():te.cancel()}),Ra(()=>{if(S.current&&k.current){let te=S.current.getOriginalEditor(),$=dl(k.current,s||"",i||n||"text",d||"");$!==te.getModel()&&te.setModel($)}},[d],T),Ra(()=>{if(S.current&&k.current){let te=S.current.getModifiedEditor(),$=dl(k.current,a||"",c||n||"text",u||"");$!==te.getModel()&&te.setModel($)}},[u],T),Ra(()=>{let te=S.current.getModifiedEditor();te.getOption(k.current.editor.EditorOption.readOnly)?te.setValue(a||""):a!==te.getValue()&&(te.executeEdits("",[{range:te.getModel().getFullModelRange(),text:a||"",forceMoveMarkers:!0}]),te.pushUndoStop())},[a],T),Ra(()=>{S.current?.getModel()?.original.setValue(s||"")},[s],T),Ra(()=>{let{original:te,modified:$}=S.current.getModel();k.current.editor.setModelLanguage(te,i||n||"text"),k.current.editor.setModelLanguage($,c||n||"text")},[n,i,c],T),Ra(()=>{k.current?.editor.setTheme(f)},[f],T),Ra(()=>{S.current?.updateOptions(b)},[b],T);let Z=p.useCallback(()=>{if(!k.current)return;U.current(k.current);let te=dl(k.current,s||"",i||n||"text",d||""),$=dl(k.current,a||"",c||n||"text",u||"");S.current?.setModel({original:te,modified:$})},[n,a,c,s,i,d,u]),ie=p.useCallback(()=>{!Q.current&&P.current&&(S.current=k.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...b}),Z(),k.current?.editor.setTheme(f),A(!0),Q.current=!0)},[b,f,Z]);p.useEffect(()=>{T&&G.current(S.current,k.current)},[T]),p.useEffect(()=>{!D&&!T&&ie()},[D,T,ie]);function J(){let te=S.current?.getModel();h||te?.original?.dispose(),x||te?.modified?.dispose(),S.current?.dispose()}return nr.createElement(_k,{width:N,height:v,isEditorReady:T,loading:y,_ref:P,className:E,wrapperProps:M})}var cO=oO;p.memo(cO);function dO(s){let a=p.useRef();return p.useEffect(()=>{a.current=s},[s]),a.current}var uO=dO,wd=new Map;function mO({defaultValue:s,defaultLanguage:a,defaultPath:n,value:i,language:c,path:d,theme:u="light",line:h,loading:x="Loading...",options:f={},overrideServices:y={},saveViewState:b=!0,keepCurrentModel:v=!1,width:N="100%",height:E="100%",className:M,wrapperProps:L={},beforeMount:w=_o,onMount:T=_o,onChange:A,onValidate:D=_o}){let[C,S]=p.useState(!1),[k,P]=p.useState(!0),G=p.useRef(null),U=p.useRef(null),Q=p.useRef(null),Z=p.useRef(T),ie=p.useRef(w),J=p.useRef(),te=p.useRef(i),$=uO(d),_=p.useRef(!1),z=p.useRef(!1);Mk(()=>{let O=Ok.init();return O.then(K=>(G.current=K)&&P(!1)).catch(K=>K?.type!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>U.current?se():O.cancel()}),Ra(()=>{let O=dl(G.current,s||i||"",a||c||"",d||n||"");O!==U.current?.getModel()&&(b&&wd.set($,U.current?.saveViewState()),U.current?.setModel(O),b&&U.current?.restoreViewState(wd.get(d)))},[d],C),Ra(()=>{U.current?.updateOptions(f)},[f],C),Ra(()=>{!U.current||i===void 0||(U.current.getOption(G.current.editor.EditorOption.readOnly)?U.current.setValue(i):i!==U.current.getValue()&&(z.current=!0,U.current.executeEdits("",[{range:U.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),U.current.pushUndoStop(),z.current=!1))},[i],C),Ra(()=>{let O=U.current?.getModel();O&&c&&G.current?.editor.setModelLanguage(O,c)},[c],C),Ra(()=>{h!==void 0&&U.current?.revealLine(h)},[h],C),Ra(()=>{G.current?.editor.setTheme(u)},[u],C);let Y=p.useCallback(()=>{if(!(!Q.current||!G.current)&&!_.current){ie.current(G.current);let O=d||n,K=dl(G.current,i||s||"",a||c||"",O||"");U.current=G.current?.editor.create(Q.current,{model:K,automaticLayout:!0,...f},y),b&&U.current.restoreViewState(wd.get(O)),G.current.editor.setTheme(u),h!==void 0&&U.current.revealLine(h),S(!0),_.current=!0}},[s,a,n,i,c,d,f,y,b,u,h]);p.useEffect(()=>{C&&Z.current(U.current,G.current)},[C]),p.useEffect(()=>{!k&&!C&&Y()},[k,C,Y]),te.current=i,p.useEffect(()=>{C&&A&&(J.current?.dispose(),J.current=U.current?.onDidChangeModelContent(O=>{z.current||A(U.current.getValue(),O)}))},[C,A]),p.useEffect(()=>{if(C){let O=G.current.editor.onDidChangeMarkers(K=>{let ue=U.current.getModel()?.uri;if(ue&&K.find(oe=>oe.path===ue.path)){let oe=G.current.editor.getModelMarkers({resource:ue});D?.(oe)}});return()=>{O?.dispose()}}return()=>{}},[C,D]);function se(){J.current?.dispose(),v?b&&wd.set(d,U.current.saveViewState()):U.current.getModel()?.dispose(),U.current.dispose()}return nr.createElement(_k,{width:N,height:E,isEditorReady:C,loading:x,_ref:Q,className:M,wrapperProps:L})}var gO=mO,hO=p.memo(gO),xO=hO;function Bm(s){const a=[],n=s.split(`
`);let i="global",c="",d=0;return n.forEach((u,h)=>{const x=h+1,f=u.trim();if(!f||f.startsWith("//")||f.startsWith("(*"))return;const y=f.match(/^PROGRAM\s+([a-zA-Z_][a-zA-Z0-9_]*)/i);if(y){i=y[1],c=y[1],d=x,a.push({name:y[1],type:"program",line:x,column:f.indexOf(y[1]),scope:"global",children:[],references:[],isUsed:!0});return}const b=f.match(/^FUNCTION\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*:\s*([a-zA-Z_][a-zA-Z0-9_]*)/i);if(b){i=b[1],c=b[1],d=x,a.push({name:b[1],type:"function",dataType:b[2],line:x,column:f.indexOf(b[1]),scope:"global",children:[],references:[],isUsed:!0});return}const v=f.match(/^FUNCTION_BLOCK\s+([a-zA-Z_][a-zA-Z0-9_]*)/i);if(v){i=v[1],c=v[1],d=x,a.push({name:v[1],type:"function_block",line:x,column:f.indexOf(v[1]),scope:"global",children:[],references:[],isUsed:!0});return}if(f.match(/^VAR(?:_INPUT|_OUTPUT|_IN_OUT|_GLOBAL|_TEMP)?$/i)||f.match(/^END_VAR$/i))return;const N=f.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\s*:\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\([^)]*\))?)/i);if(N&&!f.startsWith("END_")){const M=N[1],L=N[2],w=L.toUpperCase().includes("STRUCT")||a.some(A=>A.type==="udt"&&A.name===L),T={name:M,type:w?"udt":"variable",dataType:L,line:x,column:f.indexOf(M),scope:i,references:[],isUsed:!1};if(c){const A=a.find(D=>D.name===c&&D.line===d);A&&A.children&&A.children.push(T)}else a.push(T)}const E=f.match(/^TYPE\s+([a-zA-Z_][a-zA-Z0-9_]*)/i);E&&a.push({name:E[1],type:"udt",line:x,column:f.indexOf(E[1]),scope:"global",children:[],references:[],isUsed:!1}),f.match(/^END_(PROGRAM|FUNCTION|FUNCTION_BLOCK)$/i)&&(i="global",c="",d=0)}),a.forEach(u=>{fO(u,n)}),a.forEach(u=>{u.isUsed=(u.references?.length||0)>0||u.type==="program"||u.type==="function"||u.type==="function_block"}),a}function fO(s,a){const n=[],i=s.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`\\b${i}\\b`,"g");a.forEach((d,u)=>{const h=u+1;if(h===s.line)return;const x=d.trim();if(x.startsWith("//")||x.startsWith("(*"))return;let f;for(c.lastIndex=0;(f=c.exec(d))!==null;)n.push({line:h,column:f.index,context:d.trim()})}),s.references=n}function pO(s){const a=[],n=s.split(`
`);let i=null;return n.forEach((c,d)=>{const u=d+1,h=c.trim(),x=h.match(/^PROGRAM\s+([a-zA-Z_][a-zA-Z0-9_]*)/i),f=h.match(/^FUNCTION\s+([a-zA-Z_][a-zA-Z0-9_]*)/i),y=h.match(/^FUNCTION_BLOCK\s+([a-zA-Z_][a-zA-Z0-9_]*)/i);x?i={name:x[1],type:"program",line:u,endLine:u}:f?i={name:f[1],type:"function",line:u,endLine:u}:y&&(i={name:y[1],type:"function_block",line:u,endLine:u}),i&&h.match(/^END_(PROGRAM|FUNCTION|FUNCTION_BLOCK)$/i)&&(i.endLine=u,a.push(i),i=null)}),a}function Sv(s,a,n){console.log("=== renameSymbol called ==="),console.log("oldName:",a),console.log("newName:",n),console.log("content length:",s.length);const i=s.split(`
`);console.log("Total lines:",i.length);const c=[];let d=0;const u=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");console.log("Escaped old name:",u);const h=i.map((x,f)=>{const y=f+1,b=x.trim();if(b.startsWith("//")||b.startsWith("(*"))return x;const v=new RegExp(`\\b${u}\\b`,"g"),N=x.match(v);if(N&&N.length>0){console.log(`Line ${y}: Found ${N.length} match(es) - "${x.trim()}"`),c.push(y),d+=N.length;const E=x.replace(v,n);return console.log(`  -> Replaced: "${E.trim()}"`),E}return x});return console.log("=== renameSymbol result ==="),console.log("Total changes:",d),console.log("Affected lines:",c),{content:h.join(`
`),changes:d,affectedLines:c}}function yO(s,a,n,i,c="VOID"){const d=s.split(`
`),h=d.slice(a-1,n).join(`
`),x=`
FUNCTION ${i} : ${c}
VAR
  (* Add variables here *)
END_VAR

${h}

END_FUNCTION
`,f=d.slice(0,a-1),y=d.slice(n),b=`${i}();`;return{newContent:[...f,b,...y,"",x].join(`
`),extractedCode:h,functionDeclaration:x}}function bO(s,a){const n=s.split(`
`),i=[];let c=0;const d=a?.tabSize||2,u=" ".repeat(d),h=["VAR","VAR_INPUT","VAR_OUTPUT","VAR_IN_OUT","VAR_GLOBAL","IF","FOR","WHILE","REPEAT","CASE","PROGRAM","FUNCTION","FUNCTION_BLOCK"],x=["END_VAR","END_IF","END_FOR","END_WHILE","END_REPEAT","END_CASE","END_PROGRAM","END_FUNCTION","END_FUNCTION_BLOCK"];for(let f=0;f<n.length;f++){let y=n[f].trim();if(y===""){i.push("");continue}x.some(E=>y.toUpperCase().includes(E.toUpperCase()))&&c>0&&c--;const v=u.repeat(c)+y;i.push(v),h.some(E=>y.toUpperCase().includes(E.toUpperCase()))&&c++}return i.join(`
`)}function vO({value:s,onChange:a,markers:n=[],breakpoints:i=[],onBreakpointToggle:c,currentLine:d,tags:u=[],onFormat:h,onCodeLensAction:x,onRenameSymbol:f,onExtractFunction:y,theme:b="light",readOnly:v=!1}){const N=p.useRef(null),E=p.useRef(null);console.log(" MonacoEditor readOnly prop:",v),p.useEffect(()=>{N.current&&(console.log(" Updating editor readOnly to:",v),N.current.updateOptions({readOnly:v}))},[v]),p.useEffect(()=>{if(h&&N.current&&E.current){const L=()=>{N.current?.getAction("editor.action.formatDocument")?.run()};N.current.formatDocument=L}},[h]),p.useEffect(()=>{if(N.current&&E.current){const L=N.current.getModel();L&&E.current.editor.setModelMarkers(L,"st-validator",n)}},[n]),p.useEffect(()=>{if(N.current&&E.current){const L=i.map(w=>({range:new E.current.Range(w,1,w,1),options:{isWholeLine:!0,className:"breakpoint-line",glyphMarginClassName:"breakpoint-glyph"}}));d&&L.push({range:new E.current.Range(d,1,d,1),options:{isWholeLine:!0,className:"current-execution-line",glyphMarginClassName:""}}),N.current.deltaDecorations([],L)}},[i,d]),p.useEffect(()=>{if(N.current&&E.current){const L=N.current.getModel();L&&E.current.editor.setModelMarkers(L,"st-validation",n)}},[n]),p.useEffect(()=>{E.current&&E.current.editor.setTheme(b==="dark"?"st-theme-dark":"st-theme")},[b]);const M=(L,w)=>{if(!L||!w)return;N.current=L,E.current=w,w.languages.register({id:"st"}),w.languages.setMonarchTokensProvider("st",{keywords:["PROGRAM","END_PROGRAM","FUNCTION","END_FUNCTION","FUNCTION_BLOCK","END_FUNCTION_BLOCK","VAR","END_VAR","VAR_INPUT","VAR_OUTPUT","VAR_IN_OUT","VAR_GLOBAL","VAR_TEMP","IF","THEN","ELSIF","ELSE","END_IF","CASE","OF","END_CASE","FOR","TO","BY","DO","END_FOR","WHILE","END_WHILE","REPEAT","UNTIL","END_REPEAT","RETURN","EXIT","AND","OR","NOT","XOR","MOD","TRUE","FALSE"],typeKeywords:["BOOL","INT","DINT","REAL","LREAL","STRING","TIME","DATE","TOD","DT","SINT","USINT","UINT","UDINT","LINT","ULINT","BYTE","WORD","DWORD","LWORD"],operators:[":=","=","<>","<",">","<=",">=","+","-","*","/","**"],tokenizer:{root:[[/\(\*[\s\S]*?\*\)/,"comment"],[/\/\/.*$/,"comment"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@typeKeywords":"type","@default":"identifier"}}],[/\d+\.\d+/,"number.float"],[/\d+/,"number"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,"string","@string_single"]],string:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/'/,"string","@pop"]]}}),w.languages.registerCompletionItemProvider("st",{provideCompletionItems:(C,S)=>{const k=C.getWordUntilPosition(S),P={startLineNumber:S.lineNumber,endLineNumber:S.lineNumber,startColumn:k.startColumn,endColumn:k.endColumn};return!u||u.length===0?{suggestions:[{label:"No tags synced from Tag Database",kind:w.languages.CompletionItemKind.Text,detail:'Go to Tag Database page and click "Sync to Shadow"',documentation:{value:`**No Tags Available**

To use tag autocomplete:
1. Go to Tag Database page
2. Import or create tags
3. Click "Sync to Shadow" button
4. Tags will appear here as suggestions`},insertText:"",range:P,sortText:"zzz"}]}:{suggestions:u.map(U=>({label:U.name,kind:w.languages.CompletionItemKind.Variable,detail:`${U.type} Tag`,documentation:{value:`**${U.name}** (${U.type})

${U.metadata?.description||"No description available"}

${U.metadata?.units?`Units: ${U.metadata.units}`:""}${U.value!==void 0?`
Current Value: ${U.value}`:""}`},insertText:U.name,range:P,sortText:`0${U.name}`}))}}}),w.editor.defineTheme("st-theme",{base:"vs",inherit:!0,rules:[{token:"keyword",foreground:"0000FF",fontStyle:"bold"},{token:"type",foreground:"0000FF"},{token:"comment",foreground:"008000",fontStyle:"italic"},{token:"string",foreground:"A31515"},{token:"number",foreground:"098658"},{token:"identifier",foreground:"000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editorLineNumber.foreground":"#237893","editor.selectionBackground":"#ADD6FF","editor.lineHighlightBackground":"#F5F5F5"}}),w.editor.defineTheme("st-theme-dark",{base:"vs-dark",inherit:!0,rules:[{token:"keyword",foreground:"569CD6",fontStyle:"bold"},{token:"type",foreground:"4EC9B0"},{token:"comment",foreground:"6A9955",fontStyle:"italic"},{token:"string",foreground:"CE9178"},{token:"number",foreground:"B5CEA8"},{token:"identifier",foreground:"D4D4D4"}],colors:{"editor.foreground":"#D4D4D4","editor.background":"#1E1E1E","editorLineNumber.foreground":"#858585","editor.selectionBackground":"#264F78","editor.lineHighlightBackground":"#2A2D2E"}}),w.editor.setTheme(b==="dark"?"st-theme-dark":"st-theme"),x&&w.editor.registerCommand("st.runTest",(C,...S)=>{console.log("=== Run Test Command Executed ==="),console.log("Command args:",S),x("st.runTest",S)}),w.languages.registerDocumentFormattingEditProvider("st",{provideDocumentFormattingEdits:(C,S)=>{const k=C.getFullModelRange(),P=C.getValue(),G=bO(P,S);return[{range:k,text:G}]}}),w.languages.registerCodeLensProvider("st",{provideCodeLenses:C=>{const S=C.getValue(),k=pO(S),P=[];return k.forEach(G=>{P.push({range:{startLineNumber:G.line,startColumn:1,endLineNumber:G.line,endColumn:1},id:`run-test-${G.name}`,command:{id:"st.runTest",title:" Run Test",arguments:[G.name,G.type]}})}),console.log("Code Lenses generated:",P.length),{lenses:P,dispose:()=>{}}},resolveCodeLens:(C,S)=>S}),w.languages.registerCodeActionProvider("st",{provideCodeActions:(C,S,k)=>{const P=[],G=C.getValueInRange(S),U=S.getStartPosition(),Q=C.getWordAtPosition(U);return console.log("=== Code Actions Provider ==="),console.log("Range:",{startLine:S.startLineNumber,startCol:S.startColumn,endLine:S.endLineNumber,endCol:S.endColumn}),console.log("Word at position:",Q),console.log("Selection:",G),Q&&Q.word&&Q.word.length>0&&(console.log("Adding rename action for:",Q.word),P.push({title:` Rename '${Q.word}'`,kind:"refactor.rename",diagnostics:[],edit:void 0,command:{id:"st.renameSymbol",title:"Rename Symbol",arguments:[Q.word]}})),G&&G.trim().length>10&&S.startLineNumber!==S.endLineNumber&&(console.log("Adding extract function action"),P.push({title:" Extract to Function",kind:"refactor.extract",diagnostics:[],edit:void 0,command:{id:"st.extractFunction",title:"Extract Function",arguments:[S.startLineNumber,S.endLineNumber]}})),G.split(`
`).filter(J=>J.match(/^[a-zA-Z_]\w*\s*:/)).length>1&&(console.log("Adding convert to UDT action"),P.push({title:" Convert to UDT",kind:"refactor.rewrite",diagnostics:[],edit:void 0,command:{id:"st.convertToUDT",title:"Convert to UDT",arguments:[S.startLineNumber,S.endLineNumber]}})),(G.toLowerCase().includes("output")||G.toLowerCase().includes(":="))&&(console.log("Adding safety check action"),P.push({title:" Add Safety Check",kind:"quickfix",diagnostics:[],edit:void 0,command:{id:"st.addSafetyCheck",title:"Add Safety Check",arguments:[S.startLineNumber,S.endLineNumber]}})),console.log("Total actions created:",P.length),{actions:P,dispose:()=>{}}}});const T=[];x&&(T.push(L.addAction({id:"st.runTest",label:"Run Test",run:(C,...S)=>{console.log("=== Run Test Action Clicked ==="),console.log("Args:",S),x("st.runTest",S)}})),T.push(L.addAction({id:"st.simulate",label:"Simulate",run:(C,...S)=>{x("st.simulate",S)}})),T.push(L.addAction({id:"st.coverage",label:"Coverage",run:(C,...S)=>{x("st.coverage",S)}}))),f&&T.push(L.addAction({id:"st.renameSymbol",label:"Rename Symbol",run:C=>{console.log("=== Rename Symbol Action Executed ===");const S=C.getPosition(),k=C.getModel();if(!S||!k)return;const P=k.getWordAtPosition(S);if(!P||!P.word||P.word.trim()==="")return;const G=P.word;console.log("Symbol at cursor:",G),f(G)}})),y&&T.push(L.addAction({id:"st.extractFunction",label:"Extract Function",run:(C,...S)=>{console.log("=== Extract Function Action Executed ===");const k=C.getSelection(),P=C.getModel();if(!k||!P)return;const G=k.startLineNumber,U=k.endLineNumber;console.log("Selection:",{startLine:G,endLine:U}),console.log("Selected text:",P.getValueInRange(k)),!(G>=U)&&y(G,U)}})),c&&L.onMouseDown(C=>{const S=C.target;if(S.type===w.editor.MouseTargetType.GUTTER_GLYPH_MARGIN||S.type===w.editor.MouseTargetType.GUTTER_LINE_NUMBERS){const k=S.position?.lineNumber;k&&c(k)}});const A=L.getModel();A&&n.length>0?w.editor.setModelMarkers(A,"st-validation",n):A&&w.editor.setModelMarkers(A,"st-validation",[]);const D=document.createElement("style");D.textContent=`
      .breakpoint-glyph {
        background: #FF6A00;
        width: 10px !important;
        height: 10px;
        border-radius: 50%;
        margin-left: 5px;
        margin-top: 5px;
      }
      .breakpoint-line {
        background: rgba(255, 106, 0, 0.1);
      }
      .current-execution-line {
        background: rgba(255, 255, 0, 0.3);
      }
    `,document.head.appendChild(D)};return e.jsx(xO,{height:"100%",language:"st",value:s,onChange:L=>a(L||""),onMount:M,options:{minimap:{enabled:!0},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,glyphMargin:!0,folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:4,renderLineHighlight:"all",scrollbar:{vertical:"visible",horizontal:"visible"},readOnly:v}})}const Fk=Ni((s,a)=>({tags:[],isLoading:!1,loadTags:async n=>{s({isLoading:!0});try{console.log(` Loading tags for project: ${n||"all"}`);const i=await Ls.getAll(n);console.log(` Loaded ${i.length} tags into store`),s({tags:i,isLoading:!1})}catch(i){console.error("Failed to load tags:",i),s({isLoading:!1})}},getTagNames:()=>a().tags.map(n=>n.name)}));typeof window<"u"&&setTimeout(()=>{Fk.getState().loadTags()},500);function jO(s){const a=[],n=s.split(`
`),i=new Set,c=new Set,d=new Set,u=new Set,h=new Set;let x=!1,f=0,y=0,b=0,v=0;return n.forEach((N,E)=>{const M=E+1,L=N.trim();if(!L||L.startsWith("//")||L.startsWith("(*"))return;if(L.match(/^VAR(?:_INPUT|_OUTPUT|_IN_OUT|_GLOBAL|_TEMP)?$/i)){x=!0;return}if(L.match(/^END_VAR$/i)){x=!1;return}if(x){const k=L.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\s*:\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\([^)]*\))?)\s*(?::=\s*(.+?))?\s*;?\s*(?:\(\*.*\*\))?$/i);if(k){const P=k[1],G=k[2],U=k[3];i.add(P),U&&c.add(P),y+=NO(G)}}L.match(/^(FOR|WHILE|REPEAT)/i)&&(v++,f+=5,b+=.5),L.match(/^END_(FOR|WHILE|REPEAT)/i)&&(v=Math.max(0,v-1)),v>2&&!a.some(k=>k.id===`loop-depth-${M}`)&&a.push({id:`loop-depth-${M}`,severity:"warning",message:`Deeply nested loops (depth: ${v}) may cause performance issues`,line:M,column:1,category:"performance",suggestion:"Consider refactoring to reduce loop nesting"}),i.forEach(k=>{new RegExp(`\\b${k}\\b`,"g").test(L)&&(d.add(k),new RegExp(`${k}\\s*:=`,"g").test(L)&&(!c.has(k)&&!u.has(k)&&a.push({id:`uninit-${k}`,severity:"warning",message:`Variable '${k}' may be used before initialization`,line:M,column:L.indexOf(k),category:"uninitialized",suggestion:`Initialize '${k}' in VAR block or before first use`}),u.add(k)))});const w=/([a-zA-Z_][a-zA-Z0-9_]*)\s*:=/g;let T;const A=new Set;for(;(T=w.exec(L))!==null;){const k=T[1];u.has(k)&&!h.has(k)&&!A.has(k)&&(a.push({id:`race-${k}`,severity:"warning",message:`Variable '${k}' written in multiple locations - potential race condition`,line:M,column:T.index,category:"race_condition",suggestion:"Consider using mutex or ensuring sequential execution"}),h.add(k)),A.add(k)}const D=L.match(/(%[IQM][XBW]*\d+)/i);D&&a.push({id:`unsafe-io-${M}-${D[1]}`,severity:"error",message:`Direct I/O access without validation detected: ${D[1]}`,line:M,column:L.search(/%[IQM]/i),category:"unsafe_io",suggestion:"Use mapped tags instead of direct I/O addresses"});const C=L.match(/\b(SIN|COS|TAN|SQRT|EXP|LOG|POW)\b/i);C&&(f+=2,b+=.1,a.push({id:`heavy-math-${M}-${C[1]}`,severity:"info",message:`Resource-intensive mathematical operation detected: ${C[1]}`,line:M,column:L.indexOf(C[1]),category:"performance",suggestion:"Consider caching results if called frequently"}));const S=L.match(/\b(CONCAT|INSERT|DELETE|FIND|REPLACE)\b/i);S&&(f+=1,b+=.05,a.push({id:`string-op-${M}-${S[1]}`,severity:"info",message:`String operation detected: ${S[1]} can impact scan time`,line:M,column:L.indexOf(S[1]),category:"performance"}))}),i.forEach(N=>{d.has(N)||a.push({id:`unused-${N}`,severity:"hint",message:`Variable '${N}' declared but never used`,line:1,column:1,category:"resource",suggestion:`Remove unused variable '${N}' to save memory`})}),{diagnostics:a,resourceUsage:{estimatedCPU:Math.min(100,f),memoryBytes:y,scanTime:b}}}function NO(s){const a=s.toUpperCase();if(a.includes("BOOL")||a.includes("BYTE")||a.includes("SINT")||a.includes("USINT"))return 1;if(a.includes("INT")||a.includes("UINT")||a.includes("WORD"))return 2;if(a.includes("DINT")||a.includes("UDINT")||a.includes("DWORD")||a.includes("REAL"))return 4;if(a.includes("LINT")||a.includes("ULINT")||a.includes("LWORD")||a.includes("LREAL"))return 8;if(a.includes("STRING")){const i=s.match(/STRING\((\d+)\)/);return i?parseInt(i[1]):80}return a.includes("TIME")||a.includes("DATE")?4:s.match(/ARRAY\[.*\]\s*OF/i)?100:4}function kO(s){const a=[],n=s.split(`
`);let i=!1,c=!1,d=0,u=0;const h=[];n.forEach((T,A)=>{const D=A+1,C=T.trim();if(C.match(/^PROGRAM\s+/i)){i=!0,c=!1;return}if(C.match(/^END_PROGRAM$/i)){i&&!c&&h.push({line:D,message:"Emergency stop not checked in program cycle",canOverride:!1,approved:!1}),i=!1;return}C.match(/\b(ESTOP|E_STOP|EMERGENCY_STOP|EmergencyStop)\b/i)&&(c=!0,d=D-u,u=D,d>50&&h.push({line:D,message:`E-stop check interval too large (${d} lines)`,canOverride:!0,approved:!1}))}),h.length>0&&a.push({id:"safety-estop",name:"Emergency Stop Validation",severity:"critical",category:"Safety",description:"Emergency stop must be checked on every scan cycle",violations:h});const x=[];n.forEach((T,A)=>{const D=A+1,S=T.trim().match(/^([a-zA-Z_][a-zA-Z0-9_]*_(?:OUT|OUTPUT))\s*:=/i);if(S){const k=S[1];let P=!1;for(let G=Math.max(0,A-5);G<A;G++){const U=n[G].trim();if(U.match(/\bIF\b/i)&&U.includes(k.replace(/_OUT.*$/,""))){P=!0;break}}P||x.push({line:D,message:`Output '${k}' activated without safety validation`,canOverride:!0,approved:!1})}}),x.length>0&&a.push({id:"safety-output",name:"Output Validation",severity:"high",category:"Safety",description:"All outputs must be validated before activation",violations:x});const f=[];let y=!1;n.forEach(T=>{T.trim().match(/\b(WATCHDOG|WDT|WDOG)\b/i)&&(y=!0)}),!y&&n.length>100&&(f.push({line:1,message:"No watchdog timer detected in safety-critical program",canOverride:!1,approved:!1}),a.push({id:"safety-watchdog",name:"Watchdog Timer Required",severity:"critical",category:"Safety",description:"Watchdog timer must be implemented for safety-critical programs",violations:f}));const b=[];n.forEach((T,A)=>{const D=A+1,C=T.trim();C.match(/\b(PRESS|CRUSH|CLAMP|ACTUATE).*OUTPUT/i)&&(C.match(/\bAND\b/i)&&(C.match(/BUTTON/gi)||[]).length>=2||b.push({line:D,message:"Dangerous operation should require two-hand control",canOverride:!0,approved:!1}))}),b.length>0&&a.push({id:"safety-twohand",name:"Two-Hand Control",severity:"high",category:"Safety",description:"Dangerous operations should require simultaneous two-hand control",violations:b});const v=[],N=new Set;n.forEach(T=>{const A=T.trim();if(A.match(/\b(SAFETY|CRITICAL|EMERGENCY|LIMIT)\b/i)){const D=A.match(/([a-zA-Z_][a-zA-Z0-9_]*)/i);D&&N.add(D[1])}}),N.forEach(T=>{let A=0;n.forEach(D=>{D.includes(T)&&A++}),A<2&&v.push({line:1,message:`Critical variable '${T}' lacks redundant checking`,canOverride:!1,approved:!1})}),v.length>0&&a.push({id:"safety-redundancy",name:"Redundancy Check",severity:"critical",category:"Safety",description:"Critical safety variables must have redundant checks",violations:v});const E=a.filter(T=>T.severity==="critical").length,M=a.filter(T=>T.severity==="high").length,L=a.reduce((T,A)=>T+A.violations.filter(D=>!D.canOverride&&!D.approved).length,0);let w;return E>0?w="critical":M>0?w="warning":w="safe",{rules:a,overallSafetyLevel:w,blockingIssues:L}}function wO(s){const a=[];if(!s)return a;const n=s.split(`
`);let i=!1;return n.forEach((c,d)=>{const u=c.trim();if(/^VAR(?:_INPUT|_OUTPUT|_IN_OUT|_GLOBAL|_EXTERNAL|_TEMP)?\s*$/i.test(u)){i=!0;return}if(/^END_VAR\s*$/i.test(u)){i=!1;return}if(i&&u){if(u.startsWith("(*")&&u.endsWith("*)")||u.startsWith("//"))return;let h=u;if(h=h.replace(/\(\*.*?\*\)/g,"").trim(),h=h.replace(/\/\/.*$/,"").trim(),!h)return;const x=h.match(/^([a-zA-Z_][a-zA-Z0-9_]*)\s*:\s*([a-zA-Z_][a-zA-Z0-9_]*(?:\([^)]*\))?)\s*(?::=\s*([^;]+))?\s*;?\s*$/i);if(x){const[,f,y,b]=x;let v="";const N=u.match(/\(\*\s*(.*?)\s*\*\)/);N&&(v=N[1].trim()),a.push({id:`${f}_${d}`,name:f.trim(),type:y.trim(),value:b?.trim(),initialValue:b?.trim(),comment:v||void 0,metadata:v?{description:v}:void 0,declarationLine:d+1})}}}),a}function SO(s,a){const n=s.split(`
`),i=[],c=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=new RegExp(`\\b${c}\\b`,"gi");return n.forEach((u,h)=>{const x=h+1;d.lastIndex=0,d.test(u)&&i.push(x)}),i}function Cv(s){if(!s)return[];const a=wO(s);return a.length===0?[]:a.map(n=>{const i=SO(s,n.name),c=i.filter(u=>u!==n.declarationLine),d=c.length;return{...n,usageCount:d,lineNumbers:i,usageLines:c,isUsed:d>0,isDeclared:!0}}).sort((n,i)=>n.isUsed&&!i.isUsed?-1:!n.isUsed&&i.isUsed?1:n.usageCount!==i.usageCount?i.usageCount-n.usageCount:n.name.localeCompare(i.name))}function Av(s,a){const n=s.split(`
`),i=a.split(`
`),c=[],d=Math.max(n.length,i.length);let u=0;for(let h=0;h<d;h++){const x=h<n.length?n[h]:void 0,f=h<i.length?i[h]:void 0;x===void 0&&f!==void 0?c.push({type:"added",modifiedLineNumber:h+1,modifiedText:f,changeId:`add-${u++}`}):x!==void 0&&f===void 0?c.push({type:"removed",originalLineNumber:h+1,originalText:x,changeId:`remove-${u++}`}):x!==f?c.push({type:"modified",originalLineNumber:h+1,modifiedLineNumber:h+1,originalText:x||"",modifiedText:f||"",changeId:`modify-${u++}`}):c.push({type:"unchanged",originalLineNumber:h+1,modifiedLineNumber:h+1,originalText:x,modifiedText:f,changeId:`same-${h}`})}return c}function CO(){const{currentFile:s,files:a,openTabs:n,isModified:i,isSaving:c,validationResult:d,vendor:u,unsavedChanges:h,loadAllFiles:x,loadFile:f,createFile:y,updateContent:b,saveFile:v,validate:N,setVendor:E,undo:M,redo:L,canUndo:w,canRedo:T}=Do(),{pushToShadow:A,isPushing:D,status:C}=Sl(),{run:S,breakpoints:k,toggleBreakpoint:P,currentLine:G}=Lh(),{tags:U,loadTags:Q}=Fk(),{activeProject:Z}=jr(),ie=p.useRef(null);p.useEffect(()=>{if(s){const V=h[s.id]||s.content;console.log(" Current file changed:",{id:s.id,name:s.name,hasContent:!!s.content,contentLength:s.content?.length||0,contentPreview:s.content?.substring(0,50)||"EMPTY",hasUnsavedChanges:h.hasOwnProperty(s.id),unsavedChangesValue:h[s.id],editorWillReceive:V?.length||0,editorPreview:V?.substring(0,50)||"EMPTY"})}else console.log(" No current file")},[s,h]);const[J,te]=p.useState(!1),[$,_]=p.useState(!1),[z,Y]=p.useState([]),[se,O]=p.useState({isOpen:!1,title:"",message:"",type:"info"}),[K,ue]=p.useState(!1),[oe,Ee]=p.useState(null),[we,Oe]=p.useState(!1),[Ne,Ge]=p.useState(!0),[At,Pt]=p.useState(""),[Qt,Vt]=p.useState(new Set),[ye,H]=p.useState([]),[Ae,Ve]=p.useState(!1),[Ze,$t]=p.useState([]),[Ut,Nt]=p.useState(0),[zs,Js]=p.useState(!1),[Le,Vs]=p.useState([]),[ns,ms]=p.useState(!1),[ws,Hs]=p.useState([]),[Wt,ha]=p.useState(!1),[xa,$s]=p.useState([]),[Tt,js]=p.useState(!1),[kt,ea]=p.useState(""),[is,fa]=p.useState(""),[rt,ta]=p.useState("current_file"),[He,Jt]=p.useState([]),[ls,Gs]=p.useState(!1),[Ka,es]=p.useState(""),[I,me]=p.useState(""),[ke,tt]=p.useState(!1),[Se,mt]=p.useState(0),[Qe,os]=p.useState(0),[Ys,Ts]=p.useState("NewFunction"),[Xs,zt]=p.useState("VOID"),[gs,Es]=p.useState(!1),[Ma,Bn]=p.useState(""),[en,cr]=p.useState("{}"),[pa,Za]=p.useState("{}"),[sa,ya]=p.useState(""),[La,ba]=p.useState(""),[st,aa]=p.useState("{}"),[ra,va]=p.useState({}),[B,De]=p.useState(!1),[et,F]=p.useState({current:0,total:0}),[ce,he]=p.useState(!1),[fe,Te]=p.useState(!1),[ve,nt]=p.useState(""),[gt,Be]=p.useState(""),[at,Us]=p.useState(!1),[Ss,Ot]=p.useState(""),[Ns,Ks]=p.useState(""),[Xe,Bt]=p.useState(!1),[In,hs]=p.useState(!1),[_t,tn]=p.useState("");p.useEffect(()=>{i&&s&&h[s.id]&&_(!0)},[i,s,h]),p.useEffect(()=>{if(s){const V=h[s.id]||s.content||"",ee=Cv(V);Y(ee)}else Y([])},[s?.id,s?.content,h]),p.useEffect(()=>{ie.current&&ie.current!==Z?.id&&(console.log(` Project changed from ${ie.current} to ${Z?.id}`),s&&Do.setState({currentFile:null,openTabs:[]})),ie.current=Z?.id||null,Z?(console.log(` Loading files for project: ${Z.name} (${Z.id})`),x(Z.id),Q(Z.id)):console.log(" No active project")},[Z?.id,x,Q,s]),p.useEffect(()=>{const V=ee=>{if(ee.ctrlKey||ee.metaKey)switch(ee.key.toLowerCase()){case"z":ee.shiftKey?(ee.preventDefault(),L()):(ee.preventDefault(),M());break;case"y":ee.preventDefault(),L();break;case"s":ee.preventDefault(),i&&!c&&qn();break}};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[M,L]);const qn=async()=>{await v()},ja=async()=>{await N()},sn=async()=>{if(s)try{const V=h[s.id]||s.content,ee=await al.format(V,{tabSize:2,insertSpaces:!0});ee.success&&ee.formatted!==V?(b(ee.formatted),O({isOpen:!0,title:"Code Formatted",message:"Your code has been successfully formatted with proper indentation and structure.",type:"success"})):ee.success&&O({isOpen:!0,title:"No Changes",message:"Your code is already properly formatted.",type:"info"})}catch(V){console.error("Error formatting code:",V),O({isOpen:!0,title:"Formatting Error",message:"Failed to format code. Check console for details.",type:"error"})}},dr=async()=>{if(!Z){O({isOpen:!0,title:"No Project Selected",message:"Please select a project before creating a version.",type:"warning"});return}if(!Ss.trim()){O({isOpen:!0,title:"Message Required",message:"Please enter a version message.",type:"warning"});return}Bt(!0);try{const V=a.map(Mt=>({path:`logic/${Mt.name}`,content:h[Mt.id]||Mt.content,type:"logic"}));U.length>0&&V.push({path:"tags/tags.json",content:JSON.stringify(U,null,2),type:"logic"});const ee=await Xt.getBranches(Z.id);let pe;const Ce=ee.branches||[];if(Ce.length===0){const Mt=await Xt.createBranch(Z.id,{name:"main",stage:"dev",description:"Main development branch",createdBy:"Current User"});pe=Mt.branch?.id||Mt.id}else pe=Ce[0].id;const Me=await Xt.createVersion(Z.id,{branch_id:pe,message:Ss,author:"Current User",tags:Ns?Ns.split(",").map(Mt=>Mt.trim()).filter(Boolean):void 0,files:V}),Ue=Me.version||Me;O({isOpen:!0,title:"Version Created",message:`Version ${Ue.version||"created"} successfully!

Files: ${V.length}
Branch: main
Message: ${Ss}`,type:"success"}),Us(!1),Ot(""),Ks("")}catch(V){console.error("Error creating version:",V),O({isOpen:!0,title:"Version Creation Failed",message:V instanceof Error?V.message:"Failed to create version. Check console for details.",type:"error"})}finally{Bt(!1)}},mu=async()=>{if(s)try{if(await v(),await A(s.id)){try{const ee=await Ct.getSessionToken(),pe={};ee&&(pe.Authorization=`Bearer ${ee}`),await fetch("http://localhost:8000/api/sync/status",{headers:pe})}catch{}O({isOpen:!0,title:"Success",message:`Logic "${s.name}" sent to shadow runtime successfully!

You can now:
 View it on the Shadow Runtime page
 Run it in the simulator
 Monitor its execution`,type:"success"}),await S(h[s.id]||s.content)}else O({isOpen:!0,title:"Failed",message:"Failed to send logic to shadow runtime. Please try again.",type:"error"})}catch(V){console.error("Error sending to shadow:",V),O({isOpen:!0,title:"Error",message:"Error sending logic to shadow runtime. Check console for details.",type:"error"})}},an=async()=>{if(s)try{const V=h[s.id]||s.content;await S(V),O({isOpen:!0,title:"Simulator Started",message:`Simulator started with logic from "${s.name}"!

Using ST interpreter for execution.

Next steps:
1. Go to the Simulator page to see execution
2. Use I/O Panel to toggle inputs
3. Monitor variable changes in real-time`,type:"success"})}catch(V){console.error("Error starting simulator:",V),O({isOpen:!0,title:"Error",message:"Failed to start simulator. Check console for details.",type:"error"})}},Qa=()=>{ue(!0)},Cl=async V=>{try{await y(V,Z?.id),O({isOpen:!0,title:"File Created",message:`Successfully created "${V}". You can now start editing your logic.`,type:"success"})}catch{O({isOpen:!0,title:"Creation Failed",message:"Failed to create file. Please try again.",type:"error"})}},Al=(V,ee)=>{if(!s){console.error("No current file");return}if(console.log("Code Lens Action:",V,ee),V==="st.runTest"){const[pe,Ce]=ee||[];if(!pe){console.error("No routine name provided");return}console.log("Opening test config for:",pe,Ce),Bn(pe);const Me=h[s.id]||s.content,Ue=Bm(Me);console.log("Parsed symbols:",Ue.length);const Mt=Ue.find(ts=>ts.name===pe&&(ts.type==="program"||ts.type==="function"||ts.type==="function_block"));console.log("Found routine:",Mt);const vt={};if(Mt&&Mt.children){const ts=Mt.children.filter(Yt=>Yt.type==="variable");console.log("Found variables:",ts.length),ts.forEach(Yt=>{const Lt=Yt.dataType?.toUpperCase()||"INT";Lt==="INT"||Lt==="DINT"||Lt==="SINT"||Lt==="USINT"||Lt==="REAL"||Lt==="LREAL"?vt[Yt.name]=0:Lt==="BOOL"?vt[Yt.name]=!1:Lt==="STRING"?vt[Yt.name]="":vt[Yt.name]=0})}console.log("Suggested inputs:",vt),cr(JSON.stringify(vt,null,2)),Za(JSON.stringify({},null,2)),ya(""),ba(""),aa(JSON.stringify({},null,2)),Es(!0),Js(!0)}if(V==="st.simulate"){const[pe]=ee||[];an(),O({isOpen:!0,title:"Simulate",message:`Simulating ${pe}...

Check the simulator panel for execution results.`,type:"info"})}if(V==="st.coverage"){const[pe]=ee||[];O({isOpen:!0,title:"Code Coverage",message:`Code coverage for '${pe}':

Lines: 0 / 0 (0%)
Branches: 0 / 0 (0%)

Run tests to generate coverage data.`,type:"info"})}},Cr=async V=>{const ee=Le.find(pe=>pe.id===V);if(!(!ee||!s)){Vs(Le.map(pe=>pe.id===V?{...pe,status:"running"}:pe));try{const pe=h[s.id]||s.content,Ce=performance.now();console.log(" Creating test harness for:",ee.routine);const Me=ee.mockedIO||{},Ue={...ee.inputs,...Me};console.log("Initial values:",Ue);const Mt=await qr.run(pe,{initialValues:Ue});if(!Mt.success)throw new Error(Mt.message||"Simulator failed to start");console.log(" Simulator started");const vt=[];vt.push(`[0ms] Test started: ${ee.name}`),vt.push(`[0ms] Inputs: ${JSON.stringify(Ue)}`);const ts=await qr.step(),Yt=performance.now()-Ce;vt.push(`[${Yt.toFixed(2)}ms] Cycle completed`),vt.push(`[${Yt.toFixed(2)}ms] Outputs: ${JSON.stringify(ts.ioValues||{})}`),await qr.stop();const Na=performance.now()-Ce;vt.push(`[${Na.toFixed(2)}ms] Simulator stopped`);const Ar=ts.ioValues||{},Gn=pe.split(`
`),Ci=Bm(pe).find(Rs=>Rs.name===ee.routine);let Yn=0,ur=0;Ci&&Gn.slice(Ci.line-1).forEach(Kn=>{const Wa=Kn.trim();Wa&&!Wa.startsWith("//")&&!Wa.startsWith("(*")&&!Wa.match(/^(PROGRAM|FUNCTION|END_|VAR|END_VAR)/i)&&(ur++,Yn++)});const Xn=ur>0?Yn/ur*100:0;va(Rs=>({...Rs,[ee.routine]:{lines:Yn,total:ur,branches:0,totalBranches:0}}));let nn=!0;const El=[],gu=[];for(const[Rs,Kn]of Object.entries(ee.expectedOutputs)){const Wa=Ar[Rs];if(Wa!==Kn){nn=!1;const oc=`${Rs}: expected ${JSON.stringify(Kn)}, got ${JSON.stringify(Wa)}`;El.push(oc),gu.push({variable:Rs,expected:Kn,actual:Wa}),vt.push(` ${oc}`)}else vt.push(` ${Rs} matched: ${JSON.stringify(Wa)}`)}ee.postConditions&&!nn&&vt.push(" Post-condition check failed"),console.log(nn?" Test PASSED":" Test FAILED"),console.log("Trace:",vt),Vs(Le.map(Rs=>Rs.id===V?{...Rs,status:nn?"passed":"failed",actualOutputs:Ar,executionTime:Na,coverage:Xn,trace:vt,error:El.length>0?El.join(`
`):void 0}:Rs)),nn&&O({isOpen:!0,title:" Test Passed",message:`${ee.name}

 Execution: ${Na.toFixed(2)}ms
 Coverage: ${Xn.toFixed(1)}%
 All assertions passed`,type:"success"})}catch(pe){console.error("Test execution error:",pe),Vs(Le.map(Ce=>Ce.id===V?{...Ce,status:"failed",error:pe instanceof Error?pe.message:"Test execution failed"}:Ce)),O({isOpen:!0,title:" Test Failed",message:`${ee.name}

Error: ${pe instanceof Error?pe.message:"Unknown error"}`,type:"error"})}}},rn=async()=>{if(Le.length===0){O({isOpen:!0,title:"No Tests",message:'Create test cases first by clicking " Run Test" above routines.',type:"warning"});return}De(!0),F({current:0,total:Le.length});for(let Ce=0;Ce<Le.length;Ce++)F({current:Ce+1,total:Le.length}),await Cr(Le[Ce].id),await new Promise(Me=>setTimeout(Me,100));De(!1);const V=Le.filter(Ce=>Ce.status==="passed").length,ee=Le.filter(Ce=>Ce.status==="failed").length,pe=Le.length;O({isOpen:!0,title:" Test Run Complete",message:`All tests executed

 Passed: ${V}/${pe}
 Failed: ${ee}/${pe}
 Success Rate: ${(V/pe*100).toFixed(1)}%`,type:V===pe?"success":"warning"})},Tl=(V,ee)=>{if(!s){console.error("No current file!");return}if(!V||!ee){V&&(es(V),me(V),Gs(!0));return}const pe=h[s.id]||s.content;console.log("=== handleRenameSymbol ==="),console.log("Current file:",s.name),console.log("oldName:",V,"newName:",ee);const Ce=Sv(pe,V,ee);if(console.log("=== Rename Result ==="),console.log("Changes:",Ce.changes),console.log("Affected lines:",Ce.affectedLines),Ce.changes===0){O({isOpen:!0,title:"No Changes",message:`Symbol '${V}' not found in current file.

Make sure the symbol name is correct and exists in the code.`,type:"warning"});return}b(Ce.content),O({isOpen:!0,title:"Symbol Renamed",message:`Renamed '${V}' to '${ee}'

 Changes: ${Ce.changes} occurrence(s)
 Affected lines: ${Ce.affectedLines.join(", ")}

Don't forget to save the file!`,type:"success"})},Si=(V,ee)=>{if(s){if(V===void 0||ee===void 0){const pe=Ys.trim(),Ce=Xs.trim().toUpperCase();if(!pe){O({isOpen:!0,title:"Invalid Input",message:"Function name is required.",type:"warning"});return}if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(pe)){O({isOpen:!0,title:"Invalid Name",message:"Function name must start with a letter or underscore and contain only letters, numbers, and underscores.",type:"error"});return}const Me=h[s.id]||s.content;try{const Ue=yO(Me,Se,Qe,pe,Ce);b(Ue.newContent),O({isOpen:!0,title:"Function Extracted",message:` Created function '${pe}'
 Return type: ${Ce}
 Extracted lines: ${Se} - ${Qe}

The new function has been added at the end of the file.
Don't forget to save!`,type:"success"})}catch(Ue){console.error("Extract function error:",Ue),O({isOpen:!0,title:"Extraction Failed",message:Ue instanceof Error?Ue.message:"Failed to extract function. Check console for details.",type:"error"})}return}if(console.log("Extract function:",{startLine:V,endLine:ee}),V>=ee){O({isOpen:!0,title:"Invalid Selection",message:"Please select multiple lines of code to extract into a function.",type:"warning"});return}mt(V),os(ee),Ts("NewFunction"),zt("VOID"),tt(!0)}};p.useEffect(()=>{if(s){const V=h[s.id]||s.content,ee=Bm(V);H(ee.map(pe=>({id:pe.name,name:pe.name,type:pe.type,dataType:pe.dataType,line:pe.line,scope:pe.scope,references:pe.references?.length||0,isUsed:pe.isUsed,children:pe.children?.map(Ce=>({id:Ce.name,name:Ce.name,type:Ce.type,dataType:Ce.dataType,line:Ce.line,scope:Ce.scope,references:0,isUsed:Ce.isUsed}))})))}},[s?.id,h[s?.id||""]]);const lc=()=>{if(!s)return;const V=h[s.id]||s.content,ee=jO(V);Hs(ee.diagnostics),console.log("Resource Usage:",ee.resourceUsage)},Hn=()=>{if(!s)return;const V=h[s.id]||s.content,ee=kO(V);$s(ee.rules),ee.overallSafetyLevel==="critical"&&O({isOpen:!0,title:"Critical Safety Issues",message:`${ee.blockingIssues} blocking safety issue(s) detected!

These must be resolved before deployment.`,type:"error"})};return e.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-panda-surface-dark",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Logic Editor"}),e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[s?.name||"No file open",i&&"  Modified",s&&s.lastModified&&e.jsxs("span",{className:"ml-2 text-xs text-neutral-500",children:["Last saved: ",(()=>{try{const V=new Date(s.lastModified);return isNaN(V.getTime())?"Unknown":V.toLocaleString()}catch{return"Unknown"}})()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"text-xs text-neutral-600",children:["Connected to Shadow: ",C.connected?"":""]})})]}),e.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[Ne&&e.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 dark:text-white",children:"Symbol Explorer"}),e.jsx("button",{onClick:()=>Ge(!1),className:"text-neutral-500 dark:text-gray-400 hover:text-neutral-700 dark:hover:text-gray-200",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("input",{type:"text",placeholder:"Filter symbols...",value:At,onChange:V=>Pt(V.target.value),className:"w-full px-2 py-1 text-xs border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6A00]"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:ye.length>0?e.jsx("div",{className:"space-y-1",children:ye.filter(V=>V.name.toLowerCase().includes(At.toLowerCase())).map(V=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-neutral-100 rounded text-left",onClick:()=>{const ee=new Set(Qt);ee.has(V.id)?ee.delete(V.id):ee.add(V.id),Vt(ee)},children:[V.children&&V.children.length>0&&e.jsx("span",{children:Qt.has(V.id)?e.jsx(wi,{className:"w-3 h-3"}):e.jsx(bi,{className:"w-3 h-3"})}),e.jsx(As,{className:"w-3 h-3 text-blue-500"}),e.jsx("span",{className:"font-mono",children:V.name}),e.jsx("span",{className:"text-neutral-500 ml-auto",children:V.references>0&&`(${V.references})`})]}),Qt.has(V.id)&&V.children&&e.jsx("div",{className:"ml-6 mt-1 space-y-1",children:V.children.map(ee=>e.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1 hover:bg-neutral-100 dark:hover:bg-gray-600 rounded text-left",children:[e.jsx("span",{className:"text-neutral-400 dark:text-gray-400",children:ee.dataType}),e.jsx("span",{className:"font-mono",children:ee.name})]},ee.id))})]},V.id))}):e.jsxs("div",{className:"text-xs text-neutral-500 text-center py-4",children:["No symbols found",e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:()=>{H([{id:"prog1",name:"PROGRAM_Main",type:"program",line:1,scope:"global",references:3,isUsed:!0,children:[{id:"var1",name:"Counter",type:"variable",dataType:"INT",line:5,scope:"PROGRAM_Main",references:5,isUsed:!0},{id:"var2",name:"Enable",type:"variable",dataType:"BOOL",line:6,scope:"PROGRAM_Main",references:2,isUsed:!0}]},{id:"func1",name:"CalcAverage",type:"function",dataType:"REAL",line:25,scope:"global",references:8,isUsed:!0}])},className:"text-[#FF6A00] hover:underline text-xs",children:"Extract symbols from code"})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 border-b border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700 flex-wrap",children:[e.jsxs("button",{onClick:Qa,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",title:"New File",children:[e.jsx(zT,{className:"w-4 h-4"}),"New"]}),e.jsxs("button",{onClick:()=>te(!J),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",title:"Open File",children:[e.jsx(Yo,{className:"w-4 h-4"}),"Open"]}),e.jsxs("button",{onClick:qn,disabled:!i||c,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${i&&!c?"bg-[#FF6A00] text-white hover:bg-[#FF8020]":"bg-neutral-200 dark:bg-gray-700 text-neutral-500 dark:text-gray-400 cursor-not-allowed"}`,title:"Save (Ctrl+S)",children:[e.jsx(lu,{className:"w-4 h-4"}),c?"Saving...":"Save"]}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsx("button",{onClick:M,disabled:!w(),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${w()?"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600":"bg-neutral-100 dark:bg-gray-800 border border-neutral-200 dark:border-gray-700 text-neutral-400 dark:text-gray-500 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:e.jsx(iE,{className:"w-4 h-4"})}),e.jsx("button",{onClick:L,disabled:!T(),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${T()?"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600":"bg-neutral-100 dark:bg-gray-800 border border-neutral-200 dark:border-gray-700 text-neutral-400 dark:text-gray-500 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:e.jsx(F5,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsxs("button",{onClick:ja,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white rounded-md hover:bg-neutral-50 dark:hover:bg-gray-600 transition-colors",title:"Validate",children:[e.jsx(cl,{className:"w-4 h-4"}),"Validate"]}),e.jsxs("button",{onClick:sn,disabled:!s,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${s?"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600":"bg-neutral-100 dark:bg-gray-800 border border-neutral-200 dark:border-gray-700 text-neutral-400 dark:text-gray-500 cursor-not-allowed"}`,title:"Format Code",children:[e.jsx(Go,{className:"w-4 h-4"}),"Format"]}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-700 dark:text-neutral-300",children:["Vendor:",e.jsxs("select",{value:u,onChange:V=>E(V.target.value),className:"px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"neutral",children:"Vendor-neutral"}),e.jsx("option",{value:"rockwell",children:"Rockwell"}),e.jsx("option",{value:"siemens",children:"Siemens"}),e.jsx("option",{value:"beckhoff",children:"Beckhoff"})]})]}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsxs("button",{onClick:()=>Te(!0),disabled:!s,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${s?"bg-purple-500 text-white hover:bg-purple-600":"bg-neutral-100 border border-neutral-200 text-neutral-400 cursor-not-allowed"}`,title:"Create Release",children:[e.jsx(ji,{className:"w-4 h-4"}),"Release"]}),e.jsxs("button",{onClick:()=>hs(!0),disabled:!s,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${s?"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600":"bg-neutral-100 dark:bg-gray-800 border border-neutral-200 dark:border-gray-700 text-neutral-400 dark:text-gray-500 cursor-not-allowed"}`,title:"Compare with Version",children:[e.jsx(Qr,{className:"w-4 h-4"}),"Compare"]}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsx("button",{onClick:()=>Ve(!Ae),disabled:!s,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${s?Ae?"bg-[#FF6A00] text-white":"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600":"bg-neutral-100 dark:bg-gray-800 border border-neutral-200 dark:border-gray-700 text-neutral-400 dark:text-gray-500 cursor-not-allowed"}`,title:"Time Travel / Local History",children:e.jsx(e5,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Js(!zs),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${zs?"bg-[#FF6A00] text-white":"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600"}`,title:"Unit Test Runner",children:e.jsx(Om,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ms(!ns),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${ns?"bg-[#FF6A00] text-white":"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600"}`,title:"Semantic Diagnostics",children:e.jsx(jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ha(!Wt),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${Wt?"bg-[#FF6A00] text-white":"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600"}`,title:"Safety Analyzer",children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>js(!Tt),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md transition-colors ${Tt?"bg-[#FF6A00] text-white":"bg-white dark:bg-gray-700 border border-neutral-300 dark:border-gray-600 text-neutral-800 dark:text-white hover:bg-neutral-50 dark:hover:bg-gray-600"}`,title:"Project-wide Replace",children:e.jsx(dv,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-6 bg-neutral-300"}),e.jsxs("button",{onClick:an,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",title:"Run in Simulator with ST Interpreter",children:[e.jsx(Jr,{className:"w-4 h-4"}),"Run in Simulator"]}),d&&e.jsx("div",{className:`ml-auto text-sm ${d.isValid?"text-green-600":"text-red-600"}`,children:d.isValid?" Valid":` ${d.errors.length} errors`})]}),J&&e.jsx("div",{className:"absolute z-10 mt-14 ml-20 bg-white dark:bg-gray-800 border border-neutral-300 dark:border-gray-600 rounded-md shadow-lg max-h-64 overflow-y-auto",children:a.length>0?a.map(V=>e.jsx("button",{onClick:()=>{console.log(" File clicked:",{id:V.id,name:V.name,hasContent:!!V.content,contentLength:V.content?.length||0}),f(V.id),te(!1)},className:`w-full text-left px-4 py-2 text-sm text-gray-800 dark:text-white hover:bg-neutral-100 dark:hover:bg-gray-700 ${s?.id===V.id?"bg-neutral-50 dark:bg-gray-600 font-medium":""}`,children:V.name},V.id)):e.jsx("div",{className:"px-4 py-2 text-sm text-neutral-500",children:"No files available. Create a new file to get started."})}),e.jsxs("div",{className:"px-4 py-1.5 bg-white dark:bg-gray-800 border-b border-neutral-200 dark:border-gray-600 flex items-center gap-4 text-xs text-neutral-600 dark:text-gray-300",children:[e.jsx("div",{children:"UTF-8"}),e.jsx("div",{children:"Structured Text (ST)"}),e.jsxs("div",{children:["Mode: ",C.shadowOk?"Shadow":"Local"]}),d&&d.errors.length>0&&e.jsxs("div",{className:"text-amber-600",children:[d.errors.length," issue(s)"]})]}),e.jsxs("div",{className:"flex-1 min-h-0",children:[(console.log(" Monaco render check:",{hasCurrentFile:!!s,currentFileKeys:s?Object.keys(s):[],currentFileId:s?.id,currentFileName:s?.name,currentFileContent:s?.content?.substring(0,50),currentFileContentLength:s?.content?.length,filesCount:a.length,fullCurrentFile:JSON.stringify(s)}),null),s?e.jsxs(e.Fragment,{children:[s.readOnly&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 px-4 py-2 flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Read-Only:"}),e.jsx("span",{children:"This file was extracted from a PLC runtime and cannot be edited in Pandaura."})]}),e.jsx(vO,{value:(()=>{if(!s)return console.error(" currentFile is null/undefined in Monaco value!"),"";const V=h[s.id]||s.content;return console.log(" Monaco editor receiving value:",{fileId:s.id,fileName:s.name,hasUnsaved:h.hasOwnProperty(s.id),unsavedValue:h[s.id]?.substring(0,30),currentFileContent:s.content?.substring(0,30),finalValue:V?.substring(0,30),finalLength:V?.length||0}),V||""})(),onChange:V=>{s.readOnly||b(V)},readOnly:(console.log(" Passing readOnly to Monaco:",s.readOnly),s.readOnly||!1),markers:d?d.errors.map(V=>({startLineNumber:V.line,endLineNumber:V.line,startColumn:V.column,endColumn:V.column+1,message:V.message,severity:V.severity==="error"?8:V.severity==="warning"?4:1,owner:"st-validation",resource:null})):[],tags:U,breakpoints:k,theme:document.documentElement.classList.contains("dark")?"dark":"light",onBreakpointToggle:P,currentLine:G,onCodeLensAction:Al,onRenameSymbol:Tl,onExtractFunction:Si})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-neutral-500",children:'No file open. Click "Open" or "New" to get started.'})]})]}),e.jsxs("div",{className:"w-80 flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 dark:text-white",children:"Change Preview"}),e.jsx("button",{onClick:()=>_(!$),className:"text-xs text-[#FF6A00] hover:underline",children:$?"Hide":"Show"})]}),i&&s?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-xs text-neutral-600 mb-2 p-2 bg-amber-50 border border-amber-200 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"File has unsaved changes"})]}),h[s.id]&&e.jsxs("div",{className:"mt-1 text-neutral-500",children:["Current: ",h[s.id].split(`
`).length," lines | Original: ",s.content.split(`
`).length," lines"]})]}),$?e.jsx("div",{className:"max-h-64 overflow-y-auto border border-neutral-200 rounded text-xs",children:(()=>{const V=s.content,ee=h[s.id];if(!ee||ee===V)return e.jsxs("div",{className:"p-3 text-neutral-500 text-center",children:["No changes detected",e.jsx("div",{className:"mt-1 text-xs",children:ee?"(Contents equal)":"(No unsaved content)"})]});const pe=Av(V,ee),Ce=pe.filter(Me=>Me.type!=="unchanged");return Ce.length===0?e.jsxs("div",{className:"p-3 text-neutral-500 text-center",children:["No changes detected in diff",e.jsxs("div",{className:"mt-1 text-xs",children:["(Generated ",pe.length," total diff entries)"]})]}):Ce.map(Me=>e.jsxs("div",{className:"border-b border-neutral-100 last:border-b-0",children:[Me.type==="added"&&e.jsx("div",{className:"bg-green-50 p-2 border-l-2 border-green-400",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-green-700 font-medium mb-1",children:["+ Line ",Me.modifiedLineNumber]}),e.jsx("div",{className:"font-mono text-green-800 dark:text-green-400 bg-white dark:bg-gray-900 p-1 rounded border dark:border-gray-600",children:Me.modifiedText||"(empty line)"})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>{},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Accept",children:e.jsx(Fe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>{const Ue=ee.split(`
`);Ue.splice((Me.modifiedLineNumber||1)-1,1),b(Ue.join(`
`))},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Reject",children:e.jsx(pt,{className:"w-3 h-3"})})]})]})}),Me.type==="removed"&&e.jsx("div",{className:"bg-red-50 p-2 border-l-2 border-red-400",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-red-700 font-medium mb-1",children:["- Line ",Me.originalLineNumber]}),e.jsx("div",{className:"font-mono text-red-800 dark:text-red-400 bg-white dark:bg-gray-900 p-1 rounded border dark:border-gray-600",children:Me.originalText||"(empty line)"})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>{},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Accept",children:e.jsx(Fe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>{const Ue=ee.split(`
`),Mt=Math.max(0,(Me.originalLineNumber||1)-1);Ue.splice(Mt,0,Me.originalText||""),b(Ue.join(`
`))},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Reject",children:e.jsx(pt,{className:"w-3 h-3"})})]})]})}),Me.type==="modified"&&e.jsx("div",{className:"bg-blue-50 p-2 border-l-2 border-blue-400",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-blue-700 font-medium mb-1",children:["~ Line ",Me.originalLineNumber]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"font-mono text-red-700 bg-red-50 p-1 rounded border text-xs",children:["- ",Me.originalText||"(empty line)"]}),e.jsxs("div",{className:"font-mono text-green-700 bg-green-50 p-1 rounded border text-xs",children:["+ ",Me.modifiedText||"(empty line)"]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>{},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Accept",children:e.jsx(Fe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>{const Ue=ee.split(`
`);Ue[(Me.originalLineNumber||1)-1]=Me.originalText||"",b(Ue.join(`
`))},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Reject",children:e.jsx(pt,{className:"w-3 h-3"})})]})]})})]},Me.changeId))})()}):e.jsxs("div",{className:"text-xs text-neutral-600",children:["File has ",(()=>{const V=h[s.id]||s.content,ee=s.content;return Av(ee,V).filter(Ce=>Ce.type!=="unchanged").length})()," unsaved changes",e.jsx("div",{className:"mt-2 p-2 bg-amber-50 border border-amber-200 rounded text-amber-800",children:'Modified locally  Click "Show" to review changes'})]})]}):e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:"No changes to preview"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 p-4 max-h-64 overflow-y-auto",children:[e.jsx("h3",{className:"font-semibold text-sm mb-3 text-gray-800 dark:text-white",children:"Validation & Lint"}),d&&d.errors.length>0?e.jsx("div",{className:"space-y-2",children:d.errors.map((V,ee)=>e.jsxs("div",{className:`text-xs p-2 rounded border ${V.severity==="error"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700 text-red-800 dark:text-red-300":V.severity==="warning"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700 text-amber-800 dark:text-amber-300":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-300"}`,children:[e.jsxs("div",{className:"font-medium",children:["Line ",V.line,":",V.column]}),e.jsx("div",{children:V.message})]},ee))}):e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:d?" No issues found":"Click Validate to check for issues"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 p-4",children:[e.jsx("h3",{className:"font-semibold text-sm mb-3 text-gray-800 dark:text-white",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:mu,disabled:!s||D,className:`w-full px-3 py-2 text-sm rounded-md transition-colors ${s&&!D?"bg-[#FF6A00] text-white hover:bg-[#FF8020]":"bg-neutral-200 text-neutral-500 cursor-not-allowed"}`,title:"Send current logic to shadow runtime for simulation",children:D?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending to Shadow..."]}):e.jsx("span",{className:"flex items-center justify-center gap-2",children:"Send to Shadow Runtime"})}),e.jsx("button",{onClick:()=>Us(!0),disabled:!Z||a.length===0,className:`w-full px-3 py-2 text-sm rounded-md transition-colors ${Z&&a.length>0?"bg-green-500 text-white hover:bg-green-600":"bg-neutral-200 text-neutral-500 cursor-not-allowed"}`,children:"Create Version"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 p-4 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-800 dark:text-gray-100",children:["Tags in Code (",z.length,")"]}),e.jsx("button",{onClick:()=>{if(s){const V=h[s.id]||s.content||"",ee=Cv(V);Y(ee)}},className:"text-xs text-[#FF6A00] hover:underline",title:"Refresh tag usage",children:"Refresh"})]}),e.jsxs("div",{className:"text-xs text-neutral-600 dark:text-gray-400 space-y-1",children:[z.length===0?e.jsxs("div",{className:"text-neutral-400 dark:text-gray-500 text-center py-4",children:["No tags declared in current file",s&&e.jsxs("div",{className:"text-xs mt-2",children:["Current file: ",s.name]})]}):[...z].sort((ee,pe)=>ee.isUsed&&!pe.isUsed?-1:!ee.isUsed&&pe.isUsed?1:ee.usageCount!==pe.usageCount?pe.usageCount-ee.usageCount:ee.name.localeCompare(pe.name)).map(ee=>e.jsxs("div",{className:`group hover:text-[#FF6A00] cursor-pointer py-1 px-2 hover:bg-neutral-50 dark:hover:bg-gray-700 rounded border border-transparent hover:border-neutral-200 dark:hover:border-gray-500 ${ee.isUsed?"":"opacity-60"}`,title:`${ee.metadata?.description||ee.name}
Declared on line ${ee.declarationLine}
${ee.isUsed?`Used ${ee.usageCount} time(s)
All occurrences on lines: ${ee.lineNumbers.join(", ")}`:"Not used in code"}
Type: ${ee.type}${ee.value?`
Initial Value: ${ee.value}`:""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-mono font-semibold ${ee.isUsed?"text-blue-700 dark:text-blue-400":"text-neutral-500 dark:text-gray-400"}`,children:ee.name}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full font-medium ${ee.isUsed?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-neutral-100 dark:bg-gray-700 text-neutral-500 dark:text-gray-400"}`,children:ee.usageCount})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-xs bg-neutral-100 dark:bg-gray-700 text-neutral-600 dark:text-gray-300 px-1 rounded",children:ee.type})})]}),e.jsxs("div",{className:"mt-1 flex items-start justify-between text-xs gap-2",children:[e.jsx("span",{className:"text-neutral-500 dark:text-gray-400 flex-1 break-words",children:ee.isUsed?`Lines: ${ee.lineNumbers.join(", ")}`:`Line: ${ee.declarationLine} (declared, not used)`}),ee.value&&e.jsxs("span",{className:"text-neutral-400 dark:text-gray-500 font-mono flex-shrink-0",children:["= ",ee.value]})]}),ee.metadata?.description&&e.jsx("div",{className:"mt-1 text-xs text-neutral-400 dark:text-gray-500 italic truncate",children:ee.metadata.description})]},ee.id)),e.jsx("div",{className:"text-neutral-400 dark:text-gray-500 text-xs mt-2 pt-2 border-t border-neutral-200 dark:border-gray-600",children:(()=>{const V=z.filter(pe=>pe.isUsed&&pe.usageCount>0),ee=z.length;return V.length===0?ee>0?`${ee} tag${ee!==1?"s":""} declared  None used in code`:"No tags declared in current file":`${V.length}/${ee} tag${ee!==1?"s":""} used  Click to jump to line`})()})]})]}),we&&oe&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-neutral-200 dark:border-gray-600 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(lk,{className:"w-4 h-4"}),"PLC Execution Results"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>Oe(!1),className:"text-xs text-neutral-500 hover:text-neutral-700",title:"Hide results",children:e.jsx(pt,{className:"w-3 h-3"})})})]}),oe.success?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-neutral-600",children:"Mode:"}),e.jsx("span",{className:`px-2 py-1 rounded font-medium ${oe.data?.executionMode==="plc"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:oe.data?.executionMode||"Unknown"})]}),oe.data?.result?.variables&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs mb-2",children:"Variables:"}),e.jsx("div",{className:"space-y-1",children:Object.entries(oe.data.result.variables).map(([V,ee])=>e.jsxs("div",{className:"flex justify-between items-center text-xs bg-neutral-50 p-2 rounded",children:[e.jsx("span",{className:"font-mono text-blue-600",children:V}),e.jsx("span",{className:"font-mono text-green-600",children:String(ee)})]},V))})]}),oe.data?.result?.executionLog&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs mb-2",children:"Execution Log:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:oe.data.result.executionLog.map((V,ee)=>e.jsxs("div",{className:"text-xs bg-neutral-50 p-1 rounded",children:[e.jsxs("span",{className:"text-neutral-500",children:["L",V.line,":"]})," ",V.statement]},ee))})]}),oe.data?.result?.cycleTime&&e.jsxs("div",{className:"text-xs text-neutral-600",children:["Cycle Time: ",oe.data.result.cycleTime.toFixed(2),"ms"]}),e.jsx("button",{onClick:()=>Ee(null),className:"w-full px-2 py-1 text-xs bg-neutral-100 text-neutral-600 rounded hover:bg-neutral-200 transition-colors",children:"Clear Results"})]}):e.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[e.jsx("div",{className:"font-medium text-red-800 text-xs",children:"Error:"}),e.jsx("div",{className:"text-red-700 text-xs mt-1",children:oe.error})]})]})]})]}),e.jsxs("div",{className:"mt-4 px-4 py-2 bg-neutral-100 dark:bg-gray-700 rounded-md flex items-center justify-between text-xs text-neutral-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:["Connected to Shadow: ",e.jsx("span",{className:C.connected?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:C.connected?"Yes":"No"})]}),e.jsxs("div",{children:["Sync State: ",e.jsx("span",{className:"text-neutral-900 dark:text-gray-100",children:D?"Syncing":"Idle"})]})]}),e.jsx("div",{children:C.lastSync&&`Last sync: ${new Date(C.lastSync).toLocaleTimeString()}`})]}),e.jsx(yt,{isOpen:se.isOpen,onClose:()=>O({...se,isOpen:!1}),title:se.title,message:se.message,type:se.type}),e.jsx(Oo,{isOpen:K,onClose:()=>ue(!1),onConfirm:Cl,title:"Create New File",label:"File Name",placeholder:"e.g., Temperature_Control.st",defaultValue:"New_Logic.st",required:!0}),e.jsx(Oo,{isOpen:ls,onClose:()=>Gs(!1),onConfirm:V=>{V&&V!==Ka&&Tl(Ka,V)},title:`Rename '${Ka}'`,label:"New Name",placeholder:"Enter new symbol name...",defaultValue:I,required:!0}),ke&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>tt(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-gray-600",children:[e.jsx("h2",{className:"font-semibold text-lg text-gray-900 dark:text-gray-100",children:"Extract Function"}),e.jsx("button",{onClick:()=>tt(!1),className:"p-1 hover:bg-neutral-100 dark:hover:bg-gray-700 rounded",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Function Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:Ys,onChange:V=>Ts(V.target.value),placeholder:"e.g., CalculateTotal",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Return Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:Xs,onChange:V=>zt(V.target.value),placeholder:"VOID, INT, BOOL, REAL, etc.",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-400 bg-neutral-50 dark:bg-gray-700 p-3 rounded",children:e.jsxs("p",{children:["Extracting lines ",Se," - ",Qe]})})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-neutral-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>tt(!1),className:"px-4 py-2 rounded-md font-medium bg-neutral-200 dark:bg-gray-600 text-neutral-800 dark:text-gray-200 hover:bg-neutral-300 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:()=>{tt(!1),Si()},className:"px-4 py-2 rounded-md font-medium bg-[#FF6A00] text-white hover:bg-[#FF8020]",children:"Extract"})]})]})]}),gs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>Es(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-gray-600",children:[e.jsxs("h2",{className:"font-semibold text-lg flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(Om,{className:"w-5 h-5"}),"Configure Test: ",Ma]}),e.jsx("button",{onClick:()=>Es(!1),className:"p-1 hover:bg-neutral-100 dark:hover:bg-gray-700 rounded",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[75vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Test Inputs (JSON) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:en,onChange:V=>cr(V.target.value),placeholder:'{\\n  "Counter": 0,\\n  "Enable": true\\n}',className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] font-mono text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:5}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Initial variable values"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Expected Outputs (JSON) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:pa,onChange:V=>Za(V.target.value),placeholder:'{\\n  "Counter": 1,\\n  "Output": true\\n}',className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] font-mono text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:5}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Expected values after execution"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Mocked I/O (JSON)"}),e.jsx("textarea",{value:st,onChange:V=>aa(V.target.value),placeholder:'{\\n  "Sensor_1": true,\\n  "Temperature": 25.5\\n}',className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] font-mono text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:4}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Mock physical I/O values"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Pre-Conditions"}),e.jsx("textarea",{value:sa,onChange:V=>ya(V.target.value),placeholder:"System must be initialized\\nCounter < 100",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:4}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Conditions before test"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Post-Conditions"}),e.jsx("textarea",{value:La,onChange:V=>ba(V.target.value),placeholder:"Counter must be incremented\\nNo errors logged",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6A00] text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:"Conditions after test execution"})]}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"font-semibold mb-1",children:" Test Execution Flow:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Isolated simulation environment created"}),e.jsx("li",{children:"Mocked I/O and inputs loaded"}),e.jsx("li",{children:"Routine executes for one cycle"}),e.jsx("li",{children:"Outputs compared with expected values"}),e.jsx("li",{children:"Coverage and trace data captured"})]})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-neutral-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>Es(!1),className:"px-4 py-2 rounded-md font-medium bg-neutral-200 dark:bg-gray-600 text-neutral-800 dark:text-gray-200 hover:bg-neutral-300 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:()=>{try{const V=JSON.parse(en),ee=JSON.parse(pa),pe=st?JSON.parse(st):{},Ce={id:`test-${Date.now()}`,name:`Test ${Ma}`,routine:Ma,inputs:V,expectedOutputs:ee,mockedIO:pe,preConditions:sa||void 0,postConditions:La||void 0,status:"pending"};Vs([...Le,Ce]),Es(!1),O({isOpen:!0,title:" Test Created",message:`Test case created for '${Ma}'

 Inputs: ${Object.keys(V).length} variables
 Expected outputs: ${Object.keys(ee).length} assertions

Click "Run" in the Unit Test Runner panel to execute.`,type:"success"})}catch{O({isOpen:!0,title:"Invalid JSON",message:"Please enter valid JSON for inputs, expected outputs, and mocked I/O.",type:"error"})}},className:"px-4 py-2 rounded-md font-medium bg-[#FF6A00] text-white hover:bg-[#FF8020]",children:"Create Test"})]})]})]}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-[500px] max-w-[90vw]",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(da,{className:"w-5 h-5"}),"Create Snapshot"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Commit Message *"}),e.jsx("textarea",{value:ve,onChange:V=>nt(V.target.value),placeholder:"Describe what changed in this snapshot...",className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (optional)"}),e.jsx("input",{type:"text",value:gt,onChange:V=>Be(V.target.value),placeholder:"feature, bugfix, refactor",className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Comma-separated tags"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>{he(!1),nt(""),Be("")},className:"px-4 py-2 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{ve.trim()&&(O({isOpen:!0,title:"Snapshot Created",message:`Snapshot created successfully!
Message: ${ve}
Tags: ${gt||"none"}`,type:"success"}),he(!1),nt(""),Be(""),$t(V=>[{id:Date.now().toString(),timestamp:new Date().toISOString(),content:s?.content||"",message:ve,author:"Current User"},...V]))},disabled:!ve.trim(),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] disabled:bg-neutral-300 disabled:cursor-not-allowed transition-colors",children:"Create Snapshot"})]})]})]})}),at&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-[500px] max-w-[90vw]",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(Ng,{className:"w-5 h-5 text-green-600"}),"Create Version"]}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400 mb-4",children:"Create an immutable snapshot of all logic files and tags in the current project."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Version Message *"}),e.jsx("textarea",{value:Ss,onChange:V=>Ot(V.target.value),placeholder:"Describe what changed in this version...",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Tags (optional)"}),e.jsx("input",{type:"text",value:Ns,onChange:V=>Ks(V.target.value),placeholder:"feature, bugfix, release",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-gray-400 mt-1",children:"Comma-separated tags"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"Files to include:"})," ",a.length," logic file(s), ",U.length," tag(s)"]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>{Us(!1),Ot(""),Ks("")},disabled:Xe,className:"px-4 py-2 text-neutral-700 dark:text-gray-300 hover:bg-neutral-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:dr,disabled:!Ss.trim()||Xe,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-neutral-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:Xe?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ng,{className:"w-4 h-4"}),"Create Version"]})})]})]})]})}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[500px] max-w-[90vw]",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ji,{className:"w-5 h-5"}),"Create Release"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Release Name *"}),e.jsx("input",{type:"text",placeholder:"v1.0.0 or Production Release 2025-Q1",className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Release Notes *"}),e.jsx("textarea",{placeholder:"Describe what's included in this release...",className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",rows:4})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"signRelease",className:"w-4 h-4"}),e.jsx("label",{htmlFor:"signRelease",className:"text-sm",children:"Digitally sign this release"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>Te(!1),className:"px-4 py-2 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{O({isOpen:!0,title:"Release Created",message:"Release created and marked as immutable. Ready for deployment.",type:"success"}),Te(!1)},className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"Create Release"})]})]})]})}),In&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-[600px] max-w-[90vw]",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Qr,{className:"w-5 h-5"}),"Compare with Version"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Version"}),e.jsxs("select",{value:_t,onChange:V=>tn(V.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{value:"",children:"-- Select a version --"}),e.jsx("option",{value:"v1.2.3",children:"v1.2.3 (Production - 2025-11-17)"}),e.jsx("option",{value:"v1.2.2",children:"v1.2.2 (Staging - 2025-11-15)"}),e.jsx("option",{value:"v1.2.1",children:"v1.2.1 (Development - 2025-11-10)"}),e.jsx("option",{value:"snapshot-123",children:"Snapshot #123 (2025-11-05)"})]})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Diff Types:"})," File changes, semantic diffs (variable types, timers, tag addressing), and structural changes will be shown."]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>{hs(!1),tn("")},className:"px-4 py-2 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{_t&&(O({isOpen:!0,title:"Opening Diff Viewer",message:`Comparing current version with ${_t}...

Changes detected:
 3 variables modified
 1 timer changed
 5 lines of code altered`,type:"info"}),hs(!1),tn(""))},disabled:!_t,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] disabled:bg-neutral-300 disabled:cursor-not-allowed transition-colors",children:"Compare"})]})]})]})}),Ae&&e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-neutral-200 dark:border-gray-600 z-40 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[e.jsx(Oa,{className:"w-4 h-4"}),"Local History & Time Travel"]}),e.jsx("button",{onClick:()=>Ve(!1),className:"text-neutral-500 dark:text-gray-400 hover:text-neutral-700 dark:hover:text-gray-200",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Ze.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"range",min:"0",max:Ze.length-1,value:Ut,onChange:V=>Nt(Number(V.target.value)),className:"w-full"}),e.jsxs("div",{className:"text-xs text-neutral-600 dark:text-gray-400 text-center mb-4",children:["Snapshot ",Ut+1," of ",Ze.length]}),Ze.map((V,ee)=>e.jsxs("button",{onClick:()=>Nt(ee),className:`w-full text-left p-3 rounded-lg border transition-colors ${ee===Ut?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"border-neutral-200 dark:border-gray-600 hover:bg-neutral-50 dark:hover:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-800 dark:text-gray-100",children:V.author}),e.jsx("span",{className:"text-xs text-neutral-500 dark:text-gray-400",children:new Date(V.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-xs text-neutral-700 dark:text-gray-300",children:V.message||"No message"})]},V.id))]}):e.jsxs("div",{className:"text-center text-sm text-neutral-500 dark:text-gray-400 py-8",children:["No history available yet",e.jsx("p",{className:"text-xs mt-2 text-neutral-400 dark:text-gray-500",children:"Create a snapshot to start tracking history"})]})}),Ze.length>0&&e.jsx("div",{className:"px-4 py-3 border-t border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700 flex gap-2",children:e.jsx("button",{onClick:()=>{s&&Ze[Ut]&&(b(Ze[Ut].content),O({isOpen:!0,title:"Restored from History",message:"File content restored from selected snapshot.",type:"success"}))},className:"flex-1 px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-xs transition-colors",children:"Restore This Version"})})]}),zs&&e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-neutral-200 dark:border-gray-600 z-40 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[e.jsx(Om,{className:"w-4 h-4"}),"Unit Test Runner"]}),e.jsx("button",{onClick:()=>Js(!1),className:"text-neutral-500 dark:text-gray-400 hover:text-neutral-700 dark:hover:text-gray-200",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"text-xs text-neutral-600 dark:text-gray-300 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-600",children:' Click " Run Test" above routines to create tests'}),Le.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:rn,disabled:B,className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:B?`Running ${et.current}/${et.total}...`:" Run All Tests"}),e.jsx("button",{onClick:()=>{const V=Le.filter(Me=>Me.status==="passed").length,ee=Le.filter(Me=>Me.status==="failed").length,pe=Le.filter(Me=>Me.status==="pending").length,Ce=Object.values(ra).reduce((Me,Ue)=>Me+(Ue.lines/Ue.total*100||0),0)/Object.keys(ra).length||0;O({isOpen:!0,title:" Test Summary Report",message:`Total Tests: ${Le.length}

 Passed: ${V}
 Failed: ${ee}
 Pending: ${pe}

 Success Rate: ${Le.length>0?(V/Le.length*100).toFixed(1):0}%
 Avg Coverage: ${Ce.toFixed(1)}%

Routines Tested: ${new Set(Le.map(Me=>Me.routine)).size}`,type:"info"})},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium transition-colors",children:" Report"})]})]}),e.jsx("div",{className:"space-y-2",children:Le.length>0?Le.map(V=>e.jsxs("div",{className:`p-3 rounded-lg border ${V.status==="passed"?"border-green-300 dark:border-green-600 bg-green-50 dark:bg-green-900/20":V.status==="failed"?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-neutral-200 dark:border-gray-600 bg-white dark:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:V.name}),V.status==="passed"&&e.jsx(Fe,{className:"w-4 h-4 text-green-600"}),V.status==="failed"&&e.jsx(pt,{className:"w-4 h-4 text-red-600"})]}),e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mb-2",children:["Routine: ",V.routine]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Cr(V.id),disabled:V.status==="running",className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:V.status==="running"?"Running...":" Run"}),V.status==="failed"&&e.jsx("button",{onClick:()=>{an(),O({isOpen:!0,title:" Debug Mode",message:`Opening simulator for test: ${V.name}

Inputs will be loaded and you can step through the execution.`,type:"info"})},className:"px-2 py-1 text-xs bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:" Debug"}),e.jsx("button",{onClick:()=>Vs(Le.filter(ee=>ee.id!==V.id)),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-neutral-600 dark:text-gray-400",children:[V.executionTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[" ",V.executionTime.toFixed(2),"ms"]}),V.coverage!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[" ",V.coverage.toFixed(1),"% coverage"]})]}),V.error&&e.jsxs("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-600 rounded text-xs",children:[e.jsx("p",{className:"font-semibold text-red-800 dark:text-red-300",children:" Assertion Failed:"}),e.jsx("p",{className:"text-red-700 dark:text-red-200 whitespace-pre-wrap font-mono",children:V.error})]}),V.status==="passed"&&V.actualOutputs&&e.jsxs("div",{className:"mt-2 p-2 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-600 rounded text-xs",children:[e.jsx("p",{className:"font-semibold text-green-800 dark:text-green-300",children:" Outputs:"}),e.jsx("pre",{className:"text-green-700 dark:text-green-200 mt-1",children:JSON.stringify(V.actualOutputs,null,2)})]}),V.trace&&V.trace.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[" View Trace (",V.trace.length," events)"]}),e.jsx("div",{className:"mt-2 p-2 bg-neutral-50 dark:bg-gray-800 border border-neutral-200 dark:border-gray-600 rounded text-xs font-mono max-h-40 overflow-y-auto",children:V.trace.map((ee,pe)=>e.jsx("div",{className:"py-0.5 text-gray-700 dark:text-gray-300",children:ee},pe))})]})]},V.id)):e.jsxs("div",{className:"text-center text-sm text-neutral-500 dark:text-gray-400 py-8",children:["No test cases yet",e.jsx("p",{className:"text-xs mt-2 text-neutral-400 dark:text-gray-500",children:'Click "Add Test Case" to create one'})]})})]})]}),ns&&e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-neutral-200 dark:border-gray-600 z-40 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-gray-600 bg-neutral-50 dark:bg-gray-700 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[e.jsx(jt,{className:"w-4 h-4"}),"Semantic Diagnostics"]}),e.jsx("button",{onClick:()=>ms(!1),className:"text-neutral-500 dark:text-gray-400 hover:text-neutral-700 dark:hover:text-gray-200",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsx("button",{onClick:lc,className:"w-full px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm mb-4 transition-colors",children:"Run Semantic Analysis"}),e.jsx("div",{className:"space-y-2",children:ws.length>0?ws.map(V=>e.jsx("div",{className:`p-3 rounded-lg border ${V.severity==="error"?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":V.severity==="warning"?"border-yellow-300 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx(jt,{className:`w-4 h-4 mt-0.5 ${V.severity==="error"?"text-red-600":V.severity==="warning"?"text-yellow-600":"text-blue-600"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:V.message}),e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:["Line ",V.line,", Column ",V.column,"  ",V.category]}),V.suggestion&&e.jsx("p",{className:"text-xs text-neutral-500 dark:text-gray-500 mt-1 italic",children:V.suggestion})]})]})},V.id)):e.jsxs("div",{className:"text-center text-sm text-neutral-500 dark:text-gray-400 py-8",children:["No diagnostics yet",e.jsx("p",{className:"text-xs mt-2 text-neutral-600 dark:text-gray-500",children:'Click "Run Semantic Analysis" to analyze code'})]})})]})]}),Wt&&e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-white dark:bg-gray-700 rounded-lg shadow-2xl border border-neutral-200 z-40 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 bg-neutral-50 flex items-center justify-between dark:bg-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Safety Analyzer"]}),e.jsx("button",{onClick:()=>ha(!1),className:"text-neutral-500 hover:text-neutral-700",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsx("button",{onClick:Hn,className:"w-full px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm mb-4 transition-colors",children:"Run Safety Analysis"}),e.jsx("div",{className:"space-y-3",children:xa.length>0?xa.map(V=>e.jsxs("div",{className:"border border-neutral-200 dark:border-gray-600 dark:bg-gray-700 rounded-lg p-3 bg-white dark:bg-gray-750",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 dark:bg-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:V.name}),e.jsx("p",{className:"text-xs text-neutral-600 dark:text-gray-400 mt-1",children:V.description})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${V.severity==="critical"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-600":V.severity==="high"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 border border-orange-300 dark:border-orange-600":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-300 dark:border-yellow-600"}`,children:V.severity})]}),V.violations.map((ee,pe)=>e.jsxs("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded text-xs",children:[e.jsxs("p",{className:"font-medium text-red-800 dark:text-red-300",children:["Line ",ee.line]}),e.jsx("p",{className:"text-red-700 dark:text-red-400 mt-1",children:ee.message}),ee.canOverride&&e.jsx("button",{onClick:()=>{$s(xa.map(Ce=>Ce.id===V.id?{...Ce,violations:Ce.violations.map((Me,Ue)=>Ue===pe?{...Me,approved:!Me.approved}:Me)}:Ce))},className:`mt-2 px-2 py-1 rounded text-xs ${ee.approved?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:ee.approved?"Approved":"Request Override"}),!ee.canOverride&&e.jsx("p",{className:"mt-2 text-red-600 dark:text-red-400 font-medium",children:" Cannot be overridden"})]},pe))]},V.id)):e.jsxs("div",{className:"text-center text-sm text-neutral-500 dark:text-gray-400 py-8",children:["No safety issues detected",e.jsx("p",{className:"text-xs mt-2 text-neutral-600 dark:text-gray-500",children:'Click "Run Safety Analysis" to analyze code'})]})})]})]}),Tt&&e.jsxs("div",{className:"fixed right-4 top-20 w-96 bg-white dark:bg-gray-700 rounded-lg shadow-2xl border border-neutral-200 z-40 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-200 bg-neutral-50 flex items-center justify-between dark:bg-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2 dark:bg-gray-700",children:[e.jsx(dv,{className:"w-4 h-4"}),"Project-wide Replace"]}),e.jsx("button",{onClick:()=>js(!1),className:"text-neutral-500 hover:text-neutral-700",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Search For"}),e.jsx("input",{type:"text",value:kt,onChange:V=>ea(V.target.value),placeholder:"Enter search term...",className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Replace With"}),e.jsx("input",{type:"text",value:is,onChange:V=>fa(V.target.value),placeholder:"Enter replacement...",className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Scope"}),e.jsxs("select",{value:rt,onChange:V=>ta(V.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"current_file",children:"Current File"}),e.jsx("option",{value:"open_files",children:"Open Files"}),e.jsx("option",{value:"project",children:"Entire Project"})]})]}),e.jsx("button",{onClick:()=>{if(!kt)return;const V=[];let ee=[];if(rt==="current_file"){if(!s)return;ee=[s]}else if(rt==="open_files"){const pe=n.map(Ce=>Ce.id);ee=a.filter(Ce=>pe.includes(Ce.id))}else rt==="project"&&(ee=a);if(ee.length===0){O({isOpen:!0,title:"No Files",message:"No files available to search.",type:"warning"});return}if(ee.forEach(pe=>{(h[pe.id]||pe.content).split(`
`).forEach((Ue,Mt)=>{let vt;const ts=new RegExp(`\\b${kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,"g");for(;(vt=ts.exec(Ue))!==null;){const Yt=vt.index,Lt=Yt+vt[0].length,Na=Math.max(0,Yt-20),Ar=Math.min(Ue.length,Lt+20);V.push({file:pe.name,fileId:pe.id,line:Mt+1,column:Yt+1,matchText:vt[0],contextBefore:Ue.substring(Na,Yt),contextAfter:Ue.substring(Lt,Ar),selected:!0})}})}),Jt(V),V.length===0){const pe=rt==="current_file"?"current file":rt==="open_files"?`${ee.length} open file(s)`:`${ee.length} project file(s)`;O({isOpen:!0,title:"No Matches",message:`No occurrences of '${kt}' found in ${pe}.`,type:"warning"})}else{const pe=new Set(V.map(Ce=>Ce.file)).size;console.log(`Found ${V.length} matches in ${pe} file(s)`)}},className:"w-full px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm transition-colors",children:"Find All"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:[He.length," match",He.length!==1?"es":""," found",He.length>0&&` in ${new Set(He.map(V=>V.file)).size} file(s)`]}),He.length>0&&e.jsx("button",{onClick:()=>{const V=He.every(ee=>ee.selected);Jt(He.map(ee=>({...ee,selected:!V})))},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:He.every(V=>V.selected)?"Deselect All":"Select All"})]}),He.map((V,ee)=>e.jsxs("div",{className:"p-2 border border-neutral-200 dark:border-gray-600 rounded bg-neutral-50 dark:bg-gray-700 text-xs hover:bg-neutral-100 dark:hover:bg-gray-600 cursor-pointer transition-colors",onClick:()=>{V.fileId&&V.fileId!==s?.id&&f(V.fileId)},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("input",{type:"checkbox",checked:V.selected,onChange:pe=>{pe.stopPropagation(),Jt(He.map((Ce,Me)=>Me===ee?{...Ce,selected:!Ce.selected}:Ce))},className:"w-3 h-3"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[V.file," : ",V.line]})]}),e.jsxs("p",{className:"font-mono text-xs ml-5 text-gray-800 dark:text-gray-200",children:[V.contextBefore,e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-600 dark:text-gray-900",children:V.matchText}),V.contextAfter]})]},ee))]}),He.length>0&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{if(!kt||!is)return;const V=He.filter(Me=>Me.selected);if(V.length===0){O({isOpen:!0,title:"No Matches Selected",message:"Please select at least one match to replace.",type:"warning"});return}const ee=new Map;V.forEach(Me=>{const Ue=Me.fileId||"";ee.has(Ue)||ee.set(Ue,[]),ee.get(Ue).push(Me)});let pe=0;const Ce=[];if(ee.forEach((Me,Ue)=>{console.log(`Processing ${Me.length} matches in file ${Ue}`);const Mt=a.find(Yt=>Yt.id===Ue);if(!Mt)return;const vt=h[Ue]||Mt.content,ts=Sv(vt,kt,is);ts.changes>0&&(s?.id===Ue?b(ts.content):Do.setState(Yt=>({unsavedChanges:{...Yt.unsavedChanges,[Ue]:ts.content}})),pe+=ts.changes,Ce.push(Mt.name))}),pe>0){const Me=Ce.length;O({isOpen:!0,title:"Replacements Applied",message:`Replaced ${pe} occurrence(s) of '${kt}' with '${is}' in ${Me} file(s)

Affected files:
${Ce.map(Ue=>" "+Ue).join(`
`)}

Don't forget to save your changes!`,type:"success"}),Jt([]),ea(""),fa("")}},className:"flex-1 px-3 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] text-sm transition-colors",children:"Replace Selected"}),e.jsx("button",{onClick:()=>Jt([]),className:"px-3 py-2 bg-neutral-200 dark:bg-gray-600 text-neutral-700 dark:text-gray-200 rounded-lg hover:bg-neutral-300 dark:hover:bg-gray-500 text-sm transition-colors",children:"Clear"})]})]})]})]})}function AO(){const{activeProject:s}=jr();return s?e.jsx(Ck,{environment:"production"}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50 dark:bg-panda-surface-dark",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bt,{size:48,className:"text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No project selected"})]})})}const Im={main:"text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/30",dev:"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30",qa:"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30",staging:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/30",prod:"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30"};function TO({versionId1:s,versionId2:a,onClose:n}){const[i,c]=p.useState(null),[d,u]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{console.log(" Loading comparison:",{versionId1:s,versionId2:a});const x=await Xt.compareVersions(s,a);console.log(" Comparison result:",x),x.success?(console.log(" Setting comparison data:",x.comparison),c(x.comparison)):console.error(" Comparison failed:",x)}catch(x){console.error("Failed to load comparison:",x)}finally{u(!1)}})()},[s,a]),d?e.jsx(yt,{isOpen:!0,onClose:n,title:"Version Diff",children:e.jsx("div",{className:"p-8 text-center",children:"Loading diff..."})}):e.jsx(yt,{isOpen:!0,onClose:n,title:"Version Diff",size:"large",children:e.jsxs("div",{className:"p-6",children:[!i&&!d&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No diff data available"}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex gap-4 text-sm",children:[e.jsxs("div",{className:"text-green-600",children:["+",i.summary?.totalLinesAdded||0," added"]}),e.jsxs("div",{className:"text-red-600",children:["-",i.summary?.totalLinesDeleted||0," deleted"]}),e.jsxs("div",{className:"text-gray-600",children:[i.summary?.filesChanged||0," files changed"]})]}),e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:i.fileChanges?.filter(h=>!h.path.endsWith("tags.json")&&!h.path.includes("tags/tags.json")&&!h.path.endsWith(".tags.json")&&!h.path.includes("/tags.json")).map((h,x)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yl,{size:16}),e.jsx("span",{className:"font-medium",children:h.path}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${h.type==="added"?"bg-green-100 text-green-700":h.type==="deleted"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:h.type}),e.jsxs("span",{className:"text-xs text-gray-600",children:["+",h.linesAdded," -",h.linesDeleted]})]}),e.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded overflow-x-auto",children:h.diff?.hunks&&h.diff.hunks.length>0?h.diff.hunks.map((f,y)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-blue-600 mb-1",children:["@@ -",f.oldStart,",",f.oldLines," +",f.newStart,",",f.newLines," @@"]}),f.lines?.map((b,v)=>e.jsxs("div",{className:b.type==="add"?"bg-green-50 text-green-700":b.type==="delete"?"bg-red-50 text-red-700":"text-gray-600",children:[b.type==="add"?"+":b.type==="delete"?"-":" ",b.content]},v))]},y)):e.jsx("div",{className:"text-gray-500 text-center py-2",children:h.type==="added"?"New file added":h.type==="deleted"?"File deleted":"File modified but no detailed diff available"})})]},x))})]})]})})}function EO(){const{activeProject:s}=jr(),[a,n]=p.useState([]),[i,c]=p.useState([]),[d,u]=p.useState([]),[h,x]=p.useState(new Set),[f,y]=p.useState(null),[b,v]=p.useState(null),[N,E]=p.useState("versions"),[M,L]=p.useState(!0),[w,T]=p.useState(!1),[A,D]=p.useState(null),[C,S]=p.useState(!1),[k,P]=p.useState(!1),[G,U]=p.useState(!1),[Q,Z]=p.useState(null),[ie,J]=p.useState(null),[te,$]=p.useState(""),[_,z]=p.useState(!1),[Y,se]=p.useState("qa"),[O,K]=p.useState(!1),[ue,oe]=p.useState(!1),[Ee,we]=p.useState(!1),[Oe,Ne]=p.useState(""),[Ge,At]=p.useState(!1),[Pt,Qt]=p.useState(null),[Vt,ye]=p.useState([]),[H,Ae]=p.useState({}),[Ve,Ze]=p.useState(new Set),[$t,Ut]=p.useState(!1),[Nt,zs]=p.useState(null),[Js,Le]=p.useState(!1),[Vs,ns]=p.useState(!1),ms=I=>d.some(me=>me.snapshotId===I),ws=I=>i.some(me=>me.versionId===I),Hs=async I=>{if(!s)throw new Error("No active project");Ze(me=>new Set(me).add(I.id));try{const me=[{id:"syntax-semantic",type:"syntax-semantic",name:"Syntax & Semantic Validation",description:"ST parser + semantic analyzer for all vendor dialects",status:"running",severity:"error",message:"Validating ST code syntax and semantics...",details:[]},{id:"tag-dependencies",type:"tag-dependencies",name:"Tag Dependency Check",description:"Ensure referenced tags exist or are part of the same bundle",status:"pending",severity:"warning",message:"Waiting for syntax validation...",details:[]},{id:"critical-overwrites",type:"critical-overwrites",name:"Critical Tag Overwrite Detection",description:"Tags flagged as critical must not be changed without manual approval",status:"pending",severity:"critical",message:"Waiting for tag analysis...",details:[]},{id:"resource-limits",type:"resource-limits",name:"Resource Usage & Limits",description:"Detect increased memory/CPU estimate of compiled logic",status:"pending",severity:"warning",message:"Waiting for compilation analysis...",details:[]},{id:"race-conditions",type:"race-conditions",name:"Race Condition Analyzer",description:"Static analysis to detect multiple tasks writing to same output",status:"pending",severity:"error",message:"Waiting for static analysis...",details:[]},{id:"io-conflicts",type:"io-conflicts",name:"IO Address Conflicts",description:"Detect if two tags map to same physical address",status:"pending",severity:"error",message:"Waiting for IO mapping analysis...",details:[]},{id:"vendor-export",type:"vendor-export",name:"Vendor Export Validity",description:"Run vendor exporter and validate (no unresolved symbols)",status:"pending",severity:"error",message:"Waiting for vendor export...",details:[]},{id:"runtime-lock",type:"runtime-lock",name:"Runtime Lock & Maintenance Window",description:"Ensure maintenance window or request one for live runtime",status:"pending",severity:"warning",message:"Checking runtime availability...",details:[]},{id:"dry-run",type:"dry-run",name:"Dry Run Simulation",description:"Run simulator against copy of target runtime",status:"pending",severity:"warning",message:"Preparing simulation environment...",details:[]},{id:"approval-policy",type:"approval-policy",name:"Approval Policy",description:"Map detected errors/warnings to required approvals",status:"pending",severity:"info",message:"Evaluating approval requirements...",details:[]}],ke={releaseId:I.id,snapshotId:I.snapshotId,projectId:s.id,checks:me,overallStatus:"passed",executedAt:new Date().toISOString(),executedBy:"System",approvalRequired:!1,requiredApprovals:[],blockingIssues:0,warningIssues:0,totalFiles:0,totalTags:0};for(let tt=0;tt<me.length;tt++){await new Promise(Qe=>setTimeout(Qe,300+Math.random()*500));const Se=me[tt],mt=Math.random()>.15;switch(Se.status=mt?"passed":Se.severity==="critical"?"failed":"warning",Se.executedAt=new Date().toISOString(),Se.executionTime=Math.floor(200+Math.random()*800),Se.type){case"syntax-semantic":mt?(Se.message="All ST code validated successfully",Se.details=["Parsed 15 programs, 43 functions","No syntax errors detected","Semantic analysis passed"],ke.totalFiles=15):(Se.message="Syntax errors found in Main_Program.st",Se.details=["Line 34: Expected END_IF statement","Variable TEMP_SETPOINT not declared","Function PID_Control has unreachable code"]);break;case"tag-dependencies":mt?(Se.message="All tag dependencies resolved",Se.details=["Analyzed 127 tag references","All dependencies available in bundle"],ke.totalTags=127):(Se.message="2 undefined tag references found",Se.details=["Tag CONVEYOR_SPEED referenced but not defined","Tag SAFETY_INTERLOCK missing from bundle"]);break;case"critical-overwrites":mt?(Se.message="No critical tags modified",Se.details=["Scanned 45 critical tags","No safety-critical modifications detected"]):(Se.message="Critical safety tag EMERGENCY_STOP will be overwritten",Se.details=["EMERGENCY_STOP: Previous=TRUE, New=FALSE","Requires safety engineer approval"],Se.severity="critical",ke.approvalRequired=!0,ke.requiredApprovals.includes("safety_engineer")||ke.requiredApprovals.push("safety_engineer"));break;case"resource-limits":mt?(Se.message="Resource usage within limits",Se.details=["Memory: 2.1MB (+0.3MB)","CPU cycles: 85% (+5%)","Bundle size: 1.8MB"]):(Se.message="Memory usage increased significantly",Se.details=["Memory: 4.2MB (+1.8MB)","CPU cycles: 95% (+25%)","Warning: Approaching memory limit"]);break;case"race-conditions":mt?(Se.message="No race conditions detected",Se.details=["Analyzed 23 output writes","No simultaneous write conflicts found"]):(Se.message="Potential race condition detected",Se.details=["Task_A and Task_B both write OUTPUT_VALVE","Recommendation: Add interlock logic"]);break;case"io-conflicts":mt?(Se.message="No IO address conflicts",Se.details=["Validated 156 IO mappings","All addresses unique"]):(Se.message="Address conflict detected",Se.details=["%MW100 mapped to PRESSURE_SENSOR and TEMP_SENSOR","Previous deployment may have stale mappings"]);break;case"vendor-export":mt?(Se.message="Vendor export validation passed",Se.details=["Generated vendor binary: 1.2MB","All symbols resolved successfully"]):(Se.message="Unresolved symbol in vendor export",Se.details=["Missing symbol: FB_PIDController","Vendor library version mismatch detected"]);break;case"runtime-lock":mt?(Se.message="Runtime available for deployment",Se.details=["Target runtime idle","No active processes blocking deployment"]):(Se.message="Runtime locked - maintenance window required",Se.details=["3 active control processes running","Recommend scheduling for 2:00 AM maintenance window"]);break;case"dry-run":mt?(Se.message="Dry run completed - no behavioral changes",Se.details=["Simulated 60 seconds of operation","Tag values within expected ranges"]):(Se.message="Dry run shows behavioral differences",Se.details=["TEMPERATURE_PV behavior changed by 5%","New oscillation pattern detected","Review control loop tuning"]);break;case"approval-policy":const Qe=ke.checks.filter(Ts=>Ts.status==="failed"&&Ts.severity==="critical").length,os=ke.checks.filter(Ts=>Ts.status==="failed"&&Ts.severity==="error").length,Ys=ke.checks.filter(Ts=>Ts.status==="warning").length;ke.blockingIssues=Qe+os,ke.warningIssues=Ys,Qe>0?(Se.status="failed",Se.message=`${Qe} critical issues require approval`,Se.details=["2 safety engineer approvals required","Operations manager sign-off needed"],ke.overallStatus="failed",ke.approvalRequired=!0):os>0?(Se.status="failed",Se.message=`${os} blocking errors must be fixed`,Se.details=["Deployment blocked until errors resolved"],ke.overallStatus="failed"):Ys>2?(Se.status="warning",Se.message=`${Ys} warnings require review`,Se.details=["Senior engineer approval recommended"],ke.overallStatus="warning"):(Se.status="passed",Se.message="No additional approvals required",Se.details=["Standard deployment - proceed with normal workflow"]);break}Ae(Qe=>({...Qe,[I.id]:{...ke,checks:[...me]}}))}return ke}finally{Ze(me=>{const ke=new Set(me);return ke.delete(I.id),ke})}};p.useEffect(()=>{s&&Wt()},[s]),p.useEffect(()=>{s&&ha()},[s,N]);const Wt=async()=>{if(s)try{const[I,me,ke]=await Promise.all([Xt.getVersions(s.id,{limit:50}),Xt.getSnapshots(s.id),Xt.getReleases(s.id)]);if(I.success&&n(I.versions),me.success&&c(me.snapshots),ke.success){u(ke.releases);const tt=ke.releases.filter(Se=>Se.stage==="staging");tt.length>0&&console.log("Staging releases available for deployment:",tt)}await ha()}catch(I){console.error("Failed to load counts:",I)}},ha=async()=>{if(s){L(!0);try{if(N==="versions"){const I=await Xt.getVersions(s.id,{limit:50});I.success&&n(I.versions)}else if(N==="snapshots"){const I=await Xt.getSnapshots(s.id);I.success&&c(I.snapshots)}else if(N==="releases"){const I=await Xt.getReleases(s.id);I.success&&u(I.releases)}}catch(I){console.error("Failed to load data:",I)}finally{L(!1)}}};p.useEffect(()=>{f&&$s(f.id)},[f]),p.useEffect(()=>{ie&&xa(ie.id)},[ie]);const xa=async I=>{try{const me=i.find(ke=>ke.id===I);if(me){const ke=await Xt.getVersionById(me.versionId);ke.success&&ke.version.files?ye(ke.version.files):ye([{filePath:"src/Main_Program.st",changeType:"modified",size:2456},{filePath:"src/FB_PIDController.st",changeType:"added",size:1234},{filePath:"tags/Process_Tags.json",changeType:"modified",size:3421},{filePath:"tags/IO_Mapping.json",changeType:"modified",size:1876},{filePath:"config/Runtime_Config.json",changeType:"added",size:789}])}}catch(me){console.error("Failed to load snapshot files:",me),ye([])}},$s=async I=>{try{const me=await Xt.getVersionById(I);me.success&&v(me.version)}catch(me){console.error("Failed to load version details:",me)}},Tt=I=>{const me=I.parentVersionId;me?(console.log(" View diff:",{parent:me,current:I.id}),D([me,I.id]),T(!0)):K(!0)},js=async I=>{if(!(!s||!f))try{(await Xt.createSnapshot(s.id,{versionId:f.id,name:I.name,description:I.description,createdBy:"Current User"})).success&&(S(!1),await Wt(),Ne("Snapshot created successfully!"),oe(!0))}catch(me){console.error("Failed to create snapshot:",me),me.response?.status===409?Ne("A snapshot with this name already exists. Please choose a different name."):Ne("Failed to create snapshot: "+(me.response?.data?.error||me.message)),we(!0)}},kt=I=>{y(I),S(!0)},ea=I=>{const me=["main","dev","qa","staging","prod"],ke=me.indexOf(I);return ke<me.length-1?me[ke+1]:null},is=async I=>{if(!s)return;const me=i.find(ke=>ke.id===I.snapshotId);if(me)try{ns(I.exportToL5X||!1);const ke=await Xt.createRelease(s.id,{snapshotId:I.snapshotId,versionId:me.versionId,name:I.name,version:I.version,description:I.description,stage:"main",createdBy:"Current User",tags:["release"]});if(ke.success){let tt=null;if(I.exportToL5X)try{tt=await fa(ke.release,me)}catch(mt){console.error("L5X export failed:",mt);let Qe="Release created successfully, but L5X export failed: "+mt.message;Ne(Qe),we(!0),ns(!1);return}P(!1),ns(!1),await Wt();let Se="";tt?Se=`Release created and exported to L5X successfully!
Export Path: ${tt.exportPath}${tt.checksumVerified?`

<b>Binary Checksum Verified.</b>`:""}`:Se="Release created successfully!",Ne(Se),oe(!0)}}catch(ke){console.error("Failed to create release:",ke),ke.response?.status===409?Ne("A release with this name already exists. Please choose a different name."):Ne("Failed to create release: "+(ke.response?.data?.error||ke.message)),we(!0),ns(!1)}},fa=async(I,me)=>{try{console.log(" Starting L5X export for release:",I.name),console.log(" Getting snapshot data...");const ke=await Xt.getSnapshotById(me.id),tt={bundle_id:`${I.name}_v${I.version}`,name:I.name,version:I.version,description:I.description,logic:ke.logic||"",tags:ke.tags||[],timestamp:new Date().toISOString()};console.log(" Export bundle prepared:",{bundleId:tt.bundle_id,logicLength:tt.logic.length,tagsCount:tt.tags.length});const Se=new AbortController,mt=setTimeout(()=>{Se.abort()},3e4);try{console.log(" Calling export API...");const Qe=await fetch("/api/deploy/export/rockwell",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:s?.id,releaseId:I.id,bundle:tt,format:"L5X"}),signal:Se.signal});if(clearTimeout(mt),!Qe.ok){const Ys=await Qe.text();throw new Error(`HTTP ${Qe.status}: ${Ys}`)}console.log(" Parsing response...");const os=await Qe.json();if(!os.success)throw new Error(os.error||"Export failed");return console.log(" L5X export completed successfully:",os.export_path),{success:!0,exportPath:os.export_path,size:os.size,checksum:os.checksum,checksumVerified:os.checksum_verified}}catch(Qe){throw clearTimeout(mt),Qe.name==="AbortError"?new Error("L5X export timed out after 30 seconds"):Qe}}catch(ke){throw console.error(" L5X export error:",ke),ke.message.includes("timeout")?new Error("L5X export timed out. Please try again."):new Error(`L5X export failed: ${ke.message}`)}},rt=async I=>{if(Q)try{I==="staging"&&(Ne("Running pre-deploy safety checks..."),oe(!0),Hs(Q).then(ke=>{console.log("Safety checks completed:",ke),ke.overallStatus==="failed"?(Ne(`Safety checks failed! ${ke.blockingIssues} blocking issues found.`),we(!0)):ke.overallStatus==="warning"?(Ne(`Safety checks completed with ${ke.warningIssues} warnings. Review recommended.`),oe(!0)):(Ne("All safety checks passed! Release ready for deployment."),oe(!0))}).catch(ke=>{console.error("Safety checks failed:",ke),Ne("Safety check execution failed"),we(!0)})),(await Xt.promoteRelease(Q.id,I,"Current User")).success&&(U(!1),await Wt(),I!=="staging"&&(Ne(`Release promoted to ${I}!`),oe(!0)))}catch(me){console.error("Failed to promote release:",me),Ne("Failed to promote release"),we(!0)}},ta=async I=>{try{(await Xt.approveVersion(I.id,"Current User")).success&&(await Wt(),Ne("Version approved successfully!"),oe(!0))}catch(me){console.error("Failed to approve version:",me),Ne(me.message||"Failed to approve version"),we(!0)}},He=async I=>{try{const me=await Xt.signRelease(I.id,"Current User");me.success?(console.log("Release signed successfully:",I.id),await Wt(),Ne("Release signed successfully!"),oe(!0)):(Ne("Failed to sign release: "+(me.error||"Unknown error")),we(!0))}catch(me){console.error("Failed to sign release:",me),Ne("Failed to sign release"),we(!0)}},Jt=async I=>{try{if(!s)return;Ne("Preparing version bundle for download..."),oe(!0);const me={version:I.version,versionId:I.id,projectId:s.id,projectName:s.name,timestamp:new Date().toISOString(),author:I.author,checksum:I.checksum,signed:I.signed},ke=JSON.stringify(me,null,2),tt=new Blob([ke],{type:"application/json"}),Se=window.URL.createObjectURL(tt),mt=document.createElement("a");mt.href=Se,mt.download=`${s.name}_${I.version}_bundle.json`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),window.URL.revokeObjectURL(Se),setTimeout(()=>{oe(!1),Ne(`Bundle downloaded: ${s.name}_${I.version}_bundle.json`),oe(!0)},500)}catch(me){console.error("Failed to download bundle:",me),Ne("Failed to download bundle"),we(!0)}},ls=async I=>{try{if(!I.signed){Ne("This version is not signed"),we(!0);return}Ne("Verifying digital signature..."),oe(!0),await new Promise(ke=>setTimeout(ke,1500)),oe(!1);const me=I;Qt({valid:!0,signedBy:me.signedBy||"Unknown",signedAt:me.signedAt?new Date(me.signedAt).toLocaleString():"N/A",checksum:I.checksum,version:I.version}),At(!0)}catch(me){console.error("Failed to verify signature:",me),Ne("Failed to verify signature"),we(!0)}},Gs=async I=>{if(ie)try{(await ko.promoteSnapshot(ie.id,I,"Current User",`Promoting snapshot to ${I}`)).success&&(z(!1),J(null),await Wt(),Ne(`Snapshot promoted to ${I} successfully!`),oe(!0))}catch(me){console.error("Failed to promote snapshot:",me),Ne("Failed to promote snapshot"),we(!0)}},Ka=I=>{x(me=>{const ke=new Set(me);return ke.has(I)?ke.delete(I):ke.add(I),ke})},es=I=>{switch(I){case"released":return e.jsx(Fe,{size:16,className:"text-green-500"});case"staged":return e.jsx(jo,{size:16,className:"text-orange-500"});case"draft":return e.jsx(jo,{size:16,className:"text-gray-400"})}};return s?e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-panda-surface-dark",children:[w&&A&&e.jsx(TO,{versionId1:A[0],versionId2:A[1],onClose:()=>T(!1)}),O&&e.jsx(yt,{isOpen:O,onClose:()=>K(!1),title:"Cannot View Diff",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(Gr,{size:24,className:"text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"This is the first version and has no parent version to compare with."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Create more versions to view diffs between them."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Got it"})})]})}),ue&&e.jsx(yt,{isOpen:ue,onClose:()=>oe(!1),title:"Success",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(Fe,{size:24,className:"text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line",dangerouslySetInnerHTML:{__html:Oe}})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>oe(!1),className:"px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"OK"})})]})}),Ee&&e.jsx(yt,{isOpen:Ee,onClose:()=>we(!1),title:"Error",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(bt,{size:24,className:"text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-700",children:Oe})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>we(!1),className:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors",children:"OK"})})]})}),Ge&&Pt&&e.jsx(yt,{isOpen:Ge,onClose:()=>At(!1),title:"Signature Verification",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx(Fe,{size:32,className:"text-green-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-1",children:"Signature Valid"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This version has been cryptographically signed and verified."})]})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Version:"}),e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:Pt.version})]}),e.jsxs("div",{className:"flex items-start justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Signed by:"}),e.jsx("span",{className:"text-sm text-gray-900",children:Pt.signedBy})]}),e.jsxs("div",{className:"flex items-start justify-between py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Signature date:"}),e.jsx("span",{className:"text-sm text-gray-900",children:Pt.signedAt})]}),e.jsxs("div",{className:"flex items-start justify-between py-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Checksum:"}),e.jsxs("span",{className:"text-sm text-gray-900 font-mono break-all",children:[Pt.checksum.substring(0,32),"..."]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-xs text-gray-500 bg-blue-50 p-3 rounded-lg",children:[e.jsx(Gr,{size:16,className:"text-blue-600 flex-shrink-0"}),e.jsx("span",{children:"The digital signature ensures this version has not been tampered with since it was signed."})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>At(!1),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"OK"})})]})}),_&&ie&&e.jsx(yt,{isOpen:_,onClose:()=>z(!1),title:"Promote Snapshot",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:["Promote: ",ie.name]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select the target environment to promote this snapshot to. Snapshots must progress through stages in order: Dev  QA  Staging  Production"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"qa",checked:Y==="qa",onChange:I=>se(I.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"QA Environment"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:"For testing and quality assurance"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"staging",checked:Y==="staging",onChange:I=>se(I.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Staging Environment"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:"For final validation before production"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"prod",checked:Y==="prod",onChange:I=>se(I.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Production Environment"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:"Live production deployment (requires approvals)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{z(!1),J(null)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>Gs(Y),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg text-sm font-medium hover:bg-[#E55F00] transition-colors flex items-center gap-2",children:[e.jsx(yd,{size:16}),"Promote to ",Y.toUpperCase()]})]})]})}),C&&e.jsx(yt,{isOpen:C,onClose:()=>S(!1),title:"Create Snapshot",children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Creating a snapshot will save the current version state."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Snapshot name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",id:"snapshot-name"}),e.jsx("textarea",{placeholder:"Description (optional)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",rows:3,id:"snapshot-description"})]}),e.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:()=>{const I=document.getElementById("snapshot-name").value,me=document.getElementById("snapshot-description").value;I&&js({name:I,description:me})},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg",children:"Create Snapshot"})]})]})}),k&&e.jsx(yt,{isOpen:k,onClose:()=>P(!1),title:"Create Release",size:"large",children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Creating a release will bundle the current version and mark it as immutable."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Release name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",id:"release-name"}),e.jsx("input",{type:"text",placeholder:"Version (e.g., v1.0.0)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",id:"release-version"}),e.jsx("textarea",{placeholder:"Description",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",rows:3,id:"release-description"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",id:"release-snapshot",defaultValue:te,children:[e.jsx("option",{value:"",children:"Select snapshot"}),i.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("input",{type:"checkbox",id:"export-l5x",checked:Js,onChange:I=>Le(I.target.checked),className:"h-4 w-4 text-[#FF6A00] focus:ring-[#FF6A00] border-gray-300 dark:border-gray-600 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"export-l5x",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:"Export to Rockwell L5X Format"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically export this release as a Rockwell Studio 5000 L5X file for deployment"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:" L5X"})})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:()=>{const I=document.getElementById("release-name").value,me=document.getElementById("release-version").value,ke=document.getElementById("release-description").value,tt=document.getElementById("release-snapshot").value;I&&me&&tt&&is({name:I,version:me,description:ke,snapshotId:tt,exportToL5X:Js})},disabled:Vs,className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${Vs?"bg-gray-400 cursor-not-allowed":"bg-[#FF6A00] hover:bg-[#E55A00]"} text-white`,children:Vs?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:Js?"Creating & Exporting...":"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Create Release"}),Js&&e.jsx("span",{className:"text-xs opacity-75",children:"+ Export L5X"})]})})]})]})}),G&&Q&&e.jsx(yt,{isOpen:G,onClose:()=>U(!1),title:"Promote Release",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:["Promote Release: ",Q.name]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select the target environment to promote this release to."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"qa",checked:Y==="qa",onChange:I=>se(I.target.value),className:"mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"QA Environment"}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"For testing and quality assurance"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"staging",checked:Y==="staging",onChange:I=>se(I.target.value),className:"mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Staging Environment"}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"For final validation before production"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"radio",name:"promotionStage",value:"prod",checked:Y==="prod",onChange:I=>se(I.target.value),className:"mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Production Environment"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:"Live production deployment"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{U(!1),Z(null)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>rt(Y),className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg text-sm font-medium hover:bg-[#E55F00] transition-colors flex items-center gap-2",children:[e.jsx(yd,{size:16}),"Promote to ",Y.toUpperCase()]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Versioning Center"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["- ",s.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>S(!0),disabled:!f||f&&ws(f.id),className:`px-4 py-2 border rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${!f||f&&ws(f.id)?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-white"}`,children:[e.jsx(da,{size:16}),f&&ws(f.id)?"Snapshot Exists":"Create Snapshot"]}),e.jsxs("button",{onClick:()=>P(!0),disabled:!f,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ji,{size:16}),"Create Release"]}),e.jsxs("button",{className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[e.jsx(ou,{size:16}),"Import Bundle"]})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-[20%] bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-600 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Branches & Stages"}),M?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading branches..."}):e.jsx("div",{className:"space-y-1",children:[{key:"main-dev",label:"main/dev",stages:["main","dev"]},{key:"qa",label:"qa",stages:["qa"]},{key:"staging",label:"staging",stages:["staging"]},{key:"production",label:"prod",stages:["prod"]}].map(({key:I,label:me,stages:ke})=>{const tt=d.filter(Qe=>ke.includes(Qe.stage)).length,Se=h.has(I),mt=ke[0];return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Ka(I),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:Se?e.jsx(wi,{size:16}):e.jsx(bi,{size:16})}),e.jsx(Qr,{size:16,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex-1",children:me}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${Im[mt]}`,children:tt})]}),Se&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[d.filter(Qe=>ke.includes(Qe.stage)).slice(0,5).map(Qe=>e.jsxs("button",{onClick:()=>Z(Qe),className:"w-full flex items-center gap-2 px-2 py-1.5 rounded text-left hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[e.jsx(da,{size:12,className:"text-blue-500 dark:text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 flex-1 truncate",children:Qe.name}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["v",Qe.version]})]},Qe.id)),d.filter(Qe=>ke.includes(Qe.stage)).length>5&&e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 px-2 py-1",children:["+",d.filter(Qe=>ke.includes(Qe.stage)).length-5," more"]})]})]},I)})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Statistics"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Versions:"}),e.jsx("span",{className:"font-medium",children:a.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Snapshots:"}),e.jsx("span",{className:"font-medium",children:i.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Releases:"}),e.jsx("span",{className:"font-medium",children:d.length})]})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600 px-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>E("versions"),className:`py-3 text-sm font-medium border-b-2 transition-colors ${N==="versions"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Versions"}),e.jsx("button",{onClick:()=>E("releases"),className:`py-3 text-sm font-medium border-b-2 transition-colors ${N==="releases"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Releases"}),e.jsx("button",{onClick:()=>E("snapshots"),className:`py-3 text-sm font-medium border-b-2 transition-colors ${N==="snapshots"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Snapshots"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:M?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):e.jsxs(e.Fragment,{children:[N==="versions"&&e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No versions yet. Create your first version!"}):a.map(I=>e.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`border rounded-lg p-4 hover:shadow-md transition-all cursor-pointer ${f?.id===I.id?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600"}`,onClick:()=>y(I),children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ng,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-100",children:I.version}),es(I.status)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.message||"No message"})]})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(Dn,{size:14}),I.author]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(Oa,{size:14}),new Date(I.timestamp).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(yl,{size:14}),I.filesChanged," files"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(WT,{size:14}),I.checksum?.substring(0,8)]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-2 text-xs text-gray-600 dark:text-gray-400",children:e.jsxs("span",{children:["Approvals: ",I.approvals,"/",I.approvalsRequired]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:me=>{me.stopPropagation(),Tt(I)},className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors flex items-center gap-1",children:[e.jsx(Hr,{size:12}),"Diff"]}),e.jsxs("button",{onClick:me=>{me.stopPropagation(),kt(I)},disabled:i.some(me=>me.versionId===I.id),className:`px-3 py-1 text-xs rounded transition-colors flex items-center gap-1 ${i.some(me=>me.versionId===I.id)?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50 text-orange-700 dark:text-orange-300"}`,children:[e.jsx(da,{size:12}),i.some(me=>me.versionId===I.id)?"Snapshot Exists":"Snapshot"]}),e.jsx("button",{onClick:me=>{me.stopPropagation(),ta(I)},disabled:I.approvals>=I.approvalsRequired,className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 rounded transition-colors disabled:opacity-50",children:"Approve"})]})]}),I.tags&&I.tags.length>0&&e.jsx("div",{className:"mt-2 flex gap-2",children:I.tags.map(me=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded",children:me},me))})]},I.id))}),N==="releases"&&e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No releases yet. Create your first release!"}):d.map(I=>e.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>Z(I),className:`border rounded-lg p-4 hover:shadow-md transition-all cursor-pointer ${Q?.id===I.id?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(da,{size:20,className:"text-[#FF6A00]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-100",children:I.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Im[I.stage]}`,children:I.stage})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.version})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":I.status==="deprecated"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:I.status})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:I.version}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(I.createdAt).toLocaleDateString()}),I.signed&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[e.jsx(qe,{size:14}),"Signed"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!I.signed&&e.jsxs("button",{onClick:()=>{Z(I),He(I)},className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded transition-colors flex items-center gap-1",children:[e.jsx(qe,{size:12}),"Sign"]}),ea(I.stage)?e.jsxs("button",{onClick:()=>{Z(I),se("qa"),U(!0)},className:"px-3 py-1 text-xs bg-[#FF6A00] text-white hover:bg-[#E55F00] rounded transition-colors flex items-center gap-1",children:[e.jsx(yd,{size:12}),"Promote Release"]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 px-3 py-1",children:"Production"})]})]})]},I.id))}),N==="snapshots"&&e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No snapshots yet. Create your first snapshot!"}):i.map(I=>e.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>J(I),className:`border rounded-lg p-4 hover:shadow-md transition-all cursor-pointer ${ie?.id===I.id?"border-[#FF6A00] bg-orange-50 dark:bg-orange-900/20":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(da,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-100",children:I.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.description})]})]}),e.jsxs("button",{onClick:()=>{J(I),$(I.id),P(!0)},disabled:ms(I.id),className:`px-3 py-1.5 text-xs rounded transition-colors flex items-center gap-1 ${ms(I.id)?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-[#FF6A00] text-white hover:bg-[#E55F00]"}`,children:[e.jsx(da,{size:14}),ms(I.id)?"Release Exists":"Create Release"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created ",new Date(I.createdAt).toLocaleDateString()," by ",I.createdBy]})]},I.id))})]})})]}),e.jsx("div",{className:"w-[20%] bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-600 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:N==="snapshots"&&ie?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 uppercase tracking-wide",children:"Snapshot Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Information"}),e.jsxs("div",{className:"text-sm text-gray-800 dark:text-gray-100",children:[e.jsx("div",{className:"font-medium",children:ie.name}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:ie.description}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-500 text-xs mt-2",children:["Created ",new Date(ie.createdAt).toLocaleDateString()," by ",ie.createdBy]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:["Files (",Vt.length,")"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:Vt.length>0?Vt.map((I,me)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 py-1",children:[e.jsx(yl,{size:14,className:I.changeType==="added"?"text-green-500":I.changeType==="deleted"?"text-red-500":"text-blue-500"}),e.jsx("span",{className:"truncate flex-1",title:I.filePath,children:I.filePath}),I.size&&e.jsxs("span",{className:"text-xs text-gray-500",children:[(I.size/1024).toFixed(1),"KB"]})]},me)):e.jsx("div",{className:"text-xs text-gray-500",children:"No files loaded"})})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:e.jsxs("button",{onClick:()=>{$(ie.id),P(!0)},disabled:ms(ie.id),className:`w-full px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${ms(ie.id)?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-[#FF6A00] text-white hover:bg-[#E55F00]"}`,children:[e.jsx(da,{size:16}),ms(ie.id)?"Release Exists":"Create Release"]})})]})]}):N==="releases"&&Q?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-4 uppercase tracking-wide",children:"Release Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-2",children:"Information"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:[Q.name," v",Q.version]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${Im[Q.stage]}`,children:Q.stage.toUpperCase()}),Q.signed&&e.jsx(qe,{size:12,className:"text-green-500"})]}),e.jsxs("div",{className:"text-gray-500 text-xs mt-2",children:["Created ",new Date(Q.createdAt).toLocaleDateString()," by ",Q.createdBy]})]})]}),Q.stage==="staging"&&H[Q.id]&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600",children:"Safety Checks"}),e.jsx("button",{onClick:()=>{zs(H[Q.id]),Ut(!0)},className:"text-xs text-blue-600 hover:text-blue-700",children:"View All"})]}),e.jsxs("div",{className:"space-y-1",children:[H[Q.id].checks.slice(0,5).map(I=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[I.status==="passed"&&e.jsx(Fe,{size:12,className:"text-green-500"}),I.status==="failed"&&e.jsx(bt,{size:12,className:"text-red-500"}),I.status==="warning"&&e.jsx(bt,{size:12,className:"text-amber-500"}),I.status==="running"&&e.jsx("div",{className:"w-3 h-3 border border-blue-500 border-t-transparent rounded-full animate-spin"}),I.status==="pending"&&e.jsx(jo,{size:12,className:"text-gray-400"}),e.jsx("span",{className:`truncate ${I.status==="failed"?"text-red-700":I.status==="warning"?"text-amber-700":I.status==="passed"?"text-green-700":"text-gray-600"}`,children:I.name})]},I.id)),H[Q.id].checks.length>5&&e.jsxs("div",{className:"text-xs text-gray-500 pt-1",children:["+",H[Q.id].checks.length-5," more checks"]})]}),e.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${H[Q.id].overallStatus==="passed"?"bg-green-50 text-green-700":H[Q.id].overallStatus==="warning"?"bg-amber-50 text-amber-700":"bg-red-50 text-red-700"}`,children:[e.jsxs("div",{className:"font-medium",children:[H[Q.id].overallStatus==="passed"&&"All checks passed",H[Q.id].overallStatus==="warning"&&`${H[Q.id].warningIssues} warnings`,H[Q.id].overallStatus==="failed"&&`${H[Q.id].blockingIssues} blocking issues`]}),H[Q.id].approvalRequired&&e.jsxs("div",{className:"text-xs mt-1",children:["Approvals required: ",H[Q.id].requiredApprovals.join(", ")]})]})]}),Ve.has(Q.id)&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),"Running safety checks..."]})}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[e.jsxs("button",{onClick:()=>He(Q),disabled:Q.signed,className:`w-full px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${Q.signed?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:[e.jsx(qe,{size:16}),Q.signed?"Signed":"Sign Release"]}),ea(Q.stage)&&e.jsxs("button",{onClick:()=>{se(ea(Q.stage)),U(!0)},className:"w-full px-3 py-2 bg-[#FF6A00] text-white rounded-lg text-sm font-medium hover:bg-[#E55F00] transition-colors flex items-center justify-center gap-2",children:[e.jsx(yd,{size:16}),"Promote to ",ea(Q.stage)?.toUpperCase()]})]})]})]}):N==="versions"&&f&&b?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 uppercase tracking-wide",children:"Version Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[es(f.status),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200 capitalize",children:f.status})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Approvals"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:f.approvals}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" of ",f.approvalsRequired]})]}),b.approvers&&b.approvers.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:b.approvers.map((I,me)=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(Fe,{size:12,className:"text-green-500"}),I.name]},me))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:["Changed Files (",b.files?.length||0,")"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:b.files?.map((I,me)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 py-1",children:[e.jsx(As,{size:14,className:I.changeType==="added"?"text-green-500":I.changeType==="deleted"?"text-red-500":"text-blue-500"}),e.jsx("span",{className:"truncate",title:I.filePath,children:I.filePath})]},me))})]}),b.changelog&&b.changelog.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"History"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:b.changelog.map((I,me)=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 border-l-2 border-gray-300 dark:border-gray-600 pl-2",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:I.action}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["by ",I.actor]}),e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(I.timestamp).toLocaleString()})]},me))})]}),f.totalSizeBytes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Storage"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Original: ",(f.totalSizeBytes/1024).toFixed(2)," KB"]}),f.compressedSizeBytes&&e.jsxs("div",{children:["Compressed: ",(f.compressedSizeBytes/1024).toFixed(2)," KB"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-600 space-y-2",children:[e.jsxs("button",{onClick:()=>Tt(f),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Hr,{size:16}),"View Diff"]}),e.jsxs("button",{onClick:()=>Jt(f),className:"w-full px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(vi,{size:16}),"Download Bundle"]}),f.signed&&e.jsxs("button",{onClick:()=>ls(f),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qe,{size:16}),"Verify Signature"]})]})]})]}):e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm mt-8",children:[N==="versions"&&"Select a version to view details",N==="snapshots"&&"Select a snapshot to view details",N==="releases"&&"Select a release to view details"]})})})]}),$t&&Nt&&e.jsx(yt,{isOpen:$t,onClose:()=>Ut(!1),title:"Deploy Safety Checks",size:"large",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Pre-Deploy Safety Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Automated safety checks executed at ",new Date(Nt.executedAt).toLocaleString()]})]}),e.jsx("div",{className:`px-3 py-1 rounded text-sm font-medium ${Nt.overallStatus==="passed"?"bg-green-100 text-green-700":Nt.overallStatus==="warning"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:Nt.overallStatus.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Nt.checks.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Checks"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Nt.checks.filter(I=>I.status==="passed").length}),e.jsx("div",{className:"text-xs text-green-600",children:"Passed"})]}),e.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:Nt.warningIssues}),e.jsx("div",{className:"text-xs text-amber-600",children:"Warnings"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:Nt.blockingIssues}),e.jsx("div",{className:"text-xs text-red-600",children:"Blocking"})]})]})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Nt.checks.map(I=>e.jsxs("div",{className:`border rounded-lg p-4 ${I.status==="passed"?"border-green-200 bg-green-50":I.status==="warning"?"border-amber-200 bg-amber-50":I.status==="failed"?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[I.status==="passed"&&e.jsx(Fe,{size:20,className:"text-green-500"}),I.status==="failed"&&e.jsx(bt,{size:20,className:"text-red-500"}),I.status==="warning"&&e.jsx(bt,{size:20,className:"text-amber-500"}),I.status==="running"&&e.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),I.status==="pending"&&e.jsx(jo,{size:20,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:I.name}),e.jsx("p",{className:"text-sm text-gray-600",children:I.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${I.severity==="critical"||I.severity==="error"?"bg-red-100 text-red-700":I.severity==="warning"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:I.severity}),I.executionTime&&e.jsxs("span",{className:"text-xs text-gray-500",children:[I.executionTime,"ms"]})]})]}),e.jsx("div",{className:`text-sm mb-2 ${I.status==="failed"?"text-red-700":I.status==="warning"?"text-amber-700":I.status==="passed"?"text-green-700":"text-gray-700"}`,children:I.message}),I.details&&I.details.length>0&&e.jsx("div",{className:"text-xs text-gray-600 space-y-1 ml-8",children:I.details.map((me,ke)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:me})]},ke))})]},I.id))}),Nt.approvalRequired&&e.jsxs("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Approval Required"}),e.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"This deployment requires additional approvals before it can proceed:"}),e.jsx("div",{className:"space-y-1",children:Nt.requiredApprovals.map((I,me)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-700",children:[e.jsx(qe,{size:16}),e.jsx("span",{className:"capitalize",children:I.replace("_"," ")})]},me))})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>Ut(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-100",children:"Close"}),Nt.overallStatus!=="failed"&&e.jsx("button",{onClick:()=>{Ut(!1),Ne("Ready to deploy! Navigate to Deploy Console to proceed."),oe(!0)},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00]",children:"Proceed to Deploy"})]})]})})]}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bt,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No project selected"})]})})}function RO(){const{projects:s,activeProject:a,isLoading:n,isCreating:i,setActiveProject:c,loadProjects:d,createProject:u,deleteProject:h}=jr(),[x,f]=p.useState(""),[y,b]=p.useState(!1),[v,N]=p.useState(""),[E,M]=p.useState(""),[L,w]=p.useState(null),[T,A]=p.useState(null),[D,C]=p.useState({isOpen:!1,title:"",message:"",type:"info"}),[S,k]=p.useState(!1),[P,G]=p.useState("project-wizard"),[U,Q]=p.useState(),[Z,ie]=p.useState();p.useEffect(()=>{d()},[d]);const J=s.filter(z=>z.name.toLowerCase().includes(x.toLowerCase())||z.description?.toLowerCase().includes(x.toLowerCase())),te=async()=>{if(!v.trim()){C({isOpen:!0,title:"Validation Error",message:"Project name is required.",type:"error"});return}try{const z=await u(v,E);b(!1),N(""),M(""),C({isOpen:!0,title:"Project Created",message:`Project "${z.name}" has been created successfully!

Project ID: ${z.id}
Path: ${z.file_path}`,type:"success"})}catch(z){C({isOpen:!0,title:"Creation Failed",message:z instanceof Error?z.message:"Failed to create project. Please try again.",type:"error"})}},$=async z=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await h(z),A(null),C({isOpen:!0,title:"Project Deleted",message:"Project has been permanently deleted.",type:"success"})}catch(Y){C({isOpen:!0,title:"Delete Failed",message:Y instanceof Error?Y.message:"Failed to delete project.",type:"error"})}},_=z=>{c(z),C({isOpen:!0,title:"Project Activated",message:`Now working in "${z.name}". All pages will show data for this project.`,type:"success"})};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-panda-surface-dark",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Project Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Create and manage your automation projects"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] transition-colors",children:[e.jsx(bd,{size:20}),"New Project"]})]}),e.jsx("div",{className:"flex gap-4 items-center",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ah,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search projects...",value:x,onChange:z=>f(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent"})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Oa,{className:"w-8 h-8 text-gray-400 animate-spin"})}):J.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:J.map(z=>e.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 p-5 hover:shadow-lg transition-all cursor-pointer relative group ${a?.id===z.id?"border-[#FF6A00] ring-2 ring-[#FF6A00]/20":"border-gray-200"}`,onClick:()=>w(z),children:[e.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2",children:[a?.id===z.id&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-[#FF6A00] text-white rounded-full text-xs font-medium",children:[e.jsx(Jr,{size:12}),"Active"]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Y=>{Y.stopPropagation(),A(T===z.id?null:z.id)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(OT,{size:16,className:"text-gray-600 dark:text-gray-300"})}),T===z.id&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-[150px]",children:[e.jsxs("button",{onClick:Y=>{Y.stopPropagation(),A(null),w(z)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(Hr,{size:14}),"View Details"]}),e.jsxs("button",{onClick:Y=>{Y.stopPropagation(),_(z),A(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-[#FF6A00]",children:[e.jsx(Jr,{size:14}),"Set as Active"]}),e.jsxs("button",{onClick:Y=>{Y.stopPropagation(),$(z.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(Un,{size:14}),"Delete"]})]})]})]}),e.jsx("div",{className:"w-12 h-12 bg-[#FF6A00] bg-opacity-10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Xd,{size:24,className:"text-[#FF6A00]"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 pr-20",children:z.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:z.description||"No description provided"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsx(yl,{size:16,className:"mx-auto text-gray-500 dark:text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-white",children:z.stats?.logicFiles||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Logic"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsx(Yd,{size:16,className:"mx-auto text-gray-500 dark:text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-white",children:z.stats?.tags||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tags"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsx(Qr,{size:16,className:"mx-auto text-gray-500 dark:text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-white",children:z.stats?.versions||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Versions"})]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(jg,{size:12}),new Date(z.created_at).toLocaleDateString()]})})]},z.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(Xd,{size:64,className:"text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No projects found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:x?"Try adjusting your search criteria":"Get started by creating your first project"}),!x&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] transition-colors",children:[e.jsx(bd,{size:20}),"Create New Project"]}),e.jsxs("button",{onClick:()=>{G("empty-project-cta"),Q(void 0),ie(void 0),k(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vi,{size:20}),"Pull from PLC"]})]})]})}),e.jsx(Nr,{children:y&&e.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>!i&&b(!1),children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:z=>z.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(bd,{size:24,className:"text-[#FF6A00]"}),"Create New Project"]}),!i&&e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(pt,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Project Name *"}),e.jsx("input",{type:"text",value:v,onChange:z=>N(z.target.value),placeholder:"e.g., Production Line Control",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent",disabled:i,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),e.jsx("textarea",{value:E,onChange:z=>M(z.target.value),placeholder:"Brief description of the project...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent resize-none",disabled:i})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("button",{onClick:()=>{const z=`temp-${Date.now()}`;G("project-wizard"),Q(z),ie(v||"New Project"),k(!0),b(!1)},disabled:i||!v.trim(),className:"flex items-center gap-2 px-4 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-200 dark:border-blue-800",children:[e.jsx(vi,{size:18}),"Pull from PLC"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>b(!1),disabled:i,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:te,disabled:i||!v.trim(),className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Oa,{size:18,className:"animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bd,{size:18}),"Create Project"]})})]})]})]})})}),e.jsx(Nr,{children:L&&e.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>w(null),children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:z=>z.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-2",children:L.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:L.description||"No description"})]}),e.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(pt,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Project Path"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:L.file_path})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg text-center",children:[e.jsx(yl,{size:24,className:"mx-auto text-blue-600 dark:text-blue-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:L.stats?.logicFiles||0}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Logic Files"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-3 rounded-lg text-center",children:[e.jsx(Yd,{size:24,className:"mx-auto text-green-600 dark:text-green-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:L.stats?.tags||0}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Tags"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 p-3 rounded-lg text-center",children:[e.jsx(Qr,{size:24,className:"mx-auto text-purple-600 dark:text-purple-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:L.stats?.versions||0}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Versions"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Project ID:"}),e.jsx("span",{className:"text-sm font-mono text-gray-800 dark:text-gray-200",children:L.id})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200",children:new Date(L.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Opened:"}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200",children:new Date(L.last_opened).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{_(L),w(null)},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55F00] transition-colors",children:"Set as Active Project"})]})]})})}),e.jsx(yt,{isOpen:D.isOpen,onClose:()=>C({...D,isOpen:!1}),title:D.title,message:D.message,type:D.type}),e.jsx(mk,{isOpen:S,onClose:()=>k(!1),currentUser:{userId:"1",username:"developer",role:"engineer"},projectId:U,projectName:Z,entryPoint:P})]})}function DO({permissions:s,currentUser:a}){const[n,i]=p.useState([]),[c,d]=p.useState([]),[u,h]=p.useState("pending"),[x,f]=p.useState(!0),[y,b]=p.useState(null);p.useEffect(()=>{v()},[]);const v=async()=>{f(!0);try{if(s.canViewPendingApprovals){const T=await AE();i(T)}const w=await TE(a.userId);d(w)}catch(w){console.error("Failed to load approvals:",w)}finally{f(!1)}},N=async w=>{if(!s.canApproveProductionPull){alert("You do not have permission to approve production pulls");return}const T=prompt("Add approval notes (optional):");b(w.id);try{await EE(w.id,{userId:a.userId,username:a.username,role:a.role},T||void 0)?(alert("Approval granted successfully"),await v()):alert("Failed to approve request")}catch{alert("Error approving request")}finally{b(null)}},E=async w=>{if(!s.canApproveProductionPull){alert("You do not have permission to reject production pulls");return}const T=prompt("Reason for rejection (required):");if(!T)return;const A=prompt("Add additional notes (optional):");b(w.id);try{await RE(w.id,{userId:a.userId,username:a.username,role:a.role},T,A||void 0)?(alert("Request rejected"),await v()):alert("Failed to reject request")}catch{alert("Error rejecting request")}finally{b(null)}},M=async w=>{if(confirm("Cancel this approval request?")){b(w);try{await DE(w,a.userId)?(alert("Request cancelled"),await v()):alert("Failed to cancel request")}catch{alert("Error cancelling request")}finally{b(null)}}},L=(w,T)=>e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(Od,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:w.runtime.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.runtime.environment,"  ",w.runtime.ipAddress]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${ME(w.status)}`,children:w.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:w.requestedBy.username})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:w.status==="pending"?`Expires in ${OE(w)}`:new Date(w.requestedAt).toLocaleDateString()})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(As,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:w.reason})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(w.snapshotScope).map(([A,D])=>D&&e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded",children:A.replace(/([A-Z])/g," $1").trim()},A))}),w.approvedBy&&e.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800 rounded text-sm",children:e.jsxs("p",{className:"text-green-900 dark:text-green-100",children:[" Approved by ",w.approvedBy.username," on ",new Date(w.approvedAt).toLocaleString()]})}),w.rejectedBy&&e.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded text-sm",children:e.jsxs("p",{className:"text-red-900 dark:text-red-100",children:[" Rejected by ",w.rejectedBy.username,": ",w.rejectionReason]})}),T&&w.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[s.canApproveProductionPull&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N(w),disabled:y===w.id,className:"flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>E(w),disabled:y===w.id,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors disabled:opacity-50",children:[e.jsx(ga,{className:"w-4 h-4"}),"Reject"]})]}),w.requestedBy.userId===a.userId&&e.jsx("button",{onClick:()=>M(w.id),disabled:y===w.id,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors disabled:opacity-50 ml-auto",children:"Cancel"})]})]})},w.id);return!s.canViewPendingApprovals&&c.length===0?e.jsx(Ye,{className:"p-8",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(bt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Access"}),e.jsx("p",{className:"text-sm mt-2",children:"You don't have permission to view approvals."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Approval Requests"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Review and manage PLC pull approval requests"})]}),e.jsxs("button",{onClick:v,disabled:x,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",children:[e.jsx(Ko,{className:`w-4 h-4 ${x?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[s.canViewPendingApprovals&&e.jsxs("button",{onClick:()=>h("pending"),className:`px-4 py-2 border-b-2 transition-colors ${u==="pending"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-600 dark:text-gray-400"}`,children:["Pending (",n.length,")"]}),e.jsxs("button",{onClick:()=>h("my-requests"),className:`px-4 py-2 border-b-2 transition-colors ${u==="my-requests"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-600 dark:text-gray-400"}`,children:["My Requests (",c.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:x?e.jsx(Ye,{className:"p-8",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(Ko,{className:"w-8 h-8 mx-auto mb-2 animate-spin"}),e.jsx("p",{children:"Loading approvals..."})]})}):e.jsxs(e.Fragment,{children:[u==="pending"&&e.jsx(e.Fragment,{children:n.length===0?e.jsx(Ye,{className:"p-8",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(Fe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Pending Approvals"}),e.jsx("p",{className:"text-sm mt-2",children:"All requests have been processed."})]})}):n.map(w=>L(w,!0))}),u==="my-requests"&&e.jsx(e.Fragment,{children:c.length===0?e.jsx(Ye,{className:"p-8",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(As,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Requests"}),e.jsx("p",{className:"text-sm mt-2",children:"You haven't submitted any approval requests yet."})]})}):c.map(w=>L(w,w.status==="pending"))})]})})]})}function OO({isOpen:s,onClose:a,onConfirm:n,title:i,message:c,confirmLabel:d="Confirm",cancelLabel:u="Cancel",type:h="danger",isLoading:x=!1}){const f=()=>{switch(h){case"danger":return"error";case"warning":return"warning";default:return"info"}};return e.jsx(yt,{isOpen:s,onClose:a,title:i,message:c,type:f(),actions:[{label:u,onClick:a,variant:"secondary"},{label:x?"Processing...":d,onClick:n,variant:"danger"}]})}const _O=[{value:"PLC",label:"PLC"},{value:"SoftPLC",label:"SoftPLC"},{value:"Virtual Runtime",label:"Virtual Runtime"},{value:"Hardware-in-the-loop",label:"Hardware-in-the-loop"}],Tv=[{value:"rockwell",label:"Rockwell Automation (Allen-Bradley)",defaultPort:44818,transport:"EtherNet/IP"},{value:"siemens",label:"Siemens S7",defaultPort:102,transport:"S7 Protocol"},{value:"beckhoff",label:"Beckhoff TwinCAT",defaultPort:851,transport:"ADS/AMS"},{value:"codesys",label:"CODESYS",defaultPort:11740,transport:"CODESYS Protocol"},{value:"mitsubishi",label:"Mitsubishi",defaultPort:5007,transport:"MC Protocol"},{value:"omron",label:"Omron",defaultPort:9600,transport:"FINS"},{value:"schneider",label:"Schneider Electric",defaultPort:502,transport:"Modbus TCP"},{value:"generic-modbus",label:"Generic Modbus TCP",defaultPort:502,transport:"Modbus TCP"}],MO=[{value:"development",label:"Development"},{value:"staging",label:"Staging"},{value:"production",label:"Production"}];function LO({onClose:s,onAdd:a}){const[n,i]=p.useState({name:"",runtimeType:"PLC",ipAddress:"",logicalIdentifier:"",vendorType:"rockwell",port:44818,transport:"EtherNet/IP",environment:"development",isProduction:!1,description:"",username:"",password:"",certificatePath:"",token:""}),[c,d]=p.useState({}),[u,h]=p.useState(!1),[x,f]=p.useState(null),[y,b]=p.useState(null),v=w=>{const T=Tv.find(A=>A.value===w);i(A=>({...A,vendorType:w,port:T?.defaultPort||44818,transport:T?.transport||"TCP/IP"}))},N=w=>{i(T=>({...T,environment:w,isProduction:w==="production"}))},E=w=>w?!!(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(w)||/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(w)||/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::1|::)$/.test(w)):!1,M=()=>{const w={};return n.name.trim()||(w.name="Name is required"),n.runtimeType||(w.runtimeType="Runtime type is required"),n.ipAddress.trim()?E(n.ipAddress)||(w.ipAddress="Invalid IP address or hostname"):w.ipAddress="IP address or hostname is required",(!n.port||n.port<1||n.port>65535)&&(w.port="Port must be between 1 and 65535"),d(w),Object.keys(w).length===0},L=async w=>{if(w.preventDefault(),!!M()){h(!0),f(null),b(null);try{const T=await Ct.getSessionToken();if(!T)throw new Error("No session token available. Please log in.");const A=await fetch("/api/runtimes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({name:n.name,runtimeType:n.runtimeType,vendorType:n.vendorType,ipAddress:n.ipAddress,logicalIdentifier:n.logicalIdentifier||null,port:n.port,transport:n.transport,environment:n.environment,isProduction:n.isProduction,description:n.description,username:n.username||null,password:n.password||null,certificatePath:n.certificatePath||null,token:n.token||null,autoConnect:!1,enableMonitoring:!0,enableTelemetry:!0})});if(!A.ok){const S=await A.json(),k=S.error||S.message||"Failed to add runtime";if(A.status===403){const P=S.required_permission||"edit_logic";throw new Error(`Permission Denied: You need the '${P}' permission to create runtimes. Please contact your administrator.`)}throw new Error(k)}const D=await A.json(),C=D.runtime||D;b(D.message||"Runtime added successfully!"),setTimeout(()=>{a(C)},1500)}catch(T){console.error("Error adding runtime:",T),f(T instanceof Error?T.message:"Failed to add runtime")}finally{h(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Add Runtime Connection"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ga,{className:"w-6 h-6"})})]}),x&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-3",children:[e.jsx(bt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-200",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:x})]}),e.jsx("button",{onClick:()=>f(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-200",children:e.jsx(ga,{className:"w-4 h-4"})})]}),y&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-start gap-3",children:[e.jsx(Fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-200",children:"Success"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:y})]})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:w=>i(T=>({...T,name:w.target.value})),className:`w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:text-white ${c.name?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Production Line 1 PLC"}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Runtime Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:n.runtimeType,onChange:w=>i(T=>({...T,runtimeType:w.target.value})),className:`w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:text-white ${c.runtimeType?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:_O.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),c.runtimeType&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.runtimeType})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Network Address (IP / Hostname) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.ipAddress,onChange:w=>i(T=>({...T,ipAddress:w.target.value})),className:`w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:text-white ${c.ipAddress?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., 192.168.1.100 or plc1.factory.local"}),c.ipAddress&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.ipAddress})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Logical Runtime Identifier (Optional)"}),e.jsx("input",{type:"text",value:n.logicalIdentifier,onChange:w=>i(T=>({...T,logicalIdentifier:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",placeholder:"e.g., PLC-001 or RuntimeInstance-A"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"A unique identifier for this runtime instance (name/instance ID)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Adapter Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:n.vendorType,onChange:w=>v(w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:Tv.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Port ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:n.port,onChange:w=>i(T=>({...T,port:parseInt(w.target.value)||0})),className:`w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:text-white ${c.port?"border-red-500":"border-gray-300 dark:border-gray-600"}`,min:"1",max:"65535"}),c.port&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.port})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transport / Protocol"}),e.jsx("input",{type:"text",value:n.transport,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 bg-gray-50 dark:text-gray-400 text-gray-600 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Automatically selected based on the adapter type"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Environment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:n.environment,onChange:w=>N(w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:MO.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Authentication (Optional)"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"All authentication data (credentials, certificates, tokens) are encrypted before storage using AES-256 encryption"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:n.username,onChange:w=>i(T=>({...T,username:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",placeholder:"PLC username",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:n.password,onChange:w=>i(T=>({...T,password:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",placeholder:"",autoComplete:"new-password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Certificate Path"}),e.jsx("input",{type:"text",value:n.certificatePath,onChange:w=>i(T=>({...T,certificatePath:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",placeholder:"/path/to/certificate.pem"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Path to SSL/TLS certificate for secure connections"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Authentication Token"}),e.jsx("input",{type:"password",value:n.token,onChange:w=>i(T=>({...T,token:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",placeholder:"Bearer token or API key",autoComplete:"off"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"For token-based authentication (JWT, API keys, etc.)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:n.description,onChange:w=>i(T=>({...T,description:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",rows:3,placeholder:"Additional notes about this runtime..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:s,disabled:u,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors disabled:opacity-50 flex items-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"w-4 h-4"}),"Add Runtime"]})})]})]})]})})})}const qm="http://localhost:8000/api",Hm=[{id:"1",name:"Production PLC-01",runtimeType:"PLC",vendorType:"rockwell",ipAddress:"192.168.1.100",port:44818,status:"online",firmwareVersion:"v32.12",runtimeVersion:"Studio 5000 v33.0",lastConnectedAt:new Date(Date.now()-3e5).toISOString(),isProduction:!0,environment:"production",deploymentStatus:"deployed"},{id:"2",name:"Staging PLC-02",runtimeType:"PLC",vendorType:"rockwell",ipAddress:"192.168.1.101",port:44818,status:"disconnected",firmwareVersion:"v32.11",lastConnectedAt:new Date(Date.now()-36e5).toISOString(),isProduction:!1,environment:"staging"},{id:"3",name:"Dev PLC-03",runtimeType:"PLC",vendorType:"siemens",ipAddress:"192.168.1.102",port:102,status:"error",lastConnectedAt:new Date(Date.now()-72e5).toISOString(),isProduction:!1,environment:"development"}];function FO(){const[s,a]=p.useState([]),[n,i]=p.useState(!0),[c,d]=p.useState(null),[u,h]=p.useState({}),[x,f]=p.useState(!1),[y,b]=p.useState(!1),[v,N]=p.useState(Sg),[E,M]=p.useState(!1),[L,w]=p.useState(null),[T,A]=p.useState(!1),[D,C]=p.useState(null),S={userId:"user-123",username:"john.doe",role:"engineer"},k=ck(S.role);p.useEffect(()=>{U(),P()},[]);const P=()=>{const _=uk();N(_)},G=_=>{IE(_)&&(N(_),console.log("Import defaults saved successfully"))},U=async()=>{i(!0);try{const _=await Ct.getSessionToken();if(!_){console.warn("No session token, using mock runtime data"),a(Hm);return}const z=await fetch(`${qm}/runtimes`,{headers:{Authorization:`Bearer ${_}`}});if(z.ok){const Y=await z.json();a(Y.runtimes||[]),console.log(" Loaded",Y.runtimes?.length||0,"runtimes from API")}else console.warn("Failed to load runtimes, using mock data"),a(Hm)}catch(_){console.error("Failed to load runtimes:",_),a(Hm)}finally{i(!1)}},Q=async _=>{d(_);try{const z=await Ct.getSessionToken();if(!z){console.error("No session token available");return}const Y=await fetch(`${qm}/runtimes/${_}/test-connection`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`}});if(Y.ok){const se=await Y.json();h(O=>({...O,[_]:se})),se.success?a(O=>O.map(K=>K.id===_?{...K,status:"online"}:K)):a(O=>O.map(K=>K.id===_?{...K,status:"error"}:K))}else console.error("Connection test failed:",await Y.text()),alert("Connection test failed. Check console for details.")}catch(z){console.error("Connection test error:",z),alert("Connection test failed. Is the backend running?")}finally{d(null)}},Z=async()=>{if(L){A(!0);try{const _=await Ct.getSessionToken(),z=await fetch(`${qm}/runtimes/${L.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(z.ok){const Y=await z.json();a(se=>se.filter(O=>O.id!==L.id)),C({type:"success",message:`Runtime "${L.name}" deleted successfully`}),console.log(" Runtime deleted:",Y)}else{const Y=await z.json().catch(()=>({error:"Unknown error"}));C({type:"error",message:Y.error||"Failed to delete runtime"}),console.error(" Delete failed:",Y)}}catch(_){console.error(" Delete runtime error:",_),C({type:"error",message:_ instanceof Error?_.message:"Failed to delete runtime. Check connection."})}finally{A(!1),w(null)}}},ie=_=>{switch(_){case"online":return e.jsx(Fe,{className:"w-4 h-4 text-green-500"});case"disconnected":return e.jsx(ga,{className:"w-4 h-4 text-gray-400"});case"connecting":return e.jsx(qs,{className:"w-4 h-4 text-blue-500 animate-spin"});case"unsupported":return e.jsx(bt,{className:"w-4 h-4 text-orange-500"});case"error":return e.jsx(bt,{className:"w-4 h-4 text-red-500"});case"faulted":return e.jsx(ga,{className:"w-4 h-4 text-red-600"});case"stopped":return e.jsx(pi,{className:"w-4 h-4 text-gray-500"});case"maintenance":return e.jsx(pi,{className:"w-4 h-4 text-yellow-500"})}},J=_=>{switch(_){case"online":return"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800";case"disconnected":return"bg-gray-50 dark:bg-gray-800/20 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700";case"connecting":return"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800";case"unsupported":return"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800";case"error":return"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800";case"faulted":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700";case"stopped":return"bg-gray-100 dark:bg-gray-800/30 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600";case"maintenance":return"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800"}},te=_=>e.jsx(Rd,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),$=_=>{if(!_)return"Never";const z=new Date(_),se=new Date().getTime()-z.getTime(),O=Math.floor(se/6e4),K=Math.floor(se/36e5),ue=Math.floor(se/864e5);return O<1?"Just now":O<60?`${O}m ago`:K<24?`${K}h ago`:`${ue}d ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"PLC / Runtimes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage PLC runtime connections and test connectivity"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(k.canViewPendingApprovals||k.canApproveProductionPull)&&e.jsxs("button",{onClick:()=>b(!y),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(qe,{className:"w-4 h-4"}),y?"Hide Approvals":"Show Approvals"]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-md hover:bg-[#FF6A00]/90 transition-colors",children:[e.jsx(ir,{className:"w-4 h-4"}),"Add Runtime"]})]})]}),y&&e.jsx(DO,{permissions:k,currentUser:S}),e.jsxs(Ye,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Ps,{children:"Import Defaults"}),e.jsx("button",{onClick:()=>M(!E),className:"text-sm text-[#FF6A00] hover:text-[#FF6A00]/80 transition-colors",children:E?"Hide":"Configure"})]}),E&&e.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Snapshot Scope Defaults"}),e.jsx("div",{className:"space-y-2",children:Object.entries({includePrograms:"Programs",includeTags:"Tags",includeDataTypes:"Data Types (UDTs)",includeRoutines:"Routines",includeAOIs:"Add-On Instructions (AOIs)"}).map(([_,z])=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.snapshotScope[_],onChange:Y=>G({...v,snapshotScope:{...v.snapshotScope,[_]:Y.target.checked}}),className:"w-4 h-4 text-[#FF6A00] rounded focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:z})]},_))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Conflict Resolution Strategy"}),e.jsxs("select",{value:v.conflictResolution,onChange:_=>G({...v,conflictResolution:_.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{value:"ask",children:"Ask me each time (recommended)"}),e.jsx("option",{value:"keep-existing",children:"Always keep existing values"}),e.jsx("option",{value:"use-incoming",children:"Always use incoming values"}),e.jsx("option",{value:"merge",children:"Attempt intelligent merge"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How to handle conflicts when pulling from PLC"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Warning Behavior"}),e.jsxs("select",{value:v.warningBehavior,onChange:_=>G({...v,warningBehavior:_.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{value:"show-all",children:"Show all warnings"}),e.jsx("option",{value:"show-critical",children:"Show only critical warnings"}),e.jsx("option",{value:"silent",children:"Silent mode (no warnings)"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Control warning notifications during import"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Shadow Runtime"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.autoShadowRuntime,onChange:_=>G({...v,autoShadowRuntime:_.target.checked}),className:"w-4 h-4 text-[#FF6A00] rounded focus:ring-[#FF6A00]"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto-create Shadow Runtime"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically create a shadow runtime mirror when pulling from PLC"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:()=>{G(Sg),alert("Import defaults reset to factory settings")},className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Reset to Defaults"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Rd,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Runtimes"})]})]})}),e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Fe,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(_=>_.status==="online").length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Online"})]})]})}),e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(bt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(_=>_.status==="error").length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Errors"})]})]})}),e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(pi,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.filter(_=>_.isProduction).length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Production"})]})]})})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Runtime Connections"}),e.jsx("button",{onClick:U,disabled:n,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors disabled:opacity-50",title:"Refresh",children:e.jsx(Ko,{className:`w-4 h-4 ${n?"animate-spin":""}`})})]})}),n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(qs,{className:"w-8 h-8 text-[#FF6A00] animate-spin"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rd,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No runtime connections"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Add a PLC runtime connection to get started"})]}):e.jsx("div",{className:"space-y-3",children:s.map(_=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"mt-1",children:te(_.vendorType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:_.name}),e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium border ${J(_.status)}`,children:[ie(_.status),e.jsx("span",{className:"capitalize",children:_.status})]}),_.isProduction&&e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 text-xs font-medium rounded-full border border-purple-200 dark:border-purple-800",children:"Production"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/30 rounded-md p-3 mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Runtime Capabilities"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Runtime ID:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:_.id.slice(0,8)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:_.runtimeType||"PLC"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Firmware:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:_.firmwareVersion||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Runtime Version:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:_.runtimeVersion||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Operational State:"}),e.jsx("span",{className:`font-medium ${_.status==="online"?"text-green-600 dark:text-green-400":_.status==="stopped"?"text-gray-600 dark:text-gray-400":_.status==="faulted"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`,children:_.status==="online"?"Online":_.status==="stopped"?"Stopped":_.status==="faulted"?"Faulted":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Transport:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:_.transport||"N/A"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Vendor:"}),e.jsx("span",{className:"capitalize",children:_.vendorType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Network:"}),e.jsxs("span",{className:"font-mono",children:[_.ipAddress,":",_.port]})]}),_.logicalIdentifier&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Logical ID:"}),e.jsx("span",{className:"font-mono",children:_.logicalIdentifier})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Environment:"}),e.jsx("span",{className:"capitalize",children:_.environment})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Last Connected:"}),e.jsx("span",{children:$(_.lastConnectedAt)})]})]}),u[_.id]&&e.jsxs("div",{className:"mt-3 p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-800/30 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u[_.id].success?e.jsx(Fe,{className:"w-5 h-5 text-green-500"}):e.jsx(ga,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:["Diagnostics - ",u[_.id].success?"Connection Verified":"Connection Failed"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900/40 rounded p-2 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Latency"}),e.jsxs("div",{className:`text-lg font-bold ${u[_.id].diagnostics.total_duration_ms<100?"text-green-600 dark:text-green-400":u[_.id].diagnostics.total_duration_ms<500?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[u[_.id].diagnostics.total_duration_ms,"ms"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:u[_.id].diagnostics.total_duration_ms<100?"Excellent":u[_.id].diagnostics.total_duration_ms<500?"Good":"High"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/40 rounded p-2 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Permissions"}),e.jsx("div",{className:`text-sm font-semibold ${u[_.id].diagnostics.read_only_verified?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:u[_.id].diagnostics.read_only_verified?" Read Access":" No Access"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:u[_.id].diagnostics.read_only_verified?"Verified":"Check Credentials"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900/40 rounded p-2 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Read Capability"}),e.jsx("div",{className:`text-sm font-semibold ${u[_.id].diagnostics.overall_status==="operational"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:u[_.id].diagnostics.overall_status==="operational"?" Confirmed":" Limited"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 capitalize",children:u[_.id].diagnostics.overall_status})]})]}),e.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-600 pt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Connection Test Phases"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(u[_.id].diagnostics.phases).map(([z,Y])=>e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.status==="passed"?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-300 dark:border-green-800":Y.status==="warning"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 border border-yellow-300 dark:border-yellow-800":"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-300 dark:border-red-800"}`,title:`${Y.name}: ${Y.duration_ms}ms - ${Y.message||"OK"}`,children:[Y.status==="passed"?"":Y.status==="warning"?"":""," ",Y.name]},z))})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Q(_.id),disabled:c===_.id,className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Test Connection",children:c===_.id?e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jr,{className:"w-4 h-4"}),"Test"]})}),e.jsx("button",{className:"p-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",title:"Delete Runtime",onClick:()=>w(_),children:e.jsx(Un,{className:"w-4 h-4"})})]})]})},_.id))})]}),x&&e.jsx(LO,{onClose:()=>f(!1),onAdd:async _=>{a(z=>[...z,_]),f(!1)}}),e.jsx(OO,{isOpen:L!==null,onClose:()=>w(null),onConfirm:Z,title:"Delete Runtime",message:`Are you sure you want to delete runtime "${L?.name}"? This action cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",type:"danger",isLoading:T}),e.jsx(yt,{isOpen:D!==null,onClose:()=>C(null),title:D?.type==="success"?"Success":"Error",message:D?.message||"",type:D?.type==="success"?"success":"error",actions:[{label:"OK",onClick:()=>C(null),variant:"primary"}]})]})}function Ev(){const{theme:s,actualTheme:a,setTheme:n,accentColor:i,setAccentColor:c,checkContrast:d}=Sh(),[u,h]=p.useState("general"),[x,f]=p.useState(!1),[y,b]=p.useState("simulation"),[v,N]=p.useState("~/Pandaura/Projects"),[E,M]=p.useState(!0),[L,w]=p.useState(!0),T=d("#FFFFFF",i),A=d("#000000",i),D=T.ratio<2,C=T.ratio<3&&!D,S=D||C,k=A.ratio>T.ratio,[P,G]=p.useState(!1),[U,Q]=p.useState("localhost:3001"),[Z,ie]=p.useState({websocket:!0,mqtt:!1,csv:!0}),[J,te]=p.useState({broker:"mqtt://localhost:1883",username:"",password:"",clientId:"pandaura-bridge"}),[$,_]=p.useState({outputDir:"./data/exports",interval:1e3,includeTimestamp:!0}),z=[{id:"general",label:"General",icon:e.jsx(Zt,{size:18})},{id:"runtimes",label:"PLC / Runtimes",icon:e.jsx(Rd,{size:18})},{id:"data-bridge",label:"Data Bridge",icon:e.jsx(wg,{size:18})}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Settings"}),e.jsx("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:z.map(Y=>e.jsxs("button",{onClick:()=>h(Y.id),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${u===Y.id?"border-[var(--accent-color)] text-[var(--accent-color)]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[Y.icon,e.jsx("span",{className:"font-medium",children:Y.label})]},Y.id))})]}),u==="runtimes"&&e.jsx(FO,{}),u==="general"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:"Theme"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:["Current: ",s," ",s==="system"&&`(${a})`]}),e.jsxs("select",{value:s,onChange:Y=>n(Y.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:s==="system"?"Theme follows your system preference":`Using ${s} theme`})]})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsxs("button",{onClick:()=>f(!x),className:"w-full flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-md border-2 border-gray-200 dark:border-gray-600 shadow-sm",style:{backgroundColor:i}}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(A5,{className:"w-4 h-4"}),"Accent Color"]}),e.jsxs("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-mono",children:i.toUpperCase()}),S&&e.jsxs("span",{className:`ml-2 ${D?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:[" ",D?"Too Light":"Light Color"]}),!x&&e.jsx("span",{className:"ml-2 text-[var(--accent-color)] group-hover:underline",children:" Click to customize"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:x?e.jsx(wi,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"}):e.jsx(bi,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})})]}),x&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:i,onChange:Y=>c(Y.target.value),className:"w-10 h-10 p-0 border border-gray-300 dark:border-gray-600 rounded cursor-pointer","aria-label":"Accent Color Picker"}),e.jsx("input",{type:"text",value:i.toUpperCase(),onChange:Y=>{const se=Y.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(se)&&c(se)},className:"w-20 px-2 py-1 text-xs font-mono border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-[var(--accent-color)]",placeholder:"#FF6A00"}),e.jsx("button",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:i,color:k?"#000000":"#FFFFFF"},children:"Preview"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-neutral-500 dark:text-gray-400",children:"White text contrast:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono",children:[T.ratio.toFixed(2),":1"]}),S?D?e.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",children:[e.jsx(jt,{className:"w-3 h-3"}),"Too Light!"]}):e.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",children:[e.jsx(jt,{className:"w-3 h-3"}),"Light"]}):e.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:[e.jsx(Ho,{className:"w-3 h-3"}),"Good"]})]})]}),D&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-red-800 dark:text-red-200",children:" Color is Too Light!"}),e.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:"This color is too light for the sidebar and buttons. White text will be unreadable. Please choose a slightly darker shade."}),T.suggestedColor&&e.jsxs("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-red-200 dark:border-red-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-red-300 dark:border-red-600",style:{backgroundColor:T.suggestedColor}}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-bold text-red-800 dark:text-red-200",children:"Slightly Darker"}),e.jsx("div",{className:"font-mono text-red-600 dark:text-red-400",children:T.suggestedColor.toUpperCase()})]})]}),e.jsx("button",{onClick:()=>c(T.suggestedColor),className:"px-4 py-2 text-sm font-medium bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Use This"})]})]})]})}),C&&e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Light Color Notice"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:"This is a light color. White text may be slightly hard to read. Consider a slightly darker shade."}),T.suggestedColor&&e.jsxs("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-amber-200 dark:border-amber-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 dark:border-gray-600",style:{backgroundColor:T.suggestedColor}}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Suggested"}),e.jsx("div",{className:"font-mono text-amber-600 dark:text-amber-400",children:T.suggestedColor.toUpperCase()})]})]}),e.jsx("button",{onClick:()=>c(T.suggestedColor),className:"px-3 py-1.5 text-xs font-medium bg-amber-600 text-white rounded-md hover:bg-amber-700 transition-colors",children:"Use This Color"})]})]})]})}),!S&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded text-xs",children:[e.jsx(Ho,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Good contrast! White text is readable on this color."})]})]}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:"The accent color is applied to sidebar, primary buttons, links, toggles, selected items, and focus states."})]})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:"Runtime Mode"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",value:"simulation",checked:y==="simulation",onChange:Y=>b(Y.target.value),className:"w-4 h-4 text-[var(--accent-color)] focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Simulation"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",value:"live",checked:y==="live",onChange:Y=>b(Y.target.value),className:"w-4 h-4 text-[var(--accent-color)] focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Live"})]})]}),e.jsx("div",{className:"text-xs text-neutral-500 dark:text-gray-400",children:y==="simulation"?"Using simulated PLC data":"Connected to live PLC"})]})]}),e.jsxs(Ye,{className:"md:col-span-2 p-4",children:[e.jsx(Ps,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4"}),"Data Bridge Configuration"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:Y=>G(Y.target.checked),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-sm font-medium",children:"Enable Data Bridge Service"})]})}),P&&e.jsxs("div",{className:"space-y-4 pt-2 border-t border-neutral-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-gray-300 mb-1",children:"Data Bridge Host"}),e.jsx("input",{type:"text",value:U,onChange:Y=>Q(Y.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]",placeholder:"localhost:3001"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"Enabled Adapters"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.websocket,onChange:Y=>ie(se=>({...se,websocket:Y.target.checked})),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx(wg,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"WebSocket (Real-time)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.mqtt,onChange:Y=>ie(se=>({...se,mqtt:Y.target.checked})),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx(v5,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"MQTT Broker"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Z.csv,onChange:Y=>ie(se=>({...se,csv:Y.target.checked})),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx(As,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"CSV Export"})]})]})]}),Z.mqtt&&e.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-800 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"MQTT Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Broker URL"}),e.jsx("input",{type:"text",value:J.broker,onChange:Y=>te(se=>({...se,broker:Y.target.value})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]",placeholder:"mqtt://localhost:1883"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Client ID"}),e.jsx("input",{type:"text",value:J.clientId,onChange:Y=>te(se=>({...se,clientId:Y.target.value})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]",placeholder:"pandaura-bridge"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Username (Optional)"}),e.jsx("input",{type:"text",value:J.username,onChange:Y=>te(se=>({...se,username:Y.target.value})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-[var(--accent-color)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Password (Optional)"}),e.jsx("input",{type:"password",value:J.password,onChange:Y=>te(se=>({...se,password:Y.target.value})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-[var(--accent-color)]"})]})]})]}),Z.csv&&e.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-800 p-3 rounded-md",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-700 dark:text-gray-300 mb-2",children:"CSV Export Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Output Directory"}),e.jsx("input",{type:"text",value:$.outputDir,onChange:Y=>_(se=>({...se,outputDir:Y.target.value})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]",placeholder:"./data/exports"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-neutral-600 dark:text-gray-400 mb-1",children:"Export Interval (ms)"}),e.jsx("input",{type:"number",min:"100",max:"60000",value:$.interval,onChange:Y=>_(se=>({...se,interval:Number(Y.target.value)})),className:"w-full px-2 py-1 text-sm border border-neutral-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-[var(--accent-color)]"})]}),e.jsx("div",{className:"flex items-center pt-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.includeTimestamp,onChange:Y=>_(se=>({...se,includeTimestamp:Y.target.checked})),className:"w-3 h-3 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-xs",children:"Include Timestamps"})]})})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{console.log("Testing Data Bridge connection...",{dataBridgeHost:U,enabledAdapters:Z}),alert("Connection test started - check logs for results")},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Test Connection"}),e.jsx("button",{onClick:()=>{console.log("Saving Data Bridge settings...",{dataBridgeHost:U,enabledAdapters:Z,mqttSettings:J,csvSettings:$}),alert("Data Bridge settings saved successfully")},className:"px-3 py-1 text-sm text-white rounded transition-colors bg-[#FF6A00] hover:bg-[#E55A00]",children:"Save Settings"})]})]})]})]}),e.jsxs(Ye,{className:"md:col-span-2 p-4",children:[e.jsx(Ps,{children:"Local Storage Path"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:v,onChange:Y=>N(Y.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]"}),e.jsx("button",{className:"px-4 py-2 text-sm bg-neutral-100 dark:bg-gray-700 text-neutral-700 dark:text-gray-300 rounded-md hover:bg-neutral-200 dark:hover:bg-gray-600 transition-colors",children:"Browse..."})]})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:"Auto Save"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:Y=>M(Y.target.checked),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Enable auto-save (every 5 minutes)"})]})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:"Notifications"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:Y=>w(Y.target.checked),className:"w-4 h-4 text-[var(--accent-color)] rounded focus:ring-[var(--accent-color)]"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Show deployment notifications"})]})]}),e.jsxs(Ye,{className:"p-4",children:[e.jsx(Ps,{children:"About"}),e.jsxs("div",{className:"space-y-2 text-sm text-neutral-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Version:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"2.1.5"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Build:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"20241101"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"License:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enterprise"})]})]})]}),e.jsx("div",{})]}),u==="data-bridge"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Ye,{className:"md:col-span-2 p-4",children:[e.jsx(Ps,{children:"Data Bridge Configuration"}),e.jsx("div",{className:"space-y-4 text-sm",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsx("p",{className:"text-blue-900 dark:text-blue-100",children:"The Data Bridge has been moved to its own tab. All existing settings have been preserved."})})})]})})]})}function Pk({isOpen:s,onClose:a,onBack:n}){const[i,c]=p.useState("checking"),[d,u]=p.useState("license"),[h,x]=p.useState(""),[f,y]=p.useState(""),[b,v]=p.useState(""),[N,E]=p.useState(5),[M,L]=p.useState(""),[w,T]=p.useState(""),[A,D]=p.useState(!1),[C,S]=p.useState(null),[k,P]=p.useState(null),[G,U]=p.useState({deploymentApproval:!0,configChangeApproval:!0,twoPersonRule:!0,restrictCriticalDeploys:!0}),[Q,Z]=p.useState({defaultRole:"developer",adminCanOverride:!0,inheritPermissions:!0,roleHierarchy:["admin","lead","developer","operator","viewer"]}),[ie,J]=p.useState({enableLocalAuth:!0,allowExternalAuth:!1,auditUserActions:!0}),te=async()=>{if(!h||!f||!b||!N){S("All fields are required");return}D(!0),S(null);try{const K=await(await fetch("/api/license/teams/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:h,orgName:f,adminEmail:b,maxSeats:N,approvalPolicies:G,rbacDefaults:Q,orgIdentity:ie})})).json();K.success?u("complete"):S(K.error)}catch{S("Failed to setup Teams license")}finally{D(!1)}},$=async()=>{if(!h||!M||!w){S("All fields are required");return}D(!0),S(null);try{const O=await(await fetch("/api/license/teams/claim-seat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:h,userEmail:M,deviceName:w})})).json();O.success?u("complete"):S(O.error)}catch{S("Failed to claim Teams seat")}finally{D(!1)}};p.useEffect(()=>{if(!w){const se=window.location.hostname||"Unknown",O=navigator.userAgent,K=O.includes("Windows")?"Windows":O.includes("Mac")?"Mac":O.includes("Linux")?"Linux":"Unknown";T(`${K}-${se}-${Date.now().toString().slice(-4)}`)}},[]);const _=se=>se.replace(/\D/g,"").substring(0,16).replace(/(\d{4})(?=\d)/g,"$1-"),z=se=>{const O=_(se.target.value);x(O)};p.useEffect(()=>{s&&(c("setup"),u("license"),S(null))},[s]),p.useEffect(()=>{h.length>=19&&Y()},[h]);const Y=async()=>{if(!(!h||h.length<19)){D(!0),S(null);try{const O=await(await fetch("/api/license/teams/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:h})})).json();O.success?(P(O),O.exists&&!O.needsSetup?c("claim"):c("setup")):(S(O.error),c("setup"))}catch{S("Failed to check license status"),c("setup")}finally{D(!1)}}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ws,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Teams License"}),e.jsxs("p",{className:"text-green-100 text-sm mt-1",children:[A&&h.length>=20&&"Checking license status...",i==="setup"&&d==="license"&&!A&&"Enter your Teams license key",i==="setup"&&d==="setup"&&"Setup your organization",i==="claim"&&"Claim your seat",d==="complete"&&"Activation complete!"]})]})]})}),e.jsxs("div",{className:"p-8",children:[A&&h.length>=20&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qs,{className:"animate-spin mx-auto mb-4 text-green-600",size:48}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Checking license status..."})]}),i==="setup"&&d==="license"&&!A&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Gr,{className:"text-green-600 dark:text-green-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"New Teams License Setup"}),e.jsx("p",{children:"Enter your Teams license key to begin the setup process."})]})]})}),C&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error"}),e.jsx("p",{children:C})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx(Wr,{size:18,className:"inline mr-2 text-green-600"}),"Teams License Key"]}),e.jsx("input",{type:"text",value:h,onChange:z,placeholder:"1111-1111-1111-1111",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500 font-mono text-lg",disabled:A})]})]}),i==="setup"&&d==="setup"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(gl,{className:"text-blue-600 dark:text-blue-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Organization Setup"}),e.jsx("p",{children:"Configure your organization details for the Teams license."})]})]})}),C&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200",children:e.jsx("p",{children:C})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Organization Name"}),e.jsx("input",{type:"text",value:f,onChange:se=>y(se.target.value),placeholder:"Your Company",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Seats"}),e.jsxs("select",{value:N,onChange:se=>E(Number(se.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:5,children:"5 Seats"}),e.jsx("option",{value:10,children:"10 Seats"}),e.jsx("option",{value:25,children:"25 Seats"}),e.jsx("option",{value:50,children:"50 Seats"}),e.jsx("option",{value:100,children:"100 Seats"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Xo,{size:18,className:"inline mr-2 text-green-600"}),"Admin Email"]}),e.jsx("input",{type:"email",value:b,onChange:se=>v(se.target.value),placeholder:"admin@company.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(Zt,{className:"mr-2 text-blue-600",size:20}),"Approval Policies"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.deploymentApproval,onChange:se=>U(O=>({...O,deploymentApproval:se.target.checked})),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Require deployment approval"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.configChangeApproval,onChange:se=>U(O=>({...O,configChangeApproval:se.target.checked})),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Config change approval"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.twoPersonRule,onChange:se=>U(O=>({...O,twoPersonRule:se.target.checked})),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Two-person approval rule"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.restrictCriticalDeploys,onChange:se=>U(O=>({...O,restrictCriticalDeploys:se.target.checked})),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Restrict critical deployments"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(Ws,{className:"mr-2 text-purple-600",size:20}),"RBAC Defaults"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Role"}),e.jsxs("select",{value:Q.defaultRole,onChange:se=>Z(O=>({...O,defaultRole:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"viewer",children:"Viewer"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"developer",children:"Developer"}),e.jsx("option",{value:"lead",children:"Lead"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:Q.adminCanOverride,onChange:se=>Z(O=>({...O,adminCanOverride:se.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Admin can override"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:Q.inheritPermissions,onChange:se=>Z(O=>({...O,inheritPermissions:se.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Inherit permissions"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(Wr,{className:"mr-2 text-orange-600",size:20}),"Organization Identity Store"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ie.enableLocalAuth,onChange:se=>J(O=>({...O,enableLocalAuth:se.target.checked})),className:"w-4 h-4 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable local authentication"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ie.allowExternalAuth,onChange:se=>J(O=>({...O,allowExternalAuth:se.target.checked})),className:"w-4 h-4 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Allow external auth"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ie.auditUserActions,onChange:se=>J(O=>({...O,auditUserActions:se.target.checked})),className:"w-4 h-4 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Audit user actions"})]})})]})]})]}),i==="claim"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ws,{className:"text-green-600 dark:text-green-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Claim Your Seat"}),e.jsxs("p",{children:["Available seats: ",k?.availableSeats||0]})]})]})}),C&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200",children:e.jsx("p",{children:C})})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Xo,{size:18,className:"inline mr-2 text-green-600"}),"Your Email"]}),e.jsx("input",{type:"email",value:M,onChange:se=>L(se.target.value),placeholder:"your.email@company.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Device Name"}),e.jsx("input",{type:"text",value:w,onChange:se=>T(se.target.value),placeholder:"My-Workstation",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]})]}),d==="complete"&&e.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-8",children:[e.jsx(Fe,{size:64,className:"text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Teams License Activated!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Teams license is now active and ready to use."})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-8 py-6 rounded-b-lg flex justify-between items-center",children:[e.jsx("button",{onClick:d==="complete"?a||(()=>{}):d==="setup"&&i==="setup"?()=>u("license"):n,disabled:A,className:"px-5 py-2.5 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors disabled:opacity-50 font-medium",children:d==="complete"?"Close":d==="setup"&&i==="setup"?"Back":"Back to Types"}),i==="setup"&&d==="license"&&e.jsx("button",{onClick:()=>{h.length>=19?u("setup"):S("Please enter a complete license key")},disabled:!h||h.length<19||A,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:bg-gray-400 text-white rounded-lg font-semibold disabled:cursor-not-allowed",children:"Next"}),i==="setup"&&d==="setup"&&e.jsxs("button",{onClick:te,disabled:!f||!b||A,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:bg-gray-400 text-white rounded-lg flex items-center space-x-2 font-semibold disabled:cursor-not-allowed",children:[A&&e.jsx(qs,{className:"animate-spin",size:18}),e.jsx("span",{children:A?"Setting Up...":"Setup License"})]}),i==="claim"&&e.jsxs("button",{onClick:$,disabled:!M||!w||A,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:bg-gray-400 text-white rounded-lg flex items-center space-x-2 font-semibold disabled:cursor-not-allowed",children:[A&&e.jsx(qs,{className:"animate-spin",size:18}),e.jsx("span",{children:A?"Claiming...":"Claim Seat"})]}),d==="complete"&&e.jsx("button",{onClick:()=>{a&&a()},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-semibold",children:"Continue to App"})]})]})}):null}function PO({isOpen:s,onSelectOption:a,isFirstDevice:n}){const[i,c]=p.useState("register"),d=()=>{a(i)};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[1000] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(qe,{size:32}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Enterprise License Setup"}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"First-time device registration"})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-5 transition-all ${i==="register"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"radio",name:"enterpriseOption",value:"register",checked:i==="register",onChange:u=>c(u.target.value),className:"mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(cE,{size:20,className:"text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Register This Device to Enterprise License"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"For regular employees/engineers whose company is already set up"})]})]})})}),n&&e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-5 transition-all ${i==="provision-admin"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"radio",name:"enterpriseOption",value:"provision-admin",checked:i==="provision-admin",onChange:u=>c(u.target.value),className:"mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ik,{size:20,className:"text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Provision Admin Device"}),e.jsx("span",{className:"text-xs font-semibold bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 px-2 py-1 rounded",children:"FIRST DEVICE ONLY"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"For IT/Lead Engineer/Admin setting up the organization"})]})]})})}),e.jsx("label",{className:"block cursor-pointer",children:e.jsx("div",{className:`border-2 rounded-lg p-5 transition-all ${i==="team-member"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"radio",name:"enterpriseOption",value:"team-member",checked:i==="team-member",onChange:u=>c(u.target.value),className:"mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ws,{size:20,className:"text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Add as Team Member"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"For users with assigned seats who are not admins"})]})]})})})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:d,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg text-base font-medium hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg flex items-center gap-2",children:["Continue",e.jsx(aT,{size:18})]})})]})]})}):null}function zk({isOpen:s,onClose:a,onBack:n,onAdminSetupComplete:i}){const[c,d]=p.useState("first-run"),[u,h]=p.useState("selection"),[x,f]=p.useState(null),[y,b]=p.useState(!0),[v,N]=p.useState(""),[E,M]=p.useState(""),[L,w]=p.useState(""),[T]=p.useState(10),[A,D]=p.useState(""),[C,S]=p.useState(""),[k,P]=p.useState(!1),[G,U]=p.useState(null),[,Q]=p.useState(null),[Z,ie]=p.useState(!1),[J,te]=p.useState({requireApproval:!0,multiDeviceCerts:!0,auditEnabled:!0,rbacEnforcement:"strict",sessionTimeout:480,maxFailedAttempts:3,deployGovernance:"require_approval",remoteAdminControls:!0,certificateValidityDays:365,forcePasswordPolicy:!0,enableAuditChain:!0,restrictLocalChanges:!0}),[$,_]=p.useState({defaultRole:"developer",adminRoles:["admin"],approverRoles:["admin","lead"],deployRoles:["admin","lead","developer"],viewerRoles:["viewer"],inheritFromActiveDirectory:!1,customRoles:[]}),[z,Y]=p.useState({deploymentApproval:{enabled:!0,requiredApprovers:2,approverRoles:["admin","lead"],autoApproveOwn:!1},configurationApproval:{enabled:!0,requiredApprovers:1,approverRoles:["admin"],autoApproveOwn:!1},userManagementApproval:{enabled:!0,requiredApprovers:1,approverRoles:["admin"],autoApproveOwn:!1},emergencyBypass:{enabled:!0,bypassRoles:["admin"],requireJustification:!0}}),[se,O]=p.useState({type:"local",localUsers:[],ldapConfig:{server:"",baseDN:"",bindUser:"",bindPassword:"",userSearchFilter:"",groupSearchFilter:""},syncEnabled:!1,syncInterval:60}),[K,ue]=p.useState({enforceDeviceEncryption:!0,deviceCompliance:!0}),[oe,Ee]=p.useState([{id:1,name:"Senior Admins",members:[],minApprovals:1,canApprove:["deploy","config","user_management"],isActive:!0},{id:2,name:"Deploy Managers",members:[],minApprovals:2,canApprove:["deploy"],isActive:!1}]),[we,Oe]=p.useState({requireTestingEnvironment:!0,mandatoryReviewPeriod:24,allowEmergencyDeploys:!0,requireChangeTicket:!0,restrictProductionDeploys:!0,maxSimultaneousDeploys:3,requireRollbackPlan:!0,approvalWorkflow:"sequential",autoRevertOnFailure:!0,deploymentWindows:[]}),{checkLicenseStatus:Ne}=ma(),Ge=ye=>ye.replace(/\D/g,"").substring(0,16).replace(/(\d{4})(?=\d)/g,"$1-"),At=ye=>{const H=Ge(ye.target.value);N(H)};p.useEffect(()=>{if(!C){const ye=window.location.hostname||"Unknown",H=navigator.userAgent,Ae=H.includes("Windows")?"Windows":H.includes("Mac")?"Mac":H.includes("Linux")?"Linux":"Unknown";S(`${Ae}-${ye}-${Date.now().toString().slice(-4)}`)}},[]),p.useEffect(()=>{s&&(async()=>{try{const Ae=await(await fetch("/api/license/enterprise/check-first-device",{method:"GET",headers:{"Content-Type":"application/json"}})).json();ie(Ae.isFirstDevice)}catch(H){console.error("Error checking first device:",H)}})()},[s]);const Pt=ye=>{console.log(" handleFirstRunOption called with:",ye),f(ye),b(!1),ye==="provision-admin"?(d("provision"),h("license")):(ye==="register"||ye==="team-member")&&(d("register"),h("license")),console.log(" deviceRole set to:",ye)},Qt=async()=>{if(console.log(" setupEnterpriseLicense called",{deviceRole:x,licenseKey:v,userEmail:A}),!v||!A){U("License key and email are required");return}P(!0),U(null);try{const ye=x==="provision-admin"?"/api/license/enterprise/provision-admin":"/api/license/enterprise/register-device";console.log(" Calling endpoint:",ye);const Ae=await(await fetch(ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:v,userEmail:A,deviceName:C,...x==="provision-admin"&&{orgName:E,adminEmail:L,maxSeats:T}})})).json();console.log(" Response:",Ae),Ae.success?(h(x==="provision-admin"?"admin-security":"complete"),await Ne()):U(Ae.error||"Failed to activate license")}catch(ye){console.error(" Error:",ye),U(ye.message||"Failed to setup Enterprise license")}finally{P(!1)}},Vt=async()=>{if(console.log(" claimEnterpriseSeat called",{licenseKey:v,userEmail:A}),!v||!A){U("License key and email are required");return}P(!0),U(null);try{console.log(" Calling /api/license/enterprise/claim-seat");const H=await(await fetch("/api/license/enterprise/claim-seat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:v,userEmail:A,deviceName:C})})).json();console.log(" Response:",H),H.success?(h("complete"),await Ne()):U(H.error||"Failed to claim seat")}catch(ye){console.error(" Error:",ye),U(ye.message||"Failed to claim Enterprise seat")}finally{P(!1)}};return s?e.jsxs(e.Fragment,{children:[y&&e.jsx(PO,{isOpen:y,onSelectOption:Pt,isFirstDevice:Z}),!y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-8 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(qe,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Enterprise License"}),e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[x==="provision-admin"&&"Provision Admin Device",x==="register"&&"Register This Device",x==="team-member"&&"Add as Team Member",u==="complete"&&" - Complete!"]})]})]})}),e.jsxs("div",{className:"p-8",children:[c==="checking"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qs,{className:"animate-spin mx-auto mb-4 text-purple-600",size:48}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Checking Enterprise license status..."})]}),u==="license"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Gr,{className:"text-purple-600 dark:text-purple-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:[e.jsxs("p",{className:"font-semibold mb-2",children:[x==="provision-admin"&&"Provision Admin Device",x==="register"&&"Register This Device",x==="team-member"&&"Add as Team Member"]}),e.jsx("p",{children:"Enter your Enterprise license key and email to continue."})]})]})}),G&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200",children:e.jsx("p",{children:G})})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Wr,{size:16,className:"inline mr-2 text-purple-600"}),"Enterprise License Key"]}),e.jsx("input",{type:"text",value:v,onChange:At,placeholder:"1111-1111-1111-1111",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono focus:ring-2 focus:ring-purple-500",disabled:k})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Xo,{size:16,className:"inline mr-2 text-purple-600"}),"Your Email"]}),e.jsx("input",{type:"email",value:A,onChange:ye=>D(ye.target.value),placeholder:"your.email@company.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",disabled:k})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:k,children:"Back"}),e.jsxs("button",{onClick:()=>{console.log(" Activate License button clicked. deviceRole:",x),x==="team-member"?(console.log(" Calling claimEnterpriseSeat()"),Vt()):(console.log(" Calling setupEnterpriseLicense()"),Qt())},disabled:k||!v||!A,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-medium hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&e.jsx(qs,{className:"animate-spin",size:16}),k?"Activating...":"Activate License"]})]})]}),u==="org-setup"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Zt,{className:"text-purple-600 dark:text-purple-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Organization Details"}),e.jsx("p",{children:"Provide your organization information to complete the admin device provisioning."})]})]})}),G&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200",children:e.jsx("p",{children:G})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Organization Name"}),e.jsx("input",{type:"text",value:E,onChange:ye=>M(ye.target.value),placeholder:"Your Company Name",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",disabled:k})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Xo,{size:16,className:"inline mr-2 text-purple-600"}),"Admin Email"]}),e.jsx("input",{type:"email",value:L,onChange:ye=>w(ye.target.value),placeholder:"admin@company.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",disabled:k})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Device Name"}),e.jsx("input",{type:"text",value:C,onChange:ye=>S(ye.target.value),placeholder:"Admin Workstation",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",disabled:k})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>h("license"),className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:k,children:"Back"}),e.jsxs("button",{onClick:Qt,disabled:k||!v||!A||!E||!L,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-medium hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&e.jsx(qs,{className:"animate-spin",size:16}),k?"Provisioning...":"Complete Setup"]})]})]}),u==="security-policies"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Zt,{className:"text-blue-600 dark:text-blue-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Enterprise Admin Setup"}),e.jsx("p",{className:"leading-relaxed",children:"Configure global security policies for your enterprise deployment."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Security Policies"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:J.multiDeviceCerts,onChange:ye=>te(H=>({...H,multiDeviceCerts:ye.target.checked})),className:"w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Enable multi-device certification"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:J.rbacEnforcement!=="flexible",onChange:ye=>te(H=>({...H,rbacEnforcement:ye.target.checked?"strict":"flexible"})),className:"w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Enforce RBAC restrictions"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:J.auditEnabled,onChange:ye=>te(H=>({...H,auditEnabled:ye.target.checked})),className:"w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Require audit chaining"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:J.remoteAdminControls,onChange:ye=>te(H=>({...H,remoteAdminEnabled:ye.target.checked})),className:"w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Enable remote admin controls"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:J.requireApproval,onChange:ye=>te(H=>({...H,requireApproval:ye.target.checked})),className:"w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Require approval for deployments"})]})]})]})]}),u==="admin-security"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(qe,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Global Security Policies (Admin Only - First Device)"}),e.jsx("p",{children:"Configure organization-wide security policies that will apply to all devices in your enterprise."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Device Security Requirements"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:K.enforceDeviceEncryption,onChange:ye=>ue(H=>({...H,enforceDeviceEncryption:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Enforce device encryption"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:K.deviceCompliance,onChange:ye=>ue(H=>({...H,deviceCompliance:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Enforce device compliance"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>h("admin-approvers"),className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg",children:"Next: Configure Approvers"})})]}),u==="admin-approvers"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ik,{className:"text-blue-600 dark:text-blue-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Configure Approver Groups (Admin Only - First Device)"}),e.jsx("p",{children:"Set up approval groups that will manage different types of changes and deployments."})]})]})}),e.jsx("div",{className:"space-y-6",children:oe.map(ye=>e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:ye.name}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ye.isActive,onChange:H=>Ee(Ae=>Ae.map(Ve=>Ve.id===ye.id?{...Ve,isActive:H.target.checked}:Ve)),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Approvals Required"}),e.jsxs("select",{value:ye.minApprovals,onChange:H=>Ee(Ae=>Ae.map(Ve=>Ve.id===ye.id?{...Ve,minApprovals:Number(H.target.value)}:Ve)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:1,children:"1 Approval"}),e.jsx("option",{value:2,children:"2 Approvals"}),e.jsx("option",{value:3,children:"3 Approvals"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Can Approve"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["deploy","config","user_management"].map(H=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ye.canApprove.includes(H),onChange:Ae=>{Ee(Ve=>Ve.map(Ze=>Ze.id===ye.id?{...Ze,canApprove:Ae.target.checked?[...Ze.canApprove,H]:Ze.canApprove.filter($t=>$t!==H)}:Ze))},className:"w-3 h-3 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:H.replace("_"," ")})]},H))})]})]})]},ye.id))}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>h("admin-security"),className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>h("admin-governance"),className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg",children:"Next: Deploy Governance"})]})]}),u==="admin-governance"&&e.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Zt,{className:"text-green-600 dark:text-green-400 mt-0.5",size:18}),e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Deploy Governance Setup (Admin Only - First Device)"}),e.jsx("p",{children:"Configure deployment policies and governance rules for your enterprise."})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:we.requireTestingEnvironment,onChange:ye=>Oe(H=>({...H,requireTestingEnvironment:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Require testing environment"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:we.restrictProductionDeploys,onChange:ye=>Oe(H=>({...H,restrictProductionDeploys:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Restrict production deployments"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:we.requireRollbackPlan,onChange:ye=>Oe(H=>({...H,requireRollbackPlan:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Require rollback plan"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:we.allowEmergencyDeploys,onChange:ye=>Oe(H=>({...H,allowEmergencyDeploys:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Allow emergency deployments"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:we.autoRevertOnFailure,onChange:ye=>Oe(H=>({...H,autoRevertOnFailure:ye.target.checked})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Auto-revert on failure"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Review Period (hours)"}),e.jsxs("select",{value:we.mandatoryReviewPeriod,onChange:ye=>Oe(H=>({...H,mandatoryReviewPeriod:Number(ye.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:1,children:"1 hour"}),e.jsx("option",{value:4,children:"4 hours"}),e.jsx("option",{value:12,children:"12 hours"}),e.jsx("option",{value:24,children:"24 hours"}),e.jsx("option",{value:48,children:"48 hours"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Simultaneous Deploys"}),e.jsxs("select",{value:we.maxSimultaneousDeploys,onChange:ye=>Oe(H=>({...H,maxSimultaneousDeploys:Number(ye.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:1,children:"1"}),e.jsx("option",{value:2,children:"2"}),e.jsx("option",{value:3,children:"3"}),e.jsx("option",{value:5,children:"5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Approval Workflow"}),e.jsxs("select",{value:we.approvalWorkflow,onChange:ye=>Oe(H=>({...H,approvalWorkflow:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"sequential",children:"Sequential"}),e.jsx("option",{value:"parallel",children:"Parallel"}),e.jsx("option",{value:"majority",children:"Majority Vote"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>h("admin-approvers"),className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back"}),e.jsxs("button",{onClick:async()=>{P(!0);try{const H=await(await fetch("/api/license/enterprise/update-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:v,globalSecurityPolicies:K,approverGroups:oe,deployGovernance:we})})).json();H.success?(h("complete"),await Ne(),i&&setTimeout(()=>{a&&a(),i()},1500)):U(H.error||"Failed to save configurations")}catch(ye){console.error("Error saving configurations:",ye),U("Failed to save configurations")}finally{P(!1)}},disabled:k,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&e.jsx(qs,{className:"animate-spin",size:16}),k?"Saving...":"Complete Setup"]})]})]}),u==="complete"&&e.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12",children:[e.jsx(Fe,{className:"mx-auto mb-6 text-green-600",size:64}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Enterprise License Activated!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:[x==="provision-admin"&&"Admin device provisioned successfully. Enterprise security policies are now active.",x==="register"&&"Device registered successfully. You can now access Pandaura AS with your assigned permissions.",x==="team-member"&&"Team member seat claimed successfully. Welcome to the organization!"]}),e.jsx("button",{onClick:async()=>{await Ne(),a&&a()},className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg",children:"Continue to Project Hub"})]})]})]})})]}):null}function zO({isOpen:s,onClose:a}){const[n,i]=p.useState(null),[c,d]=p.useState([]),[u,h]=p.useState(!0),[x,f]=p.useState(null),[y,b]=p.useState(!1),[v,N]=p.useState(null),[E,M]=p.useState(null),[L,w]=p.useState("config"),[T,A]=p.useState(!1),{licenseInfo:D}=ma(),[C,S]=p.useState({twoPersonApproval:!1,deployRestrictions:!1,rollbackRequiresApproval:!1}),[k,P]=p.useState({defaultRole:"Viewer",adminCanOverride:!1,inheritPermissions:!1}),[G,U]=p.useState({orgName:"",maxSeats:20,enableLocalAuth:!1});p.useEffect(()=>{s&&Q()},[s]);const Q=async()=>{try{if(h(!0),f(null),!D)throw new Error("No license information available. Please activate a Teams license first.");console.log(" Using license info from store:",D);const J=D;if(J.licenseType!=="teams"&&J.licenseType!=="enterprise")throw new Error("This device is not using a Teams or Enterprise license. Please activate a Teams license to access this feature.");if(console.log(" Configuration:",J.configuration),J.configuration){if(J.configuration.approvalPolicies){const K=J.configuration.approvalPolicies;S({twoPersonApproval:K.requireTwoPersonApproval||!1,deployRestrictions:K.deployRestrictions?.production?.requireApproval||!1,rollbackRequiresApproval:K.rollbackRequiresApproval||!1})}J.configuration.rbacDefaults&&P(J.configuration.rbacDefaults),J.configuration.orgIdentity&&U(J.configuration.orgIdentity)}const te={licenseId:J.licenseId,licenseType:J.licenseType,organizationName:J.configuration?.organizationName||J.organizationName||"Unknown",ownerEmail:J.ownerEmail||"",maxSeats:J.configuration?.maxSeats||J.limits?.max_seats||20,usedSeats:0,invitedSeats:0,availableSeats:0,expiresAt:new Date(Date.now()+365*24*60*60*1e3).toISOString(),isActive:!0,approvalPolicies:J.configuration?.approvalPolicies||null,rbacDefaults:J.configuration?.rbacDefaults||null,orgIdentityConfig:J.configuration?.orgIdentity||null,orgLicenseKey:J.configuration?.orgLicenseKey||void 0},$=await Ct.getSessionToken();if(!$)throw new Error("No session token available");const _=await fetch("/api/device/license/teams/seats",{method:"GET",headers:{Authorization:`Bearer ${$}`},credentials:"include"});if(!_.ok)throw new Error("Failed to load seat information");const Y=(await _.json()).seats||[],se=Y.filter(K=>K.bindingStatus==="active").length,O=Y.filter(K=>K.bindingStatus==="invited").length;te.usedSeats=se,te.invitedSeats=O,te.availableSeats=te.maxSeats-se-O;try{const K=await fetch("/api/device/license/teams/config",{method:"GET",headers:{Authorization:`Bearer ${$}`},credentials:"include"});if(K.ok){const ue=await K.json();te.orgLicenseKey=ue.config?.orgLicenseKey}}catch(K){console.warn("Could not fetch org license key:",K)}i(te),d(Y)}catch(J){f(J.message||"Failed to load license data"),console.error("Error loading license data:",J)}finally{h(!1)}},Z=async()=>{A(!0);try{const J=await Ct.getSessionToken();if(!J)throw new Error("No session token available. Please refresh and try again.");const $=await(await fetch("/api/device/license/teams/configure",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},credentials:"include",body:JSON.stringify({approvalPolicies:C,rbacDefaults:k,orgIdentity:G})})).json();if($.success)M({type:"success",message:"Configuration saved successfully!"}),await ma.getState().checkLicenseStatus(),await Q();else{const _=$.error||"Failed to save configuration";_.includes("not bound")?M({type:"error",message:"This device is not bound to a Teams license. Please activate a Teams license first from the Profile page."}):M({type:"error",message:_})}}catch(J){const te=J.message||"Failed to save configuration";te.includes("not bound")?M({type:"error",message:"This device is not bound to a Teams license. Please activate a Teams license first from the Profile page."}):M({type:"error",message:te})}finally{A(!1)}},ie=async()=>{if(!v)return;const{bindingId:J,email:te}=v;N(null);try{const $=await Ct.getSessionToken();if(!$){M({type:"error",message:"No session token available. Please log in again."});return}console.log(" Removing seat:",{bindingId:J,email:te});const _=await fetch("/api/device/license/teams/remove-seat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},credentials:"include",body:JSON.stringify({bindingId:J})});console.log(" Remove seat response status:",_.status);const z=await _.json();if(console.log(" Remove seat response data:",z),!_.ok){M({type:"error",message:z.error||`Failed to remove seat (HTTP ${_.status})`});return}z.success?(console.log(" Seat removed successfully, reloading data..."),await Q(),M({type:"success",message:`Seat for ${te} removed successfully`})):M({type:"error",message:z.error||"Failed to remove seat"})}catch($){console.error(" Error removing seat:",$),M({type:"error",message:$.message||"Failed to remove seat"})}};return s?u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10000] p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#FF6A00] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Loading license configuration..."})]})}):x||!n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10000] p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md",children:[e.jsx(bt,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4 text-center",children:x||"Failed to load license"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"}),e.jsx("button",{onClick:Q,className:"flex-1 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors",children:"Try Again"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10000] p-4 backdrop-blur-sm",children:e.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#FF6A00] to-[#E55A00] text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Teams License Management"}),e.jsx("p",{className:"text-orange-100 mt-1",children:"Manage your organization's license and seats"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(pt,{size:24})})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex px-6",children:[e.jsxs("button",{onClick:()=>w("overview"),className:`flex items-center gap-2 px-6 py-3 font-medium border-b-2 transition-colors ${L==="overview"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(Hr,{size:16}),"Overview"]}),e.jsxs("button",{onClick:()=>w("config"),className:`flex items-center gap-2 px-6 py-3 font-medium border-b-2 transition-colors ${L==="config"?"border-[#FF6A00] text-[#FF6A00]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(Zt,{size:16}),"Configuration"]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[L==="overview"&&e.jsxs(e.Fragment,{children:[n.orgLicenseKey&&e.jsx(Ye,{children:e.jsx("div",{className:"p-6 bg-gradient-to-r from-[#FF6A00]/10 to-[#E55A00]/10 dark:from-[#FF6A00]/5 dark:to-[#E55A00]/5",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wr,{className:"text-[#FF6A00]",size:20}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Organization License Key"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Share this key with team members to let them join your organization automatically"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg font-mono text-sm text-gray-900 dark:text-white",children:n.orgLicenseKey}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(n.orgLicenseKey),M({type:"success",message:"Organization license key copied to clipboard!"})},className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Copy"]})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(gl,{className:"text-blue-500",size:24})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.organizationName}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organization"})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Wr,{className:"text-green-500",size:24})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:n.licenseType}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"License Type"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"text-green-600",size:20}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Approval Policies"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Two-Person Approval"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.twoPersonApproval?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:C.twoPersonApproval?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Deploy Restrictions"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.deployRestrictions?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:C.deployRestrictions?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Rollback Requires Approval"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.rollbackRequiresApproval?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:C.rollbackRequiresApproval?"Enabled":"Disabled"})]})]})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ws,{className:"text-blue-600",size:20}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"RBAC Settings"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Default Role for New Users"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:k.defaultRole})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Admin Can Override"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.adminCanOverride?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:k.adminCanOverride?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Inherit Permissions"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.inheritPermissions?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:k.inheritPermissions?"Yes":"No"})]})]})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gl,{className:"text-purple-600",size:20}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Organization"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Organization"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:n.organizationName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expires"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:new Date(n.expiresAt).toLocaleDateString()})]})]})]})})]})]}),L==="config"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Configure organization-wide settings for approval policies, RBAC defaults, and identity management."})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qe,{className:"text-green-600",size:24}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Approval Policies"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Configure approval requirements for critical operations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.twoPersonApproval,onChange:J=>S({...C,twoPersonApproval:J.target.checked}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Two-Person Approval Rule"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Require approval from two different users for critical actions"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.deployRestrictions,onChange:J=>S({...C,deployRestrictions:J.target.checked}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Deploy Restrictions"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Restrict deployments to approved users only"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.rollbackRequiresApproval,onChange:J=>S({...C,rollbackRequiresApproval:J.target.checked}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Rollback Requires Approval"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Version rollbacks require additional approval"})]})]})]})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ws,{className:"text-blue-600",size:24}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"RBAC Defaults"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Set up role-based access control defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Role for New Users"}),e.jsxs("select",{value:k.defaultRole,onChange:J=>P({...k,defaultRole:J.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Viewer",children:"Viewer (Read-only access)"}),e.jsx("option",{value:"Editor",children:"Editor (Can edit projects)"}),e.jsx("option",{value:"Approver",children:"Approver (Can approve changes)"}),e.jsx("option",{value:"Admin",children:"Admin (Full access)"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.adminCanOverride,onChange:J=>P({...k,adminCanOverride:J.target.checked}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Admin Can Override Restrictions"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow administrators to bypass approval policies when necessary"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.inheritPermissions,onChange:J=>P({...k,inheritPermissions:J.target.checked}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Inherit Permissions from Organization"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New users inherit base permissions from organization settings"})]})]})]})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gl,{className:"text-purple-600",size:24}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Organization Identity"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Set up organization identity and authentication settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Organization Name"}),e.jsx("input",{type:"text",value:G.orgName,onChange:J=>U({...G,orgName:J.target.value}),placeholder:"Your Company Name",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Seats"}),e.jsx("input",{type:"number",value:G.maxSeats,onChange:J=>U({...G,maxSeats:parseInt(J.target.value)||20}),min:"1",max:"100",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Number of devices that can be added to this organization (1-100)"})]})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:Z,disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#FF6A00] to-[#E55A00] text-white rounded-lg font-medium hover:from-[#E55A00] hover:to-[#D54A00] transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:T?e.jsxs(e.Fragment,{children:[e.jsx(ze.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(Zt,{size:20})}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ho,{size:20}),"Save Configuration"]})})})]})]}),y&&e.jsx(VO,{onClose:()=>b(!1),onSuccess:()=>{b(!1),Q()},availableSeats:n.availableSeats}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10001] p-4 backdrop-blur-sm",children:e.jsx(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e.jsx(bt,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Remove Seat"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to remove the seat for ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:v.email}),"? This will immediately revoke their access to the application."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(null),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:ie,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Remove Seat"})]})]})})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10001] p-4 backdrop-blur-sm",children:e.jsx(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${E.type==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:E.type==="success"?e.jsx(Ho,{className:"text-green-600 dark:text-green-400",size:24}):e.jsx(bt,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:E.type==="success"?"Success":"Error"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:E.message}),e.jsx("button",{onClick:()=>M(null),className:"w-full px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors font-medium",children:"Close"})]})})})]})}):null}function VO({onClose:s,onSuccess:a,availableSeats:n}){const[i,c]=p.useState(""),[d,u]=p.useState("Viewer"),[h,x]=p.useState(!1),[f,y]=p.useState(null),b=async v=>{if(v.preventDefault(),!i.trim()){y("Email is required");return}x(!0),y(null);try{const N=await Ct.getSessionToken(),M=await(await fetch("/api/device/license/teams/add-seat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},credentials:"include",body:JSON.stringify({email:i.trim(),role:d})})).json();M.success?a():y(M.error||"Failed to add seat")}catch(N){y(N.message||"Failed to add seat")}finally{x(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[10000] p-4 backdrop-blur-sm",children:e.jsx(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add New Seat"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(pt,{size:20})})]}),f&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bt,{className:"text-red-600 dark:text-red-400 mt-0.5",size:18}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:f})]})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i,onChange:v=>c(v.target.value),placeholder:"user@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e.jsxs("select",{value:d,onChange:v=>u(v.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Viewer",children:"Viewer (Read-only)"}),e.jsx("option",{value:"Editor",children:"Editor (Can edit)"}),e.jsx("option",{value:"Deployer",children:"Deployer (Can deploy)"}),e.jsx("option",{value:"Approver",children:"Approver (Can approve)"}),e.jsx("option",{value:"Admin",children:"Admin (Full access)"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Available seats: ",n]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||n===0,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Adding...":"Add Seat"})]})]})]})})})}function $O({isOpen:s,onClose:a}){const[n,i]=p.useState(null),[c,d]=p.useState([]),[u,h]=p.useState(!0),[x,f]=p.useState(!1),[y,b]=p.useState(!1),[v,N]=p.useState("overview"),[E,M]=p.useState(!1),{licenseInfo:L}=ma(),[w,T]=p.useState({twoPersonApproval:!1,rollbackRequiresApproval:!1}),[A,D]=p.useState({defaultRole:"Viewer",adminCanOverride:!1,inheritPermissions:!1}),[C,S]=p.useState({deployRestrictions:!1});p.useEffect(()=>{s&&L&&k()},[s,L]);const k=async()=>{try{h(!0);const U=L,Q=U.licenseKey||"",Z=await fetch("/api/license/enterprise/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:Q})});if(Z.ok){const ie=await Z.json();if(console.log(" Loaded enterprise data:",ie),console.log(" RBAC Config from server:",ie.rbacConfig),i({licenseKey:ie.licenseKey||Q,orgName:ie.orgName||U.organizationName||"Enterprise Organization",adminEmail:ie.adminEmail||U.ownerEmail||"",maxSeats:ie.maxSeats||U.limits?.max_seats||50,usedSeats:ie.usedSeats||1,securityPolicies:ie.securityPolicies||U.configuration?.securityPolicies||{},rbacConfig:ie.rbacConfig||U.configuration?.rbacConfig||{},requiresApproval:ie.requiresApproval??U.configuration?.requiresApproval??!1,auditEnabled:ie.auditEnabled??U.configuration?.auditEnabled??!1,isActive:ie.isActive??!0,expiresAt:ie.expiresAt||new Date(Date.now()+365*24*60*60*1e3).toISOString()}),ie.securityPolicies&&(console.log(" Loading security policies:",ie.securityPolicies),T({twoPersonApproval:ie.securityPolicies.twoPersonApproval||!1,rollbackRequiresApproval:ie.securityPolicies.rollbackRequiresApproval||!1})),ie.rbacConfig){console.log(" Loading RBAC config:",ie.rbacConfig),console.log(" ApproverGroups from rbacConfig:",ie.rbacConfig.approverGroups);const te=ie.rbacConfig.approverGroups||ie.rbacConfig;D({defaultRole:te.defaultRole||"Viewer",adminCanOverride:te.adminCanOverride||!1,inheritPermissions:te.inheritPermissions||!1}),console.log(" Set approverGroups state:",{defaultRole:te.defaultRole||"Viewer",adminCanOverride:te.adminCanOverride||!1,inheritPermissions:te.inheritPermissions||!1})}ie.rbacConfig?.deployGovernance&&(console.log(" Loading deploy governance:",ie.rbacConfig.deployGovernance),S({deployRestrictions:ie.rbacConfig.deployGovernance.deployRestrictions||!1}));const J=await fetch("/api/license/enterprise/devices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:Q})});if(J.ok){const te=await J.json();d(te.devices||[])}}else i({licenseKey:Q,orgName:U.organizationName||"Enterprise Organization",adminEmail:U.ownerEmail||"",maxSeats:U.limits?.max_seats||50,usedSeats:1,securityPolicies:U.configuration?.securityPolicies||{},rbacConfig:U.configuration?.rbacConfig||{},requiresApproval:U.configuration?.requiresApproval||!1,auditEnabled:U.configuration?.auditEnabled||!1,isActive:!0,expiresAt:new Date(Date.now()+365*24*60*60*1e3).toISOString()}),d([{deviceId:U.deviceId||"unknown",deviceName:"Current Device",userEmail:U.ownerEmail||"",role:U.role||"admin",isAdmin:U.isAdmin??!0,claimedAt:new Date().toISOString(),seatStatus:"active"}])}catch(U){console.error("Error loading Enterprise data:",U)}finally{h(!1)}},P=async()=>{f(!0);try{console.log(" Saving configuration:",{securityPolicies:w,approverGroups:A,deployGovernance:C});const U=await fetch("/api/license/enterprise/update-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:n?.licenseKey,globalSecurityPolicies:w,approverGroups:A,deployGovernance:C})});if(U.ok)M(!0),setTimeout(()=>M(!1),3e3),await k();else{const Q=await U.json().catch(()=>({}));alert(`Failed to save configuration: ${Q.error||"Unknown error"}`)}}catch(U){console.error("Error saving configuration:",U),alert(`Failed to save configuration: ${U.message||"Network error"}`)}finally{f(!1)}},G=U=>{if(!U)return"****-****-****-****-****";const Q=U.split("-");return Q.map((Z,ie)=>ie<Q.length-1?"****":Z).join("-")};return s?e.jsx(Nr,{children:e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#FF6A00] to-[#E55A00] p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(gl,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Enterprise License Management"}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Configure your organization's governance and security policies"})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(pt,{size:24})})]}),e.jsxs("div",{className:"flex gap-2 mt-6 border-t border-white/20 pt-4",children:[e.jsxs("button",{onClick:()=>N("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${v==="overview"?"bg-white text-[#FF6A00]":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx(qe,{size:16}),"Overview"]}),e.jsxs("button",{onClick:()=>N("users"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${v==="users"?"bg-white text-[#FF6A00]":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx(Ws,{size:16}),"Users & Devices"]}),e.jsxs("button",{onClick:()=>N("configure"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${v==="configure"?"bg-white text-[#FF6A00]":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx(Zt,{size:16}),"Configuration"]})]})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(qs,{className:"animate-spin text-[#FF6A00]",size:32})}):e.jsxs(e.Fragment,{children:[v==="overview"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-2 border-purple-200 dark:border-purple-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(TT,{className:"text-white",size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Enterprise License"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.orgName})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs("div",{className:"px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(Fe,{size:18}),"Active"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"License Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs font-mono text-gray-900 dark:text-gray-100",children:y?n.licenseKey:G(n.licenseKey)}),e.jsx("button",{onClick:()=>b(!y),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:y?e.jsx(MT,{size:16}):e.jsx(Hr,{size:16})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Admin Email"}),e.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:n.adminEmail})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Seat Usage"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[n.usedSeats," / ",n.maxSeats]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#FF6A00] to-[#E55A00] h-2 rounded-full transition-all",style:{width:`${n.usedSeats/n.maxSeats*100}%`}})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Expires"}),e.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:new Date(n.expiresAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Current Configuration"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx(qe,{size:18,className:"text-green-600"}),"Security Policies"]}),e.jsxs("div",{className:"space-y-2 ml-7",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Two-Person Approval Rule"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.securityPolicies?.twoPersonApproval?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.securityPolicies?.twoPersonApproval?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Rollback Requires Approval"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.securityPolicies?.rollbackRequiresApproval?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.securityPolicies?.rollbackRequiresApproval?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Audit Logging"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.auditEnabled?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.auditEnabled?"Enabled":"Disabled"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx(Ws,{size:18,className:"text-blue-600"}),"Role-Based Access Control"]}),e.jsxs("div",{className:"space-y-2 ml-7",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Default Role for New Users"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:n.rbacConfig?.approverGroups?.defaultRole||n.rbacConfig?.defaultRole||"Viewer"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Admin Can Override"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.rbacConfig?.approverGroups?.adminCanOverride??n.rbacConfig?.adminCanOverride?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.rbacConfig?.approverGroups?.adminCanOverride??n.rbacConfig?.adminCanOverride?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Inherit Permissions"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.rbacConfig?.approverGroups?.inheritPermissions??n.rbacConfig?.inheritPermissions?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.rbacConfig?.approverGroups?.inheritPermissions??n.rbacConfig?.inheritPermissions?"Yes":"No"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx(Zt,{size:18,className:"text-purple-600"}),"Deployment Governance"]}),e.jsxs("div",{className:"space-y-2 ml-7",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Deploy Restrictions"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.rbacConfig?.deployGovernance?.deployRestrictions?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.rbacConfig?.deployGovernance?.deployRestrictions?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Requires Approval"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.requiresApproval?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:n.requiresApproval?"Yes":"No"})]})]})]})]})]}),v==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Active Devices"}),c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ws,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No devices registered yet"})]}):e.jsx("div",{className:"space-y-3",children:c.map((U,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(ak,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:U.deviceName}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.userEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:U.role}),U.isAdmin&&e.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:"Admin"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-xs font-medium capitalize",children:U.seatStatus})]})]},Q))})]})}),v==="configure"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Configure organization-wide settings for approval policies, security governance, and deployment controls."})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"text-green-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Configure Global Security Policies"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up approval requirements and security controls for critical operations"})]})]}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:w.twoPersonApproval,onChange:U=>T({...w,twoPersonApproval:U.target.checked}),className:"mt-1 w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Two-Person Approval Rule"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Require approval from two different users for critical actions"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:w.rollbackRequiresApproval,onChange:U=>T({...w,rollbackRequiresApproval:U.target.checked}),className:"mt-1 w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Rollback Requires Approval"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Version rollbacks require additional approval before execution"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Ws,{className:"text-blue-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Configure Approver Groups"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set up role-based access control and default permissions for new users"})]})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Role for New Users"}),e.jsxs("select",{value:A.defaultRole,onChange:U=>D({...A,defaultRole:U.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-[#FF6A00] bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Viewer",children:"Viewer (Read-only access)"}),e.jsx("option",{value:"Editor",children:"Editor (Can edit projects)"}),e.jsx("option",{value:"Approver",children:"Approver (Can approve changes)"}),e.jsx("option",{value:"Admin",children:"Admin (Full access)"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:A.adminCanOverride,onChange:U=>D({...A,adminCanOverride:U.target.checked}),className:"mt-1 w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Admin Can Override Restrictions"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Allow administrators to bypass approval policies when necessary"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:A.inheritPermissions,onChange:U=>D({...A,inheritPermissions:U.target.checked}),className:"mt-1 w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Inherit Permissions from Organization"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"New users inherit base permissions from organization settings"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Zt,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Configure Deploy Governance"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Control deployment restrictions and approval workflows"})]})]}),e.jsx("div",{className:"space-y-3 mt-6",children:e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:C.deployRestrictions,onChange:U=>S({...C,deployRestrictions:U.target.checked}),className:"mt-1 w-4 h-4 text-[#FF6A00] focus:ring-[#FF6A00]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Deploy Restrictions"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Restrict deployments to approved users only"})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:P,disabled:x,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FF6A00] to-[#E55A00] text-white rounded-lg font-semibold hover:from-[#E55A00] hover:to-[#D54A00] transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"animate-spin",size:20}),"Saving Configuration..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:20}),"Save Configuration"]})})})]})]})}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Close"})})})]}),e.jsx(Nr,{children:E&&e.jsxs(ze.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-[60] bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3",children:[e.jsx(Fe,{size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Configuration Saved!"}),e.jsx("div",{className:"text-sm text-green-100",children:"Your enterprise settings have been updated successfully."})]})]})})]})}):null}const Rv=()=>{const[s,a]=p.useState(null),[n,i]=p.useState(null),[c,d]=p.useState(!0),[u,h]=p.useState(null),[x,f]=p.useState(!1),[y,b]=p.useState(!1),[v,N]=p.useState(!1),[E,M]=p.useState(1),[L,w]=p.useState(!1),[T,A]=p.useState(!1),[D,C]=p.useState(!1),[S,k]=p.useState(!1),[P,G]=p.useState(!1),[U,Q]=p.useState(!1),[Z,ie]=p.useState(!1),{hasValidLicense:J,checkLicenseStatus:te}=ma(),[$,_]=p.useState({license:{key:"",activated:!1,companyName:"",totalSeats:0,expiration:"",isValid:!1},seats:{total:0,assigned:[],remaining:0,currentUserAssigned:!1},device:{name:"",osUser:"",tpmKeyPair:!1,deviceCert:!1,deviceFingerprint:!1,certified:!1},roles:{osUsers:[],mappings:{},availableRoles:["Viewer","Editor","Approver","Admin"]},approvalPolicy:{enabled:!1,minApprovers:1,rules:{deployments:!0,rollbacks:!0,criticalEdits:!0,deviceRemoval:!0},approvers:[]}}),{projects:z,activeProject:Y}=jr(),{theme:se,setTheme:O}=Sh();p.useEffect(()=>{K()},[]);const K=async()=>{try{d(!0),h(null);const H=await Ct.getDeviceInfo();console.log("Profile data received:",H),await te();const Ae=ma.getState();console.log(" License Store State:",{hasValidLicense:Ae.hasValidLicense,licenseInfo:Ae.licenseInfo});let Ve;if(Ae.hasValidLicense&&Ae.licenseInfo?(Ve={solo:"Solo",team:"Team",teams:"Team",enterprise:"Enterprise"}[Ae.licenseInfo.licenseType.toLowerCase()],console.log(" Profile type set from license:",Ve)):console.log(" No valid license - profileType will be undefined"),H&&H.device){const Ze={profileType:Ve,workspacePresets:{defaultProject:Y?.name||"No active project",theme:se,autoSave:!0,notifications:!0},device:{deviceId:H.device.device_id,deviceName:H.device.device_name,deviceType:H.device.device_type,osType:H.device.os_type,osVersion:H.device.os_version,hardwareInfo:typeof H.device.hardware_info=="string"?JSON.parse(H.device.hardware_info):H.device.hardware_info},user:H.users[0]?{userId:H.users[0].id,username:H.users[0].os_username,displayName:H.users[0].display_name,role:H.users[0].user_role,isPrimary:H.users[0].is_primary,is_active:H.users[0].is_active,created_at:H.users[0].created_at,updated_at:H.users[0].updated_at,first_login:H.users[0].first_login,last_activity:H.users[0].last_activity}:void 0};console.log("Full profile created:",Ze),console.log(" Profile Type Value:",Ze.profileType),console.log("User data:",Ze.user),console.log("Created at:",Ze.user?.created_at),a(Ze),i(Ze)}else h("No device data received from server"),console.error("Invalid device data structure:",H)}catch(H){h(H.message||"Failed to load profile data"),console.error("Error loading profile:",H)}finally{d(!1)}},ue={Solo:e.jsx(Dn,{size:20,className:"text-blue-500"}),Team:e.jsx(Ws,{size:20,className:"text-green-500"}),Enterprise:e.jsx(gl,{size:20,className:"text-purple-500"})},oe={Solo:"Individual workspace for personal projects",Team:"Collaborative workspace for team projects",Enterprise:"Advanced workspace with enterprise features"},Ee=H=>{switch(H.toLowerCase()){case"desktop":return e.jsx(kg,{size:16,className:"text-gray-600"});case"laptop":return e.jsx(ak,{size:16,className:"text-gray-600 dark:text-gray-400"});case"mobile":return e.jsx(X5,{size:16,className:"text-gray-600 dark:text-gray-400"});default:return e.jsx(kg,{size:16,className:"text-gray-600"})}},we=()=>{f(!0)},Oe=()=>{i(s),f(!1)},Ne=async()=>{if(!(!n||!s)){b(!0);try{O(n.workspacePresets.theme),a(n),f(!1)}catch(H){console.error("Error saving profile:",H)}finally{b(!1)}}},Ge=H=>{w(!1),H==="solo"?A(!0):H==="teams"?G(!0):H==="enterprise"&&k(!0)},At=async()=>{A(!1),await K()},Pt=async()=>{G(!1),await K()},Qt=()=>{C(!1),k(!1),w(!0)},Vt=(H,Ae)=>{n&&i({...n,workspacePresets:{...n.workspacePresets,[H]:Ae}})},ye=()=>{if(!s)return 0;let H=0,Ae=0;return Ae+=6,s.device.deviceId&&H++,s.device.deviceName&&H++,s.device.deviceType&&H++,s.device.osType&&H++,s.device.osVersion&&H++,s.device.hardwareInfo&&H++,s.user&&(Ae+=5,s.user.username&&H++,s.user.displayName&&H++,s.user.role&&H++,s.user.is_active&&H++,s.user.created_at&&H++),Ae+=4,s.workspacePresets.defaultProject&&H++,s.workspacePresets.theme&&H++,s.workspacePresets.autoSave!==void 0&&H++,s.workspacePresets.notifications!==void 0&&H++,Math.round(H/Ae*100)};return c?e.jsx("div",{className:"w-full flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#FF6A00] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading profile..."})]})}):u||!s?e.jsx("div",{className:"w-full flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pt,{size:24,className:"text-red-500 dark:text-red-400"})}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:u||"Failed to load profile"}),e.jsx("button",{onClick:K,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors",children:"Try Again"})]})}):e.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full space-y-6 min-h-screen bg-white dark:bg-panda-surface-dark transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage your account and workspace preferences"})]}),x?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Oe,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(pt,{size:16}),"Cancel"]}),e.jsxs("button",{onClick:Ne,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors disabled:opacity-50",children:[e.jsx(cl,{size:16}),y?"Saving...":"Save Changes"]})]}):e.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors",children:[e.jsx(O5,{size:16}),"Edit Profile"]})]}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-[#FF6A00] to-[#E55A00] rounded-full flex items-center justify-center",children:e.jsx(Dn,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.user?.displayName||s.device.deviceName}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.user?.username?`@${s.user.username}`:"Device User"})]})]}),s.profileType&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Profile Type",e.jsx("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:"(Determined by license)"})]}),e.jsx("div",{className:"p-4 border-2 border-[#FF6A00] bg-[#FF6A00]/5 dark:bg-[#FF6A00]/10 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[ue[s.profileType],e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:s.profileType}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:oe[s.profileType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-xs font-medium",children:" Active"}),s.profileType==="Team"&&e.jsx("button",{onClick:()=>Q(!0),className:"px-3 py-1 bg-[#FF6A00] text-white rounded text-xs font-medium hover:bg-[#E55A00] transition-colors",children:"Manage License"}),s.profileType==="Enterprise"&&e.jsx("button",{onClick:()=>ie(!0),className:"px-3 py-1 bg-[#FF6A00] text-white rounded text-xs font-medium hover:bg-[#E55A00] transition-colors",children:"Manage Enterprise"})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Profile type is automatically set based on your activated license and cannot be changed manually."})]}),!s.profileType&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"No Profile Type Set:"})," Profile type will be automatically assigned when you activate your license."]})}),s.device&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Device Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Operating System"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[s.device.osType," ",s.device.osVersion]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Architecture"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.device.hardwareInfo.arch})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"CPU Cores"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.device.hardwareInfo.cpus})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Memory"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[s.device.hardwareInfo.totalMemory,"GB"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Platform"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.device.hardwareInfo.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Device Type"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-1",children:[Ee(s.device.deviceType),e.jsx("span",{className:"capitalize",children:s.device.deviceType})]})]})]})]}),s.user&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"User Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"OS Username"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.user.username})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Role"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.user.role==="admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:s.user.role})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Account Type"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.user.isPrimary?"Primary User":"Secondary User"})]})]})]})]})}),!J&&e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center",children:e.jsx(bt,{size:20,className:"text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"License Activation Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Activate your license to access all features"})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Wr,{size:20,className:"text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Limited Access Mode"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Your device has been initialized with TPM-backed security, but you need to activate a license to:"}),e.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-2 space-y-1 ml-5 list-disc",children:[e.jsx("li",{children:"Create and open projects"}),e.jsx("li",{children:"Access logic editor and deployment features"}),e.jsx("li",{children:"View dashboard analytics"}),e.jsx("li",{children:"Use shadow runtime and versioning"})]})]})]})}),e.jsxs("button",{onClick:()=>w(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-colors font-medium shadow-lg",children:[e.jsx(Wr,{size:20}),"Activate License Now"]})]})}),J&&Y&&e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Yo,{size:20,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Current Project"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Active project workspace"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Project Name"}),e.jsx("div",{className:"font-medium text-lg text-gray-900 dark:text-white",children:Y.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Last Opened"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(Y.last_opened).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Project ID"}),e.jsx("div",{className:"font-mono text-sm text-gray-600 dark:text-gray-400",children:Y.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Projects"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:z.length})]})]}),Y.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Description"}),e.jsx("div",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:Y.description})]})]})}),J&&e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Zt,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Workspace Presets"}),e.jsx("p",{className:"text-gray-600",children:"Configure your default workspace settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Project"}),x&&n?e.jsx("input",{type:"text",value:n.workspacePresets.defaultProject,onChange:H=>Vt("defaultProject",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter default project name"}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-gray-900 dark:text-gray-100",children:s.workspacePresets.defaultProject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Theme Preference"}),x&&n?e.jsxs("select",{value:n.workspacePresets.theme,onChange:H=>{const Ae=H.target.value;Vt("theme",Ae),O(Ae)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-gray-900 dark:text-gray-100 capitalize",children:s.workspacePresets.theme})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n?.workspacePresets.autoSave||!1,onChange:H=>Vt("autoSave",H.target.checked),disabled:!x,className:"w-4 h-4 text-[#FF6A00] border-gray-300 rounded focus:ring-[#FF6A00]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Auto Save"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Automatically save changes"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n?.workspacePresets.notifications||!1,onChange:H=>Vt("notifications",H.target.checked),disabled:!x,className:"w-4 h-4 text-[#FF6A00] border-gray-300 rounded focus:ring-[#FF6A00]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Notifications"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enable workspace notifications"})]})]})})]})]})}),e.jsx(Ye,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Account Status"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Your account is active and in good standing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.user?.is_active?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${s.user?.is_active?"text-green-600":"text-red-600"}`,children:s.user?.is_active?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Member since"}),e.jsx("div",{className:"font-medium",children:(()=>{if(!s.user?.created_at)return"Unknown";try{const H=new Date(s.user.created_at);return isNaN(H.getTime())?"Invalid Date":H.toLocaleDateString("en-US",{year:"numeric",month:"long"})}catch(H){return console.error("Error parsing created_at:",s.user.created_at,H),"Date Error"}})()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Last activity"}),e.jsx("div",{className:"font-medium",children:(()=>{if(!s.user?.last_activity)return"Unknown";try{const H=new Date((typeof s.user.last_activity=="number",s.user.last_activity));return isNaN(H.getTime())?"Invalid Date":H.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(H){return console.error("Error parsing last_activity:",s.user.last_activity,H),"Date Error"}})()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Profile completion"}),e.jsxs("div",{className:"font-medium text-green-600",children:[ye(),"%"]})]})]})]})}),v&&e.jsx(yt,{isOpen:v,onClose:()=>N(!1),title:"Teams Onboarding",size:"large",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-4 left-8 right-8 h-0.5 bg-gray-200 dark:bg-gray-600"}),e.jsx("div",{className:"absolute top-4 left-8 h-0.5 bg-[#FF6A00] transition-all duration-500 ease-in-out",style:{width:`${(E-1)/4*100}%`}}),e.jsx("div",{className:"relative flex items-center justify-between",children:[{step:1,title:"License",icon:""},{step:2,title:"Seats",icon:""},{step:3,title:"Security",icon:""},{step:4,title:"Roles",icon:""},{step:5,title:"Policies",icon:""}].map(({step:H,title:Ae,icon:Ve})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`relative flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 ${E>=H?"bg-[#FF6A00] border-[#FF6A00] text-white shadow-lg shadow-[#FF6A00]/30":E===H-1?"bg-white dark:bg-gray-800 border-[#FF6A00] text-[#FF6A00] animate-pulse":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500"}`,children:E>H?e.jsx(cl,{size:18,className:"text-white"}):e.jsx("span",{className:"text-lg",children:Ve})}),e.jsx("div",{className:`mt-2 text-xs font-medium transition-colors ${E>=H?"text-[#FF6A00]":"text-gray-500 dark:text-gray-400"}`,children:Ae})]},H))}),e.jsxs("div",{className:"absolute -top-8 right-0 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-xs font-medium",children:["Step ",E," of 5"]})]}),E===1&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"License Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your enterprise license key to activate collaborative features."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"License Key"}),e.jsx("input",{type:"text",value:$.license.key,onChange:H=>_(Ae=>({...Ae,license:{...Ae.license,key:H.target.value}})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#FF6A00] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"XXXXXX-XXXXXX-XXXXXX-XXXXXX"})]}),$.license.activated&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"License Activated Successfully!"}),e.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[e.jsxs("div",{children:["Company: ",e.jsx("strong",{children:$.license.companyName})]}),e.jsxs("div",{children:["Total Seats: ",e.jsx("strong",{children:$.license.totalSeats})]}),e.jsxs("div",{children:["Expires: ",e.jsx("strong",{children:$.license.expiration})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>{_(H=>({...H,license:{...H.license,activated:!0,companyName:"Pandaura Industrial",totalSeats:20,expiration:"Dec 8, 2026",isValid:!0},seats:{...H.seats,total:20,remaining:20}})),M(2)},disabled:!$.license.key,className:"flex items-center gap-2 px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg shadow-[#FF6A00]/25",children:[e.jsx("span",{className:"text-lg",children:""}),"Activate License"]})})]}),E===2&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Seat Registry Setup"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure team seats and assign users to your workspace."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:$.seats.total}),e.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Seats"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:$.seats.assigned.length}),e.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Assigned Seats"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:$.seats.remaining}),e.jsx("div",{className:"text-sm text-orange-800 dark:text-orange-300",children:"Remaining"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-b border-gray-200 dark:border-gray-600",children:e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Add New Seat"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email or Username"}),e.jsx("input",{type:"text",placeholder:"user@example.com or username",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#FF6A00]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#FF6A00]",children:[e.jsx("option",{value:"Viewer",children:"Viewer"}),e.jsx("option",{value:"Editor",children:"Editor"}),e.jsx("option",{value:"Approver",children:"Approver"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Add Seat"}),e.jsx("button",{onClick:()=>{_(H=>({...H,seats:{...H.seats,assigned:[{id:1,username:s?.user?.username||"current-user",role:"Admin",status:"validated"}],remaining:H.seats.total-1,currentUserAssigned:!0}}))},disabled:$.seats.currentUserAssigned,className:"px-4 py-2 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] disabled:opacity-50 transition-colors text-sm font-medium",children:$.seats.currentUserAssigned?" Added Me":"Add Me"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-b border-gray-200 dark:border-gray-600",children:e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Assigned Seats"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[!$.seats.currentUserAssigned&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s?.user?.username}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current OS User"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded-full text-xs font-medium",children:"Admin"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-xs font-medium",children:"Pending"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto-detected"})})]}),$.seats.assigned.map(H=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:H.username}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:H.username===(s?.user?.username||"current-user")?"Current User":"External User"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H.role==="Admin"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":H.role==="Approver"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":H.role==="Editor"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:H.role})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 w-fit ${H.status==="validated"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":H.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:[H.status==="validated"&&e.jsx(cl,{size:12}),H.status==="pending"&&e.jsx("span",{children:""}),H.status==="failed"&&e.jsx(pt,{size:12}),H.status.charAt(0).toUpperCase()+H.status.slice(1)]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[H.status==="pending"&&e.jsx("button",{onClick:()=>{_(Ae=>({...Ae,seats:{...Ae.seats,assigned:Ae.seats.assigned.map(Ve=>Ve.id===H.id?{...Ve,status:"validated"}:Ve)}}))},className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 transition-colors",children:"Validate"}),e.jsx("button",{onClick:()=>{_(Ae=>({...Ae,seats:{...Ae.seats,assigned:Ae.seats.assigned.filter(Ve=>Ve.id!==H.id),remaining:Ae.seats.remaining+1,currentUserAssigned:H.username===(s?.user?.username||"current-user")?!1:Ae.seats.currentUserAssigned}}))},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 transition-colors",children:"Remove"})]})})]},H.id)),$.seats.assigned.length===0&&!$.seats.currentUserAssigned&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No seats assigned yet. Add your first seat above."})})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(1),className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 font-medium",children:[e.jsx("span",{className:"text-lg",children:""}),"Back"]}),e.jsxs("button",{onClick:()=>M(3),disabled:!$.seats.currentUserAssigned,className:"flex items-center gap-2 px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] disabled:opacity-50 transition-all duration-200 font-medium shadow-lg shadow-[#FF6A00]/25",children:[e.jsx("span",{className:"text-lg",children:""}),"Continue to Security"]})]})]}),E===3&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Device Certification + TPM"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Secure your device with TPM-based authentication and certificate generation."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Device Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Device Name:"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[s?.device.hardwareInfo.platform," Workstation"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"OS User:"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s?.user?.username})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"TPM KeyPair"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Generate secure cryptographic keys using TPM"})]}),e.jsx("div",{className:"flex items-center gap-3",children:$.device.tpmKeyPair?e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium text-sm",children:""}):e.jsx("button",{onClick:()=>_(H=>({...H,device:{...H.device,tpmKeyPair:!0}})),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Generate TPM Keys"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Device Cert"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Issue device certificate automatically after TPM"})]}),e.jsx("div",{className:"flex items-center gap-3",children:$.device.deviceCert?e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium text-sm",children:""}):e.jsx("button",{onClick:()=>_(H=>({...H,device:{...H.device,deviceCert:!0,deviceFingerprint:!0}})),disabled:!$.device.tpmKeyPair,className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700 disabled:opacity-50 transition-colors",children:"Issue Device Certificate"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Device Fingerprint"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unique device identifier generated"})]}),e.jsx("div",{className:"flex items-center gap-3",children:$.device.deviceFingerprint?e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium text-sm",children:""}):e.jsx("span",{className:"text-red-500 font-medium text-sm",children:""})})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(2),className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 font-medium",children:[e.jsx("span",{className:"text-lg",children:""}),"Back"]}),e.jsxs("button",{onClick:()=>{_(H=>({...H,device:{...H.device,certified:!0},roles:{...H.roles,osUsers:[s?.user?.username||"current-user"],mappings:{[s?.user?.username||"current-user"]:"Admin"}}})),M(4)},disabled:!$.device.deviceCert,className:"flex items-center gap-2 px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] disabled:opacity-50 transition-all duration-200 font-medium shadow-lg shadow-[#FF6A00]/25",children:[e.jsx("span",{className:"text-lg",children:""}),"Continue to Roles"]})]})]}),E===4&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"OS-user  Role Mapping"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure user roles and permissions for your team workspace."})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Role Descriptions:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Viewer:"})," Read-only access"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Editor:"})," Edit logic and configurations"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Approver:"})," Approve deployments and changes"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," Manage seats and security settings"]})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-b border-gray-200 dark:border-gray-600",children:e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"User Role Assignments"})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:$.roles.osUsers.map((H,Ae)=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:H}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto-detected OS user"})]}),e.jsx("select",{value:$.roles.mappings[H]||"Viewer",onChange:Ve=>_(Ze=>({...Ze,roles:{...Ze.roles,mappings:{...Ze.roles.mappings,[H]:Ve.target.value}}})),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:$.roles.availableRoles.map(Ve=>e.jsx("option",{value:Ve,children:Ve},Ve))})]},Ae))})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(3),className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 font-medium",children:[e.jsx("span",{className:"text-lg",children:""}),"Back"]}),e.jsxs("button",{onClick:()=>M(5),className:"flex items-center gap-2 px-6 py-3 bg-[#FF6A00] text-white rounded-lg hover:bg-[#E55A00] transition-all duration-200 font-medium shadow-lg shadow-[#FF6A00]/25",children:[e.jsx("span",{className:"text-lg",children:""}),"Continue to Policies"]})]})]}),E===5&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Approval Policy Setup"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure approval workflows for enterprise safety and compliance."})]}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:$.approvalPolicy.enabled,onChange:H=>_(Ae=>({...Ae,approvalPolicy:{...Ae.approvalPolicy,enabled:H.target.checked}})),className:"w-4 h-4 text-[#FF6A00] rounded focus:ring-[#FF6A00]"}),e.jsx("label",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Enable Approval Workflow (Recommended for Enterprise)"})]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 ml-7",children:"Require approvals for critical operations to ensure safety and compliance."})]}),$.approvalPolicy.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Number of Approvers"}),e.jsxs("select",{value:$.approvalPolicy.minApprovers,onChange:H=>_(Ae=>({...Ae,approvalPolicy:{...Ae.approvalPolicy,minApprovers:parseInt(H.target.value)}})),className:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:1,children:"1"}),e.jsx("option",{value:2,children:"2"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Approval Required For:"}),e.jsx("div",{className:"space-y-2",children:Object.entries($.approvalPolicy.rules).map(([H,Ae])=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ae,onChange:Ve=>_(Ze=>({...Ze,approvalPolicy:{...Ze.approvalPolicy,rules:{...Ze.approvalPolicy.rules,[H]:Ve.target.checked}}})),className:"w-4 h-4 text-[#FF6A00] rounded focus:ring-[#FF6A00]"}),e.jsx("label",{className:"text-sm text-gray-900 dark:text-white capitalize",children:H.replace(/([A-Z])/g," $1").toLowerCase()})]},H))})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(4),className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 font-medium",children:[e.jsx("span",{className:"text-lg",children:""}),"Back"]}),e.jsxs("button",{onClick:()=>{N(!1),M(1),s&&a({...s,profileType:"Team"}),n&&i({...n,profileType:"Team"})},className:"flex items-center gap-3 px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 font-semibold shadow-lg shadow-green-500/25",children:[e.jsx(cl,{size:18}),e.jsx("span",{children:""}),"Complete Setup"]})]})]})]})}),e.jsx(Th,{isOpen:L,onSelectType:Ge,onClose:()=>w(!1)}),e.jsx(Eh,{isOpen:T,onClose:At}),e.jsx(Pk,{isOpen:D,onBack:Qt,onClose:async()=>{C(!1),await K()}}),e.jsx(zk,{isOpen:S,onBack:Qt,onClose:async()=>{k(!1),await K()},onAdminSetupComplete:()=>{k(!1),ie(!0)}}),e.jsx(ok,{isOpen:P,onComplete:Pt}),e.jsx(zO,{isOpen:U,onClose:()=>Q(!1)}),e.jsx($O,{isOpen:Z,onClose:()=>ie(!1)})]})};function UO(){const s=Pd(y=>y.activeRoute),a=Pd(y=>y.setActiveRoute),{hasValidLicense:n,checkLicenseStatus:i}=ma(),[c,d]=p.useState(null),[u,h]=p.useState(!0);p.useEffect(()=>{(async()=>{try{console.log(" Initializing app..."),console.log(" Getting session token (will initialize device if needed)..."),await Ct.getSessionToken(),console.log(" Checking license status..."),await i(),console.log(" App initialization complete")}catch(b){console.error(" Error during app initialization:",b)}finally{h(!1)}})()},[i]),p.useEffect(()=>{!u&&!n&&a("profile")},[u,n,a]);const x=y=>{d(y)},f=()=>{d("type-selection")};return p.useEffect(()=>{n&&c&&d(null)},[n,c]),u?e.jsx(nv,{children:e.jsx("div",{className:"h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin mx-auto mb-4",style:{borderColor:"var(--accent-color)",borderTopColor:"transparent"}}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg font-medium",children:"Loading Application..."}),e.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-2",children:"Validating device session"})]})})}):e.jsxs(nv,{children:[e.jsx(qE,{children:n?e.jsxs(e.Fragment,{children:[s==="dashboard"&&e.jsx(KE,{}),s==="projects"&&e.jsx(RO,{}),s==="shadow"&&e.jsx(ZR,{}),s==="tags"&&e.jsx(nD,{}),s==="logic"&&e.jsx(CO,{}),s==="deploy"&&e.jsx(AO,{}),s==="versioning"&&e.jsx(EO,{}),s==="settings"&&e.jsx(Ev,{}),s==="profile"&&e.jsx(Rv,{})]}):e.jsxs(e.Fragment,{children:[s==="dashboard"&&e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl text-gray-300 dark:text-gray-600 mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Dashboard Locked"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Activate your license to view dashboard analytics."})]})}),s==="projects"&&e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl text-gray-300 dark:text-gray-600 mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Projects Restricted"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"License required to create or access projects."})]})}),(s==="shadow"||s==="tags"||s==="logic"||s==="deploy"||s==="versioning")&&e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl text-gray-300 dark:text-gray-600 mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Premium Feature"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"This feature requires an active license to access."})]})}),s==="settings"&&e.jsx(Ev,{}),s==="profile"&&e.jsx(Rv,{})]})}),e.jsx(Th,{isOpen:c==="type-selection",onSelectType:x}),e.jsx(Eh,{isOpen:c==="solo",onClose:()=>{}}),e.jsx(Pk,{isOpen:c==="teams",onBack:f}),e.jsx(zk,{isOpen:c==="enterprise",onBack:f})]})}Iw.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(UO,{})}));
